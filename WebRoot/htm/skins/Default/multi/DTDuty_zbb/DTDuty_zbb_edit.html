<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=gbk" />
  <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
  <title>{$TABLEKEYWORD1}-{$TABLEKEYWORD2}</title>
  <LINK href="/css/Tooltip.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/main/basi.css" />
     <link href="/css/navMenu/navMenu.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" type="text/css" href="css/form/form_table/form_table3.css" />
  
  <script language="javascript" type="text/javascript" src="js/My97DatePicker/WdatePicker.js"></script>
  <script src="/js/ajax1.js"></script>
  <script src="/js/ajaxCheckUnique.js"></script>
  <SCRIPT src="/js/checkout.js"></SCRIPT>
  <SCRIPT src="/js/checkout_subTable.js"></SCRIPT>
  <script src="/js/ajaxAutoInfo.js"></script>
  <script src="/js/ajaxGetOptions.js"></script>
  <script src="/js/jQuery.js"></script>
  <script src="/js/expandJs/jQuery.setAvg-min.js"></script>
  <script src="/js/mainSub.js"></script>
  <script src="/js/ajaxMod.js"></script>
  <script src="/js/map.js"></script>
  <SCRIPT src="/js/superValidator.js" type="text/javascript"></SCRIPT>
  
   
</head>


 <script type="text/javascript">

 var unit_id_optstr='';
//添加条件行 
function AddRow(maxLength){ 
	
	//UNIT=UNIT.replace('selected','')
	
	var map=new Map();
	//填写日期
	map.put("tDate",'<input   onclick=\"WdatePicker()\" type=\"text\" value="" id="tDate#no#"  name=\"tDate#no#\" value=\"\" />');

	//主值班
	map.put("zzb",'<input   type=\"text\" id="zzb#no#"  name=\"zzb#no#\" value=\"\" />');	
	//副值班（矿领导）
	map.put("kldfzb",'<input     type=\"text\" id="kldfzb#no#" name=\"kldfzb#no#\" value=\"\" />');	

	//副值班（科室人员）
	map.put("ksfzb",'<textarea   type=\"text\"  name=\"ksfzb#no#\" rows="2" cols="50" value=\"\" /></textarea>');	
	                 	

	//操作<a  href=\"javascript:AddRow_MR()\">添加</a><br/><a href=\"javascript:DelCurrentRow(#no#);\">删除</a>
	map.put("operate",'<div style =\'width:60%;margin:0 auto\'><li><a href="#" onclick="AddRow_MR();"><span><img src="images/index/listAdd.gif"  class="f_l"/></span><span class="f_l">添加 &nbsp;</span></a></li>   <li><a href="#" onclick="DelCurrentRow(#no#);"><span><img src="images/index/listDel.gif"  class="f_l"/></span><span class="f_l">删除</span></a></li></div>'); 

		
	for(var i=1;i<=maxLength;i++){  
		AddRow_sys(map);
	}
	map.clear();
} 





function AddRow_MR(){
	
	AddRow(1);
	$("#procedure_in_month"+sys_j).setAvg({setId:"avg_procedure_in_day"+sys_j});
	
	var alls = "procedure_in_month"+sys_j;
	var avgs = "avg_procedure_in_day"+sys_j;
	$("#shijitianshu").setAvg({setId:alls,pjIds:avgs});
	
	$("td[id^=COMPANY_td]").css('display','none')
}




</script>


<form name="form1" action="/genericmultableservlet?action=saveEditRecord" method="post">
<input type="hidden" name="tableName" value="{mulId}">

<input type="hidden" name="recordId" value="{recordId}">
<input type="hidden" name="CDNO" value="{CDNO}">
<input type="hidden" name="ITNO" value="{ITNO}">

<input type="hidden" name="listUrl" value="{listUrl}">
<input type="hidden" name="$TABLEKEYWORD" value="{$TABLEKEYWORD}">
<input type="hidden" name="curPage" value="{curPage}">
<input type="hidden" name="mulId" value="{mulId}">
<input type="hidden" id="actorCount" name="actorCount" value="{actorCount}">
<input type="hidden" name="flag" value="{flag}">


<input type="hidden" name="realFileName" value="{realFileName}">


<input type="hidden" name="main_id" value="{main_id}">
   <input type="hidden" name="field.validateValue" value="yearAndMonth|年月|TXT|100|1|yn|">	
   <input type="hidden" name="field.validateValue" value="Company|单位|TXT|100|1|yn|">

   <input type="hidden" name="field.validateValue" value="fDate|发布日期|DAT|100|1|yn|">
   <input type="hidden" name="field.validateValue" value="ReBranch|发布部门|TXT|100|1|yn|">

   <input type="hidden" name="field.validateValue_sub" value="zzb|主值班|TXT|100|1|yn|">
   <input type="hidden" name="field.validateValue_sub" value="tDate|填写日期|TXT|100|1|yn|">
   <input type="hidden" name="field.validateValue_sub" value="kldfzb|副值班(矿领导)|TXT|100|1|yn|">
   <input type="hidden" name="field.validateValue_sub" value="ksfzb|副值班(科室人员)|TXT|100|1|yn|">




<div id="top">
   <div class="haer"><span id="tans"><strong>{$TABLEKEYWORD1} </strong></span></div>
   <div class="bottom">&nbsp;&nbsp;  {$TABLEKEYWORD2} &gt; 修改页面</div>
     <div style = "clear:both;"></div>
<div class='toolbar'>
<table width="100%" class="tabtap" style="border-collapse:collapse;" cellspacing="0" cellpadding="0">
  <tbody>

  <tr>
  
     <td class="tad"><img src="images/form/mi.GIF">&nbsp;年月&nbsp;:</td>
    <td> <input name="yearAndMonth" type="text" value="{yearAndMonth}" class="input_txt"  onClick="WdatePicker({dateFmt:'yyyy年MM月'})"  readonly/></td>
         <td class="tad"><img src="images/form/mi.GIF">&nbsp;单位&nbsp;:</td>
    <td> <input name="Company" type="text" value="{Company}" id ="Company" class="input_txt" readonly/></td>
  </tr>
  <tr>
      <td class="tad"><img src="images/form/mi.GIF">&nbsp;发布日期&nbsp;:</td>
	    <td> <input name="fDate" type="text" value="{fDate}" class="input_txt" onClick="WdatePicker({maxDate:'%y-%M-%d'})" readonly/></td>
      <td class="tad"><img src="images/form/mi.GIF">&nbsp;发布部门&nbsp;:</td>
        <td> <input name="ReBranch" type="text" value="{ReBranch}" class="input_txt" readonly/></td>
  </tr>
  <tr>
     <td class="tad">&nbsp;备注&nbsp;:</td>
      <td  colspan="3"><textarea name="remark" rows="5" value="{remark}" cols="110"/>{remark}</textarea>&nbsp;</td>

  </tr>



  
  </tr>
</tbody></table>


</div>


  <div>
  <table border="0"width="100%" cellspacing="0" cellpadding="0" class="table_list"  id="actor_table">
    <thead>
    <tr  >
    	<th  align="center" >序号</th>
    	<th   align="center">填写日期</th>
	    <th   align="center" >主值班</th>
    	<th align="center"  >副值班(矿领导)</th>
		<th align="center" >副值班(科室人员)</th>
    	<th align="center" >操作</th>
    </tr>
    </thead>
    <tbody>
	{row}
	<script>
	//添加一行新数据获取option值
		var UNIT;
		if('{flag}'==1){
			UNIT='{UNIT}';
			
		}
		unit_id_optstr='{unit_id}';
	
		
		
		
		   //procedure_in_month,avg_procedure_in_day,target_procedure_in_month,leap_in_month,valid_leap_in_month,avg_leap_in_day,unit_id
		   </script>
		   
	<tr id="{flag}">
    <td id="xuhao{flag}" align="center">{flag}</td>
    <td align="center"><input  name = "tDate{flag}" value="{tDate} " onclick="WdatePicker()"/>
	<td align="center"><input    id="zzb{flag}" name="zzb{flag}" value="{zzb}"/></td>
	<td align="center"><input  " id="kldfzb{flag}" name="kldfzb{flag}" value="{kldfzb}"/></td>
	<td align="center"><textarea    name="ksfzb{flag}" id="ksfzb{flag}" rows="2" cols="50" value="{ksfzb}{flag}" />{ksfzb}</textarea></td>

	

    <td align="center"> <div style ="width:60%;margin:0 auto"><li><a href="#" onclick="AddRow_MR();"><span><img src="images/index/listAdd.gif"  class="f_l"/></span><span class="f_l">添加 &nbsp;</span></a></li>   <li><a href="#" onclick="DelCurrentRow(#no#);"><span><img src="images/index/listDel.gif"  class="f_l"/></span><span class="f_l">删除</span></a></li></div></td>
	
  </tr>
<script>


$("#procedure_in_month"+'{flag}').setAvg({setId:"avg_procedure_in_day"+'{flag}'});

var alls = "procedure_in_month"+'{flag}';

var avgs = "avg_procedure_in_day"+'{flag}';
$("#shijitianshu").setAvg({setId:alls,pjIds:avgs});



</script>
{row}
       
    </tbody>
  </table>
</div>
  <table width="98%">
    <tr>
      <td colspan="4" align="center">
        <input type="submit" value="保存" class="btn" onclick="return true;" />
        <input type="button" value="返回" class="btn m_l15" onclick="window.history.go(-1)"/>
      </td>
    </tr>
  </table>

</form>
</body>
</html>