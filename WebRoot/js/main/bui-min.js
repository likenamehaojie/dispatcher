this.seajs={_seajs:this.seajs};seajs.version="1.3.0";seajs._util={};seajs._config={debug:"%DEBUG%",preload:[]};(function(B){var E=Object.prototype.toString;var D=Array.prototype;B.isString=function(F){return E.call(F)==="[object String]"};B.isFunction=function(F){return E.call(F)==="[object Function]"};B.isRegExp=function(F){return E.call(F)==="[object RegExp]"};B.isObject=function(F){return F===Object(F)};B.isArray=Array.isArray||function(F){return E.call(F)==="[object Array]"};B.indexOf=D.indexOf?function(G,F){return G.indexOf(F)}:function(H,G){for(var F=0;F<H.length;F++){if(H[F]===G){return F}}return -1};var A=B.forEach=D.forEach?function(G,F){G.forEach(F)}:function(H,G){for(var F=0;F<H.length;F++){G(H[F],F,H)}};B.map=D.map?function(G,F){return G.map(F)}:function(H,F){var G=[];A(H,function(J,I,K){G.push(F(J,I,K))});return G};B.filter=D.filter?function(G,F){return G.filter(F)}:function(H,F){var G=[];A(H,function(J,I,K){if(F(J,I,K)){G.push(J)}});return G};var C=B.keys=Object.keys||function(F){var H=[];for(var G in F){if(F.hasOwnProperty(G)){H.push(G)}}return H};B.unique=function(G){var F={};A(G,function(H){F[H]=1});return C(F)};B.now=Date.now||function(){return new Date().getTime()}})(seajs._util);(function(A){A.log=function(){if(typeof console==="undefined"){return}var E=Array.prototype.slice.call(arguments);var B="log";var D=E[E.length-1];console[D]&&(B=E.pop());if(B==="log"&&!seajs.debug){return}if(console[B].apply){console[B].apply(console,E);return}var C=E.length;if(C===1){console[B](E[0])}else{if(C===2){console[B](E[0],E[1])}else{if(C===3){console[B](E[0],E[1],E[2])}else{console[B](E.join(" "))}}}}})(seajs._util);(function(L,A,I){var M=/.*(?=\/.*$)/;var G=/([^:\/])\/\/+/g;var Q=/\.(?:css|js)$/;var T=/^(.*?\w)(?:\/|$)/;function J(Y){var X=Y.match(M);return(X?X[0]:".")+"/"}function O(b){G.lastIndex=0;if(G.test(b)){b=b.replace(G,"$1/")}if(b.indexOf(".")===-1){return b}var Y=b.split("/");var a=[],Z;for(var X=0;X<Y.length;X++){Z=Y[X];if(Z===".."){if(a.length===0){throw new Error("The path is invalid: "+b)}a.pop()}else{if(Z!=="."){a.push(Z)}}}return a.join("/")}function P(Y){Y=O(Y);var X=Y.charAt(Y.length-1);if(X==="/"){return Y}if(X==="#"){Y=Y.slice(0,-1)}else{if(Y.indexOf("?")===-1&&!Q.test(Y)){Y+=".js"}}if(Y.indexOf(":80/")>0){Y=Y.replace(":80/","/")}return Y}function F(a){if(a.charAt(0)==="#"){return a.substring(1)}var Y=A.alias;if(Y&&E(a)){var X=a.split("/");var Z=X[0];if(Y.hasOwnProperty(Z)){X[0]=Y[Z];a=X.join("/")}}return a}var H={};function B(a){var Z=A.map||[];if(!Z.length){return a}var b=a;for(var Y=0;Y<Z.length;Y++){var X=Z[Y];if(L.isArray(X)&&X.length===2){var c=X[0];if(L.isString(c)&&b.indexOf(c)>-1||L.isRegExp(c)&&c.test(b)){b=b.replace(c,X[1])}}else{if(L.isFunction(X)){b=X(b)}}}if(!D(b)){b=O(J(K)+b)}if(b!==a){H[b]=a}return b}function V(X){return H[X]||X}function U(Z,Y){if(!Z){return""}Z=F(Z);Y||(Y=K);var X;if(D(Z)){X=Z}else{if(N(Z)){if(Z.indexOf("./")===0){Z=Z.substring(2)}X=J(Y)+Z}else{if(R(Z)){X=Y.match(T)[1]+Z}else{X=A.base+"/"+Z}}}return P(X)}function D(X){return X.indexOf("://")>0||X.indexOf("//")===0}function N(X){return X.indexOf("./")===0||X.indexOf("../")===0}function R(X){return X.charAt(0)==="/"&&X.charAt(1)!=="/"}function E(Y){var X=Y.charAt(0);return Y.indexOf("://")===-1&&X!=="."&&X!=="/"}function C(X){if(X.charAt(0)!=="/"){X="/"+X}return X}var W=I["location"];var K=W.protocol+"//"+W.host+C(W.pathname);if(K.indexOf("\\")>0){K=K.replace(/\\/g,"/")}L.dirname=J;L.realpath=O;L.normalize=P;L.parseAlias=F;L.parseMap=B;L.unParseMap=V;L.id2Uri=U;L.isAbsolute=D;L.isRoot=R;L.isTopLevel=E;L.pageUri=K})(seajs._util,seajs._config,this);(function(J,O){var K=document;var F=K.head||K.getElementsByTagName("head")[0]||K.documentElement;var B=F.getElementsByTagName("base")[0];var L=/\.css(?:\?|$)/i;var N=/loaded|complete|undefined/;var C;var I;J.fetch=function(T,R,V){var U=L.test(T);var X=document.createElement(U?"link":"script");if(V){var W=J.isFunction(V)?V(T):V;W&&(X.charset=W)}A(X,R||G);if(U){X.rel="stylesheet";X.href=T}else{X.async="async";X.src=T}C=X;B?F.insertBefore(X,B):F.appendChild(X);C=null};function A(T,R){if(T.nodeName==="SCRIPT"){E(T,R)}else{D(T,R)}}function E(T,R){T.onload=T.onerror=T.onreadystatechange=function(){if(N.test(T.readyState)){T.onload=T.onerror=T.onreadystatechange=null;if(T.parentNode&&!O.debug){F.removeChild(T)}T=undefined;R()}}}function D(T,R){if(H||M){J.log("Start poll to fetch css");setTimeout(function(){Q(T,R)},1)}else{T.onload=T.onerror=function(){T.onload=T.onerror=null;T=undefined;R()}}}function Q(T,R){var V;if(H){if(T["sheet"]){V=true}}else{if(T["sheet"]){try{if(T["sheet"].cssRules){V=true}}catch(U){if(U.name==="NS_ERROR_DOM_SECURITY_ERR"){V=true}}}}setTimeout(function(){if(V){R()}else{Q(T,R)}},1)}function G(){}J.getCurrentScript=function(){if(C){return C}if(I&&I.readyState==="interactive"){return I}var T=F.getElementsByTagName("script");for(var R=0;R<T.length;R++){var U=T[R];if(U.readyState==="interactive"){I=U;return U}}};J.getScriptAbsoluteSrc=function(R){return R.hasAttribute?R.src:R.getAttribute("src",4)};J.importStyle=function(T,U){if(U&&K.getElementById(U)){return}var R=K.createElement("style");U&&(R.id=U);F.appendChild(R);if(R.styleSheet){R.styleSheet.cssText=T}else{R.appendChild(K.createTextNode(T))}};var P=navigator.userAgent;var H=Number(P.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536;var M=P.indexOf("Firefox")>0&&!("onload" in document.createElement("link"))})(seajs._util,seajs._config,this);(function(B){var C=/(?:^|[^.$])\brequire\s*\(\s*(["'])([^"'\s\)]+)\1\s*\)/g;B.parseDependencies=function(E){var F=[],D;E=A(E);C.lastIndex=0;while((D=C.exec(E))){if(D[2]){F.push(D[2])}}return B.unique(F)};function A(D){return D.replace(/^\s*\/\*[\s\S]*?\*\/\s*$/mg,"").replace(/^\s*\/\/.*$/mg,"")}})(seajs._util);(function(M,O,A){var H={};var B={};var K=[];var C={"FETCHING":1,"FETCHED":2,"SAVED":3,"READY":4,"COMPILING":5,"COMPILED":6};function X(b,c){this.uri=b;this.status=c||0}X.prototype._use=function(d,b){O.isString(d)&&(d=[d]);var c=E(d,this.uri);this._load(c,function(){N(function(){var e=O.map(c,function(f){return f?H[f]._compile():null});if(b){b.apply(null,e)}})})};X.prototype._load=function(b,h){var c=O.filter(b,function(i){return i&&(!H[i]||H[i].status<C.READY)});var d=c.length;if(d===0){h();return}var f=d;for(var e=0;e<d;e++){(function(j){var i=H[j]||(H[j]=new X(j,C.FETCHING));i.status>=C.FETCHED?k():P(j,k);function k(){i=H[j];if(i.status>=C.SAVED){var l=Q(i);if(l.length){X.prototype._load(l,function(){g(i)})}else{g(i)}}else{g()}}})(c[e])}function g(i){(i||{}).status<C.READY&&(i.status=C.READY);--f===0&&h()}};X.prototype._compile=function(){var c=this;if(c.status===C.COMPILED){return c.exports}if(c.status<C.SAVED&&!a(c)){return null}c.status=C.COMPILING;function b(g){var f=E(g,c.uri);var e=H[f];if(!e){return null}if(e.status===C.COMPILING){return e.exports}e.parent=c;return e._compile()}b.async=function(f,e){c._use(f,e)};b.resolve=function(e){return E(e,c.uri)};b.cache=H;c.require=b;c.exports={};var d=c.factory;if(O.isFunction(d)){K.push(c);D(d,c);K.pop()}else{if(d!==undefined){c.exports=d}}c.status=C.COMPILED;W(c);return c.exports};X._define=function(g,i,e){var k=arguments.length;if(k===1){e=g;g=undefined}else{if(k===2){e=i;i=undefined;if(O.isArray(g)){i=g;g=undefined}}}if(!O.isArray(i)&&O.isFunction(e)){i=O.parseDependencies(e.toString())}var c={id:g,dependencies:i,factory:e};var d;if(document.attachEvent){var b=O.getCurrentScript();if(b){d=O.unParseMap(O.getScriptAbsoluteSrc(b))}if(!d){O.log("Failed to derive URI from interactive script for:",e.toString(),"warn")}}var h=g?E(g):d;if(h){if(h===d){var f=H[d];if(f&&f.realUri&&f.status===C.SAVED){H[d]=null}}var j=X._save(h,c);if(d){if((H[d]||{}).status===C.FETCHING){H[d]=j;j.realUri=d}}else{R||(R=j)}}else{T=c}};X._getCompilingModule=function(){return K[K.length-1]};X._find=function(c){var b=[];O.forEach(O.keys(H),function(e){if(O.isString(c)&&e.indexOf(c)>-1||O.isRegExp(c)&&c.test(e)){var d=H[e];d.exports&&b.push(d.exports)}});return b};X._modify=function(e,d){var c=E(e);var b=H[c];if(b&&b.status===C.COMPILED){D(d,b)}else{B[c]||(B[c]=[]);B[c].push(d)}return M};X.STATUS=C;X._resolve=O.id2Uri;X._fetch=O.fetch;X._save=U;var V={};var L={};var Y={};var T=null;var R=null;var J=[];function E(b,c){if(O.isString(b)){return X._resolve(b,c)}return O.map(b,function(d){return E(d,c)})}function P(c,b){var d=O.parseMap(c);if(L[d]){H[c]=H[d];b();return}if(V[d]){Y[d].push(b);return}V[d]=true;Y[d]=[b];X._fetch(d,function(){L[d]=true;var f=H[c];if(f.status===C.FETCHING){f.status=C.FETCHED}if(T){X._save(c,T);T=null}if(R&&f.status===C.FETCHED){H[c]=R;R.realUri=c}R=null;if(V[d]){delete V[d]}var e=Y[d];if(e){delete Y[d];O.forEach(e,function(g){g()})}},A.charset)}function U(c,d){var b=H[c]||(H[c]=new X(c));if(b.status<C.SAVED){b.id=d.id||c;b.dependencies=E(O.filter(d.dependencies||[],function(e){return !!e}),c);b.factory=d.factory;b.status=C.SAVED}return b}function D(b,c){var d=b(c.require,c.exports,c);if(d!==undefined){c.exports=d}}function a(b){return !!B[b.realUri||b.uri]}function W(d){var c=d.realUri||d.uri;var b=B[c];if(b){O.forEach(b,function(e){D(e,d)});delete B[c]}}function Q(c){var b=c.uri;return O.filter(c.dependencies,function(e){J=[b];var d=G(H[e]);if(d){J.push(b);F(J)}return !d})}function G(d){if(!d||d.status!==C.SAVED){return false}J.push(d.uri);var c=d.dependencies;if(c.length){if(I(c,J)){return true}for(var b=0;b<c.length;b++){if(G(H[c[b]])){return true}}}J.pop();return false}function F(c,b){O.log("Found circular dependencies:",c.join(" --> "),b)}function I(c,d){var b=c.concat(d);return b.length>O.unique(b).length}function N(b){var c=A.preload.slice();A.preload=[];c.length?Z._use(c,b):b()}var Z=new X(O.pageUri,C.COMPILED);M.use=function(c,b){N(function(){Z._use(c,b)});return M};M.define=X._define;M.cache=X.cache=H;M.find=X._find;M.modify=X._modify;X.fetchedList=L;M.pluginSDK={Module:X,util:O,config:A}})(seajs,seajs._util,seajs._config);(function(I,J,A){var H="seajs-ts=";var G=H+J.now();var E=document.getElementById("seajsnode");if(!E){var D=document.getElementsByTagName("script");E=D[D.length-1]}var M=(E&&J.getScriptAbsoluteSrc(E))||J.pageUri;var B=J.dirname(L(M));J.loaderDir=B;var C=B.match(/^(.+\/)seajs\/[\.\d]+(?:-dev)?\/$/);if(C){B=C[1]}A.base=B;A.main=E&&E.getAttribute("data-main");A.charset="utf-8";I.config=function(R){for(var Q in R){if(!R.hasOwnProperty(Q)){continue}var U=A[Q];var P=R[Q];if(U&&Q==="alias"){for(var O in P){if(P.hasOwnProperty(O)){var T=U[O];var N=P[O];if(/^\d+\.\d+\.\d+$/.test(N)){N=O+"/"+N+"/"+O}F(T,N,O);U[O]=N}}}else{if(U&&(Q==="map"||Q==="preload")){if(J.isString(P)){P=[P]}J.forEach(P,function(W){if(W){U.push(W)}})}else{A[Q]=P}}}var V=A.base;if(V&&!J.isAbsolute(V)){A.base=J.id2Uri((J.isRoot(V)?"":"./")+V+"/")}if(A.debug===2){A.debug=1;I.config({map:[[/^.*$/,function(W){if(W.indexOf(H)===-1){W+=(W.indexOf("?")===-1?"?":"&")+G}return W}]]})}K();return this};function K(){if(A.debug){I.debug=!!A.debug}}K();function L(P){if(P.indexOf("??")===-1){return P}var N=P.split("??");var O=N[0];var Q=J.filter(N[1].split(","),function(R){return R.indexOf("sea.js")!==-1});return O+Q[0]}function F(P,O,N){if(P&&P!==O){J.log("The alias config is conflicted:","key =",'"'+N+'"',"previous =",'"'+P+'"',"current =",'"'+O+'"',"warn")}}})(seajs,seajs._util,seajs._config);(function(A,B,D){A.log=B.log;A.importStyle=B.importStyle;A.config({alias:{seajs:B.loaderDir}});B.forEach(C(),function(E){A.use("seajs/plugin-"+E);if(E==="debug"){A._use=A.use;A._useArgs=[];A.use=function(){A._useArgs.push(arguments);return A}}});function C(){var F=[];var E=D.location.search;E=E.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");E+=" "+document.cookie;E.replace(/seajs-(\w+)=[1-9]/g,function(G,H){F.push(H)});return B.unique(F)}})(seajs,seajs._util,this);(function(A,B,C){var D=A._seajs;if(D&&!D["args"]){C.seajs=A._seajs;return}C.define=A.define;B.main&&A.use(B.main);(function(G){if(G){var F={0:"config",1:"use",2:"define"};for(var E=0;E<G.length;E+=2){A[F[G[E]]].apply(A,G[E+1])}}})((D||0)["args"]);C.define.cmd={};delete A.define;delete A._util;delete A._config;delete A._seajs})(seajs,seajs._config,this);var loaderPath=seajs.pluginSDK.util.loaderDir;seajs.config({map:[[".js","-min.js"]],alias:{"bui":loaderPath},charset:"utf-8"});var BUI=BUI||{};BUI.use=seajs.use;BUI.config=seajs.config;BUI.setDebug=function(A){BUI.debug=A;if(A){seajs.config({map:[["-min.js",".js"]]})}else{seajs.config({map:[[".js","-min.js"]]})}};define("bui/common",["bui/ua","bui/json","bui/date","bui/array","bui/keycode","bui/observable","bui/observable","bui/base","bui/component"],function(A){var B=A("bui/util");B.mix(B,{UA:A("bui/ua"),JSON:A("bui/json"),Date:A("bui/date"),Array:A("bui/array"),KeyCode:A("bui/keycode"),Observable:A("bui/observable"),Base:A("bui/base"),Component:A("bui/component")});return B});var BUI=BUI||{};define("bui/util",function(){(function(I){if(I.fn){I.fn.on=I.fn.on||I.fn.bind;I.fn.off=I.fn.off||I.fn.unbind}})(jQuery);var H=window,G=document,A=Object.prototype,F=A.toString,D="ATTRS",E="PARSER",C="guid";$.extend(BUI,{version:1,subVersion:2,isFunction:function(I){return typeof(I)==="function"},isArray:("isArray" in Array)?Array.isArray:function(I){return F.call(I)==="[object Array]"},isDate:function(I){return F.call(I)==="[object Date]"},isObject:(F.call(null)==="[object Object]")?function(I){return I!==null&&I!==undefined&&F.call(I)==="[object Object]"&&I.ownerDocument===undefined}:function(I){return F.call(I)==="[object Object]"},augment:function(I,K){if(!BUI.isFunction(I)){return I}for(var J=1;J<arguments.length;J++){BUI.mix(I.prototype,arguments[J].prototype||arguments[J])}return I},cloneObject:function(I){var J=BUI.isArray(I)?[]:{};return BUI.mix(true,J,I)},error:function(I){if(BUI.debug){throw I}},extend:function(K,N,M,J){if(!BUI.isFunction(N)){M=N;N=K;K=function(){}}var L=Object.create?function(O,P){return Object.create(O,{constructor:{value:P}})}:function(Q,R){function O(){}O.prototype=Q;var P=new O();P.constructor=R;return P};var I=L(N.prototype,K);K.prototype=BUI.mix(I,K.prototype);K.superclass=L(N.prototype,N);BUI.mix(I,M);BUI.mix(K,J);return K},guid:(function(){var I={};return function(J){J=J||BUI.prefix+C;if(!I[J]){I[J]=1}else{I[J]+=1}return J+I[J]}})(),isString:function(I){return typeof I==="string"},isNumber:function(I){return typeof I==="number"},log:function(I){if(BUI.debug&&H.console&&H.console.log){H.console.log(I)}},merge:function(){var I=$.makeArray(arguments);I.unshift({});return BUI.mix.apply(null,I)},mix:function(){return $.extend.apply(null,arguments)},app:function(I){if(!window[I]){window[I]={namespace:function(J){return BUI.namespace(J,window[I])}}}return window[I]},mixin:function(M,I,J){J=J||[D,E];var K=I;if(K){M.mixins=K;var L={},O=K["concat"](M);BUI.each(O,function(P){if(P){BUI.each(J,function(Q){if(P[Q]){L[Q]=L[Q]||{};BUI.mix(true,L[Q],P[Q])}})}});BUI.each(L,function(P,Q){M[Q]=P});var N={};BUI.each(O,function(P){if(P){var R=P.prototype;for(var Q in R){if(R.hasOwnProperty(Q)){N[Q]=R[Q]}}}});BUI.each(N,function(P,Q){M.prototype[Q]=P})}return M},namespace:function(J,M){M=M||BUI;if(!J){return M}var K=J.split("."),N=M;for(var I=0;I<K.length;I++){var L=K[I];if(!N[L]){N[L]={}}N=N[L]}return N},prefix:"bui-",substitute:function(K,J,I){if(!BUI.isString(K)||(!BUI.isObject(J))&&!BUI.isArray(J)){return K}return K.replace(I||/\\?\{([^{}]+)\}/g,function(L,M){if(L.charAt(0)==="\\"){return L.slice(1)}return(J[M]===undefined)?"":J[M]})},ucfirst:function(I){I+="";return I.charAt(0).toUpperCase()+I.substring(1)},isInView:function(I){var J=I.left,M=I.top,L=BUI.viewportWidth(),N=BUI.viewportHeight(),K=BUI.scrollTop(),O=BUI.scrollLeft();if(J<O||J>O+L){return false}if(M<K||M>K+N){return false}return true},isInVerticalView:function(J){var K=BUI.viewportHeight(),I=BUI.scrollTop();if(J<I||J>I+K){return false}return true},isInHorizontalView:function(I){var J=BUI.viewportWidth(),K=BUI.scrollLeft();if(I<K||I>K+J){return false}return true},viewportWidth:function(){return $(window).width()},viewportHeight:function(){return $(window).height()},scrollLeft:function(){return $(window).scrollLeft()},scrollTop:function(){return $(window).scrollTop()},docWidth:function(){var I=document.documentElement||document.body;return $(I).width()},docHeight:function(){var I=document.documentElement||document.body;return $(I).height()},each:function(J,I){if(!J){return}$.each(J,function(L,K){return I(K,L)})},wrapBehavior:function(J,I){return J["__bui_wrap_"+I]=function(K){if(!J.get("disabled")){J[I](K)}}},getWrapBehavior:function(J,I){return J["__bui_wrap_"+I]}});var B=BUI.FormHelper={serializeToObject:function(J){var I=$(J).serializeArray(),K={};BUI.each(I,function(L){var M=L.name;if(!K[M]){K[M]=L.value}else{if(!BUI.isArray(K[M])){K[M]=[K[M]]}K[M].push(L.value)}});return K},setFields:function(J,I){for(var K in I){if(I.hasOwnProperty(K)){BUI.FormHelper.setField(J,K,I[K])}}},clear:function(I){var J=$.makeArray(I.elements);BUI.each(J,function(K){if(K.type==="checkbox"||K.type==="radio"){$(K).attr("checked",false)}else{$(K).val("")}$(K).change()})},setField:function(J,K,I){var L=J.elements[K];if(BUI.isArray(L)){BUI.each(L,function(M){if(M.type==="checkbox"){if(M.value===I||BUI.Array.indexOf(M.value,I)!==-1){$(M).attr("checked",true)}}else{if(M.type==="radio"&&M.value===I){$(M).attr("checked",true)}else{$(M).val(I)}}})}else{$(L).val(I)}},getField:function(I,J){return BUI.FormHelper.serializeToObject(I)[J]}};return BUI});define("bui/array",["bui/util"],function(A){var B=A("bui/util");B.Array={peek:function(C){return C[C.length-1]},indexOf:function(F,C,D){var G=D==null?0:(D<0?Math.max(0,C.length+D):D);for(var E=G;E<C.length;E++){if(E in C&&C[E]===F){return E}}return -1},contains:function(D,C){return B.Array.indexOf(D,C)>=0},each:B.each,equals:function(C,E){if(C==E){return true}if(!C||!E){return false}if(C.length!=E.length){return false}var F=true;for(var D=0;D<C.length;D++){if(C[D]!==E[D]){F=false;break}}return F},filter:function(C,D){var E=[];B.Array.each(C,function(G,F){if(D(G,F)){E.push(G)}});return E},map:function(C,D){var E=[];B.Array.each(C,function(G,F){E.push(D(G,F))});return E},find:function(C,D){var E=B.Array.findIndex(C,D);return E<0?null:C[E]},findIndex:function(C,D){var E=-1;B.Array.each(C,function(G,F){if(D(G,F)){E=F;return false}});return E},isEmpty:function(C){return C.length==0},add:function(C,D){C.push(D)},addAt:function(C,E,D){B.Array.splice(C,D,0,E)},empty:function(C){if(!(C instanceof (Array))){for(var D=C.length-1;D>=0;D--){delete C[D]}}C.length=0},remove:function(C,E){var D=B.Array.indexOf(E,C);var F;if((F=D>=0)){B.Array.removeAt(C,D)}return F},removeAt:function(C,D){return B.Array.splice(C,D,1).length==1},slice:function(C,E,D){if(arguments.length<=2){return Array.prototype.slice.call(C,E)}else{return Array.prototype.slice.call(C,E,D)}},splice:function(E,C,F,D){return Array.prototype.splice.apply(E,B.Array.slice(arguments,1))}};return B.Array});define("bui/observable",["bui/util"],function(A){var D=A("bui/util");var C=function(){this._init()};D.augment(C,{_functions:null,_init:function(){var F=this;F._functions=[]},add:function(F){this._functions.push(F)},remove:function(F){var G=this._functions;index=D.Array.indexOf(F,G);if(index>=0){G.splice(index,1)}},empty:function(){var F=this._functions.length;this._functions.splice(0,F)},fireWith:function(H,I){var F=this,G;D.each(F._functions,function(J){G=J.apply(H,I);if(G===false){return false}});return G}});function E(){return new C()}var B=function(F){this._events=[];this._eventMap={};this._bubblesEvents=[];this._initEvents(F)};D.augment(B,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(G){var F=this,H=F._eventMap;return H[G]},_initEvents:function(G){var F=this,I=null;if(!G){return}I=G.listeners||{};if(G.handler){I.click=G.handler}if(I){for(var H in I){if(I.hasOwnProperty(H)){F.on(H,I[H])}}}},_isBubbles:function(F){return D.Array.indexOf(F,this._bubblesEvents)>=0},addTarget:function(F){this._bubbleTarget=F},addEvents:function(H){var F=this,J=F._events,G=F._eventMap;function I(K){if(D.Array.indexOf(K,J)===-1){G[K]=E();J.push(K)}}if(D.isArray(H)){$.each(H,function(L,K){I(K)})}else{I(H)}},clearListeners:function(){var F=this,H=F._eventMap;for(var G in H){if(H.hasOwnProperty(G)){H[G].empty()}}},fire:function(G,L){var F=this,I=F._getCallbacks(G),K=$.makeArray(arguments),H;if(!L){L={};K.push(L)}if(!L.target){L.target=F}if(I){H=I.fireWith(F,Array.prototype.slice.call(K,1))}if(F._isBubbles(G)){var J=F._bubbleTarget;if(J&&J.fire){J.fire(G,L)}}return H},on:function(G,H){var I=G.split(" "),F=this,J=null;if(I.length>1){D.each(I,function(K){F.on(K,H)})}else{J=F._getCallbacks(G);if(J){J.add(H)}else{F.addEvents(G);F.on(G,H)}}return F},off:function(G,H){if(!G&&!H){this.clearListeners();return this}var F=this,I=F._getCallbacks(G);if(I){I.remove(H)}return F},publish:function(G,I){var F=this,J=F._bubblesEvents;if(I.bubbles){if(D.Array.indexOf(G,J)===-1){J.push(G)}}else{var H=D.Array.indexOf(G,J);if(H!==-1){J.splice(H,1)}}}});return B});define("bui/ua",function(){function B(C){var D=0;return parseFloat(C.replace(/\./g,function(){return(D++===0)?".":""}))}var A=$.UA||(function(){var C=$.browser,D=B(C.version),E={ie:C.msie&&D,webkit:C.webkit&&D,opera:C.opera&&D,mozilla:C.mozilla&&D};return E})();return A});define("bui/json",["bui/ua"],function(D){var I=window,A=D("bui/ua"),K=I.JSON;if(!K||A["ie"]<9){K=I.JSON={}}function L(O){return O<10?"0"+O:O}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(O){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+L(this.getUTCMonth()+1)+"-"+L(this.getUTCDate())+"T"+L(this.getUTCHours())+":"+L(this.getUTCMinutes())+":"+L(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(O){return this.valueOf()}}var F=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,N=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,M,G,C={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},H;function B(O){N["lastIndex"]=0;return N.test(O)?'"'+O.replace(N,function(Q){var P=C[Q];return typeof P==="string"?P:"\\u"+("0000"+Q.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+O+'"'}function J(V,W){var R,P,O,X,T=M,U,Q=W[V];if(Q&&typeof Q==="object"&&typeof Q.toJSON==="function"){Q=Q.toJSON(V)}if(typeof H==="function"){Q=H.call(W,V,Q)}switch(typeof Q){case"string":return B(Q);case"number":return isFinite(Q)?String(Q):"null";case"boolean":case"null":return String(Q);case"object":if(!Q){return"null"}M+=G;U=[];if(Object.prototype.toString.apply(Q)==="[object Array]"){X=Q.length;for(R=0;R<X;R+=1){U[R]=J(R,Q)||"null"}O=U.length===0?"[]":M?"[\n"+M+U.join(",\n"+M)+"\n"+T+"]":"["+U.join(",")+"]";M=T;return O}if(H&&typeof H==="object"){X=H.length;for(R=0;R<X;R+=1){P=H[R];if(typeof P==="string"){O=J(P,Q);if(O){U.push(B(P)+(M?": ":":")+O)}}}}else{for(P in Q){if(Object.hasOwnProperty.call(Q,P)){O=J(P,Q);if(O){U.push(B(P)+(M?": ":":")+O)}}}}O=U.length===0?"{}":M?"{\n"+M+U.join(",\n"+M)+"\n"+T+"}":"{"+U.join(",")+"}";M=T;return O}}if(typeof K.stringify!=="function"){K.stringify=function(R,P,Q){var O;M="";G="";if(typeof Q==="number"){for(O=0;O<Q;O+=1){G+=" "}}else{if(typeof Q==="string"){G=Q}}H=P;if(P&&typeof P!=="function"&&(typeof P!=="object"||typeof P.length!=="number")){throw new Error("JSON.stringify")}return J("",{"":R})}}function E(P){try{return new Function("return "+P+";")()}catch(O){throw"Json parse error!"}}var K={parse:$.parseJSON,looseParse:E,stringify:K.stringify};return K});define("bui/keycode",function(){var A={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};return A});define("bui/date",function(){var A=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function E(I,F){var H=null;F=F||"-";if(!(H instanceof Date)){if(BUI.isString(I)){H=new Date(I.replace(/-/g,"/"))}else{H=new Date(I)}}else{return H}if(H instanceof Date&&(H!="Invalid Date")&&!isNaN(H)){return H}else{var G=I.toString().split(F);if(G.length==3){H=new Date(G[0],(parseInt(G[1],10)-1),G[2]);if(H instanceof Date&&(H!="Invalid Date")&&!isNaN(H)){return H}}}return null}function D(I,H,G){var F=new Date(G);if(isNaN(F)){F=new Date()}switch(I){case"s":F=new Date(F.getTime()+(1000*parseInt(H)));break;case"n":F=new Date(F.getTime()+(60000*parseInt(H)));break;case"h":F=new Date(F.getTime()+(3600000*parseInt(H)));break;case"d":F=new Date(F.getTime()+(86400000*parseInt(H)));break;case"w":F=new Date(F.getTime()+((86400000*7)*parseInt(H)));break;case"m":F=new Date(F.getFullYear(),(F.getMonth())+parseInt(H),F.getDate(),F.getHours(),F.getMinutes(),F.getSeconds());break;case"y":F=new Date(F.getFullYear()+parseInt(H),F.getMonth(),F.getDate(),F.getHours(),F.getMinutes(),F.getSeconds());break}return F}var C=function(){var F=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,G=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,H=/[^-+\dA-Z]/g,K=function(M,L){M=String(M);L=L||2;while(M.length<L){M="0"+M}return M},J={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},I={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(R,b,W){if(arguments.length===1&&Object.prototype.toString.call(R)==="[object String]"&&!/\d/.test(R)){b=R;R=undefined}R=R?new Date(R):new Date();if(isNaN(R)){throw SyntaxError("invalid date")}b=String(J[b]||b||J["default"]);if(b.slice(0,4)==="UTC:"){b=b.slice(4);W=true}var U=W?"getUTC":"get",O=R[U+"Date"](),V=R[U+"Day"](),X=R[U+"Month"](),Z=R[U+"FullYear"](),N=R[U+"Hours"](),T=R[U+"Minutes"](),P=R[U+"Seconds"](),Q=R[U+"Milliseconds"](),Y=W?0:R.getTimezoneOffset(),a={d:O,dd:K(O,undefined),ddd:I.dayNames[V],dddd:I.dayNames[V+7],w:I.dayNames[V+14],m:X+1,mm:K(X+1,undefined),mmm:I.monthNames[X],mmmm:I.monthNames[X+12],yy:String(Z).slice(2),yyyy:Z,h:N%12||12,hh:K(N%12||12,undefined),H:N,HH:K(N,undefined),M:T,MM:K(T,undefined),s:P,ss:K(P,undefined),l:K(Q,3),L:K(Q>99?Math.round(Q/10):Q,undefined),t:N<12?"a":"p",tt:N<12?"am":"pm",T:N<12?"A":"P",TT:N<12?"AM":"PM",Z:W?"UTC":(String(R).match(G)||[""]).pop().replace(H,""),o:(Y>0?"-":"+")+K(Math.floor(Math.abs(Y)/60)*100+Math.abs(Y)%60,4),S:["th","st","nd","rd"][O%10>3?0:(O%100-O%10!==10)*O%10]};return b.replace(F,function(L){return L in a?a[L]:L.slice(1,L.length-1)})}}();var B={add:function(H,F,G){return D(H,F,G)},addHour:function(F,G){return D("h",F,G)},addMinute:function(F,G){return D("n",F,G)},addSecond:function(F,G){return D("s",F,G)},addDay:function(F,G){return D("d",F,G)},addWeek:function(G,F){return D("w",G,F)},addMonths:function(G,F){return D("m",G,F)},addYear:function(G,F){return D("y",G,F)},isDateEquals:function(F,G){return F.getFullYear()===G.getFullYear()&&F.getMonth()===G.getMonth()&&F.getDate()===G.getDate()},isEquals:function(F,G){if(F==G){return true}if(!F||!G){return false}if(!F.getTime||!G.getTime){return false}return F.getTime()==G.getTime()},isDateString:function(F){return A.test(F)},format:function(G,H,F){return C(G,H,F)},parse:function(G,F){return E(G,F)},today:function(){var F=new Date();return new Date(F.getFullYear(),F.getMonth(),F.getDate())},getDate:function(F){return new Date(F.getFullYear(),F.getMonth(),F.getDate())}};return B});define("bui/base",["bui/observable"],function(D){var G={},F=D("bui/observable");function A(I,K,J){var L=I[K]||{};if(J){I[K]=L}return L}function B(I,J){if(BUI.isString(J)){return I[J]}return J}function E(K,L,M,N,J){var I=M;return K.fire(L+BUI.ucfirst(M)+"Change",{attrName:I,prevVal:N,newVal:J})}function C(O,I,M,N,J){N=N||{};var P,L,K;K=O.get(I);if(!$.isPlainObject(M)&&!BUI.isArray(M)&&K===M){return undefined}if(!N["silent"]){if(false===E(O,"before",I,K,M)){return false}}P=O._set(I,M,N);if(P===false){return P}if(!N["silent"]){M=O.getAttrVals()[I];E(O,"after",I,K,M)}return O}var H=function(K){var I=this,L=I.constructor,M=[];F.apply(this,arguments);while(L){M.push(L);L=L.superclass?L.superclass.constructor:null}for(var J=M.length-1;J>=0;J--){I.addAttrs(M[J]["ATTRS"],true)}I._initAttrs(K)};H.INVALID=G;BUI.extend(H,F);BUI.augment(H,{addAttr:function(K,N,I){var J=this,L=J.getAttrs(),M=BUI.cloneObject(N);if(!L[K]){L[K]=M}else{if(I){BUI.mix(true,L[K],M)}}return J},addAttrs:function(L,J,K){var I=this;if(!L){return I}if(typeof(J)==="boolean"){K=J;J=null}BUI.each(L,function(N,M){I.addAttr(M,N,K)});if(J){I.set(J)}return I},hasAttr:function(I){return I&&this.getAttrs().hasOwnProperty(I)},getAttrs:function(){return A(this,"__attrs",true)},getAttrVals:function(){return A(this,"__attrVals",true)},get:function(L){var I=this,O=I.hasAttr(L),K=I.getAttrVals(),N,M,J;N=A(I.getAttrs(),L);M=N["getter"];J=L in K?K[L]:I._getDefAttrVal(L);if(M&&(M=B(I,M))){J=M.call(I,J,L)}return J},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(J){var I=this;if(I.hasAttr(J)){delete I.getAttrs()[J];delete I.getAttrVals()[J]}return I},set:function(L,M,J){var I=this;if($.isPlainObject(L)){J=M;var N=Object(L),K=[];for(L in N){if(N.hasOwnProperty(L)){C(I,L,N[L],J)}}return I}return C(I,L,M,J)},setInternal:function(J,K,I){return this._set(J,K,I)},_getDefAttrVal:function(K){var I=this,J=I.getAttrs(),N=A(J,K),L=N.valueFn,M;if(L&&(L=B(I,L))){M=L.call(I);if(M!==undefined){N.value=M}delete N.valueFn;J[K]=N}return N.value},_set:function(M,N,J){var I=this,K,O=A(I.getAttrs(),M,true),L=O["setter"];if(L&&(L=B(I,L))){K=L.call(I,N,M)}if(K===G){return false}if(K!==undefined){N=K}I.getAttrVals()[M]=N},_initAttrs:function(J){var I=this;if(J){for(var K in J){if(J.hasOwnProperty(K)){I._set(K,J[K])}}}}});return H});define("bui/component",["bui/component/manage","bui/component/uibase","bui/component/view","bui/component/controller"],function(B){var C={};BUI.mix(C,{Manager:B("bui/component/manage"),UIBase:B("bui/component/uibase"),View:B("bui/component/view"),Controller:B("bui/component/controller")});function A(F,D){var G,E;if(F&&(E=F.xclass)){if(D&&!F.prefixCls){F.prefixCls=D.get("prefixCls")}G=C.Manager.getConstructorByXClass(E);if(!G){BUI.error("can not find class by xclass desc : "+E)}F=new G(F)}return F}C.create=A;return C});define("bui/component/manage",function(C){var B={};function H(L){var N=L.split(/\s+/),K=-1,O,I=null;for(var J=0;J<N.length;J++){var M=B[N[J]];if(M&&(O=M.priority)>K){K=O;I=M.constructor}}return I}function D(J){for(var K in B){var I=B[K];if(I.constructor==J){return K}}return 0}function G(I,J){if(BUI.isFunction(J)){B[I]={constructor:J,priority:0}}else{J.priority=J.priority||0;B[I]=J}}function F(J){var K=$.trim(J).split(/\s+/);for(var I=0;I<K.length;I++){if(K[I]){K[I]=this.get("prefixCls")+K[I]}}return K.join(" ")}var A={};var E={__instances:A,addComponent:function(J,I){A[J]=I},removeComponent:function(I){delete A[I]},getComponent:function(I){return A[I]},getCssClassWithPrefix:F,getXClassByConstructor:D,getConstructorByXClass:H,setConstructorByXClass:G};return E});(function(){var A="bui/component/uibase/";define("bui/component/uibase",[A+"base",A+"align",A+"autoshow",A+"autohide",A+"close",A+"collapseable",A+"drag",A+"keynav",A+"list",A+"listitem",A+"mask",A+"position",A+"selection",A+"stdmod",A+"decorate",A+"tpl",A+"childcfg",A+"bindable",A+"depends"],function(B){var C=B(A+"base");BUI.mix(C,{Align:B(A+"align"),AutoShow:B(A+"autoshow"),AutoHide:B(A+"autohide"),Close:B(A+"close"),Collapseable:B(A+"collapseable"),Drag:B(A+"drag"),KeyNav:B(A+"keynav"),List:B(A+"list"),ListItem:B(A+"listitem"),Mask:B(A+"mask"),Position:B(A+"position"),Selection:B(A+"selection"),StdMod:B(A+"stdmod"),Decorate:B(A+"decorate"),Tpl:B(A+"tpl"),ChildCfg:B(A+"childcfg"),Bindable:B(A+"bindable"),Depends:B(A+"depends")});BUI.mix(C,{CloseView:C.Close.View,CollapseableView:C.Collapseable.View,ChildList:C.List.ChildList,ListItemView:C.ListItem.View,MaskView:C.Mask.View,PositionView:C.Position.View,StdModView:C.StdMod.View,TplView:C.Tpl.View});return C})})();define("bui/component/uibase/base",["bui/component/manage"],function(I){var L=I("bui/component/manage"),O="_uiSet",F="ATTRS",C=BUI.ucfirst,M=$.noop,P=I("bui/base");function H(Q,R){D(Q,"initializer","constructor")}function D(a,Q,V){var R=a.constructor,Z=[],X,Y,T,U;while(R){U=[];if(T=R.mixins){for(var W=0;W<T.length;W++){X=T[W];if(X){if(V!="constructor"){if(X.prototype.hasOwnProperty(V)){X=X.prototype[V]}else{X=null}}X&&U.push(X)}}}if(R.prototype.hasOwnProperty(Q)&&(Y=R.prototype[Q])){U.push(Y)}if(U.length){Z.push.apply(Z,U.reverse())}R=R.superclass&&R.superclass.constructor}for(W=Z.length-1;W>=0;W--){Z[W]&&Z[W].call(a)}}function K(T){var V=T.constructor,U,Q,R;while(V){if(V.prototype.hasOwnProperty("destructor")){V.prototype.destructor.apply(T)}if((U=V.mixins)){for(R=U.length-1;R>=0;R--){Q=U[R]&&U[R].prototype.__destructor;Q&&Q.apply(T)}}V=V.superclass&&V.superclass.constructor}}function E(Q){if(!Q){return}BUI.each(Q,function(T,R){if(BUI.isFunction(T)){Q[R]=new T()}})}function A(R,T,Q){if(!T){return}BUI.each(T,function(V,U){if(V[Q]){V[Q](R)}})}function B(Q){var R=Q.getAttrs(),U,T;for(U in R){if(R.hasOwnProperty(U)){T=O+C(U);if(Q[T]){(function(W,V){Q.on("after"+C(W)+"Change",function(X){if(X.target===Q){Q[V](X.newVal,X)}})})(U,T)}}}}function N(Q){var T,W,R=Q.getAttrs();for(var V in R){if(R.hasOwnProperty(V)){var U=O+C(V);if((W=Q[U])&&R[V].sync!==false&&(T=Q.get(V))!==undefined){W.call(Q,T)}}}}var J=function(Q){var V=this,W;P.apply(V,arguments);V.setInternal("userConfig",Q);H(V,Q);var R,U,Y=V.get("plugins"),X=V.get("listeners");E(Y);var T=V.get("xclass");if(T){V.__xclass=T}A(V,Y,"initializer");Q&&Q.autoRender&&V.render()};J.ATTRS={userConfig:{},autoRender:{value:false},listeners:{value:{}},plugins:{value:[]},rendered:{value:false},xclass:{valueFn:function(){return L.getXClassByConstructor(this.constructor)}}};BUI.extend(J,P);BUI.augment(J,{create:function(){var Q=this;if(!Q.get("created")){Q.fire("beforeCreateDom");D(Q,"createDom","__createDom");Q._set("created",true);Q.fire("afterCreateDom");A(Q,Q.get("plugins"),"createDom")}return Q},render:function(){var Q=this;if(!Q.get("rendered")){var R=Q.get("plugins");Q.create(undefined);Q.fire("beforeRenderUI");D(Q,"renderUI","__renderUI");Q.fire("afterRenderUI");A(Q,R,"renderUI");Q.fire("beforeBindUI");B(Q);D(Q,"bindUI","__bindUI");Q.fire("afterBindUI");A(Q,R,"bindUI");Q.fire("beforeSyncUI");N(Q);D(Q,"syncUI","__syncUI");Q.fire("afterSyncUI");A(Q,R,"syncUI");Q._set("rendered",true)}return Q},createDom:M,renderUI:M,bindUI:M,syncUI:M,destroy:function(){var Q=this;Q.fire("beforeDestroy");A(Q,Q.get("plugins"),"destructor");K(Q);Q.fire("afterDestroy");Q.off();Q.clearAttrVals();Q.destroyed=true;return Q}});BUI.mix(J,{define:function(V,T,R,Q){if($.isPlainObject(T)){Q=R;R=T;T=[]}function U(){J.apply(this,arguments)}BUI.extend(U,V,R,Q);BUI.mixin(U,T);return U},extend:function G(V,U,T){var X=$.makeArray(arguments),W,Q=X[X.length-1];X.unshift(this);if(Q.xclass){X.pop();X.push(Q.xclass)}W=J.define.apply(J,X);if(Q.xclass){var R=Q.priority||(this.priority?(this.priority+1):1);L.setConstructorByXClass(Q.xclass,{constructor:W,priority:R});W.__xclass=Q.xclass;W.priority=R;W.toString=function(){return Q.xclass}}W.extend=G;return W}});return J});define("bui/component/uibase/align",["bui/ua"],function(F){var B=F("bui/ua"),K="x-align-",L=window;function I(V){var W=V.ownerDocument,T=W.body,R,Q=$(V).css("position"),U=Q=="fixed"||Q=="absolute";if(!U){return V.nodeName.toLowerCase()=="html"?null:V.parentNode}for(R=V.parentNode;R&&R!=T;R=R.parentNode){Q=$(R).css("position");if(Q!="static"){return R}}return null}function J(R){var U={left:0,right:Infinity,top:0,bottom:Infinity},Q,Z,Y,W,X=R.ownerDocument,a=X.body,V=X.documentElement;for(Q=R;Q=I(Q);){if((!B.ie||Q.clientWidth!=0)&&(Q!=a&&Q!=V&&$(Q).css("overflow")!="visible")){var T=$(Q).offset();T.left+=Q.clientLeft;T.top+=Q.clientTop;U.top=Math.max(U.top,T.top);U.right=Math.min(U.right,T.left+Q.clientWidth);U.bottom=Math.min(U.bottom,T.top+Q.clientHeight);U.left=Math.max(U.left,T.left)}}Z=$(L).scrollLeft();Y=$(L).scrollTop();U.left=Math.max(U.left,Z);U.top=Math.max(U.top,Y);W={width:BUI.viewportWidth(),height:BUI.viewportHeight()};U.right=Math.min(U.right,Z+W.width);U.bottom=Math.min(U.bottom,Y+W.height);return U.top>=0&&U.left>=0&&U.bottom>U.top&&U.right>U.left?U:null}function E(T,Q,Y,R){var U,V,W,X;U={left:T.left,top:T.top};W=D(Q,Y[0]);X=D(T,Y[1]);V=[X.left-W.left,X.top-W.top];return{left:U.left-V[0]+(+R[0]),top:U.top-V[1]+(+R[1])}}function N(Q,T,R){return Q.left<R.left||Q.left+T.width>R.right}function O(Q,T,R){return Q.top<R.top||Q.top+T.height>R.bottom}function M(R,W,V,U){var Q=BUI.cloneObject(R),T={width:W.width,height:W.height};if(U.adjustX&&Q.left<V.left){Q.left=V.left}if(U["resizeWidth"]&&Q.left>=V.left&&Q.left+T.width>V.right){T.width-=(Q.left+T.width)-V.right}if(U.adjustX&&Q.left+T.width>V.right){Q.left=Math.max(V.right-T.width,V.left)}if(U.adjustY&&Q.top<V.top){Q.top=V.top}if(U["resizeHeight"]&&Q.top>=V.top&&Q.top+T.height>V.bottom){T.height-=(Q.top+T.height)-V.bottom}if(U.adjustY&&Q.top+T.height>V.bottom){Q.top=Math.max(V.bottom-T.height,V.top)}return BUI.mix(Q,T)}function C(T,R,Q){var U=[];$.each(T,function(W,V){U.push(V.replace(R,function(X){return Q[X]}))});return U}function H(Q,R){Q[R]=-Q[R];return Q}function P(){}P.__getOffsetParent=I;P.__getVisibleRectForElement=J;P.ATTRS={align:{value:{}}};function A(T){var R,U,Q;if(T.length&&!$.isWindow(T[0])){R=T.offset();U=T.outerWidth();Q=T.outerHeight()}else{R={left:BUI.scrollLeft(),top:BUI.scrollTop()};U=BUI.viewportWidth();Q=BUI.viewportHeight()}R.width=U;R.height=Q;return R}function D(Z,T){var X=T.charAt(0),Q=T.charAt(1),R=Z.width,U=Z.height,W,Y;W=Z.left;Y=Z.top;if(X==="c"){Y+=U/2}else{if(X==="b"){Y+=U}}if(Q==="c"){W+=R/2}else{if(Q==="r"){W+=R}}return{left:W,top:Y}}function G(Q){var T=Q.attr("class"),R=new RegExp("s?"+K+"[a-z]{2}-[a-z]{2}","ig"),U=R.exec(T);if(U){Q.removeClass(U.join(" "))}}P.prototype={_uiSetAlign:function(T,U){var V="",Q,R;if(T&&T.points){this.align(T.node,T.points,T.offset,T.overflow);this.set("cachePosition",null);Q=this.get("el");G(Q);R=T.points.join("-");V=K+R;Q.addClass(V)}},align:function(Z,b,T,V){Z=$(Z||L);T=T&&[].concat(T)||[0,0];V=V||{};var X=this,Q=X.get("el"),Y=0,c=J(Q[0]),U=A(Q),R=A(Z),W=E(U,R,b,T),a=BUI.merge(U,W);if(c&&(V.adjustX||V.adjustY)){if(N(W,U,c)){Y=1;b=C(b,/[lr]/ig,{l:"r",r:"l"});T=H(T,0)}if(O(W,U,c)){Y=1;b=C(b,/[tb]/ig,{t:"b",b:"t"});T=H(T,1)}if(Y){W=E(U,R,b,T);BUI.mix(a,W)}var d={};d.adjustX=V.adjustX&&N(W,U,c);d.adjustY=V.adjustY&&O(W,U,c);if(d.adjustX||d.adjustY){a=M(W,U,c,d)}}if(a.left!=U.left){X.setInternal("x",null);X.get("view").setInternal("x",null);X.set("x",a.left)}if(a.top!=U.top){X.setInternal("y",null);X.get("view").setInternal("y",null);X.set("y",a.top)}if(a.width!=U.width){Q.width(Q.width()+a.width-U.width)}if(a.height!=U.height){Q.height(Q.height()+a.height-U.height)}return X},center:function(R){var Q=this;Q.set("align",{node:R,points:["cc","cc"],offset:[0,0]});return Q}};return P});define("bui/component/uibase/autoshow",function(){function A(){}A.ATTRS={trigger:{},delegateTigger:{value:false},autoAlign:{value:true},curTrigger:{},triggerCallback:{value:function(B){}},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{"triggerchange":false}}};A.prototype={__createDom:function(){this._setTrigger()},_setTrigger:function(){var G=this,J=G.get("triggerEvent"),H=G.get("triggerHideEvent"),F=G.get("triggerCallback"),B=G.get("trigger"),D=G.get("delegateTigger"),C=$(B);function I(N){var K=G.get("curTrigger"),M=D?$(N.currentTarget):$(this),L=G.get("align");if(!K||K[0]!=M[0]){G.set("curTrigger",M);G.fire("triggerchange",{prevTrigger:K,curTrigger:M})}if(G.get("autoAlign")){L.node=M}G.set("align",L);G.show();F&&F(N)}function E(L){var K=L.toElement||L.relatedTarget;if(!K||!G.containsElement(K)){G.hide()}}if(J){if(D&&BUI.isString(B)){$(document).delegate(B,J,I)}else{C.on(J,I)}}if(H){if(D&&BUI.isString(B)){$(document).delegate(B,H,E)}else{C.on(H,E)}}},__renderUI:function(){var B=this,C=B.get("align");if(C&&!C.node){C.node=B.get("render")||B.get("trigger")}}};return A});define("bui/component/uibase/autohide",function(){var D=BUI.wrapBehavior,B=BUI.getWrapBehavior;function C(E,F){var G=E.get("hideExceptNode");if(G&&G.length){return $.contains(G[0],F)}return false}function A(){}A.ATTRS={autoHideType:{value:"click"},autoHide:{value:false},hideExceptNode:{},events:{value:{autohide:false}}};A.prototype={__bindUI:function(){var E=this;E.on("afterVisibleChange",function(G){var F=G.newVal;if(E.get("autoHide")){if(F){E._bindHideEvent()}else{E._clearHideEvent()}}})},handleMoveOuter:function(G){var E=this,F=G.toElement||G.relatedTarget;if(!E.containsElement(F)&&!C(E,F)){if(E.fire("autohide")!==false){E.hide()}}},handleDocumentClick:function(G){var E=this,F=G.target;if(!E.containsElement(F)&&!C(E,F)){if(E.fire("autohide")!==false){E.hide()}}},_bindHideEvent:function(){var E=this,G=E.get("curTrigger"),F=E.get("autoHideType");if(F==="click"){$(document).on("mousedown",D(E,"handleDocumentClick"))}else{E.get("el").on("mouseleave",D(E,"handleMoveOuter"));if(G){$(G).on("mouseleave",D(E,"handleMoveOuter"))}}},_clearHideEvent:function(){var E=this,G=E.get("curTrigger"),F=E.get("autoHideType");if(F==="click"){$(document).off("mousedown",B(E,"handleDocumentClick"))}else{E.get("el").off("mouseleave",B(E,"handleMoveOuter"));if(G){$(G).off("mouseleave",B(E,"handleMoveOuter"))}}}};return A});define("bui/component/uibase/close",function(){var B=BUI.prefix+"ext-";function C(G){return $(G.get("closeTpl"))}function E(){}E.ATTRS={closeTpl:{value:'<a tabindex="0" href=\'javascript:void("\u5173\u95ed")\' role="button" class="'+B+'close"><span class="'+B+'close-x">\u5173\u95ed</span></a>'},closable:{value:true},closeBtn:{}};E.prototype={_uiSetClosable:function(H){var G=this,I=G.get("closeBtn");if(H){if(!I){G.setInternal("closeBtn",I=C(G))}I.appendTo(G.get("el"),undefined)}else{if(I){I.remove()}}}};function A(){}var F="hide";A.ATTRS={closeTpl:{view:true},closable:{view:1},closeBtn:{view:1},closeAction:{value:F}};var D={hide:F,destroy:"destroy"};A.prototype={_uiSetClosable:function(H){var G=this;if(H&&!G.__bindCloseEvent){G.__bindCloseEvent=1;G.get("closeBtn").on("click",function(I){if(G.fire("closeclick",{domTarget:I.target})!==false){G.close()}I.preventDefault()})}},__destructor:function(){var G=this.get("closeBtn");G&&G.detach()},close:function(){var H=this,G=D[H.get("closeAction")||F];if(H.fire("closing",{action:G})!==false){H[G]();H.fire("closed",{action:G})}}};A.View=E;return A});define("bui/component/uibase/drag",function(){var B=BUI.guid("drag");var A=function(){};A.ATTRS={dragNode:{},draging:{setter:function(E){if(E===true){return{}}},value:null},constraint:{},dragBackEl:{getter:function(){return $("#"+B)}}};var D='<div id="'+B+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';function C(){var E=$(D).css("opacity",0).prependTo("body");return E}A.prototype={__bindUI:function(){var E=this,I=E.get("constraint"),H=E.get("dragNode");if(!H){return}H.on("mousedown",function(L){if(L.which==1){L.preventDefault();E.set("draging",{elX:E.get("x"),elY:E.get("y"),startX:L.pageX,startY:L.pageY});G()}});function K(L){var M=E.get("draging");if(M){L.preventDefault();E._dragMoveTo(L.pageX,L.pageY,M,I)}}function J(L){if(L.which==1){E.set("draging",false);var M=E.get("dragBackEl");if(M){M.hide()}F()}}function G(){$(document).on("mousemove",K);$(document).on("mouseup",J)}function F(){$(document).off("mousemove",K);$(document).off("mouseup",J)}},_dragMoveTo:function(J,K,F,L){var I=this,G=I.get("dragBackEl"),F=F||I.get("draging"),E=F.startX-J,H=F.startY-K;if(!G.length){G=C()}G.css({cursor:"move",display:"block"});I.set("xy",[I._getConstrainX(F.elX-E,L),I._getConstrainY(F.elY-H,L)])},_getConstrainX:function(H,J){var E=this,G=E.get("el").outerWidth(),F=H+G,K=E.get("x");if(J){var I=J.offset();if(I.left>=H){return I.left}if(I.left+J.width()<F){return I.left+J.width()-G}return H}if(BUI.isInHorizontalView(H)&&BUI.isInHorizontalView(F)){return H}return K},_getConstrainY:function(J,K){var E=this,F=E.get("el").outerHeight(),H=J+F,I=E.get("y");if(K){var G=K.offset();if(G.top>J){return G.top}if(G.top+K.height()<H){return G.top+K.height()-F}return J}if(BUI.isInVerticalView(J)&&BUI.isInVerticalView(H)){return J}return I}};return A});define("bui/component/uibase/keynav",["bui/keycode"],function(C){var B=C("bui/keycode"),E=BUI.wrapBehavior,D=BUI.getWrapBehavior;var A=function(){};A.ATTRS={allowKeyNav:{value:true},navEvent:{value:"keydown"},ignoreInputFields:{value:true}};A.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(H){var F=this,G=F.get("navEvent"),I=F.get("el");if(H){I.on(G,E(F,"_handleKeyDown"))}else{I.off(G,D(F,"_handleKeyDown"))}},_handleKeyDown:function(H){var F=this,G=H.which;switch(G){case B.UP:F.handleNavUp(H);break;case B.DOWN:F.handleNavDown(H);break;case B.RIGHT:F.handleNavRight(H);break;case B.LEFT:F.handleNavLeft(H);break;case B.ENTER:F.handleNavEnter(H);break;case B.ESC:F.handleNavEsc(H);break;case B.TAB:F.handleNavTab(H);break;default:break}},handleNavUp:function(F){},handleNavDown:function(F){},handleNavLeft:function(F){},handleNavRight:function(F){},handleNavEnter:function(F){},handleNavEsc:function(F){},handleNavTab:function(F){}};return A});define("bui/component/uibase/mask",function(E){var A=E("bui/ua"),D={},C=A.ie==6;function F(K){return K.get("prefixCls")+"ext-mask"}function J(){return C?BUI.docWidth()+"px":"100%"}function I(){return C?BUI.docHeight()+"px":"100%"}function B(K){var L=$('<div  style="width:'+J()+";left:0;top:0;height:"+I()+";position:"+(C?"absolute":"fixed")+';" class="'+K+'">'+(C?'<iframe style="position:absolute;left:0;top:0;background:white;width: expression(this.parentNode.offsetWidth);height: expression(this.parentNode.offsetHeight);filter:alpha(opacity=0);z-index:-1;"></iframe>':"")+"</div>").prependTo("body");L.on("mousedown",function(M){M.preventDefault()});return L}function H(){}H.ATTRS={maskShared:{value:true}};H.prototype={_maskExtShow:function(){var L=this,M,N=F(L),O=D[N],P=L.get("maskShared"),K=L.get("maskNode");if(!K){if(P){if(O){K=O.node}else{K=B(N);O=D[N]={num:0,node:K}}}else{K=B(N)}L.setInternal("maskNode",K)}if(M=L.get("zIndex")){K.css("z-index",M-1)}if(P){O.num++}if(!P||O.num==1){K.show()}},_maskExtHide:function(){var L=this,M=F(L),N=D[M],O=L.get("maskShared"),K=L.get("maskNode");if(O&&N){N.num=Math.max(N.num-1,0);if(N.num==0){K.hide()}}else{if(K){K.hide()}}},__destructor:function(){var K=this,M=K.get("maskShared"),L=K.get("maskNode");if(K.get("maskNode")){if(M){if(K.get("visible")){K._maskExtHide()}}else{L.remove()}}}};function G(){}G.ATTRS={mask:{value:false},maskNode:{view:1},maskShared:{view:1}};G.prototype={__bindUI:function(){var K=this,L=K.get("view"),N=L._maskExtShow,M=L._maskExtHide;if(K.get("mask")){K.on("show",function(){L._maskExtShow()});K.on("hide",function(){L._maskExtHide()})}}};G=G;G.View=H;return G});define("bui/component/uibase/position",function(){function B(){}B.ATTRS={x:{valueFn:function(){var C=this;return C.get("el")&&C.get("el").offset().left}},y:{valueFn:function(){var C=this;return C.get("el")&&C.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}};B.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(C){this.get("el").css("z-index",C)},_uiSetX:function(C){if(C!=null){this.get("el").offset({left:C})}},_uiSetY:function(C){if(C!=null){this.get("el").offset({top:C})}},_uiSetLeft:function(C){if(C!=null){this.get("el").css({left:C})}},_uiSetTop:function(C){if(C!=null){this.get("el").css({top:C})}}};function A(){}A.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(E){var D=this,C=$.makeArray(E);if(C.length){C[0]&&D.set("x",C[0]);C[1]&&D.set("y",C[1])}return E},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:true,value:true}};A.prototype={move:function(D,E){var C=this;if(BUI.isArray(D)){E=D[1];D=D[0]}C.set("xy",[D,E]);return C},_uiSetX:function(E){if(E!=null){var C=this,D=C.get("el");C.setInternal("left",D.position().left);if(E!=-999){this.set("cachePosition",null)}}},_uiSetY:function(E){if(E!=null){var C=this,D=C.get("el");C.setInternal("top",D.position().top);if(E!=-999){this.set("cachePosition",null)}}},_uiSetLeft:function(E){var C=this,D=C.get("el");if(E!=null){C.setInternal("x",D.offset().left)}},_uiSetTop:function(E){var C=this,D=C.get("el");if(E!=null){C.setInternal("y",D.offset().top)}}};A.View=B;return A});define("bui/component/uibase/listitem",function(){function B(){}B.ATTRS={selected:{}};B.prototype={_uiSetSelected:function(F){var C=this,E=C.getStatusCls("selected"),D=C.get("el");if(F){D.addClass(E)}else{D.removeClass(E)}}};function A(){}A.ATTRS={selectable:{value:true},selected:{view:true,sync:false,value:false}};A.prototype={};A.View=B;return A});define("bui/component/uibase/stdmod",function(){var B=BUI.prefix+"stdmod-";function C(){}C.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};C.PARSER={header:function(F){return F.one("."+B+"header")},body:function(F){return F.one("."+B+"body")},footer:function(F){return F.one("."+B+"footer")}};function A(G,H){var F=G.get("contentEl"),I=G.get(H);if(!I){I=$('<div class="'+B+H+'"  ></div>');I.appendTo(F);G.setInternal(H,I)}}function E(F,G,H){G=F.get(G);if(BUI.isString(H)){G.html(H)}else{G.html("").append(H)}}C.prototype={__createDom:function(){A(this,"header");A(this,"body");A(this,"footer")},_uiSetBodyStyle:function(F){this.get("body").css(F)},_uiSetHeaderStyle:function(F){this.get("header").css(F)},_uiSetFooterStyle:function(F){this.get("footer").css(F)},_uiSetBodyContent:function(F){E(this,"body",F)},_uiSetHeaderContent:function(F){E(this,"header",F)},_uiSetFooterContent:function(F){E(this,"footer",F)}};function D(){}D.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}};D.View=C;return D});define("bui/component/uibase/decorate",["bui/array","bui/json","bui/component/manage"],function(C){var I=C("bui/array"),K=C("bui/json"),G=BUI.prefix,J="data-";FIELD_CFG=J+"cfg",PARSER="PARSER",Manager=C("bui/component/manage"),regx=/^[\{\[]/;function D(O,P){if(P[O]){return true}var N=new RegExp("^"+J);if(O!==FIELD_CFG&&N.test(O)){return true}return false}function A(N){var P=[],O=N.constructor;while(O){P.push(O);O=O.superclass&&O.superclass.constructor}return P}function M(N){N=$.trim(N);if(regx.test(N)){N=K.looseParse(N)}return N}function B(N,P){var Q=N.userConfig||{};for(var O in P){if(!(O in Q)){N.setInternal(O,P[O])}}}function L(T,Q){var O=this,P,R,N=O.userConfig||{};for(P in Q){if(!(P in N)){R=Q[P];if(BUI.isFunction(R)){O.setInternal(P,R.call(O,T))}else{if(typeof R=="string"){O.setInternal(P,T.find(R))}else{if(BUI.isArray(R)&&R[0]){O.setInternal(P,T.find(R[0]))}}}}}}function H(N,R){var Q=N.constructor,P,O,T;T=A(N);for(P=T.length-1;P>=0;P--){Q=T[P];if(O=Q[PARSER]){L.call(N,R,O)}}}function F(O){var N=O,R=N.get("srcNode"),P,Q;if(R){R=$(R);N.setInternal("el",R);N.setInternal("srcNode",R);P=N.get("userConfig");Q=N.getDecorateConfig(R);B(O,Q);if(N.get("isDecorateChild")&&N.decorateInternal){N.decorateInternal(R)}H(O,R)}}function E(){F(this)}E.ATTRS={srcNode:{view:true},isDecorateChild:{value:false},decorateCfgFields:{value:{"id":true,"name":true,"value":true,"title":true}}};E.prototype={getDecorateConfig:function(N){if(!N.length){return null}var P=this,Q=N[0],O=Q.attributes,T=P.get("decorateCfgFields"),R={};BUI.each(O,function(X){var V=X.nodeName;try{if(V===FIELD_CFG){var W=M(X.nodeValue);BUI.mix(R,W)}else{if(D(V,T)){V=V.replace(J,"");R[V]=M(X.nodeValue)}}}catch(U){BUI.log("parse field error,the attribute is:"+V)}});return R},getDecorateElments:function(){var N=this,P=N.get("el"),O=N.get("contentContainer");if(O){return P.find(O).children()}else{return P.children()}},decorateInternal:function(N){var O=this;O.decorateChildren(N)},findXClassByNode:function(T,O){var N=this,P=T.attr("class")||"",Q=N.get("defaultChildClass");P=P.replace(new RegExp("\\b"+G,"ig"),"");var R=Manager.getConstructorByXClass(P)||Manager.getConstructorByXClass(Q);if(!R&&!O){BUI.log(T);BUI.error("can not find ui "+P+" from this markup")}return Manager.getXClassByConstructor(R)},decorateChildrenInternal:function(O,P){var N=this,Q=N.get("children");Q.push({xclass:O,srcNode:P})},decorateChildren:function(N){var O=this,P=O.getDecorateElments();BUI.each(P,function(R){var Q=O.findXClassByNode($(R));O.decorateChildrenInternal(Q,$(R))})}};return E});define("bui/component/uibase/tpl",function(){function B(){}B.ATTRS={tpl:{}};B.prototype={__renderUI:function(){var C=this,D=C.get("childContainer"),E;if(D){E=C.get("el").find(D);if(E.length){C.set("contentEl",E)}}},getTpl:function(D){var C=this,F=C.get("tpl"),E=C.get("tplRender");D=D||C.getAttrVals();if(E){return E(D)}if(F){return BUI.substitute(F,D)}return""},setTplContent:function(E){var C=this,D=C.get("el"),F=C.get("content"),G=C.getTpl(E);if(!F&&G){D.empty();D.html(G)}}};function A(){}A.ATTRS={tpl:{view:true,sync:false},tplRender:{view:true,value:null},childContainer:{view:true}};A.prototype={__renderUI:function(){if(!this.get("srcNode")){this.setTplContent()}},setTplContent:function(){var C=this,D=C.getAttrVals();C.get("view").setTplContent(D)},_uiSetTpl:function(){this.setTplContent()}};A.View=B;return A});define("bui/component/uibase/collapseable",function(){var B=function(){};B.ATTRS={collapsed:{}};B.prototype={_uiSetCollapsed:function(F){var C=this,E=C.getStatusCls("collapsed"),D=C.get("el");if(F){D.addClass(E)}else{D.removeClass(E)}}};var A=function(){};A.ATTRS={collapseable:{value:false},collapsed:{view:true,value:false},events:{value:{"expanded":true,"collapsed":true}}};A.prototype={_uiSetCollapsed:function(D){var C=this;if(D){C.fire("collapsed")}else{C.fire("expanded")}}};A.View=B;return A});define("bui/component/uibase/selection",function(){var A="single";var B=function(){};B.ATTRS={selectedEvent:{value:"click"},events:{value:{"selectedchange":false,"beforeselectedchange":false,"itemselected":false,"itemunselected":false}},idField:{value:"id"},multipleSelect:{value:false}};B.prototype={clearSelection:function(){var C=this,D=C.getSelection();BUI.each(D,function(E){C.clearSelected(E)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var C=this,E=C.get("idField"),D=C.getSelected();return C.getValueByField(D,E)},getSelectionValues:function(){var C=this,E=C.get("idField"),D=C.getSelection();return $.map(D,function(F){return C.getValueByField(F,E)})},getSelectionText:function(){var C=this,D=C.getSelection();return $.map(D,function(E){return C.getItemText(E)})},clearSelected:function(D){var C=this;D=D||C.getSelected();if(D){C.setItemSelected(D,false)}},getSelectedText:function(){var C=this,D=C.getSelected();return C.getItemText(D)},setSelection:function(D){var C=this;D=BUI.isArray(D)?D:[D];BUI.each(D,function(E){C.setSelected(E)})},setSelected:function(D){var C=this,F=C.get("multipleSelect");if(!F){var E=C.getSelected();if(D!=E){C.clearSelected(E)}}C.setItemSelected(D,true)},isItemSelected:function(C){},setItemSelected:function(E,F){var C=this,D;if(E){D=C.isItemSelected(E);if(D==F){return}}if(C.fire("beforeselectedchange")!==false){C.setItemSelectedStatus(E,F)}},setItemSelectedStatus:function(C,D){},setAllSelection:function(){},setSelectedByField:function(F,C){if(!C){C=F;F=this.get("idField")}var D=this,E=D.findItemByField(F,C);D.setSelected(E)},setSelectionByField:function(D,E){if(!E){E=D;D=this.get("idField")}var C=this;BUI.each(E,function(F){C.setSelectedByField(D,F)})},afterSelected:function(D,F,E){var C=this;if(F){C.fire("itemselected",{item:D,domTarget:E});C.fire("selectedchange",{item:D,domTarget:E,selected:F})}else{C.fire("itemunselected",{item:D,domTarget:E});if(C.get("multipleSelect")){C.fire("selectedchange",{item:D,domTarget:E,selected:F})}}}};return B});define("bui/component/uibase/list",["bui/component/uibase/selection"],function(C){var B=C("bui/component/uibase/selection");var E=function(){};E.ATTRS={items:{view:true},idField:{value:"id"},itemTpl:{view:true},itemTplRender:{view:true},itemStatusCls:{view:true,value:{}},events:{value:{"itemclick":true}}};E.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(H,I){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(H){return this.getItems()[H]||null},getItem:function(I){var H=this.get("idField");return this.findItemByField(H,I)},indexOfItem:function(H){return BUI.Array.indexOf(H,this.getItems())},addItems:function(I){var H=this;BUI.each(I,function(J){H.addItem(J)})},addItemsAt:function(I,J){var H=this;BUI.each(I,function(K,L){H.addItemAt(K,J+L)})},updateItem:function(H){},addItem:function(H){return this.addItemAt(H,this.getItemCount())},addItemAt:function(H,I){},findItemByField:function(I,H){},getItemText:function(H){},clearItems:function(){var H=this,I=H.getItems();I.splice(0);H.clearControl()},removeItem:function(H){},removeItems:function(I){var H=this;BUI.each(I,function(J){H.removeItem(J)})},removeItemAt:function(H){this.removeItem(this.getItemAt(H))},clearControl:function(){}};function F(H){if(H.selected){H.selected=false}if(H.set){H.set("selected",false)}}function D(H,K){var M=K.isController?K.getAttrVals():K,I=H.get("itemTpl"),N=H.get("itemStatusCls"),J=H.get("itemTplRender");if(I&&!M.tpl){A(K,"tpl",I)}if(J&&!M.tplRender){A(K,"tplRender",J)}if(N){var L=M.statusCls||K.isController?K.get("statusCls"):{};BUI.each(N,function(O,P){if(O&&!L[P]){L[P]=O}});A(K,"statusCls",L)}}function A(H,I,J){if(H.isController){H.set(I,J)}else{H[I]=J}}var G=function(){this.__init()};G.ATTRS=BUI.merge(true,E.ATTRS,B.ATTRS,{items:{sync:false},autoInitItems:{value:true},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}});BUI.augment(G,E,B,{__init:function(){var H=this,I=H.get("items");if(I&&H.get("autoInitItems")){H.addItems(I)}H.on("beforeRenderUI",function(){H._beforeRenderUI()})},_uiSetItems:function(I){var H=this;H.clearControl();H.addItems(I)},_beforeRenderUI:function(){var H=this,J=H.get("children"),I=H.get("items");BUI.each(J,function(K){D(H,K)})},__bindUI:function(){var H=this,I=H.get("selectedEvent");H.on(I,function(J){var K=J.target;if(K.get("selectable")){if(!K.get("selected")){H.setSelected(K)}else{if(H.get("multipleSelect")){H.clearSelected(K)}}}});H.on("click",function(J){if(J.target!==H){H.fire("itemclick",{item:J.target,domTarget:J.domTarget,domEvent:J})}});H.on("beforeAddChild",function(J){D(H,J.child)});H.on("beforeRemoveChild",function(K){var J=K.child,L=J.get("selected");if(L){if(H.get("multipleSelect")){H.clearSelected(J)}else{H.setSelected(null)}}J.set("selected",false)})},clearControl:function(){this.removeChildren(true)},getItems:function(){return this.get("children")},updateItem:function(J){var H=this,K=H.get("idField"),I=H.findItemByField(K,J[K]);if(I){I.setTplContent()}return I},removeItem:function(I){var H=this,J=H.get("idField");if(!(I instanceof BUI.Component.Controller)){I=H.findItemByField(J,I[J])}this.removeChild(I,true)},addItemAt:function(H,I){return this.addChild(H,I)},findItemByField:function(L,H,I){I=I||this;var K=this,M=I.get("children"),J=null;$(M).each(function(O,N){if(N.get(L)==H){J=N}else{if(N.get("children").length){J=K.findItemByField(L,H,N)}}if(J){return false}});return J},getItemText:function(H){return H.get("el").text()},getValueByField:function(H,I){return H&&H.get(I)},setItemSelectedStatus:function(I,L){var H=this,J=L?"addClass":"removeClass",K=null;if(I){I.set("selected",L);K=I.get("el")}H.afterSelected(I,L,K)},isItemSelected:function(H){return H?H.get("selected"):false},setAllSelection:function(){var H=this,I=H.getItems();H.setSelection(I)},getSelection:function(){var H=this,J=H.getItems(),I=[];BUI.each(J,function(K){if(H.isItemSelected(K)){I.push(K)}});return I}});E.ChildList=G;return E});define("bui/component/uibase/childcfg",function(B){var A=function(C){this._init()};A.ATTRS={defaultChildCfg:{}};A.prototype={_init:function(){var C=this,D=C.get("defaultChildCfg");if(D){C.on("beforeAddChild",function(F){var E=F.child;if($.isPlainObject(E)){BUI.each(D,function(G,H){if(!E[H]){E[H]=G}})}})}}};return A});define("bui/component/uibase/depends",["bui/component/manage"],function(F){var H=/^#(.*):(.*)$/,G=F("bui/component/manage");function A(K){var L=H.exec(K),M=L[1],I=L[2],J=D(M);return{source:J,eventType:I}}function E(J,L,I){var O=A(L),K=O.source,N=O.eventType,M;if(K&&I&&N){if(BUI.isFunction(I)){M=I}else{if(BUI.isArray(I)){M=function(){BUI.each(I,function(P){if(J[P]){J[P]()}})}}}}if(M){O.callbak=M;K.on(N,M);return O}return null}function B(L){var J=L.source,I=L.eventType,K=L.callbak;J.off(I,K)}function D(J){var I=G.getComponent(J);if(!I){I=$("#"+J);if(!I.length){I=null}}return I}function C(){}C.ATTRS={depends:{value:{}},dependencesMap:{value:{}}};C.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var I=this,J=I.get("depends");BUI.each(J,function(K,L){I.addDependence(L,K)})},addDependence:function(L,I){var K=this,J=K.get("dependencesMap"),M;K.removeDependence(L);M=E(K,L,I);if(M){J[L]=M}},removeDependence:function(K){var I=this,J=I.get("dependencesMap"),L=J[K];if(L){B(L);delete J[K]}},clearDependences:function(){var I=this,J=I.get("dependencesMap");BUI.each(J,function(L,K){B(L)});I.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}};return C});define("bui/component/uibase/bindable",function(){function A(){}A.ATTRS={store:{},loadMask:{value:false}};BUI.augment(A,{__bindUI:function(){var B=this,C=B.get("store"),D=B.get("loadMask");if(!C){return}C.on("beforeload",function(E){B.onBeforeLoad(E);if(D&&D.show){D.show()}});C.on("load",function(E){B.onLoad(E);if(D&&D.hide){D.hide()}});C.on("exception",function(E){B.onException(E);if(D&&D.hide){D.hide()}});C.on("add",function(E){B.onAdd(E)});C.on("remove",function(E){B.onRemove(E)});C.on("update",function(E){B.onUpdate(E)});C.on("localsort",function(E){B.onLocalSort(E)})},__syncUI:function(){var B=this,C=B.get("store");if(!C){return}if(C.hasData()){B.onLoad()}},onBeforeLoad:function(B){},onLoad:function(B){},onException:function(B){},onAdd:function(B){},onRemove:function(B){},onUpdate:function(B){},onLocalSort:function(B){}});return A});define("bui/component/view",["bui/component/manage","bui/component/uibase"],function(C){var B=window,A=C("bui/component/manage"),E=C("bui/component/uibase"),F=document;var D=E.extend([E.TplView],{getComponentCssClassWithState:function(I){var G=this,H=G.get("ksComponentCss");I=I||"";return G.getCssClassWithPrefix(H.split(/\s+/).join(I+" ")+I)},getCssClassWithPrefix:A.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(I){var G=this,J=G.get("statusCls"),H=J[I];if(!H){H=G.getComponentCssClassWithState("-"+I)}return H},renderUI:function(){var H=this;if(!H.get("srcNode")){var I=H.get("render"),G=H.get("el"),J=H.get("elBefore");if(J){G.insertBefore(J,undefined)}else{if(I){G.appendTo(I,undefined)}else{G.appendTo(F.body,undefined)}}}},createDom:function(){var H=this,I=H.get("contentEl"),G=H.get("el");if(!H.get("srcNode")){G=$("<"+H.get("elTagName")+">");if(I){G.append(I)}H.setInternal("el",G)}G.addClass(H.getComponentCssClassWithState());if(!I){H.setInternal("contentEl",G)}},_uiSetHighlighted:function(I){var H=this,J=H.getStatusCls("hover"),G=H.get("el");G[I?"addClass":"removeClass"](J)},_uiSetDisabled:function(I){var H=this,J=H.getStatusCls("disabled"),G=H.get("el");G[I?"addClass":"removeClass"](J).attr("aria-disabled",I);if(I&&H.get("highlighted")){H.set("highlighted",false)}if(H.get("focusable")){H.getKeyEventTarget().attr("tabIndex",I?-1:0)}},_uiSetActive:function(H){var G=this,I=G.getStatusCls("active");G.get("el")[H?"addClass":"removeClass"](I).attr("aria-pressed",!!H)},_uiSetFocused:function(I){var H=this,G=H.get("el"),J=H.getStatusCls("focused");G[I?"addClass":"removeClass"](J)},_uiSetElAttrs:function(G){this.get("el").attr(G)},_uiSetElCls:function(G){this.get("el").addClass(G)},_uiSetElStyle:function(G){this.get("el").css(G)},_uiSetWidth:function(G){this.get("el").width(G)},_uiSetHeight:function(G){var H=this;H.get("el").height(G)},_uiSetContent:function(I){var H=this,G;if(H.get("srcNode")&&!H.get("rendered")){}else{G=H.get("contentEl");if(typeof I=="string"){G.html(I)}else{if(I){G.empty().append(I)}}}},_uiSetVisible:function(I){var J=this,G=J.get("el"),H=J.get("visibleMode");if(H==="visibility"){G.css("visibility",I?"visible":"hidden")}else{G.css("display",I?"":"none")}},destructor:function(){var G=this.get("el");if(G){G.remove()}}},{xclass:"view",priority:0});D.ATTRS={el:{setter:function(G){return $(G)}},elCls:{},elStyle:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:true},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:true},focused:{},active:{},disabled:{},highlighted:{}};return D});define("bui/component/loader",["bui/util"],function(B){var D=B("bui/util"),C=B("bui/base"),A=function(E){A.superclass.constructor.call(this,E);this._init()};A.ATTRS={url:{},target:{},hasLoad:{value:false},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(E){return E}},loadMask:{value:false},dataType:{value:"text"},ajaxOptions:{value:{method:"get",cache:false}},params:{},appendParams:{},lastParams:{value:{}},callback:{},failure:{}};D.extend(A,C);D.augment(A,{isLoader:true,_init:function(){var E=this,F=E.get("autoLoad"),G=E.get("params");E._initMask();if(F){E.load(G)}else{E._initParams();E._initLazyLoad()}},_initLazyLoad:function(){var E=this,G=E.get("target"),F=E.get("lazyLoad");if(G&&F&&F.event){G.on(F.event,function(){if(!E.get("hasLoad")||F.repeat){E.load()}})}},_initMask:function(){var E=this,G=E.get("target"),F=E.get("loadMask");if(G&&F){D.use("bui/mask",function(I){var H=$.isPlainObject(F)?F:{};F=new I.LoadMask(D.mix({el:G.get("el")},H));E.set("loadMask",F)})}},_initParams:function(){var E=this,F=E.get("lastParams"),G=E.get("params");D.mix(F,G)},load:function(J){var E=this,G=E.get("url"),I=E.get("ajaxOptions"),H=E.get("lastParams"),F=E.get("appendParams");D.mix(true,H,F,J);J=D.cloneObject(H);if(!G){return}E.onBeforeLoad();E.set("hasLoad",true);$.ajax(D.mix({dataType:E.get("dataType"),data:J,url:G,success:function(K){E.onload(K,J)},error:function(K,M,L){E.onException({jqXHR:K,textStatus:M,errorThrown:L},J)}},I))},onBeforeLoad:function(){var E=this,F=E.get("loadMask");if(F&&F.show){F.show()}},onload:function(G,J){var K=this,F=K.get("loadMask"),I=K.get("property"),E=K.get("callback"),H=K.get("renderer"),L=K.get("target");L.set(I,H.call(K,G));if(F&&F.hide){F.hide()}if(E){E.call(this,G,J)}},onException:function(G,H){var E=this,F=E.get("failure");if(F){F.call(this,G,H)}}});return A});define("bui/component/controller",["bui/component/uibase","bui/component/manage","bui/component/view","bui/component/loader"],function(E){var I=E("bui/component/uibase"),H=E("bui/component/manage"),M=E("bui/component/view"),D=E("bui/component/loader"),G=BUI.wrapBehavior,F=BUI.getWrapBehavior;function K(O){return function(T){var P=this;if(P===T.target){var R=T.newVal,Q=P.get("view");if(Q){Q.set(O,R)}}}}function A(O){return function(Q){var P=this,R=P.get("view");if(R){return Q===undefined?R.get(O):Q}else{return}}}function L(O,Q,R){O.create();var T=O.getContentElement(),P=O.get("defaultChildClass");if(!Q.xclass&&!(Q instanceof B)){if(!Q.xtype){Q.xclass=P}else{Q.xclass=P+"-"+Q.xtype}}Q=BUI.Component.create(Q,O);Q.setInternal("parent",O);Q.set("render",T);Q.set("elBefore",R);Q.create(undefined);return Q}function C(P){var Q,V,O,U={},R,T=P.get("xview");Q=P.getAttrs();for(O in Q){if(Q.hasOwnProperty(O)){V=Q[O];if(V.view){if((R=P.get(O))!==undefined){U[O]=R}P.on("after"+BUI.ucfirst(O)+"Change",K(O));V.getter=A(O)}}}delete U.autoRender;U.ksComponentCss=N(P);return new T(U)}function N(P){var Q=P.constructor,R,O=[];while(Q&&Q!==B){R=H.getXClassByConstructor(Q);if(R){O.push(R)}Q=Q.superclass&&Q.superclass.constructor}return O.join(" ")}function J(O,Q){var P=O.relatedTarget;return P&&(P===Q[0]||$.contains(Q,P))}var B=I.extend([I.Decorate,I.Tpl,I.ChildCfg,I.KeyNav,I.Depends],{isController:true,getCssClassWithPrefix:H.getCssClassWithPrefix,initializer:function(){var O=this;if(!O.get("id")){O.set("id",O.getNextUniqueId())}H.addComponent(O.get("id"),O);O.setInternal("view",C(O))},getNextUniqueId:function(){var O=this,P=H.getXClassByConstructor(O.constructor);return BUI.guid(P)},createDom:function(){var O=this,P=O.get("view");P.create(undefined)},renderUI:function(){var O=this,P=O.get("loader");O.get("view").render();O._initChildren();if(P){O.setInternal("loader",P)}},_initChildren:function(R){var P=this,O,R,Q;R=R||P.get("children").concat();P.get("children").length=0;for(O=0;O<R.length;O++){Q=P.addChild(R[O]);Q.render()}},bindUI:function(){var O=this,P=O.get("events");this.on("afterVisibleChange",function(Q){this.fire(Q.newVal?"show":"hide")});BUI.each(P,function(Q,R){O.publish(R,{bubbles:Q})})},containsElement:function(Q){var O=this,P=O.get("el"),T=O.get("children"),R=false;if(!O.get("rendered")){return false}if($.contains(P[0],Q)||P[0]===Q){R=true}else{BUI.each(T,function(U){if(U.containsElement(Q)){R=true;return false}})}return R},isChildrenElement:function(Q){var O=this,R=O.get("children"),P=false;BUI.each(R,function(T){if(T.containsElement(Q)){P=true;return false}});return P},show:function(){var O=this;O.render();O.set("visible",true);return O},hide:function(){var O=this;O.set("visible",false);return O},toggle:function(){this.set("visible",!this.get("visible"));return this},_uiSetFocusable:function(Q){var P=this,R,O=P.getKeyEventTarget();if(Q){O.attr("tabIndex",0).attr("hideFocus",true).on("focus",G(P,"handleFocus")).on("blur",G(P,"handleBlur")).on("keydown",G(P,"handleKeydown")).on("keyup",G(P,"handleKeyUp"))}else{O.removeAttr("tabIndex");if(R=F(P,"handleFocus")){O.off("focus",R)}if(R=F(P,"handleBlur")){O.off("blur",R)}if(R=F(P,"handleKeydown")){O.off("keydown",R)}if(R=F(P,"handleKeyUp")){O.off("keyup",R)}}},_uiSetHandleMouseEvents:function(Q){var P=this,O=P.get("el"),R;if(Q){O.on("mouseenter",G(P,"handleMouseEnter")).on("mouseleave",G(P,"handleMouseLeave")).on("contextmenu",G(P,"handleContextMenu")).on("mousedown",G(P,"handleMouseDown")).on("mouseup",G(P,"handleMouseUp")).on("dblclick",G(P,"handleDblClick"))}else{R=F(P,"handleMouseEnter")&&O.off("mouseenter",R);R=F(P,"handleMouseLeave")&&O.off("mouseleave",R);R=F(P,"handleContextMenu")&&O.off("contextmenu",R);R=F(P,"handleMouseDown")&&O.off("mousedown",R);R=F(P,"handleMouseUp")&&O.off("mouseup",R);R=F(P,"handleDblClick")&&O.off("dblclick",R)}},_uiSetFocused:function(O){if(O){this.getKeyEventTarget()[0].focus()}},_uiSetVisible:function(Q){var T=this,O=T.get("el"),P=T.get("visibleMode");if(P==="visibility"){if(Q){var R=T.get("cachePosition");if(R){T.set("xy",R)}}if(!Q){var R=[T.get("x"),T.get("y")];T.set("cachePosition",R);T.set("xy",[-999,-999])}}},_uiSetChildren:function(P){var O=this,Q=BUI.cloneObject(P);O._initChildren(Q)},enable:function(){this.set("disabled",false);return this},disable:function(){this.set("disabled",true);return this},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(Q,P){var O=this,T=O.get("children"),R;if(P===undefined){P=T.length}O.fire("beforeAddChild",{child:Q,index:P});R=T[P]&&T[P].get("el")||null;Q=L(O,Q,R);T.splice(P,0,Q);if(O.get("rendered")){Q.render()}O.fire("afterAddChild",{child:Q,index:P});return Q},remove:function(P){var O=this,Q=O.get("parent");if(Q){Q.removeChild(O,P)}else{if(P){O.destroy()}}return O},removeChild:function(Q,R){var O=this,T=O.get("children"),P=BUI.Array.indexOf(Q,T);if(P===-1){return}O.fire("beforeRemoveChild",{child:Q,destroy:R});if(P!==-1){T.splice(P,1)}if(R&&Q.destroy){Q.destroy()}O.fire("afterRemoveChild",{child:Q,destroy:R});return Q},removeChildren:function(Q){var P=this,O,R=[].concat(P.get("children"));for(O=0;O<R.length;O++){P.removeChild(R[O],Q)}},getChildAt:function(O){var P=this.get("children");return P[O]||null},getChild:function(P,O){return this.getChildBy(function(Q){return Q.get("id")===P},O)},getChildBy:function(P,O){return this.getChildrenBy(P,O)[0]||null},getAppendHeight:function(){var O=this.get("el");return O.outerHeight()-O.height()},getAppendWidth:function(){var O=this.get("el");return O.outerWidth()-O.width()},getChildrenBy:function(Q,P){var O=this,R=[];if(!Q){return R}O.eachChild(function(T){if(Q(T)){R.push(T)}else{if(P){R=R.concat(T.getChildrenBy(Q,P))}}});return R},eachChild:function(O){BUI.each(this.get("children"),O)},handleDblClick:function(O){this.performActionInternal(O);if(!this.isChildrenElement(O.target)){this.fire("dblclick",{domTarget:O.target,domEvent:O})}},handleMouseOver:function(Q){var P=this,O=P.get("el");if(!J(Q,O)){P.handleMouseEnter(Q)}},handleMouseOut:function(Q){var P=this,O=P.get("el");if(!J(Q,O)){P.handleMouseLeave(Q)}},handleMouseEnter:function(P){var O=this;this.set("highlighted",!!P);O.fire("mouseenter",{domTarget:P.target,domEvent:P})},handleMouseLeave:function(P){var O=this;O.set("active",false);O.set("highlighted",!P);O.fire("mouseleave",{domTarget:P.target,domEvent:P})},handleMouseDown:function(T){var P=this,Q,R=T["which"]===1,O;if(R){O=P.getKeyEventTarget();if(P.get("activeable")){P.set("active",true)}if(P.get("focusable")){O[0].focus();P.set("focused",true)}if(!P.get("allowTextSelection")){Q=T.target.nodeName;Q=Q&&Q.toLowerCase();if(Q!=="input"&&Q!=="textarea"){T.preventDefault()}}if(!P.isChildrenElement(T.target)){P.fire("mousedown",{domTarget:T.target,domEvent:T})}}},handleMouseUp:function(Q){var P=this,O=P.isChildrenElement(Q.target);if(P.get("active")&&Q.which===1){P.performActionInternal(Q);P.set("active",false);if(!O){P.fire("click",{domTarget:Q.target,domEvent:Q})}}if(!O){P.fire("mouseup",{domTarget:Q.target,domEvent:Q})}},handleContextMenu:function(O){},handleFocus:function(O){this.set("focused",!!O);this.fire("focus",{domEvent:O,domTarget:O.target})},handleBlur:function(O){this.set("focused",!O);this.fire("blur",{domEvent:O,domTarget:O.target})},handleKeyEventInternal:function(Q){var P=this,O=P.isChildrenElement(Q.target);if(Q.which===13){if(!O){P.fire("click",{domTarget:Q.target,domEvent:Q})}return this.performActionInternal(Q)}if(!O){P.fire("keydown",{domTarget:Q.target,domEvent:Q})}},handleKeydown:function(P){var O=this;if(O.handleKeyEventInternal(P)){P.halt();return true}},handleKeyUp:function(P){var O=this;if(!O.isChildrenElement(P.target)){O.fire("keyup",{domTarget:P.target,domEvent:P})}},performActionInternal:function(O){},destructor:function(){var Q=this,T,P,R,O=Q.get("children");T=Q.get("id");for(P=0;P<O.length;P++){O[P].destroy&&O[P].destroy()}Q.get("view").destroy();H.removeComponent(T)}},{ATTRS:{content:{view:1},elTagName:{view:true,value:"div"},defaultChildClass:{},xtype:{},id:{view:true},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{"click":true,"dblclick":true,"mouseenter":true,"mouseleave":true,"keydown":true,"keyup":true,"focus":false,"blur":false,"mousedown":true,"mouseup":true,"show":false,"hide":false}},render:{view:1},statusCls:{view:true,value:{}},visibleMode:{view:1,value:"display"},visible:{value:true,view:1},handleMouseEvents:{value:true},focusable:{value:false,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:true}},loader:{getter:function(Q){var O=this,P;if(Q&&!Q.isLoader){Q.target=O;P=O.get("defaultLoaderCfg");Q=new D(BUI.merge(P,Q));O.setInternal("loader",Q)}return Q}},allowTextSelection:{value:true},activeable:{value:true},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:false,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(O){this.addTarget(O)}},disabled:{view:1,value:false},xview:{value:M}},PARSER:{visible:function(O){var Q=this,T=O.css("display"),R=O.css("visibility"),P=Q.get("visibleMode");if((T=="none"&&P=="display")||(R=="hidden"&&P=="visibility")){return false}return true}}},{xclass:"controller",priority:0});return B});define("bui/cookie",function(){var F=document,E=24*60*60*1000,D=encodeURIComponent,A=decodeURIComponent;function B(G){return typeof(G)==="string"&&G!==""}var C={get:function(G){var H,I;if(B(G)){if((I=String(F.cookie).match(new RegExp("(?:^| )"+G+"(?:(?:=([^;]*))|;|$)")))){H=I[1]?A(I[1]):""}}return H},set:function(H,I,G,J,K,M){var L=String(D(I)),N=G;if(typeof N==="number"){N=new Date();N.setTime(N.getTime()+G*E)}if(N instanceof Date){L+="; expires="+N.toUTCString()}if(B(J)){L+="; domain="+J}if(B(K)){L+="; path="+K}if(M){L+="; secure"}F.cookie=H+"="+L},remove:function(H,J,G,I){this.set(H,"",-1,J,G,I)}};BUI.Cookie=C;return C});(function(){var A="bui/data/";define("bui/data",["bui/common",A+"sortable",A+"proxy",A+"abstractstore",A+"store",A+"node",A+"treestore"],function(B){var D=B("bui/common"),C=D.namespace("Data");D.mix(C,{Sortable:B(A+"sortable"),Proxy:B(A+"proxy"),AbstractStore:B(A+"abstractstore"),Store:B(A+"store"),Node:B(A+"node"),TreeStore:B(A+"treestore")});return C})})();define("bui/data/sortable",function(){var B="ASC",C="DESC";var A=function(){};A.ATTRS={compareFunction:{value:function(D,E){if(D===undefined){D=""}if(E===undefined){E=""}if(BUI.isString(D)){return D.localeCompare(E)}if(D>E){return 1}else{if(D===E){return 0}else{return -1}}}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var D=this,E=D.get("sortField");return{field:E,direction:D.get("sortDirection")}},setter:function(E){var D=this;D.set("sortField",E.field);D.set("sortDirection",E.direction)}}};BUI.augment(A,{compare:function(D,E,H,I){var G=this,F;H=H||G.get("sortField");I=I||G.get("sortDirection");if(!H||!I){return 1}F=I===B?1:-1;return G.get("compareFunction")(D[H],E[H])*F},getSortData:function(){},sortData:function(F,G,E){var D=this,E=E||D.getSortData();if(BUI.isArray(F)){E=F;F=null}F=F||D.get("sortField");G=G||D.get("sortDirection");D.set("sortField",F);D.set("sortDirection",G);if(!F||!G){return E}E.sort(function(H,I){return D.compare(H,I,F,G)});return E}});return A});define("bui/data/proxy",["bui/data/sortable"],function(D){var B=D("bui/data/sortable");var C=function(F){C.superclass.constructor.call(this,F)};C.ATTRS={};BUI.extend(C,BUI.Base);BUI.augment(C,{_read:function(G,F){},read:function(I,F,H){var G=this;H=H||G;G._read(I,function(J){F.call(H,J)})},update:function(H,F,G){}});var E=function(F){E.superclass.constructor.call(this,F)};E.ATTRS=BUI.mix(true,C.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},dataType:{value:"json"},method:{value:"GET"},cache:{value:false},url:{}});BUI.extend(E,C);BUI.augment(E,{_processParams:function(H){var F=this,G=["start","limit","pageIndex"];BUI.each(G,function(J){var I=F.get(J+"Param");if(I!==J){H[I]=H[J];delete H[J]}})},_read:function(H,F){var G=this;H=BUI.cloneObject(H);G._processParams(H);$.ajax({url:G.get("url"),type:G.get("method"),dataType:G.get("dataType"),data:H,cache:G.get("cache"),success:function(I){F(I)},error:function(I,L,K){var J={exception:{status:L,errorThrown:K,jqXHR:I}};F(J)}})}});var A=function(F){A.superclass.constructor.call(this,F)};BUI.extend(A,C);BUI.mixin(A,[B]);BUI.augment(A,{_read:function(K,F){var M=this,L=K.pageable,H=K.start,O=K.sortField,N=K.sortDirection,G=K.limit,I=M.get("data"),J=[];M.sortData(O,N);if(G){J=I.slice(H,H+G);F({rows:J,results:I.length})}else{J=I.slice(H);F(J)}}});C.Ajax=E;C.Memery=A;return C});define("bui/data/abstractstore",["bui/common","bui/data/proxy"],function(A){var C=A("bui/common"),B=A("bui/data/proxy");function D(E){D.superclass.constructor.call(this,E);this._init()}D.ATTRS={autoLoad:{value:false},lastParams:{value:{}},params:{},proxy:{value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeProcessLoad","add","exception","remove","update","localsort"]},data:{setter:function(G){var E=this,F=E.get("proxy");if(F.set){F.set("data",G)}else{F.data=G}E.set("autoLoad",true)}}};C.extend(D,C.Base);C.augment(D,{isStore:true,_init:function(){var E=this;E.beforeInit();E._initParams();E._initProxy();E._initData()},beforeInit:function(){},_initData:function(){var E=this,F=E.get("autoLoad");if(F){E.load()}},_initParams:function(){var E=this,F=E.get("lastParams"),G=E.get("params");C.mix(F,G)},_initProxy:function(){var E=this,F=E.get("url"),G=E.get("proxy");if(!(G instanceof B)){if(F){G.url=F}if(G.type==="ajax"||G.url){G=new B.Ajax(G)}else{G=new B.Memery(G)}E.set("proxy",G)}},load:function(I,E){var G=this,F=G.get("proxy"),H=G.get("lastParams");C.mix(true,H,G.getAppendParams(),I);G.fire("beforeload",{params:H});I=C.cloneObject(H);F.read(H,function(J){G.onLoad(J,I);if(E){E(J,I)}},G)},onLoad:function(H,G){var E=this;var F=E.processLoad(H,G);if(F){E.afterProcessLoad(H,G)}},processLoad:function(H,G){var E=this,F=E.get("hasErrorProperty");E.fire("beforeProcessLoad",H);if(H[F]||H.exception){E.onException(H);return false}return true},afterProcessLoad:function(F,E){},onException:function(H){var E=this,F=E.get("errorProperty"),G={};if(H.exception){G.type="exception";G[F]=H.exception}else{G.type="error";G[F]=H[F]}E.fire("exception",G)},hasData:function(){},getAppendParams:function(){return{}}});return D});define("bui/data/node",["bui/common"],function(B){var C=B("bui/common");function A(G,E){var F={};if(E){C.each(G,function(H,J){var I=E[J]||J;F[I]=H});F.record=G}else{F=G}return F}function D(G,F){var E=this;G=A(G,F);C.mix(this,G)}C.augment(D,{root:false,leaf:false,text:"",id:null,loaded:false,path:null,parent:null,level:0,record:null,children:null,isNode:true});return D});define("bui/data/treestore",["bui/common","bui/data/node","bui/data/abstractstore","bui/data/proxy"],function(B){var E=B("bui/common"),A=B("bui/data/node"),D=B("bui/data/proxy"),F=B("bui/data/abstractstore");function C(G){C.superclass.constructor.call(this,G)}C.ATTRS={root:{},map:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}};E.extend(C,F);E.augment(C,{beforeInit:function(){this.initRoot()},_initData:function(){var G=this,I=G.get("autoLoad"),H=G.get("root");if(I&&!H.children){params=H.id?{id:H.id}:{};G.load(params)}},initRoot:function(){var G=this,H=G.get("map"),I=G.get("root");if(!I){I={}}if(!I.isNode){I=new A(I,H)}I.path=[I.id];I.level=0;if(I.children){G.setChildren(I,I.children)}G.set("root",I)},add:function(H,J,I){var G=this;H=G._add(H,J,I);G.fire("add",{node:H,index:I});return H},_add:function(I,L,K){L=L||this.get("root");var G=this,H=G.get("map"),J=L.children,M=I.children||[];if(M.length==0&&I.leaf==null){I.leaf=true}if(L){L.leaf=false}if(!I.isNode){I=new A(I,H)}I.parent=L;I.level=L.level+1;I.path=L.path.concat(I.id);K=K==null?L.children.length:K;E.Array.addAt(J,I,K);G.setChildren(I,M);return I},remove:function(G){var I=G.parent||_self.get("root"),H=E.Array.indexOf(G,I.children);E.Array.remove(I.children,G);if(I.children.length===0){I.leaf=true}this.fire("remove",{node:G,index:H});G.parent=null;return G},update:function(G){this.fire("update",{node:G})},getResult:function(){return this.get("root").children},setResult:function(J){var G=this,I=G.get("proxy"),H=G.get("root");if(I instanceof D.Memery){G.set("data",J);G.load({id:H.id})}else{G.setChildren(H,J)}},setChildren:function(H,I){var G=this;H.children=[];if(!I.length){return}E.each(I,function(J){G._add(J,H)})},findNode:function(M,L,J){var G=this;J=J==null?true:J;if(!L){var I=G.get("root");if(I.id===M){return I}return G.findNode(M,I)}var H=L.children,K=null;E.each(H,function(N){if(N.id===M){K=N}else{if(J){K=G.findNode(M,N)}}if(K){return false}});return K},findNodesBy:function(H,J){var G=this,I,K=[];if(!J){J=G.get("root")}E.each(J.children,function(L){if(H(L)){K.push(L)}K=K.concat(G.findNodesBy(H,L))});return K},findNodeByPath:function(M){if(!M){return null}var G=this,I=G.get("root"),K=M.split(","),J,H,L=K[0];if(!L){return null}if(I.id==L){J=I}else{J=G.findNode(L,I,false)}if(!J){return}for(H=1;H<K.length;H=H+1){var L=K[H];J=G.findNode(L,J,false);if(!J){break}}return J},contains:function(H,J){var G=this,I=G.findNode(H.id,J);return !!I},afterProcessLoad:function(L,K){var G=this,I=K.id,J=G.get("dataProperty"),H=G.findNode(I)||G.get("root");if(E.isArray(L)){G.setChildren(H,L)}else{G.setChildren(H,L[J])}G.fire("load",{node:H,params:K})},hasData:function(){return true},isLoaded:function(G){if(!this.get("url")){return true}return G.leaf||(G.children&&G.children.length)},loadNode:function(H){var G=this;if(G.isLoaded(H)){return}if(!G.get("url")){return}else{G.load({id:H.id,path:""})}},loadPath:function(J){var G=this,I=J.split(","),H=I[0];if(G.findNodeByPath(J)){return}G.load({id:H,path:J})}});return C});define("bui/data/store",["bui/data/proxy","bui/data/abstractstore","bui/data/sortable"],function(A){var H=A("bui/data/proxy"),E=A("bui/data/abstractstore"),G=A("bui/data/sortable");function C(L,I){if(L<0){return}var J=I,K=J[L];J.splice(L,1);return K}function B(J,I){var K=BUI.Array.indexOf(J,I);if(K>=0){C(K,I)}}function D(J,I){return BUI.Array.indexOf(J,I)!==-1}var F=function(I){F.superclass.constructor.call(this,I)};F.ATTRS={currentPage:{value:0},deletedRecords:{value:[]},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},matchFunction:{value:function(I,J){return I==J}},modifiedRecords:{value:[]},newRecords:{value:[]},remoteSort:{value:false},resultMap:{value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}};BUI.extend(F,E);BUI.mixin(F,[G]);BUI.augment(F,{add:function(M,K,J){var I=this,L=I.getCount();I.addAt(M,L,K,J)},addAt:function(M,L,K,J){var I=this;J=J||I._getDefaultMatch();if(!BUI.isArray(M)){M=[M]}$.each(M,function(N,O){if(!K||!I.contains(O,J)){I._addRecord(O,N+L);I.get("newRecords").push(O);B(O,I.get("deletedRecords"));B(O,I.get("modifiedRecords"))}})},contains:function(J,I){return this.findIndexBy(J,I)!==-1},find:function(M,I){var L=this,K=null,J=L.getResult();$.each(J,function(O,N){if(N[M]===I){K=N;return false}});return K},findAll:function(M,I){var L=this,K=[],J=L.getResult();$.each(J,function(O,N){if(N[M]===I){K.push(N)}});return K},findByIndex:function(I){return this.getResult()[I]},findIndexBy:function(M,K){var I=this,L=-1,J=I.getResult();K=K||I._getDefaultMatch();if(M===null||M===undefined){return -1}$.each(J,function(O,N){if(K(M,N)){L=O;return false}});return L},findNextRecord:function(J){var I=this,K=I.findIndexBy(J);if(K>=0){return I.findByIndex(K+1)}return},getCount:function(){return this.getResult().length},getTotalCount:function(){var I=this,J=I.get("resultMap"),K=I.get("totalProperty");return J[K]||0},getResult:function(){var I=this,J=I.get("resultMap"),K=I.get("root");return J[K]},hasData:function(){return this.getCount()!==0},setResult:function(K){var I=this,J=I.get("proxy");if(J instanceof H.Memery){I.set("data",K);I.load({start:0})}else{I._setResult(K)}},remove:function(L,J){var I=this,K=[];J=J||I._getDefaultMatch();if(!BUI.isArray(L)){L=[L]}$.each(L,function(N,O){var N=I.findIndexBy(O,J),M=C(N,I.getResult());if(!D(M,I.get("newRecords"))&&!D(M,I.get("deletedRecords"))){I.get("deletedRecords").push(M)}B(M,I.get("newRecords"));B(M,I.get("modifiedRecords"));I.fire("remove",{record:M})})},sort:function(J,K){var I=this,L=I.get("remoteSort");if(!L){I._localSort(J,K)}else{I.set("sortField",J);I.set("sortDirection",K);I.load(I.get("sortInfo"))}},sum:function(K,M){var I=this,J=M||I.getResult(),L=0;BUI.each(J,function(N){var O=N[K];if(!isNaN(O)){L+=parseFloat(O)}});return L},setValue:function(J,M,I){var L=J,K=this;L[M]=I;if(!D(L,K.get("newRecords"))&&!D(L,K.get("modifiedRecords"))){K.get("modifiedRecords").push(L)}K.fire("update",{record:L,field:M,value:I})},update:function(J,M){var L=J,I=this,K=null,N=null;if(M){K=I._getDefaultMatch();N=I.findIndexBy(J,K);if(N>=0){L=I.getResult()[N]}}L=BUI.mix(L,J);if(!D(L,I.get("newRecords"))&&!D(L,I.get("modifiedRecords"))){I.get("modifiedRecords").push(L)}I.fire("update",{record:L})},_addRecord:function(J,K){var I=this.getResult();if(K==undefined){K=I.length}I.splice(K,0,J);this.fire("add",{record:J,index:K})},_clearChanges:function(){var I=this;I.get("newRecords").splice(0);I.get("modifiedRecords").splice(0);I.get("deletedRecords").splice(0)},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var I=this,M=I.get("sortInfo"),L=I.get("start"),J=I.get("pageSize"),K=I.get("pageIndex")||(J?L/J:0);params={start:L,limit:J,pageIndex:K};if(I.get("remoteSort")){BUI.mix(params,M)}return params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(J,K){var I=this;I._sortData(J,K);I.fire("localsort")},_sortData:function(J,K,L){var I=this;L=L||I.getResult();I.sortData(J,K,L)},afterProcessLoad:function(O,N){var I=this,K=I.get("root"),J=N.start,L=N.limit,M=I.get("totalProperty");if(BUI.isArray(O)){I._setResult(O)}else{I._setResult(O[K],O[M])}I.set("start",J);if(L){I.set("pageIndex",J/L)}if(!I.get("remoteSort")){I._sortData()}I.fire("load",{params:N})},_setResult:function(K,L){var I=this,J=I.get("resultMap");L=L||K.length;J[I.get("root")]=K;J[I.get("totalProperty")]=L;I._clearChanges()}});return F});define("bui/overlay",["bui/common","bui/overlay/overlay","bui/overlay/dialog","bui/overlay/message"],function(A){var C=A("bui/common"),B=C.namespace("Overlay");C.mix(B,{Overlay:A("bui/overlay/overlay"),Dialog:A("bui/overlay/dialog"),Message:A("bui/overlay/message")});C.mix(B,{OverlayView:B.Overlay.View,DialogView:B.Dialog.View});C.Message=C.Overlay.Message;return B});define("bui/overlay/overlay",["bui/common"],function(B){var F=B("bui/common"),E=F.Component,C="x-align-arrow",A=E.UIBase;var G=E.View.extend([A.PositionView,A.CloseView]);var D=E.Controller.extend([A.Position,A.Align,A.Close,A.AutoShow,A.AutoHide],{renderUI:function(){var H=this,I=H.get("el"),K=H.get("arrowContainer"),J=K?I.one(K):I;if(H.get("showArrow")){$(H.get("arrowTpl")).appendTo(J)}},show:function(){var H=this,K=H.get("effect"),J=H.get("el"),I=H.get("visibleMode"),L=K.effect,N=K.duration;if(I==="visibility"){D.superclass.show.call(H);if(K.callback){K.callback.call(H)}return}if(!H.get("rendered")){H.set("visible",true);H.render();H.set("visible",false);J=H.get("el")}switch(L){case"linear":J.show(N,M);break;case"fade":J.fadeIn(N,M);break;case"slide":J.slideDown(N,M);break;default:M();break}function M(){H.set("visible",true);if(K.callback){K.callback.call(H)}}},hide:function(){var H=this,K=H.get("effect"),J=H.get("el"),I=K.effect,M=K.duration;if(H.get("visibleMode")==="visibility"){L();return}switch(I){case"linear":J.hide(M,L);break;case"fade":J.fadeOut(M,L);break;case"slide":J.slideUp(M,L);break;default:L();break}function L(){H.set("visible",false);if(K.callback){K.callback.call(H)}}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},closable:{value:false},showArrow:{value:false},arrowContainer:{view:true},arrowTpl:{value:'<s class="'+C+'"><s class="'+C+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:false},xview:{value:G}}},{xclass:"overlay"});D.View=G;return D});define("bui/overlay/dialog",["bui/overlay/overlay"],function(D){var B=D("bui/overlay/overlay"),E=BUI.Component.UIBase,F="header-title",A=BUI.prefix,C=20;var G=B.View.extend([E.StdModView,E.MaskView],{_uiSetTitle:function(K){var I=this,J=I.get("el");J.find("."+F).html(K)},_uiSetContentId:function(K){var I=this,J=I.get("body"),L=$("#"+K).children();L.appendTo(J)},_uiSetHeight:function(M){var I=this,N=M,J=I.get("header"),K=I.get("body"),L=I.get("footer");N-=J.outerHeight()+L.outerHeight();N-=C*2;K.height(N)},_removeContent:function(){var I=this,K=I.get("body"),J=I.get("contentId");if(J){K.children().appendTo($("#"+J))}else{K.children().remove()}}},{xclass:"dialog-view"});var H=B.extend([E.StdMod,E.Mask,E.Drag],{show:function(){var I=this;H.superclass.show.call(this);I.center()},bindUI:function(){var I=this;I.on("closeclick",function(){return I.onCancel()})},onCancel:function(){var I=this,J=I.get("cancel");return J.call(this)},_uiSetButtons:function(K){var I=this,J=I.get("footer");J.children().remove();BUI.each(K,function(L){I._createButton(L,J)})},_createButton:function(J,M){var I=this,L='<button class="'+J.elCls+'">'+J.text+"</button>",K=$(L).appendTo(M);K.on("click",function(){J.handler.call(I,I,this)})},destructor:function(){var I=this,J=I.get("contentId"),L=I.get("body"),K=I.get("closeAction");if(K=="destroy"){I.hide();if(J){L.children().appendTo("#"+J)}}}},{ATTRS:{closeTpl:{view:true,value:'<a tabindex="0" href=javascript:void("\u5173\u95ed") role="button" class="'+A+'ext-close" style=""><span class="'+A+'ext-close-x x-icon x-icon-normal">\u00d7</span></a>'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"button button-primary",handler:function(){var I=this,J=I.get("success");if(J){J.call(I)}}},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:function(J,I){if(this.onCancel()!==false){this.close()}}}]},contentId:{view:true},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var I=this;return{property:"bodyContent",autoLoad:false,lazyLoad:{event:"show"},loadMask:{el:I.get("body")}}}},title:{view:true,value:""},mask:{value:true},maskShared:{value:false},headerContent:{value:'<div class="'+F+'">\u6807\u9898</div>'},footerContent:{},closable:{value:true},xview:{value:G}}},{xclass:"dialog"});H.View=G;return H});define("bui/overlay/message",["bui/overlay/dialog"],function(E){var B=E("bui/overlay/dialog"),H=BUI.prefix,K={info:"i",error:"\u00d7",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"};var L=B.extend({renderUI:function(){this._setContent()},bindUI:function(){var M=this,N=M.get("body");M.on("afterVisibleChange",function(P){if(P.newVal){if(BUI.UA.ie<8){var O=N.outerWidth();if(BUI.UA.ie==6){O=O>350?350:O}M.get("header").width(O-20);M.get("footer").width(O)}}})},_setContent:function(){var M=this,N=M.get("body"),O=BUI.substitute(M.get("contentTpl"),{msg:M.get("msg"),iconTpl:M.get("iconTpl")});N.empty();$(O).appendTo(N)},_uiSetIcon:function(M){if(!this.get("rendered")){return}this._setContent()},_uiSetMsg:function(M){if(!this.get("rendered")){return}this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var M=this,N=M.get("icon");return'<div class="x-icon x-icon-'+N+'">'+K[N]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+H+'message-content">{msg}</div>'}}},{xclass:"message",priority:0});var F=new L({icon:"info",title:""});function A(M,N){return function(Q,O,P){if(BUI.isString(O)){P=O;O=null}P=P||N;O=O||D;G({"buttons":M,"icon":P,"msg":Q,"success":O})}}function G(M){F.set(M);F.show()}function I(){var M=this,N=M.get("success");if(N){N.call(M);M.hide()}}function D(){this.hide()}var C=A([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:I}],"info"),J=A([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:I},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:D}],"question");L.Alert=C;L.Confirm=J;L.Show=G;return L});(function(){var A="bui/list/";define("bui/list",["bui/common",A+"list",A+"listitem",A+"simplelist",A+"listbox"],function(B){var C=B("bui/common"),D=C.namespace("List");C.mix(D,{List:B(A+"list"),ListItem:B(A+"listitem"),SimpleList:B(A+"simplelist"),Listbox:B(A+"listbox")});C.mix(D,{ListItemView:D.ListItem.View,SimpleListView:D.SimpleList.View});return D})})();define("bui/list/domlist",["bui/common"],function(C){var I=C("bui/common"),F=I.Component.UIBase.Selection,G="data-",H=I.Component.UIBase.List;function D(M,K){var J=K,L=J.get("itemCls"),N=J.get("itemStatusCls");if(N&&N[M]){return N[M]}return L+"-"+M}var E=function(){};E.ATTRS={items:{}};E.prototype={clearControl:function(){var J=this,K=J.getItemContainer(),L=J.get("itemCls");K.find("."+L).remove()},addItem:function(J,K){return this._createItem(J,K)},getItems:function(){var J=this,K=J.getAllElements(),L=[];I.each(K,function(M){L.push(J.getItemByElement(M))});return L},updateItem:function(M){var J=this,N=J.getItems(),K=I.Array.indexOf(M,N),O=null,L;if(K>=0){O=J.findElement(M);L=J.getItemTpl(M,K);if(O){$(O).html($(L).html())}}return O},removeItem:function(J,K){K=K||this.findElement(J);$(K).remove()},getItemContainer:function(){return this.get("itemContainer")||this.get("el")},getItemTpl:function(L,M){var J=this,K=J.get("itemTplRender"),N=J.get("itemTpl");if(K){return K(L,M)}return I.substitute(N,L)},_createItem:function(R,J){var M=this,N=M.getItemContainer(),Q=M.get("itemCls"),O=M.get("dataField"),P=M.getItemTpl(R,J),L=$(P);if(J!==undefined){var K=N.find("."+Q)[J];if(K){L.insertBefore(K)}else{L.appendTo(N)}}else{L.appendTo(N)}L.addClass(Q);L.data(O,R);return L},getItemStatusCls:function(J){return D(J,this)},setItemStatusCls:function(L,O,N){var J=this,K=J.getItemStatusCls(L),M=N?"addClass":"removeClass";if(O){$(O)[M](K)}},hasStatus:function(L,M){var J=this,K=J.getItemStatusCls(L);return $(M).hasClass(K)},setItemSelected:function(K,M,L){var J=this;L=L||J.findElement(K);J.setItemStatusCls("selected",L,M)},getAllElements:function(){var J=this,K=J.get("itemCls"),L=J.get("el");return L.find("."+K)},getItemByElement:function(L){var J=this,K=J.get("dataField");return $(L).data(K)},getFirstElementByStatus:function(M){var J=this,L=J.getItemStatusCls(M),K=J.get("el");return K.find("."+L)[0]},getElementsByStatus:function(M){var J=this,L=J.getItemStatusCls(M),K=J.get("el");return K.find("."+L)},getSelectedElements:function(){var J=this,L=J.getItemStatusCls("selected"),K=J.get("el");return K.find("."+L)},findElement:function(L){var J=this,K=J.getAllElements(),M=null;I.each(K,function(N){if(J.getItemByElement(N)==L){M=N;return false}});return M},isElementSelected:function(L){var J=this,K=J.getItemStatusCls("selected");return L&&$(L).hasClass(K)}};function B(N,K){var L=N.attributes,J=K.get("itemStatusFields"),M={};I.each(L,function(P){var O=P.nodeName;if(O.indexOf(G)!==-1){O=O.replace(G,"");M[O]=P.nodeValue}});M.text=$(N).text();I.each(J,function(P,Q){var O=D(Q,K);if($(N).hasClass(O)){M[P]=true}});return M}var A=function(){};A.ATTRS=I.merge(true,H.ATTRS,F.ATTRS,{dataField:{view:true,value:"data-item"},itemContainer:{view:true},itemStatusFields:{value:{}},itemCls:{view:true},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{"itemrendered":true,"itemremoved":true,"itemupdated":true,"itemsshow":false,"beforeitemsshow":false,"itemsclear":false,"beforeitemsclear":false}}});A.PARSER={items:function(J){var L=this,M=[],K=L.get("itemCls"),O=L.get("dataField"),N=J.find("."+K);I.each(N,function(Q){var P=B(Q,L);M.push(P);$(Q).data(O,P)});return M}};I.augment(A,H,F,{_uiSetItems:function(K){var J=this;if(J.get("srcNode")&&!J.get("rendered")){return}this.setItems(K)},__bindUI:function(){var J=this,K=J.get("selectedEvent"),M=J.get("itemCls"),N=J.get("view").getItemContainer();N.delegate("."+M,"click",function(R){var Q=$(R.currentTarget),P=J.getItemByElement(Q);if(J.isItemDisabled(P,Q)){return}var O=J.fire("itemclick",{item:P,element:Q[0],domTarget:R.target});if(O!==false&&K=="click"){L(P,Q)}});if(K!=="click"){N.delegate("."+M,K,function(Q){var P=$(Q.currentTarget),O=J.getItemByElement(P);if(J.isItemDisabled(O,P)){return}L(O,P)})}N.delegate("."+M,"dblclick",function(Q){var P=$(Q.currentTarget),O=J.getItemByElement(P);if(J.isItemDisabled(O,P)){return}J.fire("itemdblclick",{item:O,element:P[0],domTarget:Q.target})});function L(P,Q){var R=J.get("multipleSelect"),O;O=J.isItemSelected(P,Q);if(!O){if(!R){J.clearSelected()}J.setItemSelected(P,true,Q)}else{if(R){J.setItemSelected(P,false,Q)}}}J.on("itemrendered itemupdated",function(Q){var O=Q.item,P=Q.element;J._syncItemStatus(O,P)})},getValueByField:function(J,K){return J&&J[K]},_syncItemStatus:function(L,M){var J=this,K=J.get("itemStatusFields");I.each(K,function(N,O){J.get("view").setItemStatusCls(O,M,L[N])})},getStatusValue:function(L,N){var J=this,K=J.get("itemStatusFields"),M=K[N];return L[M]},getCount:function(){var J=this.getItems();return J?J.length:0},getStatusField:function(L){var J=this,K=J.get("itemStatusFields");return K[L]},setStatusValue:function(L,O,M){var J=this,K=J.get("itemStatusFields"),N=K[O];if(N){L[N]=M}},getItemText:function(L){var J=this,K=J.get("textGetter");if(!L){return""}if(K){return K(L)}else{return $(J.findElement(L)).text()}},removeItem:function(L){var J=this,M=J.get("items"),N=J.findElement(L),K;K=I.Array.indexOf(L,M);if(K!==-1){M.splice(K,1)}J.get("view").removeItem(L,N);J.fire("itemremoved",{item:L,domTarget:$(N)[0],element:N})},addItemAt:function(L,M){var J=this,K=J.get("items");if(M===undefined){M=K.length}K.splice(M,0,L);J.addItemToView(L,M);return L},addItemToView:function(K,L){var J=this,M=J.get("view").addItem(K,L);J.fire("itemrendered",{item:K,domTarget:$(M)[0],element:M})},updateItem:function(K){var J=this,L=J.get("view").updateItem(K);J.fire("itemupdated",{item:K,domTarget:$(L)[0],element:L})},setItems:function(K){var J=this;J.clearControl();J.fire("beforeitemsshow");I.each(K,function(L,M){J.addItemToView(L,M)});J.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(J){return this.get("view").getItemByElement(J)},getSelected:function(){var J=this,K=J.get("view").getFirstElementByStatus("selected");return J.getItemByElement(K)||null},getItemsByStatus:function(M){var J=this,L=J.get("view").getElementsByStatus(M),K=[];I.each(L,function(N){K.push(J.getItemByElement(N))});return K},findElement:function(K){var J=this;if(I.isString(K)){K=J.getItem(K)}return this.get("view").findElement(K)},findItemByField:function(N,J){var L=this,M=L.get("items"),K=null;I.each(M,function(O){if(O[N]===J){K=O;return false}});return K},setItemSelectedStatus:function(K,M,L){var J=this;L=L||J.findElement(K);J.setItemStatus(K,"selected",M,L)},setAllSelection:function(){var J=this,K=J.getItems();J.setSelection(K)},isItemSelected:function(K,L){var J=this;L=L||J.findElement(K);return J.get("view").isElementSelected(L)},isItemDisabled:function(J,K){return this.hasStatus(J,"disabled",K)},setItemDisabled:function(K,L){var J=this;J.setItemStatus(K,"disabled",L)},getSelection:function(){var J=this,K=J.get("view").getSelectedElements(),L=[];I.each(K,function(M){L.push(J.getItemByElement(M))});return L},clearControl:function(){this.fire("beforeitemsclear");this.get("view").clearControl();this.fire("itemsclear")},hasStatus:function(K,M,L){if(!K){return false}var J=this;L=L||J.findElement(K);return J.get("view").hasStatus(M,L)},setItemStatus:function(K,N,L,M){var J=this;if(K){M=M||J.findElement(K)}if(!J.isItemDisabled(K,M)||N==="disabled"){if(K){if(N==="disabled"&&L){J.clearItemStatus(K)}J.setStatusValue(K,N,L);J.get("view").setItemStatusCls(N,M,L);J.fire("itemstatuschange",{item:K,status:N,value:L,element:M})}if(N==="selected"){J.afterSelected(K,L,M)}}},clearItemStatus:function(L,N,M){var J=this,K=J.get("itemStatusFields");M=M||J.findElement(L);if(N){J.setItemStatus(L,N,false,M)}else{I.each(K,function(O,P){J.setItemStatus(L,P,false,M)});if(!K["selected"]){J.setItemSelected(L,false)}J.setItemStatus(L,"hover",false)}}});A.View=E;return A});define("bui/list/keynav",function(){var A=function(){};A.ATTRS={highlightedStatus:{value:"hover"}};BUI.augment(A,{setHighlighted:function(D,E){if(this.hasStatus(D,"hover",E)){return}var B=this,C=B.get("highlightedStatus"),G=B._getHighLightedElement(),F=G?B.getItemByElement(G):null;if(F!==D){if(F){this.setItemStatus(F,C,false,G)}this.setItemStatus(D,C,true,E)}},_getHighLightedElement:function(){var B=this,D=B.get("highlightedStatus"),C=B.get("view").getFirstElementByStatus(D);return C},getHighlighted:function(){var B=this,D=B.get("highlightedStatus"),C=B.get("view").getFirstElementByStatus(D);return B.getItemByElement(C)||null},getColumnCount:function(){var B=this,D=B.getFirstItem(),E=B.findElement(D),C=$(E);if(E){return parseInt(C.parent().width()/C.outerWidth(),10)}return 1},getRowCount:function(C){var B=this;C=C||B.getColumnCount();return(this.getCount()+C-1)/C},_getNextItem:function(G,E,C){var H=this,F=H._getCurrentIndex(),D=H.getCount(),B=G?1:-1,I;if(F===-1){return G?H.getFirstItem():H.getLastItem()}if(!G){E=E*B}I=(F+E+C)%C;if(I>D-1){if(G){I=I-(D-1)}else{I=I+E}}return H.getItemAt(I)},_getLeftItem:function(){var B=this,C=B.getCount(),D=B.getColumnCount();if(!C||D<=1){return null}return B._getNextItem(false,1,C)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var B=this,C=B._getCurrentItem();return this.indexOfItem(C)},_getRightItem:function(){var B=this,C=B.getCount(),D=B.getColumnCount();if(!C||D<=1){return null}return this._getNextItem(true,1,C)},_getDownItem:function(){var B=this,D=B.getColumnCount(),C=B.getRowCount(D);if(C<=1){return null}return this._getNextItem(true,D,D*C)},_getUpperItem:function(){var B=this,D=B.getColumnCount(),C=B.getRowCount(D);if(C<=1){return null}return this._getNextItem(false,D,D*C)},handleNavUp:function(D){var B=this,C=B._getUpperItem();B.setHighlighted(C)},handleNavDown:function(B){this.setHighlighted(this._getDownItem())},handleNavLeft:function(B){this.setHighlighted(this._getLeftItem())},handleNavRight:function(B){this.setHighlighted(this._getRightItem())},handleNavEnter:function(D){var B=this,C=B._getCurrentItem();if(C){B.setSelected(C)}},handleNavEsc:function(B){this.setHighlighted(null)},handleNavTab:function(B){this.setHighlighted(this._getRightItem())}});return A});define("bui/list/simplelist",["bui/common","bui/list/domlist","bui/list/keynav"],function(E){var G=E("bui/common"),F=G.Component.UIBase,A=E("bui/list/domlist"),C=E("bui/list/keynav"),D=G.prefix+"list-item";var H=G.Component.View.extend([A.View],{setElementHover:function(K,I){var J=this;J.setItemStatusCls("hover",K,I)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"});var B=G.Component.Controller.extend([A,F.Bindable,C],{bindUI:function(){var I=this,J=I.get("itemCls"),K=I.get("view").getItemContainer();K.delegate("."+J,"mouseover",function(N){var M=N.currentTarget,L=I.getItemByElement(M);if(I.isItemDisabled(N.item,N.currentTarget)){return}if(I.get("highlightedStatus")==="hover"){I.setHighlighted(L,M)}else{I.setItemStatus(L,"hover",true,M)}}).delegate("."+J,"mouseout",function(M){var L=$(M.currentTarget);I.get("view").setElementHover(L,false)})},onAdd:function(J){var I=this,K=J.record;I.addItemToView(K,J.index)},onRemove:function(J){var I=this,K=J.record;I.removeItem(K)},onUpdate:function(I){this.updateItem(I.record)},onLocalSort:function(I){this.onLoad(I)},onLoad:function(){var I=this,J=I.get("store"),K=J.getResult();I.set("items",K)}},{ATTRS:{items:{view:true,value:[]},itemCls:{view:true,value:D},idField:{value:"value"},listSelector:{view:true,value:"ul"},itemTpl:{view:true,value:'<li role="option" class="'+D+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:H}}},{xclass:"simple-list",prority:0});B.View=H;return B});define("bui/list/listbox",["bui/list/simplelist"],function(A){var B=A("bui/list/simplelist");var C=B.extend({bindUI:function(){var D=this;D.on("selectedchange",function(F){var G=F.item,H=$(F.domTarget),E=H.find("input");if(G){E.attr("checked",F.selected)}})}},{ATTRS:{itemTpl:{value:'<li><span class="checkbox"><input type="checkbox" />{text}</span></li>'},multipleSelect:{value:true}}},{xclass:"listbox"});return C});define("bui/list/listitem",function(E){var C=BUI.Component,A=C.UIBase;var D=C.View.extend([A.ListItemView],{});var B=C.Controller.extend([A.ListItem],{},{ATTRS:{elTagName:{view:true,value:"li"},xview:{value:D},tpl:{view:true,value:"<span>{text}</span>"}}},{xclass:"list-item"});B.View=D;return B});define("bui/list/list",function(B){var D=BUI.Component,A=D.UIBase;var C=D.Controller.extend([A.ChildList],{},{ATTRS:{elTagName:{view:true,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});return C});define("bui/picker",["bui/common","bui/picker/picker","bui/picker/listpicker"],function(A){var C=A("bui/common"),B=C.namespace("Picker");C.mix(B,{Picker:A("bui/picker/picker"),ListPicker:A("bui/picker/listpicker")});return B});define("bui/picker/picker",["bui/overlay"],function(B){var C=B("bui/overlay").Overlay;var A=C.extend({bindUI:function(){var D=this,E=D.get("innerControl"),F=D.get("hideEvent"),G=$(D.get("trigger"));G.on(D.get("triggerEvent"),function(H){if(D.get("autoSetValue")){var I=D.get("valueField")||D.get("textField")||this,J=$(I).val();D.setSelectedValue(J)}});E.on(D.get("changeEvent"),function(H){var M=D.get("curTrigger"),P=D.get("textField")||M,N=D.get("valueField"),K=D.getSelectedValue(),J=false;if(P){var L=D.getSelectedText(),O=$(P).val();if(L!=O){$(P).val(L);J=true}}if(N){var I=$(N).val();if(N!=I){$(N).val(K);J=true}}if(J){D.onChange(L,K,H)}});if(F){E.on(D.get("hideEvent"),function(){var I=D.get("curTrigger");try{if(I){I.focus()}}catch(H){BUI.log(H)}D.hide()})}},setSelectedValue:function(D){},getSelectedValue:function(){},getSelectedText:function(){},onChange:function(F,E,H){var D=this,G=D.get("curTrigger");D.fire("selectedchange",{value:E,text:F,curTrigger:G})},_uiSetValueField:function(E){var D=this;if(E){D.setSelectedValue($(E).val())}},_getTextField:function(){var D=this;return D.get("textField")||D.get("curTrigger")}},{ATTRS:{innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:true},changeEvent:{value:"selectedchange"},autoHide:{value:true},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}}},{xclass:"picker"});return A});define("bui/picker/listpicker",["bui/picker/picker","bui/list"],function(B){var A=B("bui/list"),C=B("bui/picker/picker"),D=C.extend({initializer:function(){var E=this,G=E.get("children"),F=E.get("list");if(!F){G.push({})}},setSelectedValue:function(H){H=H?H.toString():"";var E=this,G=E.get("list"),F=E.getSelectedValue();if(H!==F&&G.getCount()){if(G.get("multipleSelect")){G.clearSelection()}G.setSelectionByField(H.split(","))}},onChange:function(G,F,I){var E=this,H=E.get("curTrigger");E.fire("selectedchange",{value:F,text:G,curTrigger:H,item:I.item})},getSelectedValue:function(){return this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});return D});(function(){var A="bui/form/";define("bui/form",["bui/common",A+"fieldcontainer",A+"form",A+"row",A+"fieldgroup",A+"horizontal",A+"rules",A+"field",A+"fieldgroup"],function(B){var E=B("bui/common"),C=E.namespace("Form"),D=B(A+"tips");E.mix(C,{Tips:D,TipItem:D.Item,FieldContainer:B(A+"fieldcontainer"),Form:B(A+"form"),Row:B(A+"row"),Group:B(A+"fieldgroup"),HForm:B(A+"horizontal"),Rules:B(A+"rules"),Field:B(A+"field"),FieldGroup:B(A+"fieldgroup")});return C})})();define("bui/form/tips",["bui/common","bui/overlay"],function(F){var H=F("bui/common"),G=H.prefix,B=F("bui/overlay").Overlay,C="data-tip",A=G+"form-tip-container";var E=B.extend({initializer:function(){var I=this,J=I.get("render");if(!J){var K=$(I.get("trigger")).parent();I.set("render",K)}},renderUI:function(){var I=this;I.resetVisible()},resetVisible:function(){var I=this,J=$(I.get("trigger"));if(J.val()){I.set("visible",false)}else{I.set("align",{node:$(I.get("trigger")),points:["cl","cl"]});I.set("visible",true)}},bindUI:function(){var I=this,J=$(I.get("trigger"));I.get("el").on("click",function(){I.hide();J.focus()});J.on("click focus",function(){I.hide()});J.on("blur",function(){I.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"});var D=function(I){if(this.constructor!==D){return new D(I)}D.superclass.constructor.call(this,I);this._init()};D.ATTRS={form:{},items:{value:[]}};H.extend(D,H.Base);H.augment(D,{_init:function(){var I=this,J=$(I.get("form"));if(J.length){H.each($.makeArray(J[0].elements),function(K){var L=$(K).attr(C);if(L){I._initFormElement(K,$.parseJSON(L))}});J.addClass(A)}},_initFormElement:function(M,J){if(J){J.trigger=M}var I=this,L=I.get("items"),K=new E(J);L.push(K)},getItem:function(K){var I=this,L=I.get("items"),J=null;H.each(L,function(M){if($(M.get("trigger")).attr("name")===K){J=M;return false}});return J},resetVisible:function(){var I=this,J=I.get("items");H.each(J,function(K){K.resetVisible()})},render:function(){var I=this,J=I.get("items");H.each(J,function(K){K.render()})},destroy:function(){var I=this,J=I.get(J);H.each(J,function(K){K.destroy()})}});D.Item=E;return D});define("bui/form/basefield",["bui/common","bui/form/tips","bui/form/valid","bui/form/remote"],function(D){var H=D("bui/common"),I=H.Component,C=D("bui/form/tips").Item,A=D("bui/form/valid"),F=D("bui/form/remote"),J=H.prefix+"form-field-error",E="data-error";var B=I.View.extend([F.View,A.View],{renderUI:function(){var K=this,N=K.get("control");if(!N){var M=K.get("controlTpl"),L=K.getControlContainer();if(M){var N=$(M).appendTo(L);K.set("control",N)}}else{K.set("controlContainer",N.parent())}},clearErrors:function(){var K=this,L=K.get("msgEl");if(L){L.remove();K.set("msgEl",null)}K.get("el").removeClass(J)},showError:function(P,N){var K=this,M=K.get("control"),O=H.substitute(N,{error:P}),L=$(O);L.appendTo(M.parent());K.set("msgEl",L);K.get("el").addClass(J)},getControlContainer:function(){var K=this,L=K.get("el"),M=K.get("controlContainer");if(M){if(H.isString(M)){return L.find(M)}return M}return L},getLoadingContainer:function(){return this.getControlContainer()},_uiSetName:function(L){var K=this;K.get("control").attr("name",L)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}});var G=I.Controller.extend([F,A],{initializer:function(){var K=this;K.on("afterRenderUI",function(){var L=K.get("tip");if(L){L.trigger=K.getTipTigger();L.autoRender=true;L=new C(L);K.set("tip",L)}})},bindUI:function(){var K=this,N=K.get("validEvent"),M=K.get("changeEvent"),L=K.getInnerControl();if(L.is("select")){N="change"}L.on(N,function(){var O=K.getControlValue(L);K.validControl(O)});L.on("focus",function(){if(!K.get("hasValid")){var O=K.getControlValue(L);K.validControl(O)}});K.on(M,function(){K.onValid()});K.on("remotecomplete",function(O){K._setError(O.error)})},onValid:function(){var K=this,L=K.getControlValue();L=K.parseValue(L);if(!K.isCurrentValue(L)){K.setInternal("value",L);K.onChange()}},onChange:function(){this.fire("change")},isCurrentValue:function(K){return K==this.get("value")},_clearError:function(){this.set("error",null);this.get("view").clearErrors()},_setError:function(K){this.set("error",K);this.showErrors()},getControlValue:function(L){var K=this;L=L||K.getInnerControl();return L.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var K=this,L={};L[K.get("name")]=K.get("value");return L},setControlValue:function(M){var K=this,L=K.getInnerControl();L.val(M)},parseValue:function(K){return K},valid:function(){var K=this;K.validControl()},validControl:function(M){var K=this,L;M=M||K.getControlValue(),preError=K.get("error");L=K.getValidError(M);K.setInternal("hasValid",true);if(L){K._setError(L);K.fire("error",{msg:L,value:M});if(preError!==L){K.fire("validchange",{valid:false})}}else{K._clearError();K.fire("valid");if(preError){K.fire("validchange",{valid:true})}}return !L},focus:function(){this.getInnerControl().focus()},change:function(){var K=this.getInnerControl();K.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var K=this;if(!K.get("hasValid")){K.validControl()}return !K.get("error")},getError:function(){return this.get("error")},getErrors:function(){var K=this.getError();if(K){return[K]}return[]},clearErrors:function(){var K=this;K._clearError();if(K.getControlValue()!=K.get("value")){K.setControlValue(K.get("value"))}},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var K=this,L=K.get("tip");if(L&&L.destroy){L.destroy()}},setInnerWidth:function(M){var K=this,L=K.getInnerControl(),N=L.outerWidth()-L.width();L.width(M-N)},_resetTip:function(){var K=this,L=K.get("tip");if(L){L.resetVisible()}},resetTip:function(){this._resetTip()},_uiSetValue:function(L){var K=this;K.setControlValue(L);if(K.get("rendered")){K.validControl();K.onChange()}K._resetTip()},_uiSetDisabled:function(M){var K=this,L=K.getInnerControl();L.attr("disabled",M);if(K.get("rendered")){if(M){K.clearErrors()}if(!M){K.valid()}}},_uiSetWidth:function(L){var K=this;if(L!=null&&K.get("forceFit")){K.setInnerWidth(L)}}},{ATTRS:{hasValid:{value:false},forceFit:{value:false},tip:{},changeEvent:{value:"valid"},validEvent:{value:"keyup change"},name:{view:true},showError:{view:true,value:true},value:{view:true},label:{},controlContainer:{view:true},control:{view:true},controlTpl:{view:true,value:'<input type="text"/>'},events:{value:{error:false,valid:false,change:true,validchange:true}},tpl:{value:"<label>{label}</label>"},xview:{value:B}},PARSER:{control:function(K){var L=K.find("input,select,textarea");if(L.length){return L}return K},disabled:function(K){return !!K.attr("disabled")},value:function(K){var L=this,M="select,input,textarea",N=L.get("value");if(!N){if(K.is(M)){N=K.val()}else{N=K.find(M).val()}}return N},name:function(K){var L=this,N="select,input,textarea",M=L.get("name");if(!M){if(K.is(N)){M=K.attr("name")}else{M=K.find(N).attr("name")}}return M}}},{xclass:"form-field"});G.View=B;return G});define("bui/form/textfield",["bui/form/basefield"],function(B){var A=B("bui/form/basefield");var C=A.extend({},{xclass:"form-field-text"});return C});define("bui/form/numberfield",["bui/form/basefield"],function(B){var A=B("bui/form/basefield"),C=A.extend({parseValue:function(E){if(E==""||E==null){return null}if(BUI.isNumber(E)){return E}var D=this,F=D.get("allowDecimals");E=E.replace(/\,/g,"");if(!F){return parseInt(E)}return parseFloat(parseFloat(E).toFixed(D.get("decimalPrecision")))},_uiSetMax:function(D){this.addRule("max",D)},_uiSetMin:function(D){this.addRule("min",D)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:true,max:true}},validEvent:{value:"keyup change"},defaultRules:{value:{number:true}},allowDecimals:{value:true},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});return C});define("bui/form/hiddenfield",["bui/form/basefield"],function(B){var A=B("bui/form/basefield");var C=A.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});return C});define("bui/form/readonlyfield",["bui/form/basefield"],function(B){var A=B("bui/form/basefield");var C=A.extend({},{ATTRS:{controlTpl:{value:'<input type="text" readonly="readonly"/>'}}},{xclass:"form-field-readonly"});return C});define("bui/form/selectfield",["bui/common","bui/form/basefield"],function(B){var D=B("bui/common"),A=B("bui/form/basefield");function F(I,H,G){I.children().remove();var J=G.get("emptyText");if(J){E("",J,I)}D.each(H,function(K){E(K.value,K.text,I)})}function E(J,H,G){var I='<option value="'+J+'">'+H+"</option>";$(I).appendTo(G)}var C=A.extend({renderUI:function(){var G=this,H=G.getInnerControl(),I=G.get("select");if(G.get("srcNode")&&H.is("select")){return}if($.isPlainObject(I)){G._initSelect(I)}},_initSelect:function(I){var G=this,H=G.get("items");D.use("bui/select",function(J){I.render=G.getControlContainer();I.valueField=G.getInnerControl();I.autoRender=true;I=new J.Select(I);G.set("select",I);G.set("isCreate",true);G.get("children").push(I);I.on("change",function(L){var K=I.getSelectedValue();G.set("value",K)})})},setItems:function(J){var G=this,I=G.get("select");if($.isPlainObject(J)){var H=[];D.each(J,function(M,L){H.push({value:L,text:M})});J=H}var K=G.getInnerControl();if(K.is("select")){F(K,J,G);G.setControlValue(G.get("value"));if(!G.getControlValue()){G.setInternal("value","")}}if(I){if(I.set){I.set("items",J)}else{I.items=J}}},setControlValue:function(J){var G=this,I=G.get("select"),H=G.getInnerControl();H.val(J);if(I&&I.set&&I.getSelectedValue()!==J){I.setSelectedValue(J)}},getTipTigger:function(){var G=this,H=G.get("select");if(H&&H.rendered){return H.get("el").find("input")}return G.get("el")},_uiSetItems:function(G){if(G){this.setItems(G)}},setInnerWidth:function(J){var G=this,H=G.getInnerControl(),I=G.get("select"),K=H.outerWidth()-H.width();H.width(J-K);if(I&&I.set){I.set("width",J)}}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:true},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{value:{}}},PARSER:{emptyText:function(G){if(!this.get("showBlank")){return""}var I=G.find("option"),H=this.get("emptyText");if(I.length){H=$(I[0]).text()}return H}}},{xclass:"form-field-select"});return C});define("bui/form/datefield",["bui/common","bui/form/basefield","bui/calendar"],function(D){var F=D("bui/common"),B=D("bui/form/basefield"),E=F.Date,C=D("bui/calendar").DatePicker;var A=B.extend({renderUI:function(){var G=this,H=G.get("datePicker");if($.isPlainObject(H)){H.trigger=G.getInnerControl();H.autoRender=true;H=new C(H);G.set("datePicker",H);G.set("isCreatePicker",true);G.get("children").push(H)}if(H.get("showTime")){G.getInnerControl().addClass("calendar-time")}},bindUI:function(){var G=this,H=G.get("datePicker");H.on("selectedchange",function(J){var I=J.curTrigger;if(I[0]==G.getInnerControl()[0]){G.set("value",J.value)}})},setControlValue:function(I){var G=this,H=G.getInnerControl();if(F.isDate(I)){I=E.format(I,G._getFormatMask())}H.val(I)},_getFormatMask:function(){var G=this,H=G.get("datePicker");if(H.get("showTime")){return"yyyy-mm-dd HH:MM:ss"}return"yyyy-mm-dd"},parseValue:function(G){if(F.isNumber(G)){return new Date(G)}return E.parse(G)},isCurrentValue:function(G){return E.isEquals(G,this.get("value"))},_uiSetMax:function(H){this.addRule("max",H);var G=this,I=G.get("datePicker");if(I&&I.set){I.set("maxDate",H)}},_uiSetMin:function(H){this.addRule("min",H);var G=this,I=G.get("datePicker");if(I&&I.set){I.set("minDate",H)}}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:true}},max:{},min:{},value:{setter:function(G){if(F.isNumber(G)){return new Date(G)}return G}},datePicker:{value:{}},isCreatePicker:{value:true}},PARSER:{datePicker:function(G){if(G.hasClass("calendar-time")){return{showTime:true}}return{}}}},{xclass:"form-field-date"});return A});define("bui/form/checkfield",["bui/form/basefield"],function(C){var B=C("bui/form/basefield");var A=B.extend({onValid:function(){var D=this,E=D._getControlChecked();D.setInternal("checked",E);D.fire("change");if(E){D.fire("checked")}else{D.fire("unchecked")}},_setControlChecked:function(F){var D=this,E=D.getInnerControl();E.attr("checked",!!F)},_getControlChecked:function(){var D=this,E=D.getInnerControl();return !!E.attr("checked")},_uiSetValue:function(D){},_uiSetChecked:function(E){var D=this;D._setControlChecked(E);if(D.get("rendered")){D.onValid()}}},{ATTRS:{validEvent:{value:"click"},checked:{value:false},events:{value:{"checked":false,"unchecked":false}}},PARSER:{checked:function(D){return !!D.attr("checked")}}},{xclass:"form-check-field"});return A});define("bui/form/checkboxfield",["bui/form/checkfield"],function(C){var B=C("bui/form/checkfield");var A=B.extend({},{ATTRS:{controlTpl:{view:true,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});return A});define("bui/form/radiofield",["bui/form/checkfield"],function(C){var B=C("bui/form/checkfield");var A=B.extend({bindUI:function(){var D=this,F=D.get("parent"),E=D.get("name");if(F){D.getInnerControl().on("click",function(G){var H=F.getFields(E);BUI.each(H,function(I){if(I!=D){I.set("checked",false)}})})}}},{ATTRS:{controlTpl:{view:true,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});return A});define("bui/form/plainfield",["bui/form/basefield"],function(C){var A=C("bui/form/basefield");var B=A.View.extend({_uiSetValue:function(H){var J=this,F=J.get("textEl"),K=J.getControlContainer(),G=J.get("renderer"),I=G?G(H):H,L=J.get("width"),M=0,E;if(F){F.remove()}I=I||"&nbsp;";E=BUI.substitute(J.get("textTpl"),{text:I});F=$(E).appendTo(K);M=F.outerWidth()-F.width();F.width(L-M);J.set("textEl",F)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"});var D=A.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:true,value:'<span class="x-form-text">{text}</span>'},renderer:{view:true,value:function(E){return E}},tpl:{value:""},xview:{value:B}}},{xclass:"form-field-plain"});return D});define("bui/form/listfield",["bui/common","bui/form/basefield","bui/list"],function(B){var D=B("bui/common"),A=B("bui/list"),C=B("bui/form/basefield");var A=C.extend({initializer:function(){var E=this;E._initList()},_getList:function(){var E=this,F=E.get("children");return F[0]},bindUI:function(){var E=this,F=E._getList();if(F){F.on("selectedchange",function(){var G=E._getListValue(F);E.set("value",G)})}},_getListValue:function(F){var E=this;F=F||E._getList();return F.getSelectionValues().join(",")},setControlValue:function(H){var E=this,F=E.getInnerControl(),G=E._getList();F.val(H);if(E._getListValue(G)!==H&&G.getCount()){if(G.get("multipleSelect")){G.clearSelection()}G.setSelectionByField(H.split(","))}},syncUI:function(){this.set("list",this._getList())},_initList:function(){var E=this,G=E.get("children"),F=E.get("list")||{};if(G[0]){return}if($.isPlainObject(F)){F.xclass=F.xclass||"simple-list"}G.push(F)},setItems:function(H){var E=this,F=E.get("value"),G=E._getList();G.set("items",H);G.setSelectionByField(F.split(","))},_uiSetItems:function(E){if(E){this.setItems(E)}}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},items:{setter:function(F){if($.isPlainObject(F)){var E=[];D.each(F,function(G,H){E.push({value:H,text:G})});F=E}return F}},list:{}}},{xclass:"form-field-list"});return A});(function(){var A="bui/form/";define(A+"field",["bui/common",A+"textfield",A+"datefield",A+"selectfield",A+"hiddenfield",A+"numberfield",A+"checkfield",A+"radiofield",A+"checkboxfield",A+"plainfield"],function(C){var D=C("bui/common"),B=C(A+"basefield");D.mix(B,{Text:C(A+"textfield"),Date:C(A+"datefield"),Select:C(A+"selectfield"),Hidden:C(A+"hiddenfield"),Number:C(A+"numberfield"),Check:C(A+"checkfield"),Radio:C(A+"radiofield"),Checkbox:C(A+"checkboxfield"),Plain:C(A+"plainfield"),List:C(A+"listfield")});return B})})();define("bui/form/valid",["bui/common","bui/form/rules"],function(B){var E=B("bui/common"),C=B("bui/form/rules");var A=function(){};A.prototype={getErrorsContainer:function(){var F=this,G=F.get("errorContainer");if(G){if(E.isString(G)){return F.get("el").find(G)}return G}return F.getContentElement()},showErrors:function(G){var F=this,I=F.getErrorsContainer(),H=F.get("errorTpl");F.clearErrors();if(!F.get("showError")){return}if(F.get("showOneError")){if(G&&G.length){F.showError(G[0],H,I)}return}E.each(G,function(J){if(J){F.showError(J,H,I)}})},showError:function(H,G,F){},clearErrors:function(){}};var D=function(){};D.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{value:{}},messages:{value:{}},validator:{},errorContainer:{view:true},errorTpl:{view:true,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:true,value:true},showOneError:{},error:{}};D.prototype={isValid:function(){},valid:function(){},validControl:function(){},validRules:function(H,J){var F=this,G=F._getValidMessages(),K=null;for(var I in H){if(H.hasOwnProperty(I)){var L=H[I];K=C.valid(I,J,L,G[I],F);if(K){break}}}return K},_getValidMessages:function(){var F=this,H=F.get("defaultMessages"),G=F.get("messages");return E.merge(H,G)},getValidError:function(H){var F=this,I=F.get("validator"),G=null;G=F.validRules(F.get("defaultRules"),H)||F.validRules(F.get("rules"),H);if(!G){if(F.parseValue){H=F.parseValue(H)}G=I?I.call(this,H):""}return G},getErrors:function(){},showErrors:function(G){var F=this,G=G||F.getErrors();F.get("view").showErrors(G)},clearErrors:function(){var F=this,G=F.get("children");E.each(G,function(H){H.clearErrors&&H.clearErrors()});F.set("error",null);F.get("view").clearErrors()},addRule:function(I,J,K){var F=this,H=F.get("rules"),G=F.get("messages");H[I]=J;if(K){G[I]=K}},addRules:function(H,G){var F=this;E.each(H,function(J,I){var K=G?G[I]:null;F.addRule(I,J,K)})},removeRule:function(H){var F=this,G=F.get("rules");delete G[H]},clearRules:function(){var F=this;F.set("rules",{})}};D.View=A;return D});define("bui/form/groupvalid",["bui/form/valid"],function(C){var D="x-form-error",E=C("bui/form/valid");function B(){}BUI.augment(B,E.View,{showError:function(J,I,G){var H=BUI.substitute(I,{error:J}),F=$(H);F.appendTo(G);F.addClass(D)},clearErrors:function(){var F=this,G=F.getErrorsContainer();G.children("."+D).remove()}});function A(){}A.ATTRS=ATTRS=BUI.merge(true,E.ATTRS,{events:{value:{validchange:true,change:true}}});BUI.augment(A,E,{__bindUI:function(){var F=this,G="validchange change";F.on(G,function(J){var H=J.target;if(H!=this&&F.get("showError")){var I=F.isChildrenValid();if(I){F.validControl(F.getRecord());I=F.isSelfValid()}if(!I){F.showErrors()}else{F.clearErrors()}}})},isValid:function(){var F=this,G=F.isChildrenValid();return G&&F.isSelfValid()},valid:function(){var F=this,G=F.get("children");BUI.each(G,function(H){H.valid()})},isChildrenValid:function(){var F=this,H=F.get("children"),G=true;BUI.each(H,function(I){if(!I.isValid()){G=false;return false}});return G},isSelfValid:function(){return !this.get("error")},validControl:function(G){var F=this,H=F.getValidError(G);F.set("error",H)},getErrors:function(){var F=this,J=F.get("children"),H=F.get("showChildError"),G=null,I=[];if(H){BUI.each(J,function(K){if(K.getErrors){I=I.concat(K.getErrors())}})}if(F.isChildrenValid()){G=F.get("error");if(G){I.push(G)}}return I},_uiSetErrorTpl:function(G){var F=this,H=F.get("children");BUI.each(H,function(I){I.set("errorTpl",G)})}});A.View=B;return A});define("bui/form/fieldcontainer",["bui/common","bui/form/field","bui/form/groupvalid"],function(F){var M=F("bui/common"),J=F("bui/form/field"),D=F("bui/form/groupvalid"),A=M.prefix;var G="form-field",K=A+G,B=A+"form-group",H="input,select,textarea";function E(N){return N.is(H)}function C(N,Q){if(N!=Q){if(E(N)){return[N]}var P=N.attr("class");if(P&&(P.indexOf(B)!==-1||P.indexOf(K)!==-1)){return[N]}}var O=[],R=N.children();M.each(R,function(T){O=O.concat(C($(T),Q))});return O}var L=M.Component.View.extend([D.View]);var I=M.Component.Controller.extend([D],{syncUI:function(){var N=this,P=N.getFields(),O=N.get("validators");M.each(P,function(R){var Q=R.get("name");if(O[Q]){R.set("validator",O[Q])}});M.each(O,function(T,Q){if(Q.indexOf("#")==0){var U=Q.replace("#",""),R=N.getChild(U,true);if(R){R.set("validator",T)}}})},getDecorateElments:function(){var N=this,O=N.get("el");var P=C(O,O);return P},findXClassByNode:function(O,N){if(O.attr("type")==="checkbox"){return G+"-checkbox"}if(O.attr("type")==="radio"){return G+"-radio"}if(O.attr("type")==="number"){return G+"-number"}if(O.hasClass("calendar")){return G+"-date"}if(O[0].tagName=="SELECT"){return G+"-select"}if(E(O)){return G}return M.Component.Controller.prototype.findXClassByNode.call(this,O,N)},getRecord:function(){var N=this,O={},P=N.getFields();M.each(P,function(U){var T=U.get("name"),Q=N._getFieldValue(U);if(!O[T]){O[T]=Q}else{if(M.isArray(O[T])&&Q!=null){O[T].push(Q)}else{if(Q!=null){var R=[O[T]];R.push(Q);O[T]=R}}}});return O},getFields:function(P){var N=this,O=[],Q=N.get("children");M.each(Q,function(R){if(R instanceof J){if(!P||R.get("name")==P){O.push(R)}}else{if(R.getFields){O=O.concat(R.getFields(P))}}});return O},getField:function(P){var N=this,Q=N.getFields(),O=null;M.each(Q,function(R){if(R.get("name")===P){O=R;return false}});return O},getFieldAt:function(N){return this.getFields()[N]},setFieldValue:function(O,P){var N=this,Q=N.getFields(O);M.each(Q,function(R){N._setFieldValue(R,P)})},_setFieldValue:function(P,N){if(P.get("disabled")){return}if(P instanceof J.Check){var O=P.get("value");if(N&&(O===N||(M.isArray(N)&&M.Array.contains(O,N)))){P.set("checked",true)}else{P.set("checked",false)}}else{if(N==null){N=""}P.set("value",N)}},getFieldValue:function(P){var N=this,Q=N.getFields(P),O=[];M.each(Q,function(T){var R=N._getFieldValue(T);if(R){O.push(R)}});if(O.length===0){return null}if(O.length===1){return O[0]}return O},_getFieldValue:function(N){if(!(N instanceof J.Check)||N.get("checked")){return N.get("value")}return null},clearFields:function(){this.clearErrors();this.setRecord({})},setRecord:function(O){var N=this,P=N.getFields();M.each(P,function(R){var Q=R.get("name");N._setFieldValue(R,O[Q])})},updateRecord:function(O){var N=this,P=N.getFields();M.each(P,function(R){var Q=R.get("name");if(O.hasOwnProperty(Q)){N._setFieldValue(R,O[Q])}})},focus:function(){var N=this,P=N.getFields(),O=P[0];if(O){O.focus()}},_uiSetDisabled:function(O){var N=this,P=N.get("children");M.each(P,function(Q){Q.set("disabled",O)})}},{ATTRS:{record:{setter:function(N){this.setRecord(N)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:false},isDecorateChild:{value:true},xview:{value:L}}},{xclass:"form-field-container"});I.View=L;return I});define("bui/form/group/base",["bui/common","bui/form/fieldcontainer"],function(A){var C=A("bui/common"),D=A("bui/form/fieldcontainer");var B=D.extend({},{ATTRS:{label:{view:true},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});return B});define("bui/form/group/range",["bui/form/group/base"],function(B){var D=B("bui/form/group/base");function C(E,F,H){var G=E.get("allowEqual");if(G){return H<=F}return H<F}var A=D.extend({},{ATTRS:{rangeText:{value:"\u5f00\u59cb\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\uff01"},allowEqual:{value:true},validator:{value:function(K){var J=this,L=J.getFields(),F=true;for(var H=1;H<L.length;H++){var E=L[H],I=L[H-1],M,G;if(E&&I){M=E.get("value");G=I.get("value");if(!C(J,M,G)){F=false;break}}}if(!F){return J.get("rangeText")}return null}}}},{xclass:"form-group-range"});return A});define("bui/form/group/check",["bui/form/group/base"],function(A){var B=A("bui/form/group/base");function C(E){var F=E.getFieldAt(0);if(F){return F.get("name")}return""}var D=B.extend({bindUI:function(){var E=this;E.on("change",function(J){var G=C(E),F=E.get("range"),I=E.getRecord(),H=I[G],K=F[1];if(H&&H.length>=K){E._setFieldsEnable(G,false)}else{E._setFieldsEnable(G,true)}})},_setFieldsEnable:function(F,G){var E=this,H=E.getFields(F);BUI.each(H,function(I){if(G){I.enable()}else{if(!I.get("checked")){I.disable()}}})},_uiSetRange:function(E){this.addRule("checkRange",E)}},{ATTRS:{range:{setter:function(E){if(BUI.isString(E)||BUI.isNumber(E)){E=[parseInt(E)]}return E}}}},{xclass:"form-group-check"});return D});define("bui/form/group/select",["bui/form/group/base","bui/data"],function(C){var E=C("bui/form/group/base"),D=C("bui/data"),A=BUI.Component.UIBase.Bindable;function F(H){var I=[];BUI.each(H,function(J){I.push({text:J.text,value:J.id})});return I}var G=E.extend([A],{initializer:function(){var H=this,J=H.get("url"),I=H.get("store")||H._getStore();if(!I.isStore){I.autoLoad=true;if(J){I.url=J}I=new D.TreeStore(I);H.set("store",I)}},bindUI:function(){var H=this;H.on("change",function(M){var L=M.target;if(L!=H){var K=L,I=K.get("value"),J=H._getFieldIndex(K)+1;H._valueChange(I,J)}})},onLoad:function(I){var H=this,J=I?I.node:H.get("store").get("root");H._setFieldItems(J.level,J.children)},_getStore:function(){var H=this,I=H.get("type");if(I&&B[I]){return B[I]}return{}},_valueChange:function(L,J){var H=this,I=H.get("store");if(L){var K=I.findNode(L);if(!K){return}if(I.isLoaded(K)){H._setFieldItems(J,K.children)}else{I.loadNode(K)}}else{H._setFieldItems(J,[])}},_setFieldItems:function(I,K){var H=this,L=H.getFieldAt(I),J=F(K);if(L){L.setItems(J);H._valueChange(L.get("value"),I+1)}},_getFieldIndex:function(I){var H=this,J=H.getFields();return BUI.Array.indexOf(I,J)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"});var B={};G.addType=function(H,I){B[H]=I};G.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}});return G});define("bui/form/fieldgroup",["bui/common","bui/form/group/base","bui/form/group/range","bui/form/group/check","bui/form/group/select"],function(A){var C=A("bui/common"),B=A("bui/form/group/base");C.mix(B,{Range:A("bui/form/group/range"),Check:A("bui/form/group/check"),Select:A("bui/form/group/select")});return B});define("bui/form/form",["bui/common","bui/toolbar","bui/form/fieldcontainer"],function(C){var F=C("bui/common"),A=C("bui/toolbar").Bar,G=C("bui/form/fieldcontainer"),E=F.Component;var D=G.View.extend({_uiSetMethod:function(H){this.get("el").attr("method",H)},_uiSetAction:function(H){this.get("el").attr("action",H)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"});var B=G.extend({renderUI:function(){var H=this,J=H.get("buttonBar"),I;if($.isPlainObject(J)&&H.get("buttons")){I=F.merge(H.getDefaultButtonBarCfg(),J);J=new A(I);H.set("buttonBar",J)}},bindUI:function(){var H=this,I=H.get("el");I.on("submit",function(J){H.valid();if(!H.isValid()||H.onBeforeSubmit()===false){J.preventDefault()}})},getDefaultButtonBarCfg:function(){var H=this,I=H.get("buttons");return{autoRender:true,elCls:"toolbar",render:H.get("el"),items:I,defaultChildClass:"bar-item-button"}},submit:function(I){var H=this;H.valid();if(H.isValid()){if(H.onBeforeSubmit()==false){return}if(!I){H.get("el")[0].submit()}}},serializeToObject:function(){return F.FormHelper.serializeToObject(this.get("el")[0])},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var H=this,I=H.get("initRecord");H.setRecord(I)},resetTips:function(){var H=this,I=H.getFields();F.each(I,function(J){J.resetTip()})},destructor:function(){var H=this,I=H.get("buttonBar");if(I&&I.destroy){I.destroy()}},_uiSetInitRecord:function(H){this.setRecord(H)}},{ATTRS:{action:{view:true,value:""},allowTextSelection:{value:true},events:{value:{beforesubmit:false}},method:{view:true,value:"get"},decorateCfgFields:{value:{"method":true,"action":true}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:false},xview:{value:D},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});B.View=D;return B});define("bui/form/horizontal",["bui/common","bui/form/form"],function(B){var C=B("bui/common"),A=B("bui/form/form");var D=A.extend({getDefaultButtonBarCfg:function(){var E=this,F=E.get("buttons");return{autoRender:true,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:E.get("el"),items:F,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});return D});define("bui/form/row",["bui/common","bui/form/fieldcontainer"],function(B){var C=B("bui/common"),D=B("bui/form/fieldcontainer");var A=D.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>                <div class="controls">                </div>',childContainer:".controls",showOneError:true,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});return A});define("bui/form/rule",["bui/common"],function(C){var E=C("bui/common");var A=function(G){A.superclass.constructor.call(this,G)};E.extend(A,E.Base);A.ATTRS={name:{},msg:{},validator:{value:function(I,H,G,J){}}};function D(M,K,G,J,N){var L=M,O=L.get("validator"),H=F(M,G,J),I=true;K=K==null?"":K;return O.call(L,K,G,H,N)}function B(J){if(J==null){return{}}if($.isPlainObject(J)){return J}var I=J,H={};if(E.isArray(J)){for(var G=0;G<I.length;G++){H[G]=I[G]}return H}return{"0":J}}function F(G,I,J){var H=B(I);J=J||G.get("msg");return E.substitute(J,H)}E.augment(A,{valid:function(J,H,K,I){var G=this;return D(G,J,H,K,I)}});return A});define("bui/form/rules",["bui/form/rule"],function(X){var Z=X("bui/form/rule");function Q(c){return parseFloat(c)}function N(c){return BUI.Date.parse(c)}var C={};var H={add:function(c){var d;if($.isPlainObject(c)){d=c.name;C[d]=new Z(c)}else{if(c.get){d=c.get("name");C[d]=c}}return C[d]},remove:function(c){delete C[c]},get:function(c){return C[c]},valid:function(f,g,d,h,e){var c=H.get(f);if(c){return c.valid(g,d,h,e)}return null},isValid:function(d,e,c,f){return H.valid(d,e,c,f)==null}};var O=H.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(d,e,c){if(e!==false&&/^\s*$/.test(d)){return c}}});var I=H.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(f,e,d){var c=$(e);if(c.length){e=c.val()}return f===e?undefined:d}});var T=H.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,c,d){if(e!==""&&Q(e)<Q(c)){return d}}});var V=H.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(d,e,c){if(d!==""&&Q(d)>Q(e)){return c}}});var A=H.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(e,d,c){if(e!=null){e=$.trim(e.toString());if(d!=e.length){return c}}}});var P=H.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(f,c,d){if(f!=null){f=$.trim(f.toString());var e=f.length;if(e<c){return d}}}});var G=H.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(e,f,c){if(e){e=$.trim(e.toString());var d=e.length;if(d>f){return c}}}});var U=H.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(e,c,d){if(c){return c.test(e)?undefined:d}}});var b=H.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(e,d,c){e=$.trim(e);if(e){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)?undefined:c}}});var E=H.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(e,d,c){if(BUI.isNumber(e)){return}if(BUI.isDate(e)){return}e=$.trim(e);if(e){return BUI.Date.isDateString(e)?undefined:c}}});var W=H.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(e,c,d){if(e){var f=N(e);if(f&&f<N(c)){return d}}}});var D=H.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(e,d,c){if(e){var f=N(e);if(f&&f>N(d)){return c}}}});var L=H.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(e,d,c){if(BUI.isNumber(e)){return}e=e.replace(/\,/g,"");return !isNaN(e)?undefined:c}});function a(c,d,f){var e=c&&(c.equals!==false);if(e){return f<=d}return f<d}function J(c){return c==""||c==null}function Y(g,c,d,j){var m=j.getFields(),e=true;for(var h=1;h<m.length;h++){var f=m[h],k=m[h-1],n,l;if(f&&k){n=f.get("value");l=k.get("value");if(!J(n)&&!J(l)&&!a(c,n,l)){e=false;break}}}if(!e){return d}return null}var F=H.add({name:"dateRange",msg:"\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u8d77\u59cb\u65e5\u671f\uff01",validator:Y});var R=H.add({name:"numberRange",msg:"\u7ed3\u675f\u6570\u5b57\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u6570\u5b57\uff01",validator:Y});function K(c){var d=c.getFieldAt(0);if(d){return d.get("name")}return""}function M(e,g){if(!BUI.isArray(g)){g=[g]}if(!e||!g.length){return false}var d=!e?0:!BUI.isArray(e)?1:e.length;if(g.length==1){var h=g[0];if(!h){return true}if(h>d){return false}}else{var c=g[0],f=g[1];if(c>d||f<d){return false}}return true}var B=H.add({name:"checkRange",msg:"\u5fc5\u987b\u9009\u4e2d{0}\u9879\uff01",validator:function(e,d,c,h){var f=K(h),g,i=d;if(f&&i){g=e[f];if(!M(g,i)){return c}}return null}});return H});define("bui/form/remote",["bui/common"],function(B){var C=B("bui/common");var D=function(){};D.ATTRS={isLoading:{},loadingEl:{}};D.prototype={getLoadingContainer:function(){},_setLoading:function(){var E=this,F=E.get("loadingEl"),G=E.get("loadingTpl");if(!F){F=$(G).appendTo(E.getLoadingContainer());E.setInternal("loadingEl",F)}},_clearLoading:function(){var E=this,F=E.get("loadingEl");if(F){F.remove();E.setInternal("loadingEl",null)}},_uiSetIsLoading:function(F){var E=this;if(F){E._setLoading()}else{E._clearLoading()}}};var A=function(){};A.ATTRS={defaultRemote:{value:{method:"GET",cache:true,callback:function(E){return E}}},remoteDaly:{value:500},loadingTpl:{view:true,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:true,value:false},remote:{setter:function(E){if(C.isString(E)){E={url:E}}return E}},remoteHandler:{},events:{value:{remotecomplete:false,remotestart:false}}};A.prototype={__bindUI:function(){var E=this;E.on("change",function(F){if(E.get("remote")&&E.isValid()){var G=E.getRemoteParams();E._startRemote(G)}});E.on("error",function(F){if(E.get("remote")){E._cancelRemote()}})},_startRemote:function(I){var E=this,H=E.get("remoteHandler"),G=E.get("remoteDaly");if(H){E._cancelRemote(H)}function F(){E._remoteValid(I,H);E.set("isLoading",true)}H=setTimeout(F,G);E.setInternal("remoteHandler",H)},_remoteValid:function(K,J){var E=this,F=E.get("remote"),I=E.get("defaultRemote"),G=C.merge(I,F,{data:K});function H(L,M){if(J==E.get("remoteHandler")){E.fire("remotecomplete",{error:L,data:M});E.set("isLoading",false);E.setInternal("remoteHandler",null)}}G.success=function(N){var L=G.callback,M=L(N);H(M,N)};G.error=function(L,N,M){H(M)};E.fire("remotestart",{data:K});$.ajax(G)},getRemoteParams:function(){},_cancelRemote:function(F){var E=this;F=F||E.get("remoteHandler");if(F){clearTimeout(F);E.setInternal("remoteHandler",null)}E.set("isLoading",false)}};A.View=D;return A});define("bui/select",["bui/common","bui/select/select","bui/select/combox","bui/select/suggest"],function(A){var B=A("bui/common"),C=B.namespace("Select");B.mix(C,{Select:A("bui/select/select"),Combox:A("bui/select/combox"),Suggest:A("bui/select/suggest")});return C});define("bui/select/select",["bui/common","bui/picker"],function(C){var H=C("bui/common"),F=C("bui/picker").ListPicker,A=H.prefix;function D(L){if($.isPlainObject(L)){var J=[];H.each(L,function(N,M){J.push({value:M,text:N})});return J}var K=[];H.each(L,function(M,N){if(H.isString(M)){K.push({value:M,text:M})}else{K.push(M)}});return K}var I=H.Component,G=F,B=A+"select-input",E=I.Controller.extend({initializer:function(){var J=this,M=J.get("multipleSelect"),K,L=J.get("picker");if(!L){K=M?"listbox":"simple-list";L=new G({children:[{xclass:K,elCls:A+"select-list",store:J.get("store"),items:D(J.get("items"))}],valueField:J.get("valueField")});J.set("picker",L)}else{if(J.get("valueField")){L.set("valueField",J.get("valueField"))}}if(M){L.set("hideEvent","")}},renderUI:function(){var J=this,L=J.get("picker"),K=J.get("el"),M=K.find("."+J.get("inputCls"));L.set("trigger",K);L.set("triggerEvent",J.get("triggerEvent"));L.set("autoSetValue",J.get("autoSetValue"));L.set("textField",M);if(J.get("forceFit")){L.set("width",K.outerWidth())}L.render()},bindUI:function(){var J=this,M=J.get("picker"),L=M.get("list"),K=L.get("store");M.on("selectedchange",function(N){J.fire("change",{text:N.text,value:N.value,item:N.item})});L.on("itemsshow",function(){J._syncValue()})},containsElement:function(K){var J=this,L=J.get("picker");return I.Controller.prototype.containsElement.call(this,K)||L.containsElement(K)},_uiSetItems:function(M){if(!M){return}var J=this,L=J.get("picker"),K=L.get("list");K.set("items",D(M));J._syncValue()},_syncValue:function(){var J=this,L=J.get("picker"),K=J.get("valueField");if(K){L.setSelectedValue($(K).val())}},_uiSetName:function(K){var J=this,L=J._getTextEl();if(K){L.attr("name",K)}},_uiSetWidth:function(L){var J=this;if(L!=null){var P=J._getTextEl(),O=J.get("el").find(".x-icon"),K=P.outerWidth()-P.width(),M=J.get("picker"),N=L-O.outerWidth()-K;P.width(N);if(J.get("forceFit")){M.set("width",L)}}},_getTextEl:function(){var J=this,K=J.get("el");return K.find("."+J.get("inputCls"))},destructor:function(){var J=this,K=J.get("picker");if(K){K.destroy()}},_getList:function(){var J=this,L=J.get("picker"),K=L.get("list");return K},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(L){var J=this,K=J.get("picker");K.setSelectedValue(L)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},valueField:{},store:{},focusable:{value:true},multipleSelect:{value:false},name:{},items:{sync:false},inputCls:{value:B},forceFit:{value:true},events:{value:{"change":false}},tpl:{view:true,value:'<input type="text" readonly="readonly" class="'+B+'"/><span class="x-icon x-icon-normal"><span class="x-caret x-caret-down"></span></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});return E});define("bui/select/combox",["bui/common","bui/select/select"],function(C){var E=C("bui/common"),F=C("bui/select/select"),D=E.prefix+"combox-input";function B(K,I,G){var H=G.get("list"),J=G.getSelectedText();if(J){$(K).val(J)}}var A=F.extend({renderUI:function(){var G=this,H=G.get("picker");H.get("getFunction",B)},_uiSetItems:function(J){var G=this;for(var H=0;H<J.length;H++){var I=J[H];if(E.isString(I)){J[H]={value:I,text:I}}}A.superclass._uiSetItems.call(G,J)}},{ATTRS:{tpl:{view:true,value:'<input type="text" class="'+D+'"/>'},inputCls:{value:D}}},{xclass:"combox"});return A});define("bui/select/suggest",["bui/common","bui/select/combox"],function(D){var F=D("bui/common"),C=D("bui/select/combox"),E=200,B="";var A=C.extend({bindUI:function(){var G=this,I=G.get("el").find("input"),H=(G.get("triggerEvent")==="keyup")?"keyup":"keyup click";I.on(H,function(){G._start()})},_start:function(){var G=this;G._timer=G.later(function(){G._updateContent()},E)},_updateContent:function(){var L=this,J=L.get("data"),H=L.get("el").find("input"),K;if(!J&&(H.val()===L.get("query"))){return}L.set("query",H.val());K=H.val();if(!J&&!K){return}var N=L.get("cacheable"),M=L.get("url"),I=L.get("data");if(N&&M){var G=L.get("dataCache");if(G[K]!==undefined){L._handleResponse(G[K])}else{L._requestData()}}else{if(M){L._requestData()}else{if(I){L._handleResponse(I,true)}}}},_getStore:function(){var G=this,I=G.get("picker"),H=I.get("list");if(H){return H.get("store")}},_requestData:function(){var G=this,K=G.get("el").find("input"),J=G.get("callback"),H=G.get("store"),I={};I[K.attr("name")]=K.val();if(H){I.start=0;H.load(I,J)}else{$.ajax({url:G.get("url"),type:"post",dataType:G.get("dataType"),data:I,success:function(L){G._handleResponse(L);if(J){J(L)}}})}},_handleResponse:function(J,H){var G=this,I=H?G._getFilterItems(J):J;G.set("items",I);if(G.get("cacheable")){G.get("dataCache")[G.get("query")]=I}},_getItemText:function(I){var G=this,J=G.get("picker"),H=J.get("list");if(H){return H.getItemText(I)}return""},_getFilterItems:function(M){var G=this,I=[],H=G.get("el").find("input"),J=H.val(),K=G.get("data");M=M||[];function L(O,N){if(F.isString(N)){I.push(O)}else{I.push(N)}}F.each(M,function(N){var O=F.isString(N)?N:G._getItemText(N);if(K){if(O.indexOf($.trim(J))!==-1){L(O,N)}}else{L(O,N)}});return I},later:function(H,J,I){J=J||0;var G=I?setInterval(H,J):setTimeout(H,J);return{id:G,interval:I,cancel:function(){if(this.interval){clearInterval(G)}else{clearTimeout(G)}}}}},{ATTRS:{data:{value:null},query:{value:B},cacheable:{value:false},dataCache:{value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){if(this.get("data")){return"click"}return"keyup"}},autoSetValue:{value:false}}},{xclass:"suggest"});return A});define("bui/mask",["bui/common","bui/mask/mask","bui/mask/loadmask"],function(A){var C=A("bui/common"),B=A("bui/mask/mask");B.LoadMask=A("bui/mask/loadmask");return B});define("bui/mask/mask",["bui/common"],function(B){var F=B("bui/common"),E=F.namespace("Mask"),C=F.UA,D=F.prefix+"ext-mask",A=D+"-msg";F.mix(E,{maskElement:function(H,J,M){var P=$(H),G=$("."+D,P),I=null,O=null,K=null,L=null;if(!G.length){G=$('<div class="'+D+'"></div>').appendTo(P);P.addClass("x-masked-relative x-masked");if(C.ie===6){G.height(P.height())}if(J){I=['<div class="'+A+'"><div>',J,"</div></div>"].join("");O=$(I).appendTo(P);if(M){O.addClass(M)}try{K=(P.height()-O.height())/2;L=(P.width()-O.width())/2;O.css({left:L,top:K})}catch(N){F.log("mask error occurred")}}}return G},unmaskElement:function(I){var H=$(I),J=H.children("."+A),G=H.children("."+D);if(J){J.remove()}if(G){G.remove()}H.removeClass("x-masked-relative x-masked")}});return E});define("bui/mask/loadmask",["bui/mask/mask"],function(A){var B=A("bui/mask/mask");function C(E){var D=this;C.superclass.constructor.call(D,E)}BUI.extend(C,BUI.Base);C.ATTRS={el:{},msg:{value:"Loading..."},msgCls:{value:"x-mask-loading"},disabled:{value:false}};BUI.augment(C,{disable:function(){this.set("disabled",true)},onLoad:function(){B.unmaskElement(this.get("el"))},onBeforeLoad:function(){var D=this;if(!D.get("disabled")){B.maskElement(D.get("el"),D.get("msg"),this.get("msgCls"))}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){this.hide();this.clearAttrVals();this.off()}});return C});define("bui/menu",["bui/common","bui/menu/menu","bui/menu/menuitem","bui/memu/contextmenu","bui/menu/popmenu","bui/menu/sidemenu"],function(A){var C=A("bui/common"),B=C.namespace("Menu");C.mix(B,{Menu:A("bui/menu/menu"),MenuItem:A("bui/menu/menuitem"),ContextMenu:A("bui/memu/contextmenu"),PopMenu:A("bui/menu/popmenu"),SideMenu:A("bui/menu/sidemenu")});B.ContextMenuItem=B.ContextMenu.Item;return B});define("bui/menu/menuitem",["bui/common"],function(E){var J=E("bui/common"),L=J.Component,F=L.UIBase,A=J.prefix,G=A+"menu-item-open",B="x-caret",K=A+"menu-item-collapsed",D="data-id";var C=L.View.extend([F.ListItemView,F.CollapseableView],{_uiSetOpen:function(O){var M=this,N=M.getStatusCls("open");if(O){M.get("el").addClass(N)}else{M.get("el").removeClass(N)}}},{ATTRS:{}},{xclass:"menu-item-view"});var H=L.Controller.extend([F.ListItem,F.Collapseable],{renderUI:function(){var M=this,N=M.get("el"),P=M.get("id"),O=null;if(!P){P=J.guid("menu-item");M.set("id",P)}N.attr(D,P)},handleMouseEnter:function(N){var M=this;if(this.get("subMenu")){this.set("open",true)}H.superclass.handleMouseEnter.call(this,N)},handleMouseLeave:function(P){var M=this,O=M.get("subMenu"),N=P.toElement;if(N&&O&&O.containsElement(N)){M.set("open",true)}else{M.set("open",false)}H.superclass.handleMouseLeave.call(this,P)},containsElement:function(O){var M=this,P,N=H.superclass.containsElement.call(M,O);if(!N){P=M.get("subMenu");N=P&&P.containsElement(O)}return N},_uiSetOpen:function(P){var M=this,Q=M.get("subMenu"),N=M.get("subMenuAlign");if(Q){if(P){N.node=M.get("el");Q.set("align",N);Q.show()}else{var O=Q.get("align");if(!O||O.node==M.get("el")){Q.hide()}}}},_uiSetSubMenu:function(O){if(O){var M=this,N=M.get("el"),P=M.get("parent");if(!O.get("parentMenu")){O.set("parentMenu",P);if(P.get("autoHide")){O.set("autoHide",false)}}$(M.get("arrowTpl")).appendTo(N)}},destructor:function(){var M=this,N=M.get("subMenu");if(N){N.destroy()}}},{ATTRS:{elTagName:{value:"li"},xview:{value:C},open:{view:true,value:false},subMenu:{view:true},subMenuAlign:{valueFn:function(M){return{points:["tr","tl"],offset:[-5,0]}}},arrowTpl:{value:'<span class="'+B+" "+B+'-left"></span>'},events:{value:{"afterOpenChange":true}}}},{xclass:"menu-item",priority:0});var I=H.extend({},{ATTRS:{focusable:{value:false},selectable:{value:false},handleMouseEvents:{value:false}}},{xclass:"menu-item-sparator"});H.View=C;H.Separator=I;return H});define("bui/menu/menu",["bui/common"],function(B){var E=B("bui/common"),D=E.Component,A=D.UIBase;var C=D.Controller.extend([A.ChildList],{bindUI:function(){var F=this;F.on("click",function(G){var H=G.target,I=F.get("multipleSelect");if(F!=H){if(!I&&F.get("clickHide")&&!H.get("subMenu")){F.getTopAutoHideMenu().hide()}}});F.on("afterOpenChange",function(I){var H=I.target,J=I.newVal,G=F.get("children");if(J){E.each(G,function(K){if(K!==H&&K.get("open")){K.set("open",false)}})}});F.on("afterVisibleChange",function(I){var G=I.newVal,H=F.get("parentMenu");F._clearOpen()})},getTopAutoHideMenu:function(){var F=this,H=F.get("parentMenu"),G;if(H&&H.get("autoHide")){return H.getTopAutoHideMenu()}if(F.get("autoHide")){return F}return null},_clearOpen:function(){var F=this,G=F.get("children");E.each(G,function(H){if(H.set){H.set("open",false)}})},findItemById:function(F){return this.findItemByField("id",F)},_uiSetSelectedItem:function(F){if(F){_self.setSelected(F)}}},{ATTRS:{elTagName:{view:true,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"menu-item"},selectedItem:{},parentMenu:{}}},{xclass:"menu",priority:0});return C});define("bui/menu/popmenu",["bui/common","bui/menu/menu"],function(C){var F=C("bui/common"),E=F.Component.UIBase,D=C("bui/menu/menu");var B=F.Component.View.extend([E.PositionView],{});var A=D.extend([E.Position,E.Align,E.AutoShow,,E.AutoHide],{},{ATTRS:{clickHide:{value:true},align:{value:{points:["bl","tl"],offset:[0,0]}},visibleMode:{value:"visibility"},autoHide:{value:true},visible:{value:false},xview:{value:B}}},{xclass:"pop-menu"});return A});define("bui/memu/contextmenu",["bui/common","bui/menu/menuitem","bui/menu/popmenu"],function(E){var H=E("bui/common"),K=E("bui/menu/menuitem"),C=E("bui/menu/popmenu"),A=H.prefix,D=A+"menu-item-link",B=A+"menu-item-icon",J=H.Component,G=J.UIBase;var I=K.extend({bindUI:function(){var L=this;L.get("el").delegate("."+D,"click",function(M){M.preventDefault()})},_uiSetIconCls:function(N,P){var L=this,M=P.prevVal,O=L.get("el").find("."+B);O.removeClass(M);O.addClass(N)}},{ATTRS:{text:{veiw:true,value:""},iconCls:{sync:false,value:""},tpl:{value:'<a class="'+D+'" href="#">        <span class="'+B+' {iconCls}"></span><span class="'+A+'menu-item-text">{text}</span></a>'}}},{xclass:"context-menu-item"});var F=C.extend({},{ATTRS:{defaultChildClass:{value:"context-menu-item"},align:{value:null}}},{xclass:"context-menu"});F.Item=I;return F});define("bui/menu/sidemenu",["bui/common","bui/menu/menu"],function(C){var G=C("bui/common"),F=C("bui/menu/menu"),B=G.Component,D=G.prefix+"menu-title",A="menu-leaf";var E=F.extend({initializer:function(){var H=this,I=H.get("items"),J=H.get("children");G.each(I,function(L){var K=H._initMenuCfg(L);J.push(K)})},bindUI:function(){var H=this,I=H.get("children");G.each(I,function(J){var K=J.get("children")[0];if(K){K.publish("click",{bubbles:1})}});H.get("el").delegate("a","click",function(J){J.preventDefault()});H.on("itemclick",function(N){var L=N.item,M=$(N.domTarget).closest("."+D);if(M.length){var O=L.get("parent").get("children");for(var J=0;J<O.length;J++){var K=O[J];if(K.get("id")==L.get("id")){K.set("collapsed",false)}else{K.set("collapsed",true)}}}else{if(L.get("el").hasClass(A)){H.fire("menuclick",{item:L});H.clearSelection();H.setSelected(L)}}})},getItems:function(){var H=this,I=[],J=H.get("children");G.each(J,function(K){var L=K.get("children")[0];I=I.concat(L.get("children"))});return I},_initMenuCfg:function(K){var H=this,L=K.items,J=[],I={xclass:"menu-item",elCls:"menu-second",collapsed:K.collapsed,selectable:false,children:[{xclass:"menu",children:J}],content:'<div class="'+D+'"><s></s><span class="'+D+'-text">'+K.text+"</span></div>"};G.each(L,function(M){var N=H._initSubMenuCfg(M);J.push(N)});return I},_initSubMenuCfg:function(H){var I=this,J={xclass:"menu-item",elCls:"menu-leaf",tpl:'<a href="{href}"><em>{text}</em></a>'};return G.mix(J,H)}},{ATTRS:{autoInitItems:{value:false},events:{value:{"menuclick":false}}}},{xclass:"side-menu"});return E});define("bui/tab",["bui/common","bui/tab/tab","bui/tab/tabitem","bui/tab/navtabitem","bui/tab/navtab","bui/tab/tabpanel","bui/tab/tabpanelitem"],function(A){var B=A("bui/common"),C=B.namespace("Tab");B.mix(C,{Tab:A("bui/tab/tab"),TabItem:A("bui/tab/tabitem"),NavTabItem:A("bui/tab/navtabitem"),NavTab:A("bui/tab/navtab"),TabPanel:A("bui/tab/tabpanel"),TabPanelItem:A("bui/tab/tabpanelitem")});return C});define("bui/tab/navtabitem",["bui/common"],function(B){var G=B("bui/common"),I=G.Component,H="tab-item-title",E="tab-item-close",C="tab-nav-actived",D="tab-content";var F=I.View.extend({renderUI:function(){var J=this,K=J.get("tabContentContainer"),M=J.get("tabContentTpl");if(K){var L=$(M).appendTo(K);J.set("tabContentEl",L)}},_uiSetHref:function(J){this._setHref(J)},_setHref:function(J){var L=this,K=L.get("tabContentEl");J=J||L.get("href");if(K){$("iframe",K).attr("src",J)}},resetHref:function(){this._setHref()},_uiSetTitle:function(L){var J=this,K=J.get("el");K.attr("title",L);$("."+H,K).text(L)},_uiSetActived:function(L){var J=this,K=J.get("el");J.setTabContentVisible(L);if(L){K.addClass(C)}else{K.removeClass(C)}},destructor:function(){var J=this,K=J.get("tabContentEl");if(K){K.remove()}},setTabContentVisible:function(L){var J=this,K=J.get("tabContentEl");if(K){if(L){K.show()}else{K.hide()}}}},{ATTRS:{tabContentContainer:{},tabContentEl:{},title:{},href:{}}});var A=I.Controller.extend({createDom:function(){var J=this,K=J.get("parent");if(K){J.set("tabContentContainer",K.getTabContentContainer())}},bindUI:function(){var J=this,K=J.get("el"),L=J.get("events");K.on("click",function(N){var M=$(N.target);if(M.hasClass(E)){if(J.fire("closing")!==false){J.close()}}})},handleDblClick:function(K){var J=this;if(J.fire("closing")!==false){J.close()}J.fire("dblclick",{domTarget:K.target,domEvent:K})},handleContextMenu:function(J){J.preventDefault();this.fire("showmenu",{position:{x:J.pageX,y:J.pageY}})},setTitle:function(J){this.set("title",J)},close:function(){this.fire("closed")},reload:function(){this.get("view").resetHref()},show:function(){var J=this;J.get("el").show(500,function(){J.set("visible",true)})},hide:function(J){var K=this;this.get("el").hide(500,function(){K.set("visible",false);J&&J()})},_uiSetActived:function(K){var J=this,L=J.get("parent");if(L&&K){L._setItemActived(J)}},_uiSetCloseable:function(L){var J=this,K=J.get("el"),M=K.find("."+E);if(L){M.show()}else{M.hide()}}},{ATTRS:{elTagName:{value:"li"},actived:{view:true,value:false},closeable:{value:true},allowTextSelection:{view:false,value:false},events:{value:{"click":true,"closing":true,"closed":true,"showmenu":true,"afterVisibleChange":true}},tabContentContainer:{view:true},tabContentTpl:{view:true,value:'<div class="'+D+'" style="display:none;"><iframe src="" width="100%" height="100%" frameborder="0"></iframe></div>'},href:{view:true,value:""},visible:{view:true,value:true},title:{view:true,value:""},tpl:{view:true,value:'<span class="'+H+'"></span><s class="'+E+'"></s>'},xview:{value:F}}},{xclass:"nav-tab-item",priority:0});A.View=F;return A});define("bui/tab/navtab",["bui/common","bui/menu"],function(C){var I=C("bui/common"),A=C("bui/menu"),J=I.Component,H="tab-nav-list",G="arrow-left",E="arrow-right",D="m_close",K=140;var F=J.View.extend({renderUI:function(){var L=this,M=L.get("el"),N=null;N=M.find("."+H);L.setInternal("listEl",N)},getContentElement:function(){return this.get("listEl")},getTabContentContainer:function(){return this.get("el").find(".tab-content-container")},_uiSetHeight:function(O){var L=this,N=L.get("el"),P=N.find(".tab-nav-bar"),M=L.getTabContentContainer();if(O){M.height(O-P.height())}N.height(O)}},{},{xclass:"nav-tab-view",priority:0});var B=J.Controller.extend({addTab:function(N,O){var L=this,Q=N.id||I.guid("tab-item"),M=L.getItemById(Q);if(M){var P=false;if(N.href&&M.get("href")!=N.href){M.set("href",N.href);P=true}L._setItemActived(M);if(O&&!P){M.reload()}}else{N=I.mix({id:Q,visible:false,actived:true,xclass:"nav-tab-item"},N);M=L.addChild(N);M.show();L._resetItemList()}return M},getTabContentContainer:function(){return this.get("view").getTabContentContainer()},bindUI:function(){var L=this;L._bindScrollEvent();L.on("click",function(N){var M=N.target;if(M!=L){L._setItemActived(M);L.fire("itemclick",{item:M})}});L.on("closed",function(N){var M=N.target;L._closeItem(M)});L.on("showmenu",function(M){L._showMenu(M.target,M.position)});L.on("afterVisibleChange",function(N){var M=N.target;if(M.get("actived")){L._scrollToItem(M)}})},_bindScrollEvent:function(){var L=this,M=L.get("el");M.find(".arrow-left").on("click",function(){if(M.hasClass(G+"-active")){L._scrollLeft()}});M.find(".arrow-right").on("click",function(){if(M.hasClass(E+"-active")){L._scrllRight()}})},_showMenu:function(N,L){var M=this,Q=M._getMenu(),P=N.get("closeable"),O;M.set("showMenuItem",N);Q.set("xy",[L.x,L.y]);Q.show();O=Q.getItem(D);if(O){O.set("disabled",!P)}},setActived:function(N){var L=this,M=L.getItemById(N);L._setItemActived(M)},getActivedItem:function(){var L=this,N=L.get("children"),M=null;I.each(N,function(O){if(O.get("actived")){M=O;return false}});return M},getItemById:function(O){var L=this,M=L.get("children"),N=null;I.each(M,function(P){if(P.get("id")===O){N=P;return false}});return N},_getMenu:function(){var L=this;return L.get("menu")||L._initMenu()},_initMenu:function(){var L=this,M=new A.ContextMenu({children:[{xclass:"context-menu-item",iconCls:"icon icon-refresh",text:"\u5237\u65b0",listeners:{"click":function(){var N=L.get("showMenuItem");if(N){N.reload()}}}},{id:D,xclass:"context-menu-item",iconCls:"icon icon-remove",text:"\u5173\u95ed",listeners:{"click":function(){var N=L.get("showMenuItem");if(N){N.close()}}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u5176\u4ed6",listeners:{"click":function(){var N=L.get("showMenuItem");if(N){L.closeOther(N)}}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u6240\u6709",listeners:{"click":function(){L.closeAll()}}}]});L.set("menu",M);return M},_closeItem:function(O){var L=this,P=L._getIndex(O),N=L.getActivedItem(),Q=L._getItemByIndex(P-1),M=L._getItemByIndex(P+1);O.hide(function(){L.removeChild(O,true);L._resetItemList();if(N===O){if(Q){L._setItemActived(Q)}else{L._setItemActived(M)}}else{L._scrollToItem(N)}})},closeAll:function(){var L=this,M=L.get("children");I.each(M,function(N){N.close()})},closeOther:function(L){var M=this,N=M.get("children");I.each(N,function(O){var P=O.get("closeable");if(L!==O&&P){O.close()}})},_getItemByIndex:function(M){var L=this,N=L.get("children");return N[M]},_getIndex:function(M){var L=this,N=L.get("children");return I.Array.indexOf(M,N)},_resetItemList:function(){var L=this,O=L.get("children"),N=L.getContentElement(),M=O.length*K;N.width(M)},_scrollToItem:function(T){var P=this,Q=P.getContentElement(),R=Q.position(),N=P._getDistanceToEnd(T,Q,R),L=P._getDistanceToBegin(T,R);if(Q.width()<Q.parent().width()){P._scrollTo(Q,0)}else{if(L<0){P._scrollTo(Q,R.left-(L))}else{if(N>0){P._scrollTo(Q,R.left+(N)*-1)}else{if(R.left<0){var O=P._getLastDistance(Q,R),M=0;if(O<0){M=R.left-O;M=M<0?M:0;P._scrollTo(Q,M)}}}}}},_getDistanceToBegin:function(M,N){if(M&&M.get("el")){var L=M.get("el").position();return L.left+N.left}else{return}},_getDistanceToEnd:function(O,R,P){var L=this,R=R||L.getContentElement(),M=R.parent().width(),P=P||R.position(),N=L._getDistanceToBegin(O,P),Q=N+K-M;return Q},_getLastDistance:function(M,O){var L=this,P=L.get("children"),N=P[P.length-1];if(N){return L._getDistanceToEnd(N,M,O)}return 0},_scrollTo:function(L,M,O){var N=this;L.animate({left:M},500,function(){N._setArrowStatus(L)})},_scrollLeft:function(){var L=this,M=L.getContentElement(),N=M.position(),P=L._getLastDistance(M,N),O;if(P>0){O=P>K?K:P;L._scrollTo(M,N.left-O)}},_scrllRight:function(){var L=this,M=L.getContentElement(),N=M.position(),O;if(N.left<0){O=N.left+K;O=O<0?O:0;L._scrollTo(M,O)}},_setArrowStatus:function(N,Q){N=N||this.getContentElement();var L=this,M=L.get("el"),O=Q||N.position(),P=L._getLastDistance(N,Q);if(O.left<0){M.addClass(E+"-active")}else{M.removeClass(E+"-active")}if(P>0){M.addClass(G+"-active")}else{M.removeClass(G+"-active")}},_setItemActived:function(M){var L=this,N=L.getActivedItem();if(M===N){return}if(N){N.set("actived",false)}if(M){if(!M.get("actived")){M.set("actived",true)}if(M.get("visible")){L._scrollToItem(M)}L.fire("activeChange",{item:M})}}},{ATTRS:{defaultChildClass:{value:"nav-tab-item"},menu:{},tpl:{view:true,value:'<div class="tab-nav-bar"><s class="tab-nav-arrow arrow-left"></s><div class="tab-nav-wrapper"><div class="tab-nav-inner"><ul class="'+H+'"></ul></div></div><s class="tab-nav-arrow arrow-right"></s></div><div class="tab-content-container"></div>'},xview:{value:F},events:{value:{"itemclick":false}}}},{xclass:"nav-tab",priority:0});return B});define("bui/tab/tabitem",["bui/common"],function(C){var F=C("bui/common"),E=F.Component,B=E.UIBase;var A=E.View.extend([B.ListItemView],{},{xclass:"tab-item-view"});var D=E.Controller.extend([B.ListItem],{},{ATTRS:{elTagName:{view:true,value:"li"},xview:{value:A},tpl:{view:true,value:'<span class="bui-tab-item-text">{text}</span>'}}},{xclass:"tab-item"});D.View=A;return D});define("bui/tab/tab",["bui/common"],function(C){var E=C("bui/common"),D=E.Component,A=D.UIBase;var B=D.Controller.extend([A.ChildList],{},{ATTRS:{elTagName:{view:true,value:"ul"},defaultChildClass:{value:"tab-item"}}},{xclass:"tab"});return B});define("bui/tab/tabpanelitem",["bui/common","bui/tab/tabitem"],function(C){var F=C("bui/common"),B=C("bui/tab/tabitem"),E=F.Component;var A=B.View.extend({},{xclass:"tab-panel-item-view"});var D=B.extend({renderUI:function(){var G=this,H=G.get("selected");G._setPanelVisible(H)},_setPanelVisible:function(H){var G=this,I=G.get("panel"),J=H?"show":"hide";if(I){$(I)[J]()}},_uiSetSelected:function(G){this._setPanelVisible(G)},destructor:function(){var G=this,H=G.get("panel");if(H&&G.get("panelDestroyable")){$(H).remove()}},_uiSetPanelContent:function(H){var G=this,I=G.get("panel");$(I).html(H)}},{ATTRS:{panel:{},panelContent:{},defaultLoaderCfg:{valueFn:function(){var G=this;return{property:"panelContent",autoLoad:false,lazyLoad:{event:"afterSelectedChange"},loadMask:{el:G.get("panel")}}}},panelDestroyable:{value:true},xview:{value:A}}},{xclass:"tab-panel-item"});D.View=A;return D});define("bui/tab/tabpanel",["bui/common","bui/tab/tab"],function(A){var C=A("bui/common"),D=A("bui/tab/tab");var B=D.extend({initializer:function(){var E=this,I=E.get("children"),G=$(E.get("panelContainer")),F=E.get("panelCls"),H=F?G.find("."+H):G.children();C.each(I,function(J,K){if(J.set){J.set("panel",H[K])}else{J.panel=H[K]}})}},{ATTRS:{defaultChildClass:{value:"tab-panel-item"},panelContainer:{},panelCls:{}}},{xclass:"tab-panel"});return B});define("bui/toolbar",["bui/common","bui/toolbar/baritem","bui/toolbar/bar","bui/toolbar/pagingbar","bui/toolbar/numberpagingbar"],function(A){var C=A("bui/common"),B=C.namespace("Toolbar");C.mix(B,{BarItem:A("bui/toolbar/baritem"),Bar:A("bui/toolbar/bar"),PagingBar:A("bui/toolbar/pagingbar"),NumberPagingBar:A("bui/toolbar/numberpagingbar")});return B});define("bui/toolbar/baritem",function(){var A=BUI.prefix,I=BUI.Component,D=I.UIBase;var C=I.View.extend([D.ListItemView]);var G=I.Controller.extend([D.ListItem],{renderUI:function(){var J=this.get("el");J.addClass(A+"inline-block");if(!J.attr("id")){J.attr("id",this.get("id"))}}},{ATTRS:{elTagName:{view:true,value:"li"},selectable:{value:false},focusable:{value:false},xview:{value:C}}},{xclass:"bar-item",priority:1});var F=G.extend({_uiSetDisabled:function(M){var J=this,K=J.get("el"),L=M?"addClass":"removeClass";K.find("button").attr("disabled",M)[L](A+"button-disabled")},_uiSetChecked:function(M){var J=this,K=J.get("el"),L=M?"addClass":"removeClass";K.find("button")[L](A+"button-checked")},_uiSetText:function(L){var J=this,K=J.get("el");K.find("button").text(L)},_uiSetbtnCls:function(L){var J=this,K=J.get("el");K.find("button").addClass(L)}},{ATTRS:{checked:{value:false},tpl:{view:true,value:'<button type="button" class="{btnCls}">{text}</button>'},btnCls:{sync:false},text:{sync:false,value:""}}},{xclass:"bar-item-button",priority:2});var E=G.extend({renderUI:function(){var J=this.get("el");J.attr("role","separator")}},{xclass:"bar-item-separator",priority:2});var B=G.extend({},{ATTRS:{width:{view:true,value:2}}},{xclass:"bar-item-spacer",priority:2});var H=G.extend({_uiSetText:function(L){var J=this,K=J.get("el");K.html(L)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});G.types={"button":F,"separator":E,"spacer":B,"text":H};return G});define("bui/toolbar/bar",function(){var D=BUI.Component,C=D.UIBase;var B=D.View.extend({renderUI:function(){var E=this.get("el");E.attr("role","toolbar");if(!E.attr("id")){E.attr("id",BUI.guid("bar"))}}});var A=D.Controller.extend([C.ChildList],{getItem:function(E){return this.getChild(E)}},{ATTRS:{elTagName:{view:true,value:"ul"},defaultChildClass:{value:"bar-item"},focusable:{value:false},xview:{value:B}}},{xclass:"bar",priority:1});return A});define("bui/toolbar/pagingbar",["bui/toolbar/bar"],function(F){var H=F("bui/toolbar/bar"),N=BUI.Component,J=N.UIBase.Bindable;var A=BUI.prefix,G="first",B="prev",E="next",K="last",L="skip",D="totalPage",C="curPage",I="totalCount";var M=H.extend([J],{initializer:function(){var O=this,R=O.get("children"),Q=O.get("items"),P=O.get("store");if(!Q||Q.length){Q=O._getItems();BUI.each(Q,function(T){R.push(T)})}if(P&&P.get("pageSize")){O.set("pageSize",P.get("pageSize"))}},bindUI:function(){var O=this;O._bindButtonEvent()},jumpToPage:function(V){if(V<=0||V>this.get("totalPage")){return}var O=this,P=O.get("store"),Q=O.get("pageSize"),T=V-1,U=T*Q;var R=O.fire("beforepagechange",{from:O.get("curPage"),to:V});if(P&&R!==false){P.load({start:U,limit:Q,pageIndex:T})}},_afterStoreLoad:function(U,R){var V=this,T=V.get("pageSize"),O=0,Q,W,P,X;O=U.get("start");W=U.getTotalCount();Q=W-O>T?O+U.getCount():W;X=parseInt((W+T-1)/T,10);X=X>0?X:1;P=parseInt(O/T,10)+1;V.set("start",O);V.set("end",Q);V.set("totalCount",W);V.set("curPage",P);V.set("totalPage",X);V._setAllButtonsState();V._setNumberPages()},_bindButtonEvent:function(){var O=this;O._bindButtonItemEvent(G,function(){O.jumpToPage(1)});O._bindButtonItemEvent(B,function(){O.jumpToPage(O.get("curPage")-1)});O._bindButtonItemEvent(E,function(){O.jumpToPage(O.get("curPage")+1)});O._bindButtonItemEvent(K,function(){O.jumpToPage(O.get("totalPage"))});O._bindButtonItemEvent(L,function(){Q()});var P=O.getItem(C);if(P){P.get("el").on("keyup",function(R){R.stopPropagation();if(R.keyCode===13){Q()}})}function Q(){var R=parseInt(O._getCurrentPageValue(),10);if(O._isPageAllowRedirect(R)){O.jumpToPage(R)}else{O._setCurrentPageValue(O.get("curPage"))}}},_bindButtonItemEvent:function(R,P){var O=this,Q=O.getItem(R);if(Q){Q.on("click",P)}},onLoad:function(Q){var O=this,P=O.get("store");O._afterStoreLoad(P,Q)},_getItems:function(){var O=this,P=O.get("items");if(P&&P.length){return P}P=[];P.push(O._getButtonItem(G));P.push(O._getButtonItem(B));P.push(O._getSeparator());P.push(O._getTextItem(D));P.push(O._getTextItem(C));P.push(O._getButtonItem(L));P.push(O._getSeparator());P.push(O._getButtonItem(E));P.push(O._getButtonItem(K));P.push(O._getSeparator());P.push(O._getTextItem(I));return P},_getButtonItem:function(P){var O=this;return{id:P,xclass:"bar-item-button",text:O.get(P+"Text"),disabled:true,elCls:O.get(P+"Cls")}},_getSeparator:function(){return{xclass:"bar-item-separator"}},_getTextItem:function(P){var O=this;return{id:P,xclass:"bar-item-text",text:O._getTextItemTpl(P)}},_getTextItemTpl:function(Q){var O=this,P={};P[Q]=O.get(Q);return BUI.substitute(this.get(Q+"Tpl"),P)},_isPageAllowRedirect:function(P){var O=this;return P&&P>0&&P<=O.get("totalPage")&&P!==O.get("curPage")},_setAllButtonsState:function(){var O=this,P=O.get("store");if(P){O._setButtonsState([B,E,G,K,L],true)}if(O.get("curPage")===1){O._setButtonsState([B,G],false)}if(O.get("curPage")===O.get("totalPage")){O._setButtonsState([E,K],false)}},_setButtonsState:function(P,Q){var O=this,R=O.get("children");BUI.each(R,function(T){if(BUI.Array.indexOf(T.get("id"),P)!==-1){T.set("disabled",!Q)}})},_setNumberPages:function(){var O=this,P=O.getItem(D),Q=O.getItem(I);if(P){P.set("content",O._getTextItemTpl(D))}O._setCurrentPageValue(O.get(C));if(Q){Q.set("content",O._getTextItemTpl(I))}},_getCurrentPageValue:function(O){var P=this;O=O||P.getItem(C);var Q=O.get("el").find("input");return Q.val()},_setCurrentPageValue:function(Q,O){var P=this;O=O||P.getItem(C);var R=O.get("el").find("input");R.val(Q)}},{ATTRS:{firstText:{value:"\u9996 \u9875"},firstCls:{value:A+"pb-first"},prevText:{value:"\u4e0a\u4e00\u9875"},prevCls:{value:A+"pb-prev"},nextText:{value:"\u4e0b\u4e00\u9875"},nextCls:{value:A+"pb-next"},lastText:{value:"\u672b \u9875"},lastCls:{value:A+"pb-last"},skipText:{value:"\u786e\u5b9a"},skipCls:{value:A+"pb-skip"},totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c <input type="text" autocomplete="off" class="'+A+'pb-page" size="20" name="inputItem"> \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:G,ID_PREV:B,ID_NEXT:E,ID_LAST:K,ID_SKIP:L,ID_TOTAL_PAGE:D,ID_CURRENT_PAGE:C,ID_TOTAL_COUNT:I},{xclass:"pagingbar",priority:2});return M});define("bui/toolbar/numberpagingbar",["bui/toolbar/pagingbar"],function(D){var F=BUI.Component,G=D("bui/toolbar/pagingbar");var C=BUI.prefix,B="numberContainer",E=C+"button-number";var A=G.extend({_getItems:function(){var H=this,I=H.get("items");if(I){return I}I=[];I.push(H._getButtonItem(G.ID_PREV));I.push(H._getButtonItem(G.ID_NEXT));return I},_getButtonItem:function(I){var H=this;return{id:I,content:'<a href="javascript:;">'+H.get(I+"Text")+"</a>",disabled:true}},_bindButtonEvent:function(){var H=this,I=H.get("numberButtonCls");H.constructor.superclass._bindButtonEvent.call(this);H.get("el").delegate("a","click",function(J){J.preventDefault()});H.on("click",function(K){var J=K.target;if(J&&J.get("el").hasClass(I)){var L=J.get("id");H.jumpToPage(L)}})},_setNumberPages:function(){var H=this;H._setNumberButtons()},_setNumberButtons:function(){var H=this,K=H.get("curPage"),L=H.get("totalPage"),J=H._getNumberItems(K,L),I;H._clearNumberButtons();BUI.each(J,function(M){H._appendNumberButton(M)});I=H.getItem(K);if(I){I.set("selected",true)}},_appendNumberButton:function(K){var H=this,I=H.getItemCount();var J=H.addItemAt(K,I-1)},_clearNumberButtons:function(){var H=this,J=H.getItems(),I=H.getItemCount();while(I>2){H.removeItemAt(I-2);I=H.getItemCount()}},_getNumberItems:function(P,T){var Q=this,J=[],L=Q.get("maxLimitCount"),M=Q.get("showRangeCount"),R;function I(U,W){for(var V=U;V<=W;V++){J.push(Q._getNumberItem(V))}}function H(){J.push(Q._getEllipsisItem())}if(T<L){R=T;I(1,T)}else{var N=(P<=L)?1:(P-M),O=P+M,K=O<T?(O>L?O:L):T;if(N>1){I(1,1);if(N>2){H()}}R=K;I(N,K)}if(R<T){if(R<T-1){H()}I(T,T)}return J},_getEllipsisItem:function(){var H=this;return{disabled:true,content:H.get("ellipsisTpl")}},_getNumberItem:function(I){var H=this;return{id:I,elCls:H.get("numberButtonCls")}}},{ATTRS:{itemStatusCls:{value:{selected:"active",disabled:"disabled"}},itemTpl:{value:'<a href="">{id}</a>'},prevText:{value:"<<"},nextText:{value:">>"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:E},ellipsisTpl:{value:'<a href="#">...</a>'}}},{xclass:"pagingbar-number",priority:3});return A});define("bui/progressbar",["bui/common","bui/progressbar/base","bui/progressbar/load"],function(B){var C=B("bui/common"),A=C.namespace("ProgressBar");C.mix(A,{Base:B("bui/progressbar/base"),Load:B("bui/progressbar/load")});return A});define("bui/progressbar/base",["bui/common"],function(B){var D=B("bui/common");var C=D.Component.View.extend({_uiSetPercent:function(F){var E=this,G=E.get("el").children();if(!D.isArray(F)){F=[F]}D.each(G,function(H,I){$(H).width(F[I]+"%")})}},{ATTRS:{percent:{}}});var A=D.Component.Controller.extend({},{ATTRS:{percent:{view:true,value:0},tpl:{value:'<div class="progress-bar-inner"></div>'},xview:{value:C}}},{xclass:"progress-bar"});return A});define("bui/progressbar/load",["bui/progressbar/base"],function(C){var E=C("bui/progressbar/base"),B=0,F=1,A=2;var D=E.extend({bindUI:function(){var G=this;G.on("afterPercentChange",function(I){if(G.isLoading()){var H=G.get("percent");if(H==100){G.onCompleted()}G.onChange()}})},start:function(){var G=this;if(!G.isLoading()){G.onstart()}},complete:function(){var G=this;clearTimeout(G.get("t"));G.set("percent",100)},cancel:function(){var G=this;clearTimeout(G.get("t"));if(G.get("percent")){G.set("percent",0)}G.set("status",B)},onstart:function(){var G=this,H=G.get("cfg");G.set("percent",0);G.set("status",F);G.fire("start",H);G._startLoad()},onChange:function(){var G=this;G.fire("loadchange")},onCompleted:function(){var G=this;G.set("status",A);G.fire("completed")},isLoading:function(){return this.get("status")===F},isCompleted:function(){return this.get("status")===A},_startLoad:function(){var G=this,J=G.get("ajaxCfg"),H=G.get("interval"),I;J.success=function(L){var K=L.percent;G.set("percent",K);if(K<100&&G.isLoading()){I=setTimeout(function(){$.ajax(J)},H);G.set("t",I)}};$.ajax(J)}},{ATTRS:{status:{value:0},ajaxCfg:{},interval:{value:500},events:{value:["start","loadchange","completed"]}}},{xclass:"progress-bar-load"});return D});define("bui/calendar",["bui/common","bui/calendar/calendar","bui/calendar/monthpicker","bui/calendar/datepicker"],function(A){var B=A("bui/common"),C=B.namespace("Calendar");B.mix(C,{Calendar:A("bui/calendar/calendar"),MonthPicker:A("bui/calendar/monthpicker"),DatePicker:A("bui/calendar/datepicker")});return C});define("bui/calendar/monthpicker",["bui/common","bui/overlay","bui/list","bui/toolbar"],function(G){var P=G("bui/common"),L=P.Component,M=G("bui/overlay").Overlay,H=G("bui/list").SimpleList,B=G("bui/toolbar"),E=P.prefix,D="x-monthpicker-month",I="data-month",F="data-year",N="x-monthpicker-year",T="x-monthpicker-yearnav",K="x-monthpicker-selected",R="x-monthpicker-item",A=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"];function O(){return $.map(A,function(U,V){return{text:U,value:V}})}var J=H.extend({bindUI:function(){var U=this;U.get("el").delegate("a","click",function(V){V.preventDefault()}).delegate("."+D,"dblclick",function(){U.fire("dblclick")})}},{ATTRS:{itemTpl:{view:true,value:'<li class="'+R+' x-monthpicker-month"><a href="#" hidefocus="on">{text}</a></li>'},itemCls:{value:R},items:{view:true,value:O()},elCls:{view:true,value:"x-monthpicker-months"}}},{xclass:"calendar-month-panel"});var C=H.extend({bindUI:function(){var U=this,V=U.get("el");V.delegate("a","click",function(W){W.preventDefault()});V.delegate("."+N,"dblclick",function(){U.fire("dblclick")});V.delegate(".x-icon","click",function(X){var W=$(X.currentTarget);if(W.hasClass(T+"-prev")){U._prevPage()}else{if(W.hasClass(T+"-next")){U._nextPage()}}});U.on("itemselected",function(W){if(W.item){U.setInternal("year",W.item.value)}})},_prevPage:function(){var U=this,W=U.get("start"),V=U.get("yearCount");U.set("start",W-V)},_nextPage:function(){var U=this,W=U.get("start"),V=U.get("yearCount");U.set("start",W+V)},_uiSetStart:function(){var U=this;U._setYearsContent()},_uiSetYear:function(W){var U=this,V=U.findItemByField("value",W);if(V){U.setSelectedByField(W)}else{U.set("start",W)}},_setYearsContent:function(){var U=this,W=U.get("year"),a=U.get("start"),X=U.get("yearCount"),Y=[];for(var V=a;V<a+X;V++){var Z=V.toString();Y.push({text:Z,value:V})}U.set("items",Y);U.setSelectedByField(W)}},{ATTRS:{items:{view:true,value:[]},elCls:{view:true,value:"x-monthpicker-years"},itemCls:{value:R},year:{},start:{value:new Date().getFullYear()},yearCount:{value:10},itemTpl:{view:true,value:'<li class="'+R+" "+N+'"><a href="#" hidefocus="on">{text}</a></li>'},tpl:{view:true,value:'<div class="'+T+'"><span class="'+T+'-prev x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-left"></span></span><span class="'+T+'-next x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-right"></span></span></div><ul></ul>'}}},{xclass:"calendar-year-panel"});var Q=M.extend({initializer:function(){var U=this,Y=U.get("children"),V=new J(),X=new C(),W=U._createFooter();Y.push(V);Y.push(X);Y.push(W);U.set("yearPanel",X);U.set("monthPanel",V)},bindUI:function(){var U=this;U.get("monthPanel").on("itemselected",function(V){if(V.item){U.setInternal("month",V.item.value)}}).on("dblclick",function(){U._successCall()});U.get("yearPanel").on("itemselected",function(V){if(V.item){U.setInternal("year",V.item.value)}}).on("dblclick",function(){U._successCall()})},_successCall:function(){var U=this,V=U.get("success");if(V){V.call(U)}},_createFooter:function(){var U=this;return new B.Bar({elCls:E+"clear x-monthpicker-footer",children:[{xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",handler:function(){U._successCall()}},{xclass:"bar-item-button",text:"\u53d6\u6d88",btnCls:"button button-small last",handler:function(){var V=U.get("cancel");if(V){V.call(U)}}}]})},_uiSetYear:function(U){this.get("yearPanel").set("year",U)},_uiSetMonth:function(U){this.get("monthPanel").setSelectedByField(U)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});return Q});define("bui/calendar/header",["bui/common"],function(E){var H=E("bui/common"),A=H.prefix,J=H.Component,F="year-text",B="month-text",C="x-datepicker-arrow",G="x-datepicker-prev",D="x-datepicker-next";var I=J.Controller.extend({bindUI:function(){var K=this,L=K.get("el");L.delegate("."+C,"click",function(M){M.preventDefault();var N=$(M.currentTarget);if(N.hasClass(D)){K.nextMonth()}else{if(N.hasClass(G)){K.prevMonth()}}});L.delegate(".x-datepicker-month","click",function(){K.fire("headerclick")})},setMonth:function(M,L){var K=this,N=K.get("year"),O=K.get("month");if(M!==N||L!==O){K.set("year",M);K.set("month",L);K.fire("monthchange",{year:M,month:L})}},nextMonth:function(){var K=this,L=new Date(K.get("year"),K.get("month")+1);K.setMonth(L.getFullYear(),L.getMonth())},prevMonth:function(){var K=this,L=new Date(K.get("year"),K.get("month")-1);K.setMonth(L.getFullYear(),L.getMonth())},_uiSetYear:function(L){var K=this;K.get("el").find("."+F).text(L)},_uiSetMonth:function(L){var K=this;K.get("el").find("."+B).text(L+1)}},{ATTRS:{year:{sync:false},month:{sync:false,setter:function(K){this.set("monthText",K+1)}},monthText:{},tpl:{view:true,value:'<div class="'+C+" "+G+'"><span class="icon icon-white icon-caret  icon-caret-left"></span></div><div class="x-datepicker-month"><div class="month-text-container"><span><span class="year-text">{year}</span>\u5e74 <span class="month-text">{monthText}</span>\u6708</span><span class="'+A+"caret "+A+'caret-down"></span></div></div><div class="'+C+" "+D+'"><span class="icon icon-white icon-caret  icon-caret-right"></span></div>'},elCls:{view:true,value:"x-datepicker-header"},events:{value:{"monthchange":true}}}},{xclass:"calendar-header"});return I});define("bui/calendar/panel",["bui/common"],function(G){var M=G("bui/common"),P=M.Component,K=M.Date,O="x-datepicker-date",N="x-datepicker-today",A="x-datepicker-disabled",D="x-datepicker-active",J="data-date",F="isoDate",I="x-datepicker-selected",H=6,L={deactive:"prevday",active:"active",disabled:"disabled"},B=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var E=P.View.extend({renderUI:function(){this.updatePanel()},updatePanel:function(){var Q=this,T=Q.get("el"),U=T.find("tbody"),R=Q._getPanelInnerTpl();U.empty();$(R).appendTo(U)},_getPanelInnerTpl:function(){var Q=this,V=Q._getFirstDate(),T=[];for(var R=0;R<H;R++){var U=K.addWeek(R,V);T.push(Q._getWeekTpl(U))}return T.join("")},_getWeekTpl:function(V){var Q=this,T=Q.get("weekTpl"),U=[];for(var R=0;R<B.length;R++){var W=K.addDay(R,V);U.push(Q._getDayTpl(W))}return M.substitute(T,{daysTpl:U.join("")})},_getDayTpl:function(Y){var V=this,W=V.get("dayTpl"),T=Y.getDay(),U=V._isToday(Y)?N:"",X=B[T],R=Y.getDate(),Q=V._isInRange(Y)?(V._isCurrentMonth(Y)?L.active:L.deactive):L.disabled;return M.substitute(W,{dayOfWeek:X,dateType:Q,dateNumber:R,todayCls:U,date:K.format(Y,F)})},_getFirstDate:function(V,T){var Q=this,U=Q._getMonthFirstDate(V,T),R=U.getDay();return K.addDay(R*-1,U)},_getMonthFirstDate:function(T,R){var Q=this,T=T||Q.get("year"),R=R||Q.get("month");return new Date(T,R)},_isCurrentMonth:function(Q){return Q.getMonth()===this.get("month")},_isToday:function(R){var Q=new Date();return Q.getFullYear()===R.getFullYear()&&Q.getMonth()===R.getMonth()&&Q.getDate()===R.getDate()},_isInRange:function(T){var Q=this,R=Q.get("maxDate"),U=Q.get("minDate");if(U&&T<U){return false}if(R&&T>R){return false}return true},_clearSelectedDate:function(){var Q=this;Q.get("el").find("."+I).removeClass(I)},_findDateElement:function(V){var Q=this,U=K.format(V,F),R=Q.get("el").find("."+O),T=null;if(U){R.each(function(X,W){if($(W).attr("title")===U){T=$(W);return false}})}return T},_setSelectedDate:function(T){var Q=this,R=Q._findDateElement(T);Q._clearSelectedDate();if(R){R.addClass(I)}}},{ATTRS:{}});var C=P.Controller.extend({initializer:function(){var Q=this,R=new Date();if(!Q.get("year")){Q.set("year",R.getFullYear())}if(!Q.get("month")){Q.set("month",R.getMonth())}},bindUI:function(){var Q=this,R=Q.get("el");R.delegate("."+O,"click",function(T){T.preventDefault()});R.delegate("."+A,"mouseup",function(T){T.stopPropagation()})},performActionInternal:function(U){var Q=this,R=$(U.target).closest("."+O);if(R){var T=R.attr("title");if(T){T=K.parse(T);if(Q.get("view")._isInRange(T)){Q.set("selected",T)}}}},setMonth:function(T,R){var Q=this,U=Q.get("year"),V=Q.get("month");if(T!==U||R!==V){Q.set("year",T);Q.set("month",R);Q.get("view").updatePanel()}},_uiSetSelected:function(T,R){var Q=this;if(!(R&&R.prevVal&&K.isDateEquals(T,R.prevVal))){Q.setMonth(T.getFullYear(),T.getMonth());Q.get("view")._setSelectedDate(T);Q.fire("selectedchange",{date:T})}},_uiSetMaxDate:function(Q){if(Q){this.get("view").updatePanel()}},_uiSetMinDate:function(Q){if(Q){this.get("view").updatePanel()}}},{ATTRS:{year:{view:true},month:{view:true},selected:{},focusable:{value:true},dayTpl:{view:true,value:'<td class="x-datepicker-date x-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title="{date}"><a href="#" hidefocus="on" tabindex="1"><em><span>{dateNumber}</span></em></a></td>'},events:{value:{"click":false,"selectedchange":false}},maxDate:{view:true,setter:function(Q){if(Q){if(M.isString(Q)){return K.parse(Q)}return Q}}},minDate:{view:true,setter:function(Q){if(Q){if(M.isString(Q)){return K.parse(Q)}return Q}}},weekTpl:{view:true,value:"<tr>{daysTpl}</tr>"},tpl:{view:true,value:'<table class="x-datepicker-inner" cellspacing="0"><thead><tr><th  title="Sunday"><span>\u65e5</span></th><th  title="Monday"><span>\u4e00</span></th><th  title="Tuesday"><span>\u4e8c</span></th><th  title="Wednesday"><span>\u4e09</span></th><th  title="Thursday"><span>\u56db</span></th><th  title="Friday"><span>\u4e94</span></th><th  title="Saturday"><span>\u516d</span></th></tr></thead><tbody class="x-datepicker-body"></tbody></table>'},xview:{value:E}}},{xclass:"calendar-panel",priority:0});return C});define("bui/calendar/calendar",["bui/picker","bui/calendar/monthpicker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(T){var U=T("bui/common"),E=U.prefix,L="x-datepicker-time",R="x-datepicker-hour",J="x-datepicker-minute",N="x-datepicker-second",A="x-timepicker",H=T("bui/picker").ListPicker,M=T("bui/calendar/monthpicker"),B=T("bui/calendar/header"),I=T("bui/calendar/panel"),D=T("bui/toolbar"),P=U.Component,K=U.Date;function F(){var W=new Date();return new Date(W.getFullYear(),W.getMonth(),W.getDate())}function C(W){if(W<10){return"0"+W}return W.toString()}function O(Y){var X=[];for(var W=0;W<Y;W++){X.push({text:C(W),value:C(W)})}return X}function Q(X,Y){var W=X.get("el").find("."+Y);return parseInt(W.val())}function G(X,Y,Z){var W=X.get("el").find("."+Y);if(U.isNumber(Z)){Z=C(Z)}W.val(Z)}var V=P.Controller.extend({initializer:function(){var W=this,b=W.get("children"),Z=new B(),Y=new I(),X=W.get("footer")||W._createFooter(),a=W.get("monthPicker")||W._createMonthPicker();b.push(Z);b.push(Y);b.push(X);b.push(a);W.set("header",Z);W.set("panel",Y);W.set("footer",X);W.set("monthPicker",a)},renderUI:function(){var W=this,Y=W.get("children");if(W.get("showTime")){var X=W.get("timepicker")||W._initTimePicker();Y.push(X);W.set("timepicker",X)}},bindUI:function(){var W=this,X=W.get("header"),Y=W.get("panel");Y.on("selectedchange",function(Z){var a=Z.date;if(!K.isDateEquals(a,W.get("selectedDate"))){W.set("selectedDate",a)}});if(!W.get("showTime")){Y.on("click",function(){W.fire("accept")})}else{W._initTimePickerEvent()}X.on("monthchange",function(Z){W._setYearMonth(Z.year,Z.month)});X.on("headerclick",function(){var Z=W.get("monthPicker");Z.set("year",X.get("year"));Z.set("month",X.get("month"));Z.show()})},_initTimePicker:function(){var W=this,X=new H({elCls:A,children:[{itemTpl:'<li><a href="#">{text}</a></li>'}],autoAlign:false,align:{node:W.get("el"),points:["bl","bl"],offset:[0,-30]},trigger:W.get("el").find("."+L)});X.render();W._initTimePickerEvent(X);return X},_initTimePickerEvent:function(X){var W=this,X=W.get("timepicker");if(!X){return}X.get("el").delegate("a","click",function(Y){Y.preventDefault()});X.on("triggerchange",function(Z){var Y=Z.curTrigger;if(Y.hasClass(R)){X.get("list").set("items",O(24))}else{X.get("list").set("items",O(60))}});X.on("selectedchange",function(a){var Y=a.curTrigger,Z=a.value;if(Y.hasClass(R)){W.setInternal("hour",Z)}else{if(Y.hasClass(J)){W.setInternal("minute",Z)}else{W.setInternal("second",Z)}}})},_setYearMonth:function(Y,X){var W=this,Z=W.get("selectedDate"),a=Z.getDate();if(Y!==Z.getFullYear()||X!==Z.getMonth()){W.set("selectedDate",new Date(Y,X,a))}},_createMonthPicker:function(){var W=this;return new M({effect:{effect:"slide",duration:300},visibleMode:"display",success:function(){var X=this;W._setYearMonth(X.get("year"),X.get("month"));X.hide()},cancel:function(){this.hide()}})},_createFooter:function(){var W=this,X=this.get("showTime"),Y=[];if(X){Y.push({content:W.get("timeTpl")});Y.push({xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",listeners:{click:function(){W.fire("accept")}}})}else{Y.push({xclass:"bar-item-button",text:"\u4eca\u5929",btnCls:"button button-small",listeners:{click:function(){var Z=F();W.set("selectedDate",Z);W.fire("accept")}}})}return new D.Bar({elCls:E+"calendar-footer",children:Y})},_uiSetSelectedDate:function(Z){var W=this,Y=Z.getFullYear(),X=Z.getMonth();W.get("header").setMonth(Y,X);W.get("panel").set("selected",Z);W.fire("datechange",{date:Z})},_uiSetHour:function(W){G(this,R,W)},_uiSetMinute:function(W){G(this,J,W)},_uiSetSecond:function(W){G(this,N,W)},_uiSetMaxDate:function(X){var W=this;W.get("panel").set("maxDate",X)},_uiSetMinDate:function(X){var W=this;W.get("panel").set("minDate",X)}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{"click":false,"accept":false,"datechange":false,"monthchange":false}},showTime:{value:false},timeTpl:{value:'<input type="text" readonly class="'+L+" "+R+'" />:<input type="text" readonly class="'+L+" "+J+'" />:<input type="text" readonly class="'+L+" "+N+'" />'},selectedDate:{value:F()},hour:{value:new Date().getHours()},minute:{value:new Date().getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});return V});define("bui/calendar/datepicker",["bui/common","bui/picker","bui/calendar/calendar"],function(A){var E=A("bui/common"),B=A("bui/picker").Picker,F=A("bui/calendar/calendar"),C=E.Date;var D=B.extend({initializer:function(){var G=this,I=G.get("children"),H=new F({showTime:G.get("showTime")});I.push(H);G.set("calendar",H)},setSelectedValue:function(I){var G=this,H=this.get("calendar"),J=C.parse(I);J=J||new Date(new Date().setSeconds(0));H.set("selectedDate",C.getDate(J));if(G.get("showTime")){H.set("hour",J.getHours());H.set("minute",J.getMinutes());H.set("second",J.getSeconds())}},getSelectedValue:function(){var G=this,H=G.get("calendar"),I=C.getDate(H.get("selectedDate"));if(G.get("showTime")){I=C.addHour(H.get("hour"),I);I=C.addMinute(H.get("minute"),I);I=C.addSecond(H.get("second"),I)}return I},getSelectedText:function(){return C.format(this.getSelectedValue(),this._getFormatType())},_getFormatType:function(){if(this.get("showTime")){return"yyyy-mm-dd HH:MM:ss"}return"yyyy-mm-dd"},_uiSetMaxDate:function(H){var G=this;G.get("calendar").set("maxDate",H)},_uiSetMinDate:function(H){var G=this;G.get("calendar").set("minDate",H)}},{ATTRS:{showTime:{value:false},maxDate:{},minDate:{},changeEvent:{value:"accept"},hideEvent:{value:"accept"},calendar:{}}},{xclass:"datepicker",priority:0});return D});define("bui/editor",["bui/common","bui/form","bui/editor/editor","bui/editor/record","bui/editor/dialog"],function(B){var C=B("bui/common"),A=B("bui/form"),D=C.namespace("Editor");C.mix(D,{Editor:B("bui/editor/editor"),RecordEditor:B("bui/editor/record"),DialogEditor:B("bui/editor/dialog")});return D});define("bui/editor/mixin",function(B){function A(E){var D=E,G=D.get("controlCfgField"),H=D.get(G),F=D.addChild(H);D.setInternal(G,F)}var C=function(){A(this)};C.ATTRS={acceptEvent:{value:"autohide"},preventHide:{value:true},changeSourceEvent:{value:"show triggerchange"},ignoreInputFields:{value:false},innerValueField:{},emptyValue:{},controlCfgField:{},autoUpdate:{value:true},events:{value:{accept:false,cancel:false}}};C.prototype={__bindUI:function(){var D=this,E=D.get("acceptEvent"),F=D.get("changeSourceEvent");if(E){D.on(E,function(){if(D.accept()){return}else{if(D.get("preventHide")){return false}else{D.cancel()}}})}if(F){D.on(F,function(){D.setValue(D.getSourceValue());if(D.get("visible")){D.focus()}})}},getInnerControl:function(){var D=this,E=D.get("children");return E[0]},setValue:function(F){var D=this,E=D.getInnerControl();D.set("editValue",F);D.clearControlValue();E.set(D.get("innerValueField"),F);if(!F){D.valid()}},getValue:function(){var D=this,E=D.getInnerControl();return E.get(D.get("innerValueField"))},isValid:function(){var D=this,E=D.getInnerControl();return E.isValid?E.isValid():true},valid:function(){var D=this,E=D.getInnerControl();E.valid&&E.valid()},getErrors:function(){var D=this,E=D.getInnerControl();return E.getErrors?E.getErrors():[]},isChange:function(){var D=this,E=D.get("editValue"),F=D.getValue();return E!==F},clearValue:function(){this.clearControlValue();this.clearErrors()},clearControlValue:function(){var D=this,E=D.getInnerControl();E.set(D.get("innerValueField"),D.get("emptyValue"))},clearErrors:function(){var D=this,E=D.getInnerControl();E.clearErrors()},getSourceValue:function(){},updateSource:function(){},handleNavEsc:function(){this.cancel()},handleNavEnter:function(E){var D=E.target;if(D.tagName==="TEXTAREA"){return}if(D.tagName==="BUTTON"){$(D).trigger("click")}this.accept()},focus:function(){var D=this,E=D.getInnerControl();E.focus&&E.focus()},accept:function(){var D=this,E;D.valid();if(!D.isValid()){return false}E=D.getValue();if(D.get("autoUpdate")){D.updateSource(E)}if(D.fire("beforeaccept",{value:E})==false){return}D.fire("accept",{value:E,editValue:D.get("editValue")});D.hide();return true},cancel:function(){this.fire("cancel");this.clearValue();this.close()}};return C});define("bui/editor/editor",["bui/common","bui/overlay","bui/editor/mixin"],function(A){var D=A("bui/common"),B=A("bui/overlay").Overlay;CLS_TIPS="x-editor-tips",Mixin=A("bui/editor/mixin");var C=B.extend([Mixin],{bindUI:function(){var E=this,F=E.getInnerControl();E.on("validchange",function(G){if(!E.isValid()&&E.get("visible")){E._showError(E.getErrors())}else{E._hideError()}});E.on("hide",function(){E._hideError()});E.on("show",function(){if(!E.isValid()){E._showError(E.getErrors())}})},_initOverlay:function(){var E=this,F=new B({children:[{xclass:"simple-list",itemTpl:'<li><span class="x-icon x-icon-mini x-icon-error" title="{error}">!</span>&nbsp;<span>{error}</span></li>'}],elCls:CLS_TIPS,autoRender:true});E.set("overlay",F);return F},_getErrorList:function(){var E=this,F=E.get("overlay");return F&&F.get("children")[0]},_showError:function(F){var E=this,J=E.get("overlay")||E._initOverlay(),H=E._getErrorList(),G=E.get("errorAlign"),I=D.Array.map(F,function(K){return{error:K}});H.set("items",I);G.node=E.get("el");J.set("align",G);J.show()},_hideError:function(){var E=this,F=E.get("overlay");F&&F.hide()},getSourceValue:function(){var E=this,F=E.get("curTrigger");return F.text()},updateSource:function(F){var E=this,G=E.get("curTrigger");if(G&&G.length){G.text(F)}},_uiSetWidth:function(G){var E=this;if(G!=null){var F=E.getInnerControl();if(F.set){F.set("width",G)}}}},{ATTRS:{innerValueField:{value:"value"},emptyValue:{value:""},autoHide:{value:true},controlCfgField:{value:"field"},defaultChildCfg:{value:{tpl:"",forceFit:true,errorTpl:""}},defaultChildClass:{value:"form-field"},align:{value:{points:["tl","tl"]}},errorAlign:{value:{points:["bl","tl"],offset:[0,10]}},overlay:{},field:{value:{}}}},{xclass:"editor"});return C});define("bui/editor/record",["bui/common","bui/editor/editor"],function(A){var C=A("bui/common"),D=A("bui/editor/editor");var B=D.extend({getSourceValue:function(){return this.get("record")},updateSource:function(G){var E=this,F=E.get("record");C.mix(F,G)},_uiSetRecord:function(E){this.setValue(E)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},emptyValue:{value:{}},autoHide:{value:false},record:{value:{}},controlCfgField:{value:"form"},form:{value:{}},errorAlign:{value:{points:["tr","tl"],offset:[10,0]}},defaultChildCfg:{valueFn:function(){var E=this;return{xclass:"form",errorTpl:"",showError:true,showChildError:true,defaultChildCfg:{elCls:"bui-inline-block",tpl:"",forceFit:true},buttons:[{btnCls:"button button-primary",text:"\u786e\u5b9a",handler:function(){E.accept()}},{btnCls:"button",text:"\u53d6\u6d88",handler:function(){E.cancel()}}]}}}}},{xclass:"record-editor"});return B});define("bui/editor/dialog",["bui/overlay","bui/editor/mixin"],function(A){var C=A("bui/overlay").Dialog,D=A("bui/editor/mixin");var B=C.extend([D],{getSourceValue:function(){return this.get("record")},handleNavEnter:function(H){var E=this,G=E.get("success"),F=H.target;if(F.tagName==="TEXTAREA"){return}if(F.tagName==="BUTTON"){$(F).trigger("click")}if(G){G.call(E)}else{this.accept()}},cancel:function(){if(this.onCancel()!==false){this.fire("cancel");this.clearValue();this.close()}},updateSource:function(G){var E=this,F=E.get("record");BUI.mix(F,G)},_uiSetRecord:function(E){this.setValue(E)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},record:{value:{}},emptyValue:{value:{}},controlCfgField:{value:"form"},changeSourceEvent:{value:""},defaultChildCfg:{value:{xclass:"form-horizontal"}},focusable:{value:true},success:{value:function(){this.accept()}},form:{value:{}}}},{xclass:"dialog-editor"});return B});define("bui/grid",["bui/common","bui/grid/simplegrid","bui/grid/grid","bui/grid/column","bui/grid/header","bui/grid/format","bui/grid/plugins"],function(A){var B=A("bui/common"),C=B.namespace("Grid");B.mix(C,{SimpleGrid:A("bui/grid/simplegrid"),Grid:A("bui/grid/grid"),Column:A("bui/grid/column"),Header:A("bui/grid/header"),Format:A("bui/grid/format"),Plugins:A("bui/grid/plugins")});return C});define("bui/grid/simplegrid",["bui/common","bui/list"],function(F){var K=F("bui/common"),N=F("bui/list"),M=K.Component,H=M.UIBase,A=K.prefix,L=A+"grid",I=L+"-row",G=A+"grid-row-odd",D=A+"grid-row-even",E=A+"grid-border",C=A+"grid-row-first";var J=N.SimpleListView.extend({setColumns:function(Q){var O=this,P=O.get("headerRowEl");Q=Q||O.get("columns");P.empty();K.each(Q,function(R){O._createColumn(R,P)})},_createColumn:function(R,Q){var O=this,P=K.substitute(O.get("columnTpl"),R);$(P).appendTo(Q)},getItemTpl:function(W,P){var V=this,R=V.get("columns"),Q=V.get("rowTpl"),U=P%2===0?G:D,O=[],T;K.each(R,function(Y){var X=Y["dataIndex"];O.push(V._getCellTpl(Y,X,W))});Q=K.substitute(Q,{cellsTpl:O.join(""),oddCls:U});return Q},_getCellTpl:function(U,P,Q){var O=this,R=U.renderer,T=R?R(Q[P],Q):Q[P],V=O.get("cellTpl");return K.substitute(V,{elCls:U.elCls,text:T})},clearData:function(){var O=this,P=O.get("itemContainer");P.empty()},showData:function(P){var O=this;K.each(P,function(Q,R){O._createRow(Q,R)})},_uiSetInnerBorder:function(Q){var O=this,P=O.get("el");if(Q){P.addClass(E)}else{P.removeClass(E)}},_uiSetTableCls:function(Q){var O=this,P=O.get("el").find("table");P.attr("class",Q)}},{ATTRS:{headerRowEl:{valueFn:function(){var O=this,P=O.get("el").find("thead");return P.children("tr")}},itemContainer:{valueFn:function(){return this.get("el").find("tbody")}},tableCls:{}}},{xclass:"simple-grid-veiw"});var B=K.List.SimpleList.extend({renderUI:function(){this.get("view").setColumns()},bindUI:function(){var O=this,P=O.get("itemCls"),R=P+"-hover",Q=O.get("el");Q.delegate("."+P,"mouseover",function(U){var T=$(U.currentTarget);T.addClass(R)}).delegate("."+P,"mouseout",function(U){var T=$(U.currentTarget);T.removeClass(R)})},showData:function(O){this.clearData();this.set("items",O)},clearData:function(){this.get("view").clearData()},_uiSetColumns:function(P){var O=this;O.clearData();O.get("view").setColumns(P)}},{ATTRS:{itemCls:{view:true,value:I},tableCls:{view:true,value:L+"-table"},columns:{view:true,sync:false,value:[]},tpl:{view:true,value:'<table cellspacing="0" class="{tableCls}" cellpadding="0"><thead><tr></tr></thead><tbody></tbody></table>'},innerBorder:{view:true,value:true},rowTpl:{view:true,value:'<tr class="'+I+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:true,value:'<td class="'+L+'-cell {elCls}"><div class="'+L+'-cell-inner"><span class="'+L+'-cell-text">{text}</span></div></td>'},columnTpl:{view:true,value:'<th class="'+L+'-hd {elCls}" width="{width}"><div class="'+L+'-hd-inner"><span class="'+L+'-hd-title">{title}</span></div></th>'},events:{value:{}},xview:{value:J}}},{xclass:"simple-grid"});B.View=J;return B});define("bui/grid/column",["bui/common"],function(F){var K=F("bui/common"),A=K.prefix,L=A+"grid-hd-title",I=A+"grid-hd-open",B="sort-",C="ASC",H="DESC",G=A+"grid-hd-menu-trigger",J="grid-hd-menu-trigger";var E=K.Component.View.extend({setTplContent:function(O){var M=this,N=M.get("sortTpl"),P=M.get("triggerTpl"),Q=M.get("el"),R;E.superclass.setTplContent.call(M,O);R=Q.find("."+L);$(N).insertAfter(R);$(P).insertAfter(R)},_setContent:function(){this.setTplContent()},_uiSetShowMenu:function(O){var M=this,N=M.get("triggerTpl"),P=M.get("el"),Q=P.find("."+L);if(O){$(N).insertAfter(Q)}else{P.find("."+G).remove()}},_uiSetTitle:function(M){if(!this.get("rendered")){return}this._setContent()},_uiSetDraggable:function(M){if(!this.get("rendered")){return}this._setContent()},_uiSetSortable:function(M){if(!this.get("rendered")){return}this._setContent()},_uiSetTpl:function(M){if(!this.get("rendered")){return}this._setContent()},_uiSetSortState:function(O){var M=this,N=M.get("el"),P=O?"addClass":"removeClass",Q=B+"asc",R=B+"desc";N.removeClass(Q+" "+R);if(O==="ASC"){N.addClass(Q)}else{if(O==="DESC"){N.addClass(R)}}},_uiSetOpen:function(O){var M=this,N=M.get("el");if(O){N.addClass(I)}else{N.removeClass(I)}}},{ATTRS:{sortTpl:{view:true,getter:function(){var M=this,N=M.get("sortable");if(N){return'<span class="'+A+'grid-sort-icon">&nbsp;</span>'}return""}},tpl:{}}});var D=K.Component.Controller.extend({_toggleSortState:function(){var M=this,O=M.get("sortState"),N=O?(O===C?H:C):C;M.set("sortState",N)},performActionInternal:function(P){var M=this,N=$(P.target),O=M.get("prefixCls");if(N.hasClass(O+J)){}else{if(M.get("sortable")){M._toggleSortState()}}},_uiSetWidth:function(M){if(M){this.set("originWidth",M)}}},{ATTRS:{elTagName:{value:"th"},open:{view:true,value:false},dataIndex:{view:true,value:""},draggable:{sync:false,view:true,value:true},editor:{},focusable:{value:false},fixed:{value:false},id:{},renderer:{},resizable:{value:true},sortable:{sync:false,view:true,value:true},sortState:{view:true,value:null},title:{sync:false,view:true,value:"&#160;"},width:{value:100},showMenu:{view:true,value:false},triggerTpl:{view:true,value:'<span class="'+G+'"></span>'},tpl:{sync:false,view:true,value:'<div class="'+A+'grid-hd-inner"><span class="'+L+'">{title}</span></div>'},cellTpl:{value:""},events:{value:{"afterWidthChange":true,"afterSortStateChange":true,"afterVisibleChange":true,"click":true,"resize":true,"move":true}},xview:{value:E}}},{xclass:"grid-hd",priority:1});D.Empty=D.extend({},{ATTRS:{type:{value:"empty"},sortable:{view:true,value:false},width:{view:true,value:null},tpl:{view:true,value:'<div class="'+A+'grid-hd-inner"></div>'}}},{xclass:"grid-hd-empty",priority:1});return D});define("bui/grid/header",["bui/common","bui/grid/column"],function(E){var H=E("bui/common"),A=H.prefix,G=H.namespace("Grid"),B=E("bui/grid/column"),J=H.Component.View,I=H.Component.Controller,F=17,K=H.UA;var D=J.extend({getContentElement:function(){return this.get("el").find("tr")},scrollTo:function(M){var L=this,N=L.get("el");if(M.top!==undefined){N.scrollTop(M.top)}if(M.left!==undefined){N.scrollLeft(M.left)}},_uiSetTableCls:function(N){var L=this,M=L.get("el").find("table");M.attr("class",N)}},{ATTRS:{emptyCellEl:{},tableCls:{}}},{xclass:"header-view"});var C=I.extend({addColumn:function(O,M){var L=this,N=0,P=L.get("columns");O=L._createColumn(O);if(M===undefined){M=P.length;N=L.get("children").length-1}P.splice(M,0,O);L.addChild(O,N);L.fire("add",{column:O,index:M});return O},removeColumn:function(N){var L=this,O=L.get("columns"),M;N=H.isNumber(N)?O[N]:N;M=H.Array.indexOf(N,O);O.splice(M,1);L.fire("remove",{column:N,index:M});return L.removeChild(N,true)},bindUI:function(){var L=this;L._bindColumnsEvent()},initializer:function(){var L=this,O=L.get("children"),M=L.get("columns"),N=L._createEmptyColumn();$.each(M,function(Q,P){var R=L._createColumn(P);O[Q]=R;M[Q]=R});O.push(N);L.set("emptyColumn",N)},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var L=this,N=L.getColumns(),M=0;$.each(N,function(O,P){if(P.get("visible")){M+=P.get("el").outerWidth()}});return M},getColumnOriginWidth:function(){var L=this,N=L.getColumns(),M=0;$.each(N,function(O,Q){if(Q.get("visible")){var P=Q.get("originWidth")||Q.get("width");M+=P}});return M},getColumnByIndex:function(N){var L=this,O=L.getColumns(),M=O[N];return M},getColumn:function(M){var L=this,O=L.getColumns(),N=null;$.each(O,function(P,Q){if(M(Q)){N=Q;return false}});return N},getColumnById:function(M){var L=this;return L.getColumn(function(N){return N.get("id")===M})},getColumnIndex:function(M){var L=this,N=L.getColumns();return H.Array.indexOf(M,N)},scrollTo:function(L){this.get("view").scrollTo(L)},_bindColumnsEvent:function(){var L=this;L.on("afterWidthChange",function(M){var N=M.target;if(N!==L){L.setTableWidth()}});L.on("afterVisibleChange",function(M){var N=M.target;if(N!==L){L.setTableWidth()}});L.on("afterSortStateChange",function(M){var N=M.target,P=L.getColumns(),O=M.newVal;if(O){$.each(P,function(Q,R){if(R!==N){R.set("sortState","")}})}});L.on("add",function(){L.setTableWidth()});L.on("remove",function(){L.setTableWidth()})},_createColumn:function(L){if(L instanceof B){return L}if(!L.id){L.id=H.guid("col")}return new B(L)},_createEmptyColumn:function(){return new B.Empty()},_isAllowScrollLeft:function(){var L=this,M=L.get("parent");return M&&!!M.get("height")},forceFitColumns:function(){var U=this,P=U.getColumns(),V=U.get("width"),T=V,Q=U.getColumnOriginWidth(),Y=0,W=0,M=null,R=U._isAllowScrollLeft();function N(b,Z){var a=b.get("el");b.set("width",Z,{silent:1});a.width(Z)}if(V){if(R){V-=F;T=V}var X=0;$.each(P,function(a,b){if(b.get("visible")&&b.get("resizable")){X++}if(b.get("visible")&&!b.get("resizable")){var Z=b.get("el").outerWidth();T-=Z;Q-=Z}});var O=Math.floor(T/X),L=T/Q;if(L===1){return}$.each(P,function(b,c){if(c.get("visible")&&c.get("resizable")){var Z=U._getColumnBorderWith(c,b),a=c.get("originWidth");if(!a){c.set("originWidth",c.get("width"));a=c.get("width")}O=Math.floor((a+Z)*L);N(c,O-Z);Y+=O;M=c}});if(M){W=T-Y;N(M,M.get("width")+W)}U.fire("forceFitWidth")}},_getColumnBorderWith:function(O,N){var M=O.get("el"),L=Math.round(parseFloat(M.css("border-left-width"))||0)+Math.round(parseFloat(M.css("border-right-width"))||0);L=K.ie&&K.ie<8?(N===0?1:L):L;return L},setTableWidth:function(){var L=this,O=L.get("width"),M=0,N=null;if(O=="auto"){return}if(L.get("forceFit")){L.forceFitColumns()}else{if(L._isAllowScrollLeft()){M=L.getColumnsWidth();N=L.get("emptyColumn");if(O<M){N.get("el").width(F)}else{N.get("el").width("auto")}}}},_uiSetWidth:function(){var L=this;L.setTableWidth()},_uiSetForceFit:function(M){var L=this;if(M){L.setTableWidth()}}},{ATTRS:{columns:{value:[]},emptyColumn:{},focusable:{value:false},forceFit:{sync:false,view:true,value:false},tpl:{view:true,value:'<table cellspacing="0" class="'+A+'grid-table" cellpadding="0"><thead><tr></tr></thead></table>'},tableCls:{view:true},xview:{value:D},events:{value:{"add":false,"remove":false}}}},{xclass:"grid-header",priority:1});return C});define("bui/grid/grid",["bui/common","bui/mask","bui/toolbar","bui/list","bui/grid/header","bui/grid/column"],function(k){var P=k("bui/common"),H=k("bui/mask"),j=P.UA,e=P.Component,N=k("bui/toolbar"),X=k("bui/list"),D=k("bui/grid/header"),g=k("bui/grid/column");function h(m){if(P.isString(m)){return m.indexOf("%")!==-1}return false}var M=P.prefix,Q=M+"grid-header-container",L=M+"grid-body",F=M+"grid-width",A=M+"grid-height",C=M+"grid-border",f=M+"grid-tbar",Y=M+"grid-bbar",i=M+"grid-button-bar",l=M+"grid-strip",U=M+"grid-row",J=M+"grid-row-odd",Z=M+"grid-row-even",W=M+"grid-row-first",V=M+"grid-cell",O=M+"grid-cell-inner",K="grid-td-",G=M+"grid-cell-text",I=M+"grid-cell-empty",T="17",b=M+"hidden",c="data-column-field",d=2,a=1;function R(n){var m=this;if(P.isNumber(n)){n-=d}return n}var E=X.SimpleListView.extend({renderUI:function(){var m=this,n=m.get("el"),o=n.find("."+L);m.set("bodyEl",o);m._setTableTpl()},getItemTpl:function(t,n){var s=this,p=s._getColumns(),q=s.get("tbodyEl"),o=s.get("rowTpl"),r=n%2===0?J:Z,m=[],u;$.each(p,function(w,x){var v=x.get("dataIndex");m.push(s._getCellTpl(x,v,t))});if(s.get("useEmptyCell")){m.push(s._getEmptyCellTpl())}o=P.substitute(o,{cellsTpl:m.join(""),oddCls:r});return o},findRow:function(n){var m=this;return $(m.findElement(n))},findCell:function(o,n){var m=K+o;return n.find("."+m)},resetHeaderRow:function(){if(!this.get("useHeaderRow")){return}var m=this,o=m.get("headerRowEl"),n=m.get("tbodyEl");if(o){o.remove()}o=m._createHeaderRow();o.prependTo(n);m.set("headerRowEl",o)},resetColumnsWidth:function(q,p){var m=this,o=m.get("headerRowEl"),n=m.findCell(q.get("id"),o);p=p||q.get("width");if(n){n.width(p)}m.setTableWidth()},setTableWidth:function(o){if(!o&&h(this.get("width"))){this.get("tableEl").width("100%");return}var r=this,s=r._getInnerWidth(),n=r.get("height"),q=r.get("tableEl"),t=r.get("forceFit"),m=r.get("headerRowEl");if(!h(o)){o=o||r._getColumnsWidth();if(!s){return}if(s>=o){o=s;if(n){var p=(j.ie==6||j.ie==7)?T+2:T;o=s-p}}}q.width(o)},setBodyWidth:function(n){var m=this,o=m.get("bodyEl");n=n||m._getInnerWidth();o.width(n)},setBodyHeight:function(n){var m=this,p=m.get("bodyEl"),o=n,q=p.siblings();P.each(q,function(r){if($(r).css("display")!=="none"){o-=$(r).outerHeight()}});p.height(o)},setColumnVisible:function(q){var m=this,r=!q.get("visible"),p=q.get("id"),n=m.get("tbodyEl"),o=$("."+K+p,n);if(r){o.hide()}else{o.show()}},updateItem:function(p){var m=this,q=m.getItems(),n=P.Array.indexOf(p,q),s=m._getColumns(),r=null,o;if(n>=0){r=m.findElement(p);P.each(s,function(v){var t=m.findCell(v.get("id"),$(r)),w=t.find("."+O),u=m._getCellText(v,p);w.html(u)});return r}},showEmptyText:function(){var m=this,p=m.get("bodyEl"),o=m.get("emptyDataTpl"),n=m.get("emptyEl");if(n){n.remove()}var n=$(o).appendTo(p);m.set("emptyEl",n)},clearEmptyText:function(){var m=this,n=m.get("emptyEl");if(n){n.remove()}},_createHeaderRow:function(){var m=this,r=m._getColumns(),o=m.get("tbodyEl"),p=m.get("headerRowTpl"),q,n=[];$.each(r,function(s,t){n.push(m._getHeaderCellTpl(t))});if(m.get("useEmptyCell")){n.push(m._getEmptyCellTpl())}p=P.substitute(p,{cellsTpl:n.join("")});q=$(p).appendTo(o);return q},_getColumnsWidth:function(){var m=this,o=m.get("columns"),n=0;P.each(o,function(p){if(p.get("visible")){n+=p.get("el").outerWidth()}});return n},_getColumns:function(){return this.get("columns")},_getCellText:function(r,o){var m=this,n=r.get("dataIndex"),p=r.get("cellTpl")||m.get("cellTextTpl"),q=m._getCellInnerText(r,n,o);return P.substitute(p,{text:q,tips:m._getTips(r,n,o)})},_getCellInnerText:function(s,n,p){try{var m=this,q=s.get("renderer"),r=q?q(p[n],p):p[n];return r==null?"":r}catch(o){throw"column:"+s.get("title")+" fomat error!"}},_getCellTpl:function(q,n,o){var m=this,p=m._getCellText(q,o),r=m.get("cellTpl");return P.substitute(r,{elCls:q.get("elCls"),id:q.get("id"),dataIndex:n,cellText:p,hideCls:!q.get("visible")?b:""})},_getEmptyCellTpl:function(){return'<td class="'+V+" "+I+'">&nbsp;</td>'},_getHeaderCellTpl:function(o){var m=this,n=m.get("headerCellTpl");return P.substitute(n,{id:o.get("id"),width:o.get("width"),hideCls:!o.get("visible")?b:""})},_getInnerWidth:function(){return R(this.get("width"))},_getTips:function(q,n,o){var p=q.get("showTip"),m="";if(p){m=o[n];if(P.isFunction(p)){m=p(m,o)}}return m},_uiSetInnerBorder:function(o){var m=this,n=m.get("el");if(o){n.addClass(C)}else{n.removeClass(C)}},_setTableTpl:function(p){var m=this,q=m.get("bodyEl");p=p||m.get("tableTpl");$(p).appendTo(q);var n=q.find("table"),o=q.find("tbody");m.set("tableEl",n);m.set("tbodyEl",o);m.set("itemContainer",o);m._setTableCls(m.get("tableCls"))},_uiSetTableCls:function(m){this._setTableCls(m)},_uiSetHeight:function(m){var n=this,o=n.get("bodyEl");n.get("el").height(m);n.get("el").addClass(A)},_uiSetWidth:function(n){var m=this;m.get("el").width(n);m.setBodyWidth(m._getInnerWidth(n));m.get("el").addClass(F)},_uiSetStripeRows:function(n){var m=this,o=n?"addClass":"removeClass";m.get("el")[o](l)},_setTableCls:function(o){var m=this,n=m.get("tableEl");n.attr("class",o)}},{ATTRS:{tableCls:{},bodyEl:{},tbodyEl:{},headerRowEl:{},tableEl:{},emptyEl:{}}},{xclass:"grid-view"});var B=X.SimpleList.extend({initializer:function(){var m=this,n=m.get("render"),o=m.get("width");if(!o){m.set("width",$(n).width())}},createDom:function(){var m=this;if(m.get("width")){m.get("el").addClass(F)}if(m.get("height")){m.get("el").addClass(A)}if(m.get("innerBorder")){m.get("el").addClass(C)}},renderUI:function(){var m=this;m._initHeader();m._initBars();m._initLoadMask();m.get("view").resetHeaderRow()},bindUI:function(){var m=this;m._bindHeaderEvent();m._bindBodyEvent();m._bindItemsEvent()},addColumn:function(p,o){var m=this,n=m.get("header");if(n){p=n.addColumn(p,o)}else{p=new g(p);m.get("columns").splice(o,0,p)}return p},clearData:function(){this.clearItems()},getRecords:function(){return this.getItems()},findColumn:function(o){var m=this,n=m.get("header");if(P.isNumber(o)){return n.getColumnByIndex(o)}else{return n.getColumnById(o)}},findColumnByField:function(o){var m=this,n=m.get("header");return n.getColumn(function(p){return p.get("dataIndex")===o})},findCell:function(p,n){var m=this,o=null;if(n instanceof $){o=n}else{o=m.findRow(n)}if(o){return m.get("view").findCell(p,o)}return null},findRow:function(n){var m=this;return m.get("view").findRow(n)},removeColumn:function(n){var m=this;m.get("header").removeColumn(n)},showData:function(n){var m=this;m.set("items",n)},resetColumns:function(){var m=this,n=m.get("store");m.get("view").resetHeaderRow();if(n){m.onLoad()}},_bindScrollEvent:function(){var m=this,n=m.get("el"),p=n.find("."+L),o=m.get("header");p.on("scroll",function(){var q=p.scrollLeft(),r=p.scrollTop();o.scrollTo({left:q,top:r});m.fire("scroll",{scrollLeft:q,scrollTop:r,bodyWidth:p.width(),bodyHeight:p.height()})})},_bindHeaderEvent:function(){var m=this,o=m.get("header"),p=m.get("view"),n=m.get("store");o.on("afterWidthChange",function(q){var r=q.target;if(r!==o){p.resetColumnsWidth(r)}});o.on("afterSortStateChange",function(q){var s=q.target,r=q.newVal;if(r&&n){n.sort(s.get("dataIndex"),s.get("sortState"))}});o.on("afterVisibleChange",function(q){var r=q.target;if(r!==o){p.setColumnVisible(r);m.fire("columnvisiblechange",{column:r})}});o.on("click",function(q){var r=q.target;if(r!==o){m.fire("columnclick",{column:r,domTarget:q.domTarget})}});o.on("forceFitWidth",function(){if(m.get("rendered")){m.resetColumns()}});o.on("add",function(q){if(m.get("rendered")){m.fire("columnadd",{column:q.column,index:q.index});m.resetColumns()}});o.on("remove",function(q){if(m.get("rendered")){m.resetColumns();m.fire("columnremoved",{column:q.column,index:q.index})}})},_bindBodyEvent:function(){var m=this;m._bindScrollEvent()},_bindItemsEvent:function(){var m=this,n=m.get("store");m.on("itemsshow",function(){m.fire("aftershow");if(m.get("emptyDataTpl")){if(n&&n.getCount()==0){m.get("view").showEmptyText()}else{m.get("view").clearEmptyText()}}});m.on("itemsclear",function(){m.fire("clear")});m.on("itemclick",function(t){var s=t.domTarget,q=t.item,r=$(s).closest("."+V),u=$(s).closest("."+U),p;if(r.length){p=m.fire("cellclick",{record:q,row:u[0],cell:r[0],field:r.attr(c),domTarget:s,domEvent:t.domEvent})}if(p===false){return p}return m.fire("rowclick",{record:q,row:u[0],domTarget:s})});m.on("itemunselected",function(p){m.fire("rowunselected",o(p))});m.on("itemselected",function(p){m.fire("rowselected",o(p))});m.on("itemrendered",function(p){m.fire("rowcreated",o(p))});m.on("itemremoved",function(p){m.fire("rowremoved",o(p))});m.on("itemupdated",function(p){m.fire("rowupdated",o(p))});function o(p){return{record:p.item,row:p.domTarget,domTarget:p.domTarget}}},_getInnerWidth:function(m){m=m||this.get("width");return R(m)},_initHeader:function(){var m=this,n=m.get("header"),o=m.get("el").find("."+Q);if(!n){n=new D({columns:m.get("columns"),tableCls:m.get("tableCls"),forceFit:m.get("forceFit"),width:m._getInnerWidth(),render:o,parent:m}).render();m.set("header",n)}},_initBars:function(){var m=this,o=m.get("bbar"),n=m.get("tbar");m._initBar(o,Y,"bbar");m._initBar(n,f,"tbar")},_initBar:function(r,p,q){var m=this,n=null,s=null;if(r){if(!r.xclass&&!(r instanceof e.Controller)){r.xclass="bar";r.children=r.children||[];if(r.items){r.children.push({xclass:"bar",defaultChildClass:"bar-item-button",elCls:i,children:r.items});r.items=null}if(r.pagingBar){n=m.get("store");s={xclass:"pagingbar",store:n,pageSize:n.pageSize};if(r.pagingBar!==true){s=S.merge(s,r.pagingBar)}r.children.push(s)}}if(r.xclass){var o=m.get("el").find("."+p);o.show();r.render=o;r.elTagName="div";r.autoRender=true;r=m.addChild(r)}m.set(q,r)}return r},_initLoadMask:function(){var m=this,n=m.get("loadMask");if(n&&!n.show){n=new P.Mask.LoadMask({el:m.get("el")});m.set("loadMask",n)}},_uiSetWidth:function(n){var m=this;if(m.get("rendered")){if(!h(n)){m.get("header").set("width",m._getInnerWidth(n))}else{m.get("header").set("width","100%")}}m.get("view").setTableWidth()},_uiSetForceFit:function(n){var m=this;m.get("header").set("forceFit",n)},_uiSetHeight:function(m,n){var o=this,p=o.get("header");o.get("view").setBodyHeight(m);if(o.get("rendered")){if(o.get("forceFit")&&!n.prevVal){p.forceFitColumns();o.get("view").setTableWidth()}p.setTableWidth()}}},{ATTRS:{header:{},bbar:{},itemCls:{value:U},columns:{view:true,value:[]},forceFit:{sync:false,value:false},emptyDataTpl:{view:true},headerRowTpl:{view:true,value:'<tr class="'+M+'grid-header-row">{cellsTpl}</tr>'},headerCellTpl:{view:true,value:'<td class="{hideCls} '+K+'{id}" width="{width}" style="height:0"></td>'},rowTpl:{view:true,value:'<tr class="'+U+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:true,value:'<td  class="{elCls} {hideCls} '+V+" "+K+'{id}" data-column-id="{id}" data-column-field = "{dataIndex}" ><div class="'+O+'" >{cellText}</div></td>'},cellTextTpl:{view:true,value:'<span class="'+G+' " title = "{tips}">{text}</span>'},events:{value:{"aftershow":false,"clear":false,"cellclick":false,"columnclick":false,"rowclick":false,"rowcreated":false,"rowremoved":false,"rowselected":false,"rowunselected":false,"scroll":false}},stripeRows:{view:true,value:true},tbar:{},tableCls:{view:true,sync:false,value:M+"grid-table"},tableTpl:{view:true,value:'<table cellspacing="0" cellpadding="0" ><tbody></tbody></table>'},tpl:{value:'<div class="'+f+'" style="display:none"></div><div class="'+Q+'"></div><div class="'+L+'"></div><div style="display:none" class="'+Y+'"></div>'},innerBorder:{sync:false,value:true},useEmptyCell:{view:true,value:true},useHeaderRow:{view:true,value:true},xview:{value:E}}},{xclass:"grid"});return B});define("bui/grid/format",function(A){function B(D){if(D<10){return"0"+D}return D}var C={dateRenderer:function(D){if(!D){return""}if(BUI.isString(D)){return D}var F=null;try{F=new Date(D)}catch(E){return""}if(!F||!F.getFullYear){return""}return F.getFullYear()+"-"+B(F.getMonth()+1)+"-"+B(F.getDate())},datetimeRenderer:function(D){if(!D){return""}if(BUI.isString(D)){return D}var F=null;try{F=new Date(D)}catch(E){return""}if(!F||!F.getFullYear){return""}return F.getFullYear()+"-"+B(F.getMonth()+1)+"-"+B(F.getDate())+" "+B(F.getHours())+":"+B(F.getMinutes())+":"+B(F.getSeconds())},cutTextRenderer:function(D){return function(E){E=E||"";if(E.toString().length>D){return E.toString().substring(0,D)+"..."}return E}},enumRenderer:function(D){return function(E){return D[E]||""}},multipleItemsRenderer:function(D){var E=C.enumRenderer(D);return function(G){var F=[];if(!G){return""}if(!BUI.isArray(G)){G=G.toString().split(",")}$.each(G,function(I,H){F.push(E(H))});return F.join(",")}},moneyCentRenderer:function(D){if(BUI.isString(D)){D=parseFloat(D)}if($.isNumberic(D)){return(D*0.01).toFixed(2)}return D}};return C});(function(){var A="bui/grid/plugins/";define("bui/grid/plugins",["bui/common",A+"selection",A+"cascade",A+"cellediting",A+"rowediting",A+"dialogediting",A+"menu",A+"summary"],function(C){var E=C("bui/common"),D=C(A+"selection"),B={};E.mix(B,{CheckSelection:D.CheckSelection,RadioSelection:D.RadioSelection,Cascade:C(A+"cascade"),CellEditing:C(A+"cellediting"),RowEditing:C(A+"rowediting"),DialogEditing:C(A+"dialogediting"),GridMenu:C(A+"menu"),Summary:C(A+"summary")});return B})})();define("bui/grid/plugins/menu",["bui/common","bui/menu"],function(B){var H=B("bui/common"),C=B("bui/menu"),A=H.prefix,D="sort-asc",F="sort-desc",I="column-setting",E="icon-check";var G=function(J){G.superclass.constructor.call(this,J)};H.extend(G,H.Base);G.ATTRS={menu:{},activedColumn:{},triggerCls:{value:A+"grid-hd-menu-trigger"},items:{value:[{id:D,text:"\u5347\u5e8f",iconCls:"icon-arrow-up"},{id:F,text:"\u964d\u5e8f",iconCls:"icon-arrow-down"},{xclass:"menu-item-sparator"},{id:I,text:"\u8bbe\u7f6e\u5217",iconCls:"icon-list-alt"}]}};H.augment(G,{initializer:function(K){var J=this;J.set("grid",K)},renderUI:function(L){var J=this,K=L.get("columns");H.each(K,function(M){J._addShowMenu(M)})},bindUI:function(K){var J=this;K.on("columnadd",function(L){J._addShowMenu(L.column)});K.on("columnclick",function(N){var L=$(N.domTarget),M=N.column,O;J.set("activedColumn",M);if(L.hasClass(J.get("triggerCls"))){O=J.get("menu")||J._initMenu();O.set("align",{node:L,points:["bl","tl"],offset:[0,0]});O.show();J._afterShow(M,O)}})},_addShowMenu:function(J){if(!J.get("fixed")){J.set("showMenu",true)}},_afterShow:function(L,M){var J=this,K=J.get("grid");M=M||J.get("menu");J._resetSortMenuItems(L,M);J._resetColumnsVisible(M)},_resetColumnsVisible:function(N){var J=this,L=N.findItemById(I),M=L.get("subMenu")||J._initColumnsMenu(L),K=J.get("grid").get("columns");M.removeChildren(true);$.each(K,function(P,Q){if(!Q.get("fixed")){var O={xclass:"context-menu-item",text:Q.get("title"),column:Q,iconCls:"icon"},R=M.addChild(O);if(Q.get("visible")){R.set("selected",true)}}})},_resetSortMenuItems:function(L,M){var J=M.findItemById(D),K=M.findItemById(F);if(L.get("sortable")){J.set("disabled",false);K.set("disabled",false)}else{J.set("disabled",true);K.set("disabled",true)}},_initMenu:function(){var J=this,L=J.get("menu"),K;if(!L){K=J.get("items");$.each(K,function(N,M){if(!M.xclass){M.xclass="context-menu-item"}});L=new C.ContextMenu({children:K,elCls:"grid-menu"});J._initMenuEvent(L);J.set("menu",L)}return L},_initMenuEvent:function(K){var J=this;K.on("itemclick",function(N){var L=N.item,O=L.get("id"),M=J.get("activedColumn");if(O===D){M.set("sortState","ASC")}else{if(O===F){M.set("sortState","DESC")}}});K.on("afterVisibleChange",function(N){var L=N.newVal,M=J.get("activedColumn");if(L&&M){M.set("open",true)}else{M.set("open",false)}})},_initColumnsMenu:function(J){var K=new C.ContextMenu({multipleSelect:true,elCls:"grid-column-menu"});J.set("subMenu",K);K.on("itemclick",function(N){var M=N.item,L=M.get("column"),O=M.get("selected");if(O){L.set("visible",true)}else{L.set("visible",false)}});return K},destructor:function(){var J=this,K=J.get("menu");if(K){K.destroy()}J.off();J.clearAttrVals()}});return G});define("bui/grid/plugins/cascade",["bui/common"],function(E){var J=E("bui/common"),A=J.prefix,K="",D="data-record",B=A+"grid-cascade",I=B+"-expand",F=B+"-row",H=B+"-cell",G=B+"-collapse";var C=function(L){C.superclass.constructor.call(this,L)};J.extend(C,J.Base);C.ATTRS={width:{value:40},cellInner:{value:'<span class="'+B+'"><i class="'+B+'-icon"></i></span>'},rowTpl:{value:'<tr class="'+F+'"><td class="'+H+'"></td></tr>'},renderer:{},events:["expand","collapse","removed"]};J.augment(C,{initializer:function(O){var L=this;var M={title:"",elCls:"center",width:L.get("width"),resizable:false,fixed:true,sortable:false,cellTpl:L.get("cellInner")},N=O.addColumn(M,0);O.set("innerBorder",false);L.set("grid",O)},bindUI:function(M){var L=this;M.on("cellclick",function(P){var N=$(P.domTarget),O=N.closest("."+B);if(O.length){if(!O.hasClass(I)){L._onExpand(P.record,P.row,O)}else{L._onCollapse(P.record,P.row,O)}}});M.on("columnvisiblechange",function(){L._resetColspan()});M.on("rowremoved",function(N){L.remove(N.record)});M.on("clear",function(){L.removeAll()})},expandAll:function(){var L=this,N=L.get("grid"),M=N.getRecords();$.each(M,function(P,O){L.expand(O)})},expand:function(N){var L=this,O=L.get("grid");var M=O.findRow(N);if(M){L._onExpand(N,M)}},collapse:function(N){var L=this,O=L.get("grid");var M=O.findRow(N);if(M){L._onCollapse(N,M)}},removeAll:function(){var L=this,M=L._getAllCascadeRows();M.each(function(O,N){L._removeCascadeRow(N)})},remove:function(N){var L=this,M=L._findCascadeRow(N);if(M){L._removeCascadeRow(M)}},collapseAll:function(){var L=this,N=L.get("grid"),M=N.getRecords();$.each(M,function(P,O){L.collapse(O)})},_getRowRecord:function(L){return $(L).data(D)},_removeCascadeRow:function(L){this.fire("removed",{record:$(L).data(D),row:L});$(L).remove()},_findCascadeRow:function(N){var L=this,O=L._getAllCascadeRows(),M=null;$.each(O,function(Q,P){if(L._getRowRecord(P)===N){M=P;return false}});return M},_getAllCascadeRows:function(){var L=this,M=L.get("grid");return M.get("el").find("."+F)},_getCascadeRow:function(M){var L=$(M).next();if((L).hasClass(F)){return L}return null},_getRowContent:function(M){var L=this,N=L.get("renderer"),O=N?N(M):"";return O},_createCascadeRow:function(N,O){var L=this,M=L.get("rowTpl"),P=L._getRowContent(N),Q=$(M).insertAfter(O);Q.find("."+H).append($(P));Q.data(D,N);return Q},_onExpand:function(O,N,P){var L=this,M=L._getCascadeRow(N),Q=L._getColumnCount(N);P=P||$(N).find("."+B);P.addClass(I);if(!M||!M.length){M=L._createCascadeRow(O,N)}$(M).removeClass(G);L._setColSpan(M,N);L.fire("expand",{record:O,row:M[0]})},_onCollapse:function(O,N,P){var L=this,M=L._getCascadeRow(N);P=P||$(N).find("."+B);P.removeClass(I);if(M||!M.length){$(M).addClass(G);L.fire("collapse",{record:O,row:M[0]})}},_getColumnCount:function(L){return $(L).children().filter(function(){return $(this).css("display")!=="none"}).length},_setColSpan:function(M,N){N=N||$(M).prev();var L=this,O=L._getColumnCount(N);$(M).find("."+H).attr("colspan",O)},_resetColspan:function(){var L=this,M=L._getAllCascadeRows();$.each(M,function(O,N){L._setColSpan(N)})},destructor:function(){var L=this;L.removeAll();L.off();L.clearAttrVals()}});return C});define("bui/grid/plugins/selection",["bui/common"],function(D){var G=D("bui/common"),A=G.prefix,I=A+"grid-checkBox",E="x-grid-checkbox",B=A+"grid-radio";function C(J){C.superclass.constructor.call(this,J)}G.extend(C,G.Base);C.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+I+'-container"><span class="'+E+'"></span></div>'}};G.augment(C,{createDom:function(M){var J=this;var K={title:"",width:J.get("width"),fixed:true,resizable:false,sortable:false,tpl:'<div class="'+A+'grid-hd-inner">'+J.get("cellInner")+"",cellTpl:J.get("cellInner")},L=M.addColumn(K,0);M.set("multipleSelect",true);J.set("column",L)},bindUI:function(N){var J=this,K=J.get("column"),M=K.get("el"),L=M.find("."+E);L.on("click",function(){var O=M.hasClass("checked");if(!O){N.setAllSelection();M.addClass("checked")}else{N.clearSelection();M.removeClass("checked")}});N.on("rowunselected",function(O){M.removeClass("checked")});N.on("clear",function(){M.removeClass("checked")})}});var H=function(J){H.superclass.constructor.call(this,J)};G.extend(H,G.Base);H.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+A+'grid-radio-container"><input  class="'+B+'" type="radio"></div>'}};G.augment(H,{createDom:function(M){var J=this;var K={title:"",width:J.get("width"),resizable:false,fixed:true,sortable:false,cellTpl:J.get("cellInner")},L=M.addColumn(K,0);M.set("multipleSelect",false);J.set("column",L)},bindUI:function(K){var J=this;K.on("rowselected",function(L){J._setRowChecked(L.row,true)});K.on("rowunselected",function(L){J._setRowChecked(L.row,false)})},_setRowChecked:function(K,L){var M=$(K),J=M.find("."+B);J.attr("checked",L)}});var F={CheckSelection:C,RadioSelection:H};return F});define("bui/grid/plugins/summary",["bui/common"],function(H){var M=H("bui/common"),A=M.prefix,K=A+"grid-row",N=A+"grid-body",F=A+"grid-summary-row",O=A+"grid-cell-inner",E="grid-td-",I=A+"grid-cell-text",B=A+"grid-cell";function G(P){if(P>0){return'<td class="'+B+'" colspan="'+P+'">&nbsp;</td>'}return""}function J(P,Q){return'<td class="'+B+" "+E+Q+'">'+D(P)+"</td>"}function D(P){return'<div class="'+O+'" ><span class="'+I+' ">'+P+"</span></div>"}function C(){return'<td class="'+B+" "+B+'-empty">&nbsp;</td>'}var L=function(P){L.superclass.constructor.call(this,P)};L.ATTRS={footerTpl:{value:"<tfoot></tfoot>"},footerEl:{},summaryTitle:{value:"\u67e5\u8be2\u5408\u8ba1"},pageSummaryTitle:{value:"\u672c\u9875\u5408\u8ba1"},field:{value:"summary"},pageSummaryField:{value:"pageSummary"},summaryField:{value:"summary"},pageSummary:{},summary:{}};M.extend(L,M.Base);M.augment(L,{initializer:function(Q){var P=this;P.set("grid",Q)},renderUI:function(U){var P=this,T=U.get("el").find("."+N),R=T.find("table"),Q=$(P.get("footerTpl")).appendTo(R);P.set("footerEl",Q)},bindUI:function(R){var P=this,Q=R.get("store");if(Q){Q.on("beforeProcessLoad",function(T){P._processSummary(T)});Q.on("add",function(){P.resetPageSummary()});Q.on("remove",function(){P.resetPageSummary()});Q.on("update",function(){P.resetPageSummary()})}R.on("aftershow",function(){P.resetSummary()});R.get("header").on("afterVisibleChange",function(){P.resetSummary()})},_processSummary:function(U){var P=this,Q=P.get("footerEl");Q.empty();if(!U){return}var R=U[P.get("pageSummaryField")],T=U[P.get("summaryField")];P.set("pageSummary",R);P.set("summary",T)},resetPageSummary:function(){var P=this,U=P.get("grid"),R=U.get("columns"),Q=P._calculatePageSummary(),T=P.get("pageEl");P.set("pageSummary",Q);if(T){M.each(R,function(X){if(X.get("summary")&&X.get("visible")){var Y=X.get("id"),V=T.find("."+E+Y),W=P._getSummaryCellText(X,Q);V.find("."+I).text(W)}});P._updateFirstRow(T,P.get("pageSummaryTitle"))}},resetSummary:function(U,Q){var P=this,T=P.get("footerEl"),R=null;T.empty();U=U||P.get("pageSummary");if(!U){U=P._calculatePageSummary();P.set("pageSummary",U)}Q=Q||P.get("summary");R=P._creatSummaryRow(U,P.get("pageSummaryTitle"));P.set("pageEl",R);P._creatSummaryRow(Q,P.get("summaryTitle"))},_creatSummaryRow:function(Q,T){if(!Q){return null}var P=this,U=P.get("footerEl"),R=P._getSummaryTpl(Q),V=$(R).appendTo(U);P._updateFirstRow(V,T);return V},_updateFirstRow:function(U,R){var T=U.find("td").first(),Q=T.find("."+O);if(Q.length){var P=R+": ";text=Q.text();if(text.indexOf(P)===-1){text=P+text}T.html(D(text))}else{T.html(D(R+":"))}},_getSummaryTpl:function(X){var T=this,W=T.get("grid"),R=W.get("columns"),Q=[],V=-1,P=-1,U=null;$.each(R,function(Y,b){if(b.get("visible")){P+=1;if(b.get("summary")){Q.push(G(P-V-1));var Z=T._getSummaryCellText(b,X),a=J(Z,b.get("id"));Q.push(a);V=P}}});if(V!==P){Q.push(G(P-V))}U=['<tr class="',F," ",K,'">',Q.join(""),C(),"</tr>"].join("");return U},_getSummaryCellText:function(W,Q){var P=this,V=Q[W.get("dataIndex")],U=V==null?"":V,T=W.get("renderer"),R=T?T(U,Q):U;return R},_calculatePageSummary:function(){var P=this,U=P.get("grid"),Q=U.get("store"),R=U.get("columns"),T={};M.each(R,function(W){if(W.get("summary")){var V=W.get("dataIndex");T[V]=Q.sum(V)}});return T}});return L});define("bui/grid/plugins/editing",function(C){var B=BUI.prefix+"grid-cell-inner",A=BUI.prefix+"grid-cell-error";function D(E){D.superclass.constructor.call(this,E)}BUI.extend(D,BUI.Base);D.ATTRS={align:{value:{points:["cl","cl"]}},showError:{value:true},errorTpl:{value:'<span class="x-icon '+A+' x-icon-mini x-icon-error" title="{error}">!</span>'},isInitEditors:{value:false},record:{},curEditor:{},hasValid:{},editors:{value:[]},triggerCls:{},triggerSelected:{value:true}};BUI.augment(D,{initializer:function(F){var E=this;E.set("grid",F);E.initEditing(F)},renderUI:function(){var E=this,F=E.get("grid");BUI.use("bui/editor",function(G){E.initEditors(G);E._initGridEvent(F);E.set("isInitEditors",true)})},initEditing:function(E){},_getCurEditor:function(){return this.get("curEditor")},_initGridEvent:function(H){var E=this,G=H.get("header");H.on("cellclick",function(M){var L=null,J=M.domTarget,I=E.get("triggerCls"),K=E._getCurEditor();if(K&&K.get("acceptEvent")){K.accept();K.hide()}else{K&&K.cancel()}L=E.getEditor(M.field);if(L&&$(J).closest("."+I).length){E.showEditor(L,M);if(!E.get("triggerSelected")){return false}}});H.on("rowcreated",function(I){F(I.record,I.row)});H.on("rowremoved",function(I){if(E.get("record")==I.record){E.cancel()}});H.on("rowupdated",function(I){F(I.record,I.row)});H.on("scroll",function(L){var K=E._getCurEditor();if(K){var J=K.get("align"),I=J.node,M=I.position();if(M.top<0||M.top>L.bodyHeight){K.hide()}else{K.set("align",J);K.show()}}});G.on("afterVisibleChange",function(J){if(J.target&&J.target!=G){var I=J.target;E.onColumnVisibleChange(I)}});function F(J,I){if(E.get("hasValid")){E.validRecord(J,E.getFields(),$(I))}}},initEditors:function(J){var E=this,F=E.get("grid"),H=[],G=F.get("columns");BUI.each(G,function(L){var K=E.getFieldConfig(L);if(K){K.name=L.get("dataIndex");K.id=L.get("id");if(K.validator){K.validator=E.wrapValidator(K.validator)}H.push(K)}});var I=E.getEditorCfgs(H);BUI.each(I,function(K){E.initEidtor(K,J)})},getFieldConfig:function(E){return E.get("editor")},wrapValidator:function(F){var E=this;return function(H){var G=E.get("record");return F(H,G)}},onColumnVisibleChange:function(E){},getEditorCfgs:function(E){},getEditorConstructor:function(E){return E.Editor},initEidtor:function(G,I){var E=this,F=E.getEditorConstructor(I),H=new F(G);H.render();E.get("editors").push(H);E.bindEidtor(H);return H},bindEidtor:function(G){var E=this,H=E.get("grid"),F=H.get("store");G.on("accept",function(){var I=E.get("record");E.updateRecord(F,I,G);E.set("curEditor",null)});G.on("cancel",function(){E.set("curEditor",null)})},getEditor:function(E){},getAlignNode:function(E){},getEditValue:function(E){},showEditor:function(I,F){var E=this,H=E.getEditValue(F),G=E.getAlignNode(F);E.beforeShowEditor(I,F);E.set("record",F.record);I.setValue(H);if(G){var J=E.get("align");J.node=G;I.set("align",J)}I.show();E.focusEditor(I,F.field);E.set("curEditor",I)},focusEditor:function(F,E){F.focus()},beforeShowEditor:function(F,E){},_createEditOptions:function(G,H){var E=this,K=E.get("grid"),I=K.findRow(G),J=K.findColumnByField(H),F=K.findCell(J.get("id"),I);return{record:G,field:H,cell:F[0],row:I[0]}},valid:function(){var E=this,H=E.get("grid"),F=H.get("store");if(F){var G=F.getResult();BUI.each(G,function(I){E.validRecord(I,E.getFields())})}E.set("hasValid",true)},isValid:function(){var E=this,F=E.get("grid");if(!E.get("hasValid")){E.valid()}return !F.get("el").find("."+A).length},clearErrors:function(){var E=this,F=E.get("grid");F.get("el").find("."+A).remove()},getFields:function(E){},validRecord:function(H,I,G){var E=this,F=[];E.setInternal("record",H);I=I||E.getFields();BUI.each(I,function(L){var K=L.get("name"),J=H[K]||"",M=L.getValidError(J);if(M){F.push({name:K,error:M,id:L.get("id")})}});E.showRecordError(H,F,G)},showRecordError:function(H,F,G){var E=this,I=E.get("grid");G=G||I.findRow(H);if(G){E._clearRowError(G);BUI.each(F,function(J){var K=I.findCell(J.id,G);E._showCellError(K,J.error)})}},updateRecord:function(E,F,G){},_clearRowError:function(E){E.find("."+A).remove()},_showCellError:function(H,F){var E=this,G=BUI.substitute(E.get("errorTpl"),{error:F}),I=H.find("."+B);$(G).appendTo(I)},edit:function(G,H){var E=this,F=E._createEditOptions(G,H),I=E.getEditor(H);E.showEditor(I,F)},cancel:function(){var E=this,F=E.get("editors");BUI.each(F,function(G){if(G.get("visible")){G.cancel()}});E.set("curEditor",null);E.set("record",null)},destructor:function(){var E=this,F=E.get("editors");BUI.each(F,function(G){G.destroy||G.destroy()});E.off();E.clearAttrVals()}});return D});define("bui/grid/plugins/cellediting",["bui/grid/plugins/editing"],function(B){var E=B("bui/grid/plugins/editing"),C=BUI.prefix+"grid-body",A=BUI.prefix+"grid-cell";var D=function(F){D.superclass.constructor.call(this,F)};D.ATTRS={triggerCls:{value:A}};BUI.extend(D,E);BUI.augment(D,{getEditorCfgs:function(J){var F=this,G=F.get("grid"),I=G.get("el").find("."+C),H=[];BUI.each(J,function(K){H.push({field:K,changeSourceEvent:null,hideExceptNode:I,autoUpdate:false,preventHide:false})});return H},getEditor:function(H){if(!H){return null}var F=this,G=F.get("editors"),I=null;BUI.each(G,function(J){if(J.get("field").get("name")===H){I=J;return false}});return I},beforeShowEditor:function(I,G){var F=this,H=$(G.cell);F.resetWidth(I,H.outerWidth())},resetWidth:function(G,F){G.set("width",F)},updateRecord:function(G,I,K){var F=this,J=K.getValue(),H=K.get("field").get("name"),L=I[H];J=BUI.isDate(J)?J.getTime():J;if(L!==J){G.setValue(I,H,J)}},getAlignNode:function(F){return $(F.cell)},getFields:function(){var H=[],F=this,G=F.get("editors");BUI.each(G,function(I){H.push(I.get("field"))});return H},getEditValue:function(F){if(F.record&&F.field){var G=F.record[F.field];return G==null?"":G}return""}});return D});define("bui/grid/plugins/rowediting",["bui/common","bui/grid/plugins/editing"],function(A){var D=A("bui/common"),E=A("bui/grid/plugins/editing"),B=D.prefix+"grid-row";var C=function(F){C.superclass.constructor.call(this,F)};C.ATTRS={align:{value:{points:["tl","tl"],offset:[-2,0]}},triggerCls:{value:B}};D.extend(C,E);D.augment(C,{getEditorCfgs:function(G){var F=[];F.push({changeSourceEvent:null,autoUpdate:false,form:{children:G,buttonBar:{elCls:"centered toolbar"}}});return F},wrapValidator:function(G){var F=this;return function(I){var J=F.get("curEditor"),H=J?J.getValue():F.get("record");if(H){return G(I,H)}}},focusEditor:function(H,G){var F=H.get("form"),I=F.getField(G);if(I){I.focus()}},getFieldConfig:function(H){var G=H.get("editor");if(G){return G}var F={xtype:"plain"};if(H.get("dataIndex")&&H.get("renderer")){F.renderer=H.get("renderer")}return F},updateRecord:function(G,H,J){var F=this,I=J.getValue();D.each(I,function(K,L){if(D.isDate(K)){I[L]=K.getTime()}});D.mix(H,I);G.update(H)},getEditor:function(H){var F=this,G=F.get("editors");return G[0]},onColumnVisibleChange:function(I){var F=this,J=I.get("id"),H=F.getEditor(),G=H.getChild(J,true);if(G){G.set("visible",I.get("visible"))}},beforeShowEditor:function(K,J){var F=this,L=F.get("grid"),H=L.get("columns"),G=K.get("form"),I=$(J.row);K.set("width",I.width());D.each(H,function(P){if(!P.get("visible")){O.set("visible",false)}else{var N=P.get("dataIndex"),O=G.getField(N),M=P.get("el").outerWidth()-O.getAppendWidth();O.set("width",M)}})},getEditValue:function(F){return F.record},getEditorConstructor:function(F){return F.RecordEditor},getAlignNode:function(F){return $(F.row)},getFields:function(){var F=this,G=F.get("editors");return G[0].get("form").get("children")}});return C});define("bui/grid/plugins/dialogediting",["bui/common"],function(B){var D=B("bui/common"),E="add",A="edit";function C(F){C.superclass.constructor.call(this,F)}C.ATTRS={record:{},curIndex:{},contentId:{},editor:{},form:{},events:{value:{recordchange:false}},editType:{}};D.extend(C,D.Base);D.augment(C,{initializer:function(G){var F=this;F.set("grid",G);D.use("bui/editor",function(H){F._initEditor(H)})},bindUI:function(H){var F=this,G=F.get("triggerCls");if(G){H.on("cellclick",function(K){var I=$(K.domTarget),J=F.get("editor");if(I.hasClass(G)&&J){F.edit(K.record);if(H.get("multipleSelect")){return false}}})}},_initEditor:function(K){var F=this,G=F.get("contentId"),H=$("#"+G).find("form"),J=F.get("editor"),I=D.merge(J,{contentId:G,form:{srcNode:H}});J=new K.DialogEditor(I);F._bindEditor(J);F.set("editor",J);F.set("form",J.get("form"))},_bindEditor:function(G){var F=this;G.on("accept",function(){var H=G.get("form"),I=H.serializeToObject();F.saveRecord(I)})},edit:function(G){var F=this;F.set("editType",A);F.showEditor(G)},add:function(G,H){var F=this;F.set("editType",E);F.set("curIndex",H);F.showEditor(G)},saveRecord:function(I){var F=this,L=F.get("grid"),H=F.get("editType"),J=F.get("curIndex"),G=L.get("store"),K=F.get("record");D.mix(K,I);if(H==E){if(J!=null){G.addAt(K,J)}else{G.add(K)}}else{G.update(K)}},showEditor:function(G){var F=this,H=F.get("editor");H.show();H.setValue(G);F.set("record",G);F.fire("recordchange",{record:G,editType:F.get("editType")})},cancel:function(){var F=this,G=F.get("editor");G.cancel()},destructor:function(){var F=this,G=F.get("editor");G&&G.destroy();F.off();F.clearAttrVals()}});return C});define("bui/tree",["bui/common","bui/tree/treemixin","bui/tree/treelist"],function(A){var C=A("bui/common"),B=C.namespace("Tree");C.mix(B,{TreeList:A("bui/tree/treelist"),Mixin:A("bui/tree/treemixin")});return B});define("bui/tree/treemixin",["bui/common","bui/data"],function(R){function U(W,X){if(T.isString(X)){X=W.getItem(X)}return X}var T=R("bui/common"),G=R("bui/data"),L="expanded",J="loading",V="checked",E="partial-checked",M={NONE:"none",ALL:"all",CUSTOM:"custom",ONLY_LEAF:"onlyLeaf"},K="x-tree-icon",A="x-tree-elbow",P="x-tree-show-line",I=A+"-",F=K+"-wraper",D=I+"line",C=I+"end",O=I+"empty",H=I+"expander",Q=K+"-checkbox",B=H+"-end",N=function(){};N.ATTRS={store:{getter:function(Y){if(!Y){var W=this,X=new G.TreeStore({root:W.get("root"),data:W.get("nodes")});W.setInternal("store",X);return X}return Y}},root:{},nodes:{sync:false},iconContainer:{},iconWraperTpl:{value:'<span class="'+F+'">{icons}</span>'},showLine:{value:false},iconTpl:{value:'<span class="x-tree-icon {cls}"></span>'},leafCls:{value:I+"leaf"},dirCls:{value:I+"dir"},checkType:{value:"custom"},checkedField:{valueFn:function(){return this.getStatusField("checked")}},itemStatusFields:{value:{expanded:"expanded",disabled:"disabled",checked:"checked"}},dirSelectable:{value:true},showRoot:{value:false},events:{value:{expanded:false,collapsed:false,checkchange:false}},startLevel:{value:1}};T.augment(N,{collapseAll:function(){var W=this,X=W.get("view").getAllElements();T.each(X,function(Z){var Y=W.getItemByElement(Z);if(Y){W._collapseNode(Y,Z,true)}})},collapseNode:function(X){var W=this,Y;if(T.isString(X)){X=W.findNode(X)}Y=W.findElement(X);W._collapseNode(X,Y)},expandAll:function(){var W=this,X=W.get("view").getAllElements();T.each(X,function(Z){var Y=W.getItemByElement(Z);W._expandNode(Y,Z,true)})},expandNode:function(Y,X){var W=this,Z;if(T.isString(Y)){Y=W.findNode(Y)}if(Y.parent&&!W.isExpanded(Y.parent)){W.expandNode(Y.parent)}Z=W.findElement(Y);W._expandNode(Y,Z,X)},expandPath:function(c,W,f){if(!c){return}f=f||0;var b=this,d=b.get("store"),e,a,Z,X,Y=c.split(",");e=b.findNode(Y[f]);for(Z=f+1;Z<Y.length;Z++){X=Y[Z];a=b.findNode(X,e);if(e&&a){b.expandNode(e);e=a}else{if(e&&W){d.load({id:e.id},function(){a=b.findNode(X,e);if(a){b.expandPath(c,W,Z)}});break}}}},findNode:function(X,W){return this.get("store").findNode(X,W)},getCheckedLeaf:function(Y){var W=this,X=W.get("store");return X.findNodesBy(function(Z){return Z.leaf&&W.isChecked(Z)},Y)},getCheckedNodes:function(Y){var W=this,X=W.get("store");return X.findNodesBy(function(Z){return W.isChecked(Z)},Y)},isExpanded:function(X){if(!X||X.leaf){return false}var W=this,Y;if(W._isRoot(X)&&!W.get("showRoot")){return true}if(T.isString(X)){item=W.getItem(X)}Y=W.findElement(X);return this._isExpanded(X,Y)},isChecked:function(W){if(!W){return false}return W[this.get("checkedField")]},toggleExpand:function(X){var W=this,Y;if(T.isString(X)){item=W.getItem(X)}Y=W.findElement(X);W._toggleExpand(X,Y)},setNodeChecked:function(Y,Z,X){X=X==null?true:X;var W=this,a,b;Y=U(this,Y);a=Y.parent;if(!W.isCheckable(Y)){return}if(W.isChecked(Y)!==Z||W.hasStatus(Y,"checked")!==Z){b=W.findElement(Y);if(b){W.setItemStatus(Y,V,Z,b);W._resetPatialChecked(Y,Z,Z,b)}else{if(!W.isItemDisabled(Y)){W.setStatusValue(Y,"checked",Z)}}if(a){if(W.isChecked(a)!=Z){W._resetParentChecked(a)}else{W._resetPatialChecked(a,null,null,null,true)}}W.fire("checkchange",{node:Y,element:b,checked:Z})}if(!Y.leaf&&X){T.each(Y.children,function(c){W.setNodeChecked(c,Z,X)})}},_initRoot:function(){var W=this,X=W.get("store"),Y,a=W.get("showRoot"),Z;if(X){Y=X.get("root");W.setInternal("root",Y);if(a){Z=[Y]}else{Z=Y.children}T.each(Z,function(b){W._initChecked(b,true)});W.clearItems();W.addItems(Z)}},_initChecked:function(Y,X){var W=this,a=W.get("checkType"),Z=W.get("checkedField"),b;if(a===M.NONE){delete Y[Z];return}if(a===M.ONLY_LEAF){if(Y.leaf){Y[Z]=Y[Z]||false}else{delete Y[Z];if(X){T.each(Y.children,function(c){W._initChecked(c,X)})}}return}if(a===M.ALL){Y[Z]=Y[Z]||false}if(!Y||!W.isCheckable(Y)){return}b=Y.parent;if(!W.isChecked(Y)){if(b&&W.isChecked(b)){W.setStatusValue(Y,"checked",true)}if(W._isAllChildrenChecked(Y)){W.setStatusValue(Y,"checked",true)}}if(X){T.each(Y.children,function(c){W._initChecked(c,X)})}},_resetPatialChecked:function(Z,a,Y,b,W){if(!Z||Z.leaf){return true}var X=this,Y;a=a==null?X.isChecked(Z):a;if(a){X.setItemStatus(Z,E,false,b);return}Y=Y==null?X._hasChildChecked(Z):Y;X.setItemStatus(Z,E,Y,b);if(W&&Z.parent){X._resetPatialChecked(Z.parent,false,Y?Y:null,null,W)}},_resetParentChecked:function(X){if(!this.isCheckable(X)){return}var W=this,Y=W._isAllChildrenChecked(X);W.setStatusValue(X,"checked",Y);W.setNodeChecked(X,Y,false);W._resetPatialChecked(X,Y,null,null)},__bindUI:function(){var W=this,X=W.get("el");W.on("itemclick",function(c){var Y=$(c.domTarget),b=c.element,Z=c.item;if(Y.hasClass(H)){W._toggleExpand(Z,b);return false}else{if(Y.hasClass(Q)){var a=W.isChecked(Z);W.setNodeChecked(Z,!a)}}});W.on("itemdblclick",function(b){var Y=$(b.domTarget),a=b.element,Z=b.item;if(!Y.hasClass(H)){W._toggleExpand(Z,a)}});W.on("beforeselectedchange",function(a){var Y=W.get("dirSelectable"),Z=a.item;if(!Y&&!Z.leaf){return false}});W.on("itemrendered",function(a){var Y=a.item,Z=a.domTarget;W._resetIcons(Y,Z);if(W.isCheckable(Y)){W._resetPatialChecked(Y,null,null,Z)}if(W._isExpanded(Y,Z)){W._showChildren(Y)}})},_isAllChildrenChecked:function(X){if(!X||X.leaf){return false}var W=this,Z=X.children,Y=true;T.each(Z,function(a){Y=Y&&W.isChecked(a);if(!Y){return false}});return Y},_hasChildChecked:function(X){if(!X||X.leaf){return false}var W=this;return W.getCheckedNodes(X).length!=0},_isRoot:function(Y){var W=this,X=W.get("store");if(X&&X.get("root")==Y){return true}return false},_setLoadStatus:function(X,Z,Y){var W=this;W.setItemStatus(X,J,Y,Z)},_beforeLoadNode:function(X){var W=this,Y;if(T.isString(X)){X=W.findNode(X)}Y=W.findElement(X);if(Y){W._setLoadStatus(X,Y,true)}if(X){T.each(X.children,function(Z){W._removeNode(Z)})}},onBeforeLoad:function(X){var W=this,Z=X.params,a=Z.id,Y=W.findNode(a)||W.get("root");W._beforeLoadNode(Y)},_addNode:function(a,W){var b=this,c=a.parent,d,Y,X,Z;b._initChecked(a,true);if(c){if(b.isExpanded(c)){d=c.children.length;Z=b._getInsetIndex(a);b.addItemAt(a,Z);if(W==d-1&&W>0){Y=c.children[W-1];b._updateIcons(Y)}}b._updateIcons(c)}else{Z=b._getInsetIndex(a);b.addItemAt(a,Z);Y=b.get("nodes")[W-1];b._updateIcons(Y)}},_getInsetIndex:function(X){var W=this,Z,Y=null;Z=W._getNextItem(X);if(Z){return W.indexOfItem(Z)}return W.getItemCount()},_getNextItem:function(Z){var W=this,a=Z.parent,b,Y,X=null;if(!a){return null}b=a.children;Y=T.Array.indexOf(Z,b);X=b[Y+1];return X||W._getNextItem(a)},onAdd:function(X){var W=this,Y=X.node,Z=X.index;W._addNode(Y,Z)},_updateNode:function(X){var W=this;W.updateItem(X);W._updateIcons(X)},onUpdate:function(X){var W=this,Y=X.node;W._updateNode(Y)},_removeNode:function(Y,Z){var W=this,a=Y.parent,b,X;W.collapseNode(Y);if(!a){return}W.removeItem(Y);if(W.isExpanded(a)){b=a.children.length;if(b==Z&&Z!==0){X=a.children[Z-1];W._updateIcons(X)}}W._updateIcons(a);W._resetParentChecked(a)},onRemove:function(X){var W=this,Y=X.node,Z=X.index;W._removeNode(Y,Z)},_loadNode:function(X){var W=this;W.expandNode(X);W._updateIcons(X);W.setItemStatus(X,J,false)},onLoad:function(Y){var W=this,X=W.get("store"),a=X.get("root"),Z;if(!Y||Y.node==a){W._initRoot()}if(Y&&Y.node){W._loadNode(Y.node)}},_isExpanded:function(W,X){return this.hasStatus(W,L,X)},_getIconsTpl:function(Z){var W=this,Y=Z.level,c=W.get("startLevel"),b=W.get("iconWraperTpl"),a=[],X;for(X=c;X<Y;X=X+1){a.push(W._getLevelIcon(Z,X))}a.push(W._getExpandIcon(Z));a.push(W._getCheckedIcon(Z));a.push(W._getNodeTypeIcon(Z));return T.substitute(b,{icons:a.join("")})},_getCheckedIcon:function(Y){var W=this,X=W.isCheckable(Y);if(X){return W._getIcon(Q)}return""},isCheckable:function(W){return W[this.get("checkedField")]!=null},_getExpandIcon:function(X){var W=this,Y=H;if(X.leaf){return W._getLevelIcon(X)}if(W._isLastNode(X)){Y=Y+" "+B}return W._getIcon(Y)},_getNodeTypeIcon:function(X){var W=this,Y=X.cls?X.cls:(X.leaf?W.get("leafCls"):W.get("dirCls"));return W._getIcon(Y)},_getLevelIcon:function(Z,Y){var W=this,X=W.get("showLine"),a=O,b;if(X){if(Z.level===Y||Y==null){a=W._isLastNode(Z)?C:A}else{b=W._getParentNode(Z,Y);a=W._isLastNode(b)?O:D}}return W._getIcon(a)},_getParentNode:function(Z,Y){var X=Z.level,a=Z.parent,W=X-1;if(X<=Y){return null}while(W>Y){a=a.parent;W=W-1}return a},_getIcon:function(X){var W=this,Y=W.get("iconTpl");return T.substitute(Y,{cls:X})},_isLastNode:function(Y){if(!Y){return false}if(Y==this.get("root")){return true}var W=this,Z=Y.parent,a=Z?Z.children:W.get("nodes"),X;X=a.length;return a[X-1]===Y},_initNodes:function(Y,X,Z){var W=this;T.each(Y,function(a){a.level=X;if(a.leaf==null){a.leaf=a.children?false:true}if(Z&&!a.parent){a.parent=Z}W._initChecked(a);if(a.children){W._initNodes(a.children,X+1,a)}})},_collapseNode:function(Y,Z,X){var W=this;if(Y.leaf){return}if(W.hasStatus(Y,L,Z)){W.setItemStatus(Y,L,false,Z);if(X){W._collapseChildren(Y,X);W.removeItems(Y.children)}else{W._hideChildrenNodes(Y)}W.fire("collapsed",{node:Y,element:Z})}},_hideChildrenNodes:function(X){var W=this,Y=X.children;T.each(Y,function(Z){W.removeItem(Z);W._hideChildrenNodes(Z)})},_collapseChildren:function(X,Y){var W=this,Z=X.children;T.each(Z,function(a){W.collapseNode(a,Y)})},_expandNode:function(Z,a,Y){var W=this,X=W.get("store");if(Z.leaf){return}if(!W.hasStatus(Z,L,a)){if(X&&!X.isLoaded(Z)){if(!W._isLoading(Z,a)){X.loadNode(Z)}}else{if(a){W.setItemStatus(Z,L,true,a);W._showChildren(Z);W.fire("expanded",{node:Z,element:a})}}}T.each(Z.children,function(b){if(Y||W.isExpanded(b)){W.expandNode(b,Y)}})},_showChildren:function(Z){if(!Z||!Z.children){return}var W=this,a=W.indexOfItem(Z),X=Z.children.length,b,Y;for(Y=X-1;Y>=0;Y--){b=Z.children[Y];if(!W.getItem(b)){W.addItemAt(b,a+1)}}},_isLoading:function(X,Y){var W=this;return W.hasStatus(X,J,Y)},_resetIcons:function(Z,b){var W=this,Y=W.get("iconContainer"),a,X=W._getIconsTpl(Z);$(b).find("."+F).remove();a=$(b).find("."+Y);if(Y&&a.length){$(X).appendTo(a)}else{$(b).prepend($(X))}},_toggleExpand:function(X,Y){var W=this;if(W._isExpanded(X,Y)){W._collapseNode(X,Y)}else{W._expandNode(X,Y)}},_updateIcons:function(X){var W=this,Y=W.findElement(X);if(Y){W._resetIcons(X,Y);if(W._isExpanded(X,Y)&&!X.leaf){T.each(X.children,function(Z){W._updateIcons(Z)})}}},_uiSetShowRoot:function(X){var W=this,Y=this.get("showRoot")?0:1;W.set("startLevel",Y)},_uiSetNodes:function(Y){var W=this,X=W.get("store");X.setResult(Y)},_uiSetShowLine:function(Y){var W=this,X=W.get("el");if(Y){X.addClass(P)}else{X.removeClass(P)}}});return N});define("bui/tree/treelist",["bui/common","bui/list","bui/tree/treemixin"],function(C){var D=C("bui/common"),A=C("bui/list"),B=C("bui/tree/treemixin");var E=A.SimpleList.extend([B],{},{ATTRS:{itemCls:{value:D.prefix+"tree-item"},itemTpl:{value:"<li>{text}</li>"},idField:{value:"id"}}},{xclass:"tree-list"});return E});define("bui/tooltip",["bui/common","bui/tooltip/tip","bui/tooltip/tips"],function(B){var E=B("bui/common"),A=E.namespace("Tooltip"),D=B("bui/tooltip/tip"),C=B("bui/tooltip/tips");E.mix(A,{Tip:D,Tips:C});return A});define("bui/tooltip/tip",["bui/common","bui/overlay"],function(C){var G=C("bui/common"),B=C("bui/overlay"),F="x-align-",E={left:["cl","cr"],right:["cr","cl"],top:["tc","bc"],bottom:["bc","tc"],"top-left":["tl","bl"],"top-right":["tr","br"],"bottom-left":["bl","tl"],"bottom-right":["br","tr"]};function H(I,J){if(I==="left"){return[-1*J,-4]}if(I==="right"){return[J,-4]}if(I.indexOf("top")){return[0,J]}if(I.indexOf("bottom")){return[0,-1*J]}}var D=B.OverlayView.extend({renderUI:function(){},_getTitleContainer:function(){return this.get("el")},_uiSetTitle:function(L){var I=this,J=I.get("titleTpl"),K=I._getTitleContainer(),N=I.get("titleEl"),M;if(N){N.remove()}L=L||"";if(G.isString(L)){L={title:L}}M=G.substitute(J,L);N=$(M).appendTo(K);I.set("titleEl",N)},_uiSetAlignType:function(I,K){var J=this;if(K&&K.prevVal){J.get("el").removeClass(F+K.prevVal)}if(I){J.get("el").addClass(F+I)}}},{ATTRS:{title:{},titleEl:{},alignType:{}}},{xclass:"tooltip-view"});var A=B.Overlay.extend({_uiSetAlignType:function(I){var L=this,J=L.get("offset"),M=L.get("align")||{},K=E[I];if(K){M.points=K;if(J){M.offset=H(I,J)}L.set("align",M)}}},{ATTRS:{delegateTigger:{value:true},alignType:{view:true},title:{view:true},showArrow:{value:true},arrowContainer:{view:true},autoHide:{value:true},autoHideType:{value:"leave"},offset:{value:0},triggerEvent:{value:"mouseover"},titleTpl:{view:true,value:"<span>{title}</span>"},xview:{value:D}}},{xclass:"tooltip"});A.View=D;return A});define("bui/tooltip/tips",["bui/common","bui/tooltip/tip"],function(B){function A(F){return/^{.*}$/.test(F)}var E=B("bui/common"),D=B("bui/tooltip/tip"),C=function(F){C.superclass.constructor.call(this,F)};C.ATTRS={tip:{},defaultAlignType:{}};E.extend(C,E.Base);E.augment(C,{_init:function(){this._initDom();this._initEvent()},_initDom:function(){var F=this,G=F.get("tip"),H;if(G&&!G.isController){H=G.alignType;G=new D(G);G.render();F.set("tip",G);if(H){F.set("defaultAlignType",H)}}},_initEvent:function(){var F=this,G=F.get("tip");G.on("triggerchange",function(I){var H=I.curTrigger;F._replaceTitle(H);F._setTitle(H,G)})},_replaceTitle:function(F){var G=F.attr("title");if(G){F.attr("data-title",G);F[0].removeAttribute("title")}},_setTitle:function(H,G){var F=this,I=H.attr("data-title"),J=H.attr("data-align")||F.get("defaultAlignType");if(A(I)){I=E.JSON.looseParse(I)}G.set("title",I);if(J){G.set("alignType",J)}},render:function(){this._init();return this}});return C});BUI.use(["bui/common","bui/data","bui/list","bui/picker","bui/menu","bui/toolbar","bui/progressbar","bui/cookie","bui/form","bui/mask","bui/select","bui/tab","bui/calendar","bui/overlay","bui/editor","bui/grid","bui/tree","bui/tooltip"]);