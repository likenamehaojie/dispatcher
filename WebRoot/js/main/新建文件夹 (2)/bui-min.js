this.seajs={_seajs:this.seajs};seajs.version="1.3.0";seajs._util={};seajs._config={debug:"%DEBUG%",preload:[]};(function(a){var d=Object.prototype.toString;var b=Array.prototype;a.isString=function(f){return d.call(f)==="[object String]"};a.isFunction=function(f){return d.call(f)==="[object Function]"};a.isRegExp=function(f){return d.call(f)==="[object RegExp]"};a.isObject=function(f){return f===Object(f)};a.isArray=Array.isArray||function(f){return d.call(f)==="[object Array]"};a.indexOf=b.indexOf?function(f,g){return f.indexOf(g)}:function(f,h){for(var g=0;g<f.length;g++){if(f[g]===h){return g}}return -1};var e=a.forEach=b.forEach?function(f,g){f.forEach(g)}:function(f,h){for(var g=0;g<f.length;g++){h(f[g],g,f)}};a.map=b.map?function(f,g){return f.map(g)}:function(f,h){var g=[];e(f,function(l,k,j){g.push(h(l,k,j))});return g};a.filter=b.filter?function(f,g){return f.filter(g)}:function(f,h){var g=[];e(f,function(l,k,j){if(h(l,k,j)){g.push(l)}});return g};var c=a.keys=Object.keys||function(h){var f=[];for(var g in h){if(h.hasOwnProperty(g)){f.push(g)}}return f};a.unique=function(f){var g={};e(f,function(h){g[h]=1});return c(g)};a.now=Date.now||function(){return new Date().getTime()}})(seajs._util);(function(a){a.log=function(){if(typeof console==="undefined"){return}var b=Array.prototype.slice.call(arguments);var c="log";var e=b[b.length-1];console[e]&&(c=b.pop());if(c==="log"&&!seajs.debug){return}if(console[c].apply){console[c].apply(console,b);return}var d=b.length;if(d===1){console[c](b[0])}else{if(d===2){console[c](b[0],b[1])}else{if(d===3){console[c](b[0],b[1],b[2])}else{console[c](b.join(" "))}}}}})(seajs._util);(function(b,v,q){var e=/.*(?=\/.*$)/;var c=/([^:\/])\/\/+/g;var m=/\.(?:css|js)$/;var a=/^(.*?\w)(?:\/|$)/;function d(x){var w=x.match(e);return(w?w[0]:".")+"/"}function h(A){c.lastIndex=0;if(c.test(A)){A=A.replace(c,"$1/")}if(A.indexOf(".")===-1){return A}var z=A.split("/");var x=[],w;for(var y=0;y<z.length;y++){w=z[y];if(w===".."){if(x.length===0){throw new Error("The path is invalid: "+A)}x.pop()}else{if(w!=="."){x.push(w)}}}return x.join("/")}function s(x){x=h(x);var w=x.charAt(x.length-1);if(w==="/"){return x}if(w==="#"){x=x.slice(0,-1)}else{if(x.indexOf("?")===-1&&!m.test(x)){x+=".js"}}if(x.indexOf(":80/")>0){x=x.replace(":80/","/")}return x}function o(z){if(z.charAt(0)==="#"){return z.substring(1)}var w=v.alias;if(w&&i(z)){var x=z.split("/");var y=x[0];if(w.hasOwnProperty(y)){x[0]=w[y];z=x.join("/")}}return z}var p={};function f(z){var B=v.map||[];if(!B.length){return z}var x=z;for(var y=0;y<B.length;y++){var A=B[y];if(b.isArray(A)&&A.length===2){var w=A[0];if(b.isString(w)&&x.indexOf(w)>-1||b.isRegExp(w)&&w.test(x)){x=x.replace(w,A[1])}}else{if(b.isFunction(A)){x=A(x)}}}if(!l(x)){x=h(d(u)+x)}if(x!==z){p[x]=z}return x}function n(w){return p[w]||w}function j(y,x){if(!y){return""}y=o(y);x||(x=u);var w;if(l(y)){w=y}else{if(k(y)){if(y.indexOf("./")===0){y=y.substring(2)}w=d(x)+y}else{if(t(y)){w=x.match(a)[1]+y}else{w=v.base+"/"+y}}}return s(w)}function l(w){return w.indexOf("://")>0||w.indexOf("//")===0}function k(w){return w.indexOf("./")===0||w.indexOf("../")===0}function t(w){return w.charAt(0)==="/"&&w.charAt(1)!=="/"}function i(x){var w=x.charAt(0);return x.indexOf("://")===-1&&w!=="."&&w!=="/"}function r(w){if(w.charAt(0)!=="/"){w="/"+w}return w}var g=q["location"];var u=g.protocol+"//"+g.host+r(g.pathname);if(u.indexOf("\\")>0){u=u.replace(/\\/g,"/")}b.dirname=d;b.realpath=h;b.normalize=s;b.parseAlias=o;b.parseMap=f;b.unParseMap=n;b.id2Uri=j;b.isAbsolute=l;b.isRoot=t;b.isTopLevel=i;b.pageUri=u})(seajs._util,seajs._config,this);(function(f,b){var m=document;var l=m.head||m.getElementsByTagName("head")[0]||m.documentElement;var n=l.getElementsByTagName("base")[0];var a=/\.css(?:\?|$)/i;var h=/loaded|complete|undefined/;var c;var e;f.fetch=function(s,w,v){var r=a.test(s);var u=document.createElement(r?"link":"script");if(v){var t=f.isFunction(v)?v(s):v;t&&(u.charset=t)}p(u,w||q);if(r){u.rel="stylesheet";u.href=s}else{u.async="async";u.src=s}c=u;n?l.insertBefore(u,n):l.appendChild(u);c=null};function p(r,s){if(r.nodeName==="SCRIPT"){g(r,s)}else{k(r,s)}}function g(r,s){r.onload=r.onerror=r.onreadystatechange=function(){if(h.test(r.readyState)){r.onload=r.onerror=r.onreadystatechange=null;if(r.parentNode&&!b.debug){l.removeChild(r)}r=undefined;s()}}}function k(r,s){if(o||d){f.log("Start poll to fetch css");setTimeout(function(){j(r,s)},1)}else{r.onload=r.onerror=function(){r.onload=r.onerror=null;r=undefined;s()}}}function j(t,u){var r;if(o){if(t["sheet"]){r=true}}else{if(t["sheet"]){try{if(t["sheet"].cssRules){r=true}}catch(s){if(s.name==="NS_ERROR_DOM_SECURITY_ERR"){r=true}}}}setTimeout(function(){if(r){u()}else{j(t,u)}},1)}function q(){}f.getCurrentScript=function(){if(c){return c}if(e&&e.readyState==="interactive"){return e}var r=l.getElementsByTagName("script");for(var t=0;t<r.length;t++){var s=r[t];if(s.readyState==="interactive"){e=s;return s}}};f.getScriptAbsoluteSrc=function(r){return r.hasAttribute?r.src:r.getAttribute("src",4)
};f.importStyle=function(s,t){if(t&&m.getElementById(t)){return}var r=m.createElement("style");t&&(r.id=t);l.appendChild(r);if(r.styleSheet){r.styleSheet.cssText=s}else{r.appendChild(m.createTextNode(s))}};var i=navigator.userAgent;var o=Number(i.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"))<536;var d=i.indexOf("Firefox")>0&&!("onload" in document.createElement("link"))})(seajs._util,seajs._config,this);(function(a){var b=/(?:^|[^.$])\brequire\s*\(\s*(["'])([^"'\s\)]+)\1\s*\)/g;a.parseDependencies=function(f){var e=[],d;f=c(f);b.lastIndex=0;while((d=b.exec(f))){if(d[2]){e.push(d[2])}}return a.unique(e)};function c(d){return d.replace(/^\s*\/\*[\s\S]*?\*\/\s*$/mg,"").replace(/^\s*\/\/.*$/mg,"")}})(seajs._util);(function(g,a,v){var k={};var l={};var d=[];var e={"FETCHING":1,"FETCHED":2,"SAVED":3,"READY":4,"COMPILING":5,"COMPILED":6};function z(B,A){this.uri=B;this.status=A||0}z.prototype._use=function(B,C){a.isString(B)&&(B=[B]);var A=s(B,this.uri);this._load(A,function(){n(function(){var D=a.map(A,function(E){return E?k[E]._compile():null});if(C){C.apply(null,D)}})})};z.prototype._load=function(B,G){var E=a.filter(B,function(H){return H&&(!k[H]||k[H].status<e.READY)});var D=E.length;if(D===0){G();return}var F=D;for(var C=0;C<D;C++){(function(J){var I=k[J]||(k[J]=new z(J,e.FETCHING));I.status>=e.FETCHED?H():r(J,H);function H(){I=k[J];if(I.status>=e.SAVED){var K=y(I);if(K.length){z.prototype._load(K,function(){A(I)})}else{A(I)}}else{A()}}})(E[C])}function A(H){(H||{}).status<e.READY&&(H.status=e.READY);--F===0&&G()}};z.prototype._compile=function(){var C=this;if(C.status===e.COMPILED){return C.exports}if(C.status<e.SAVED&&!u(C)){return null}C.status=e.COMPILING;function B(F){var D=s(F,C.uri);var E=k[D];if(!E){return null}if(E.status===e.COMPILING){return E.exports}E.parent=C;return E._compile()}B.async=function(D,E){C._use(D,E)};B.resolve=function(D){return s(D,C.uri)};B.cache=k;C.require=B;C.exports={};var A=C.factory;if(a.isFunction(A)){d.push(C);f(A,C);d.pop()}else{if(A!==undefined){C.exports=A}}C.status=e.COMPILED;c(C);return C.exports};z._define=function(A,H,D){var C=arguments.length;if(C===1){D=A;A=undefined}else{if(C===2){D=H;H=undefined;if(a.isArray(A)){H=A;A=undefined}}}if(!a.isArray(H)&&a.isFunction(D)){H=a.parseDependencies(D.toString())}var J={id:A,dependencies:H,factory:D};var I;if(document.attachEvent){var F=a.getCurrentScript();if(F){I=a.unParseMap(a.getScriptAbsoluteSrc(F))}if(!I){a.log("Failed to derive URI from interactive script for:",D.toString(),"warn")}}var E=A?s(A):I;if(E){if(E===I){var G=k[I];if(G&&G.realUri&&G.status===e.SAVED){k[I]=null}}var B=z._save(E,J);if(I){if((k[I]||{}).status===e.FETCHING){k[I]=B;B.realUri=I}}else{o||(o=B)}}else{w=J}};z._getCompilingModule=function(){return d[d.length-1]};z._find=function(A){var B=[];a.forEach(a.keys(k),function(D){if(a.isString(A)&&D.indexOf(A)>-1||a.isRegExp(A)&&A.test(D)){var C=k[D];C.exports&&B.push(C.exports)}});return B};z._modify=function(D,A){var C=s(D);var B=k[C];if(B&&B.status===e.COMPILED){f(A,B)}else{l[C]||(l[C]=[]);l[C].push(A)}return g};z.STATUS=e;z._resolve=a.id2Uri;z._fetch=a.fetch;z._save=t;var j={};var p={};var h={};var w=null;var o=null;var i=[];function s(B,A){if(a.isString(B)){return z._resolve(B,A)}return a.map(B,function(C){return s(C,A)})}function r(A,C){var B=a.parseMap(A);if(p[B]){k[A]=k[B];C();return}if(j[B]){h[B].push(C);return}j[B]=true;h[B]=[C];z._fetch(B,function(){p[B]=true;var E=k[A];if(E.status===e.FETCHING){E.status=e.FETCHED}if(w){z._save(A,w);w=null}if(o&&E.status===e.FETCHED){k[A]=o;o.realUri=A}o=null;if(j[B]){delete j[B]}var D=h[B];if(D){delete h[B];a.forEach(D,function(F){F()})}},v.charset)}function t(B,C){var A=k[B]||(k[B]=new z(B));if(A.status<e.SAVED){A.id=C.id||B;A.dependencies=s(a.filter(C.dependencies||[],function(D){return !!D}),B);A.factory=C.factory;A.status=e.SAVED}return A}function f(C,B){var A=C(B.require,B.exports,B);if(A!==undefined){B.exports=A}}function u(A){return !!l[A.realUri||A.uri]}function c(B){var C=B.realUri||B.uri;var A=l[C];if(A){a.forEach(A,function(D){f(D,B)});delete l[C]}}function y(A){var B=A.uri;return a.filter(A.dependencies,function(D){i=[B];var C=b(k[D]);if(C){i.push(B);q(i)}return !C})}function b(B){if(!B||B.status!==e.SAVED){return false}i.push(B.uri);var C=B.dependencies;if(C.length){if(x(C,i)){return true}for(var A=0;A<C.length;A++){if(b(k[C[A]])){return true}}}i.pop();return false}function q(A,B){a.log("Found circular dependencies:",A.join(" --> "),B)}function x(C,B){var A=C.concat(B);return A.length>a.unique(A).length}function n(B){var A=v.preload.slice();v.preload=[];A.length?m._use(A,B):B()}var m=new z(a.pageUri,e.COMPILED);g.use=function(A,B){n(function(){m._use(A,B)});return g};g.define=z._define;g.cache=z.cache=k;g.find=z._find;g.modify=z._modify;z.fetchedList=p;g.pluginSDK={Module:z,util:a,config:v}})(seajs,seajs._util,seajs._config);(function(k,g,d){var l="seajs-ts=";var j=l+g.now();var c=document.getElementById("seajsnode");if(!c){var e=document.getElementsByTagName("script");
c=e[e.length-1]}var h=(c&&g.getScriptAbsoluteSrc(c))||g.pageUri;var a=g.dirname(m(h));g.loaderDir=a;var f=a.match(/^(.+\/)seajs\/[\.\d]+(?:-dev)?\/$/);if(f){a=f[1]}d.base=a;d.main=c&&c.getAttribute("data-main");d.charset="utf-8";k.config=function(w){for(var q in w){if(!w.hasOwnProperty(q)){continue}var r=d[q];var v=w[q];if(r&&q==="alias"){for(var u in v){if(v.hasOwnProperty(u)){var t=r[u];var n=v[u];if(/^\d+\.\d+\.\d+$/.test(n)){n=u+"/"+n+"/"+u}i(t,n,u);r[u]=n}}}else{if(r&&(q==="map"||q==="preload")){if(g.isString(v)){v=[v]}g.forEach(v,function(o){if(o){r.push(o)}})}else{d[q]=v}}}var s=d.base;if(s&&!g.isAbsolute(s)){d.base=g.id2Uri((g.isRoot(s)?"":"./")+s+"/")}if(d.debug===2){d.debug=1;k.config({map:[[/^.*$/,function(o){if(o.indexOf(l)===-1){o+=(o.indexOf("?")===-1?"?":"&")+j}return o}]]})}b();return this};function b(){if(d.debug){k.debug=!!d.debug}}b();function m(q){if(q.indexOf("??")===-1){return q}var o=q.split("??");var n=o[0];var p=g.filter(o[1].split(","),function(r){return r.indexOf("sea.js")!==-1});return n+p[0]}function i(o,p,n){if(o&&o!==p){g.log("The alias config is conflicted:","key =",'"'+n+'"',"previous =",'"'+o+'"',"current =",'"'+p+'"',"warn")}}})(seajs,seajs._util,seajs._config);(function(c,a,b){c.log=a.log;c.importStyle=a.importStyle;c.config({alias:{seajs:a.loaderDir}});a.forEach(d(),function(e){c.use("seajs/plugin-"+e);if(e==="debug"){c._use=c.use;c._useArgs=[];c.use=function(){c._useArgs.push(arguments);return c}}});function d(){var e=[];var f=b.location.search;f=f.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");f+=" "+document.cookie;f.replace(/seajs-(\w+)=[1-9]/g,function(g,h){e.push(h)});return a.unique(e)}})(seajs,seajs._util,this);(function(d,b,c){var a=d._seajs;if(a&&!a["args"]){c.seajs=d._seajs;return}c.define=d.define;b.main&&d.use(b.main);(function(e){if(e){var g={0:"config",1:"use",2:"define"};for(var f=0;f<e.length;f+=2){d[g[e[f]]].apply(d,e[f+1])}}})((a||0)["args"]);c.define.cmd={};delete d.define;delete d._util;delete d._config;delete d._seajs})(seajs,seajs._config,this);var loaderPath=seajs.pluginSDK.util.loaderDir;seajs.config({map:[[".js","-min.js"]],alias:{"bui":loaderPath},charset:"utf-8"});var BUI=BUI||{};BUI.use=seajs.use;BUI.config=seajs.config;BUI.setDebug=function(a){BUI.debug=a;if(a){seajs.config({map:[["-min.js",".js"]]})}else{seajs.config({map:[[".js","-min.js"]]})}};define("bui/common",["bui/ua","bui/json","bui/date","bui/array","bui/keycode","bui/observable","bui/observable","bui/base","bui/component"],function(a){var b=a("bui/util");b.mix(b,{UA:a("bui/ua"),JSON:a("bui/json"),Date:a("bui/date"),Array:a("bui/array"),KeyCode:a("bui/keycode"),Observable:a("bui/observable"),Base:a("bui/base"),Component:a("bui/component")});return b});var BUI=BUI||{};define("bui/util",function(){(function(i){if(i.fn){i.fn.on=i.fn.on||i.fn.bind;i.fn.off=i.fn.off||i.fn.unbind}})(jQuery);var g=window,f=document,a=Object.prototype,e=a.toString,d="ATTRS",h="PARSER",c="guid";$.extend(BUI,{version:1,subVersion:2,isFunction:function(i){return typeof(i)==="function"},isArray:("isArray" in Array)?Array.isArray:function(i){return e.call(i)==="[object Array]"},isDate:function(i){return e.call(i)==="[object Date]"},isObject:(e.call(null)==="[object Object]")?function(i){return i!==null&&i!==undefined&&e.call(i)==="[object Object]"&&i.ownerDocument===undefined}:function(i){return e.call(i)==="[object Object]"},augment:function(l,k){if(!BUI.isFunction(l)){return l}for(var j=1;j<arguments.length;j++){BUI.mix(l.prototype,arguments[j].prototype||arguments[j])}return l},cloneObject:function(j){var i=BUI.isArray(j)?[]:{};return BUI.mix(true,i,j)},error:function(i){if(BUI.debug){throw i}},extend:function(j,n,m,i){if(!BUI.isFunction(n)){m=n;n=j;j=function(){}}var k=Object.create?function(o,p){return Object.create(o,{constructor:{value:p}})}:function(q,s){function p(){}p.prototype=q;var r=new p();r.constructor=s;return r};var l=k(n.prototype,j);j.prototype=BUI.mix(l,j.prototype);j.superclass=k(n.prototype,n);BUI.mix(l,m);BUI.mix(j,i);return j},guid:(function(){var i={};return function(j){j=j||BUI.prefix+c;if(!i[j]){i[j]=1}else{i[j]+=1}return j+i[j]}})(),isString:function(i){return typeof i==="string"},isNumber:function(i){return typeof i==="number"},log:function(i){if(BUI.debug&&g.console&&g.console.log){g.console.log(i)}},merge:function(){var i=$.makeArray(arguments);i.unshift({});return BUI.mix.apply(null,i)},mix:function(){return $.extend.apply(null,arguments)},app:function(i){if(!window[i]){window[i]={namespace:function(j){return BUI.namespace(j,window[i])}}}return window[i]},mixin:function(o,i,k){k=k||[d,h];var l=i;if(l){o.mixins=l;var n={},m=l["concat"](o);BUI.each(m,function(p){if(p){BUI.each(k,function(q){if(p[q]){n[q]=n[q]||{};BUI.mix(true,n[q],p[q])}})}});BUI.each(n,function(q,p){o[p]=q});var j={};BUI.each(m,function(q){if(q){var r=q.prototype;for(var s in r){if(r.hasOwnProperty(s)){j[s]=r[s]}}}});BUI.each(j,function(q,p){o.prototype[p]=q})}return o},namespace:function(k,n){n=n||BUI;if(!k){return n}var m=k.split("."),j=n;
for(var l=0;l<m.length;l++){var o=m[l];if(!j[o]){j[o]={}}j=j[o]}return j},prefix:"bui-",substitute:function(k,j,i){if(!BUI.isString(k)||(!BUI.isObject(j))&&!BUI.isArray(j)){return k}return k.replace(i||/\\?\{([^{}]+)\}/g,function(m,l){if(m.charAt(0)==="\\"){return m.slice(1)}return(j[l]===undefined)?"":j[l]})},ucfirst:function(i){i+="";return i.charAt(0).toUpperCase()+i.substring(1)},isInView:function(o){var m=o.left,l=o.top,j=BUI.viewportWidth(),i=BUI.viewportHeight(),k=BUI.scrollTop(),n=BUI.scrollLeft();if(m<n||m>n+j){return false}if(l<k||l>k+i){return false}return true},isInVerticalView:function(k){var i=BUI.viewportHeight(),j=BUI.scrollTop();if(k<j||k>j+i){return false}return true},isInHorizontalView:function(j){var i=BUI.viewportWidth(),k=BUI.scrollLeft();if(j<k||j>k+i){return false}return true},viewportWidth:function(){return $(window).width()},viewportHeight:function(){return $(window).height()},scrollLeft:function(){return $(window).scrollLeft()},scrollTop:function(){return $(window).scrollTop()},docWidth:function(){var i=document.documentElement||document.body;return $(i).width()},docHeight:function(){var i=document.documentElement||document.body;return $(i).height()},each:function(j,i){if(!j){return}$.each(j,function(m,l){return i(l,m)})},wrapBehavior:function(i,j){return i["__bui_wrap_"+j]=function(k){if(!i.get("disabled")){i[j](k)}}},getWrapBehavior:function(i,j){return i["__bui_wrap_"+j]}});var b=BUI.FormHelper={serializeToObject:function(j){var k=$(j).serializeArray(),i={};BUI.each(k,function(m){var l=m.name;if(!i[l]){i[l]=m.value}else{if(!BUI.isArray(i[l])){i[l]=[i[l]]}i[l].push(m.value)}});return i},setFields:function(j,k){for(var i in k){if(k.hasOwnProperty(i)){BUI.FormHelper.setField(j,i,k[i])}}},clear:function(i){var j=$.makeArray(i.elements);BUI.each(j,function(k){if(k.type==="checkbox"||k.type==="radio"){$(k).attr("checked",false)}else{$(k).val("")}$(k).change()})},setField:function(j,l,k){var i=j.elements[l];if(BUI.isArray(i)){BUI.each(i,function(m){if(m.type==="checkbox"){if(m.value===k||BUI.Array.indexOf(m.value,k)!==-1){$(m).attr("checked",true)}}else{if(m.type==="radio"&&m.value===k){$(m).attr("checked",true)}else{$(m).val(k)}}})}else{$(i).val(k)}},getField:function(i,j){return BUI.FormHelper.serializeToObject(i)[j]}};return BUI});define("bui/array",["bui/util"],function(a){var b=a("bui/util");b.Array={peek:function(c){return c[c.length-1]},indexOf:function(f,g,c){var e=c==null?0:(c<0?Math.max(0,g.length+c):c);for(var d=e;d<g.length;d++){if(d in g&&g[d]===f){return d}}return -1},contains:function(c,d){return b.Array.indexOf(c,d)>=0},each:b.each,equals:function(d,c){if(d==c){return true}if(!d||!c){return false}if(d.length!=c.length){return false}var f=true;for(var e=0;e<d.length;e++){if(d[e]!==c[e]){f=false;break}}return f},filter:function(e,d){var c=[];b.Array.each(e,function(g,f){if(d(g,f)){c.push(g)}});return c},map:function(e,d){var c=[];b.Array.each(e,function(g,f){c.push(d(g,f))});return c},find:function(e,d){var c=b.Array.findIndex(e,d);return c<0?null:e[c]},findIndex:function(e,d){var c=-1;b.Array.each(e,function(g,f){if(d(g,f)){c=f;return false}});return c},isEmpty:function(c){return c.length==0},add:function(d,c){d.push(c)},addAt:function(e,d,c){b.Array.splice(e,c,0,d)},empty:function(d){if(!(d instanceof (Array))){for(var c=d.length-1;c>=0;c--){delete d[c]}}d.length=0},remove:function(f,d){var c=b.Array.indexOf(d,f);var e;if((e=c>=0)){b.Array.removeAt(f,c)}return e},removeAt:function(d,c){return b.Array.splice(d,c,1).length==1},slice:function(d,e,c){if(arguments.length<=2){return Array.prototype.slice.call(d,e)}else{return Array.prototype.slice.call(d,e,c)}},splice:function(c,d,e,f){return Array.prototype.splice.apply(c,b.Array.slice(arguments,1))}};return b.Array});define("bui/observable",["bui/util"],function(d){var e=d("bui/util");var c=function(){this._init()};e.augment(c,{_functions:null,_init:function(){var f=this;f._functions=[]},add:function(f){this._functions.push(f)},remove:function(f){var g=this._functions;index=e.Array.indexOf(f,g);if(index>=0){g.splice(index,1)}},empty:function(){var f=this._functions.length;this._functions.splice(0,f)},fireWith:function(h,g){var f=this,i;e.each(f._functions,function(j){i=j.apply(h,g);if(i===false){return false}});return i}});function b(){return new c()}var a=function(f){this._events=[];this._eventMap={};this._bubblesEvents=[];this._initEvents(f)};e.augment(a,{_events:[],_eventMap:{},_bubblesEvents:[],_bubbleTarget:null,_getCallbacks:function(g){var f=this,h=f._eventMap;return h[g]},_initEvents:function(h){var f=this,i=null;if(!h){return}i=h.listeners||{};if(h.handler){i.click=h.handler}if(i){for(var g in i){if(i.hasOwnProperty(g)){f.on(g,i[g])}}}},_isBubbles:function(f){return e.Array.indexOf(f,this._bubblesEvents)>=0},addTarget:function(f){this._bubbleTarget=f},addEvents:function(h){var g=this,f=g._events,j=g._eventMap;function i(k){if(e.Array.indexOf(k,f)===-1){j[k]=b();f.push(k)}}if(e.isArray(h)){$.each(h,function(k,l){i(l)
})}else{i(h)}},clearListeners:function(){var f=this,h=f._eventMap;for(var g in h){if(h.hasOwnProperty(g)){h[g].empty()}}},fire:function(j,l){var g=this,k=g._getCallbacks(j),i=$.makeArray(arguments),f;if(!l){l={};i.push(l)}if(!l.target){l.target=g}if(k){f=k.fireWith(g,Array.prototype.slice.call(i,1))}if(g._isBubbles(j)){var h=g._bubbleTarget;if(h&&h.fire){h.fire(j,l)}}return f},on:function(h,i){var g=h.split(" "),f=this,j=null;if(g.length>1){e.each(g,function(k){f.on(k,i)})}else{j=f._getCallbacks(h);if(j){j.add(i)}else{f.addEvents(h);f.on(h,i)}}return f},off:function(g,h){if(!g&&!h){this.clearListeners();return this}var f=this,i=f._getCallbacks(g);if(i){i.remove(h)}return f},publish:function(j,g){var f=this,i=f._bubblesEvents;if(g.bubbles){if(e.Array.indexOf(j,i)===-1){i.push(j)}}else{var h=e.Array.indexOf(j,i);if(h!==-1){i.splice(h,1)}}}});return a});define("bui/ua",function(){function b(d){var e=0;return parseFloat(d.replace(/\./g,function(){return(e++===0)?".":""}))}var a=$.UA||(function(){var c=$.browser,e=b(c.version),d={ie:c.msie&&e,webkit:c.webkit&&e,opera:c.opera&&e,mozilla:c.mozilla&&e};return d})();return a});define("bui/json",["bui/ua"],function(c){var e=window,h=c("bui/ua"),m=e.JSON;if(!m||h["ie"]<9){m=e.JSON={}}function g(f){return f<10?"0"+f:f}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(f){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+g(this.getUTCMonth()+1)+"-"+g(this.getUTCDate())+"T"+g(this.getUTCHours())+":"+g(this.getUTCMinutes())+":"+g(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(f){return this.valueOf()}}var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,l,b,o={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},j;function a(f){k["lastIndex"]=0;return k.test(f)?'"'+f.replace(k,function(p){var q=o[p];return typeof q==="string"?q:"\\u"+("0000"+p.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function i(w,s){var q,p,x,f,t=l,r,u=s[w];if(u&&typeof u==="object"&&typeof u.toJSON==="function"){u=u.toJSON(w)}if(typeof j==="function"){u=j.call(s,w,u)}switch(typeof u){case"string":return a(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u){return"null"}l+=b;r=[];if(Object.prototype.toString.apply(u)==="[object Array]"){f=u.length;for(q=0;q<f;q+=1){r[q]=i(q,u)||"null"}x=r.length===0?"[]":l?"[\n"+l+r.join(",\n"+l)+"\n"+t+"]":"["+r.join(",")+"]";l=t;return x}if(j&&typeof j==="object"){f=j.length;for(q=0;q<f;q+=1){p=j[q];if(typeof p==="string"){x=i(p,u);if(x){r.push(a(p)+(l?": ":":")+x)}}}}else{for(p in u){if(Object.hasOwnProperty.call(u,p)){x=i(p,u);if(x){r.push(a(p)+(l?": ":":")+x)}}}}x=r.length===0?"{}":l?"{\n"+l+r.join(",\n"+l)+"\n"+t+"}":"{"+r.join(",")+"}";l=t;return x}}if(typeof m.stringify!=="function"){m.stringify=function(r,p,q){var f;l="";b="";if(typeof q==="number"){for(f=0;f<q;f+=1){b+=" "}}else{if(typeof q==="string"){b=q}}j=p;if(p&&typeof p!=="function"&&(typeof p!=="object"||typeof p.length!=="number")){throw new Error("JSON.stringify")}return i("",{"":r})}}function n(f){try{return new Function("return "+f+";")()}catch(p){throw"Json parse error!"}}var m={parse:$.parseJSON,looseParse:n,stringify:m.stringify};return m});define("bui/keycode",function(){var a={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};return a});define("bui/date",function(){var c=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/;function d(i,h){var g=null;h=h||"-";if(!(g instanceof Date)){if(BUI.isString(i)){g=new Date(i.replace(/-/g,"/"))}else{g=new Date(i)}}else{return g}if(g instanceof Date&&(g!="Invalid Date")&&!isNaN(g)){return g}else{var f=i.toString().split(h);if(f.length==3){g=new Date(f[0],(parseInt(f[1],10)-1),f[2]);if(g instanceof Date&&(g!="Invalid Date")&&!isNaN(g)){return g}}}return null
}function e(h,f,g){var i=new Date(g);if(isNaN(i)){i=new Date()}switch(h){case"s":i=new Date(i.getTime()+(1000*parseInt(f)));break;case"n":i=new Date(i.getTime()+(60000*parseInt(f)));break;case"h":i=new Date(i.getTime()+(3600000*parseInt(f)));break;case"d":i=new Date(i.getTime()+(86400000*parseInt(f)));break;case"w":i=new Date(i.getTime()+((86400000*7)*parseInt(f)));break;case"m":i=new Date(i.getFullYear(),(i.getMonth())+parseInt(f),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());break;case"y":i=new Date(i.getFullYear()+parseInt(f),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds());break}return i}var a=function(){var g=/w{1}|d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,h=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,k=/[^-+\dA-Z]/g,j=function(m,l){m=String(m);l=l||2;while(m.length<l){m="0"+m}return m},f={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUTCDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",localShortDate:"yy\u5e74mm\u6708dd\u65e5",localShortDateTime:"yy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localLongDate:"yyyy\u5e74mm\u6708dd\u65e5",localLongDateTime:"yyyy\u5e74mm\u6708dd\u65e5 hh:MM:ss TT",localFullDate:"yyyy\u5e74mm\u6708dd\u65e5 w",localFullDateTime:"yyyy\u5e74mm\u6708dd\u65e5 w hh:MM:ss TT"},i={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(q,C,x){if(arguments.length===1&&Object.prototype.toString.call(q)==="[object String]"&&!/\d/.test(q)){C=q;q=undefined}q=q?new Date(q):new Date();if(isNaN(q)){throw SyntaxError("invalid date")}C=String(f[C]||C||f["default"]);if(C.slice(0,4)==="UTC:"){C=C.slice(4);x=true}var A=x?"getUTC":"get",u=q[A+"Date"](),l=q[A+"Day"](),r=q[A+"Month"](),w=q[A+"FullYear"](),z=q[A+"Hours"](),t=q[A+"Minutes"](),B=q[A+"Seconds"](),v=q[A+"Milliseconds"](),n=x?0:q.getTimezoneOffset(),p={d:u,dd:j(u,undefined),ddd:i.dayNames[l],dddd:i.dayNames[l+7],w:i.dayNames[l+14],m:r+1,mm:j(r+1,undefined),mmm:i.monthNames[r],mmmm:i.monthNames[r+12],yy:String(w).slice(2),yyyy:w,h:z%12||12,hh:j(z%12||12,undefined),H:z,HH:j(z,undefined),M:t,MM:j(t,undefined),s:B,ss:j(B,undefined),l:j(v,3),L:j(v>99?Math.round(v/10):v,undefined),t:z<12?"a":"p",tt:z<12?"am":"pm",T:z<12?"A":"P",TT:z<12?"AM":"PM",Z:x?"UTC":(String(q).match(h)||[""]).pop().replace(k,""),o:(n>0?"-":"+")+j(Math.floor(Math.abs(n)/60)*100+Math.abs(n)%60,4),S:["th","st","nd","rd"][u%10>3?0:(u%100-u%10!==10)*u%10]};return C.replace(g,function(m){return m in p?p[m]:m.slice(1,m.length-1)})}}();var b={add:function(g,h,f){return e(g,h,f)},addHour:function(f,g){return e("h",f,g)},addMinute:function(g,f){return e("n",g,f)},addSecond:function(g,f){return e("s",g,f)},addDay:function(g,f){return e("d",g,f)},addWeek:function(g,f){return e("w",g,f)},addMonths:function(f,g){return e("m",f,g)},addYear:function(g,f){return e("y",g,f)},isDateEquals:function(g,f){return g.getFullYear()===f.getFullYear()&&g.getMonth()===f.getMonth()&&g.getDate()===f.getDate()},isEquals:function(g,f){if(g==f){return true}if(!g||!f){return false}if(!g.getTime||!f.getTime){return false}return g.getTime()==f.getTime()},isDateString:function(f){return c.test(f)},format:function(g,f,h){return a(g,f,h)},parse:function(f,g){return d(f,g)},today:function(){var f=new Date();return new Date(f.getFullYear(),f.getMonth(),f.getDate())},getDate:function(f){return new Date(f.getFullYear(),f.getMonth(),f.getDate())}};return b});define("bui/base",["bui/observable"],function(c){var e={},a=c("bui/observable");function f(l,j,k){var i=l[j]||{};if(k){l[j]=i}return i}function h(i,j){if(BUI.isString(j)){return i[j]}return j}function g(j,i,l,n,k){var m=l;return j.fire(i+BUI.ucfirst(l)+"Change",{attrName:m,prevVal:n,newVal:k})}function b(i,m,o,n,l){n=n||{};var k,j,p;p=i.get(m);if(!$.isPlainObject(o)&&!BUI.isArray(o)&&p===o){return undefined}if(!n["silent"]){if(false===g(i,"before",m,p,o)){return false}}k=i._set(m,o,n);if(k===false){return k}if(!n["silent"]){o=i.getAttrVals()[m];g(i,"after",m,p,o)}return i}var d=function(k){var j=this,n=j.constructor,m=[];a.apply(this,arguments);while(n){m.push(n);n=n.superclass?n.superclass.constructor:null}for(var l=m.length-1;l>=0;l--){j.addAttrs(m[l]["ATTRS"],true)}j._initAttrs(k)};d.INVALID=e;BUI.extend(d,a);BUI.augment(d,{addAttr:function(l,m,n){var i=this,k=i.getAttrs(),j=BUI.cloneObject(m);if(!k[l]){k[l]=j}else{if(n){BUI.mix(true,k[l],j)
}}return i},addAttrs:function(j,k,l){var i=this;if(!j){return i}if(typeof(k)==="boolean"){l=k;k=null}BUI.each(j,function(n,m){i.addAttr(m,n,l)});if(k){i.set(k)}return i},hasAttr:function(i){return i&&this.getAttrs().hasOwnProperty(i)},getAttrs:function(){return f(this,"__attrs",true)},getAttrVals:function(){return f(this,"__attrVals",true)},get:function(l){var j=this,o=j.hasAttr(l),n=j.getAttrVals(),m,i,k;m=f(j.getAttrs(),l);i=m["getter"];k=l in n?n[l]:j._getDefAttrVal(l);if(i&&(i=h(j,i))){k=i.call(j,k,l)}return k},clearAttrVals:function(){this.__attrVals={}},removeAttr:function(j){var i=this;if(i.hasAttr(j)){delete i.getAttrs()[j];delete i.getAttrVals()[j]}return i},set:function(k,n,m){var i=this;if($.isPlainObject(k)){m=n;var l=Object(k),j=[];for(k in l){if(l.hasOwnProperty(k)){b(i,k,l[k],m)}}return i}return b(i,k,n,m)},setInternal:function(i,k,j){return this._set(i,k,j)},_getDefAttrVal:function(l){var i=this,k=i.getAttrs(),m=f(k,l),j=m.valueFn,n;if(j&&(j=h(i,j))){n=j.call(i);if(n!==undefined){m.value=n}delete m.valueFn;k[l]=m}return m.value},_set:function(j,m,l){var i=this,n,k=f(i.getAttrs(),j,true),o=k["setter"];if(o&&(o=h(i,o))){n=o.call(i,m,j)}if(n===e){return false}if(n!==undefined){m=n}i.getAttrVals()[j]=m},_initAttrs:function(k){var j=this;if(k){for(var i in k){if(k.hasOwnProperty(i)){j._set(i,k[i])}}}}});return d});define("bui/component",["bui/component/manage","bui/component/uibase","bui/component/view","bui/component/controller"],function(b){var a={};BUI.mix(a,{Manager:b("bui/component/manage"),UIBase:b("bui/component/uibase"),View:b("bui/component/view"),Controller:b("bui/component/controller")});function c(e,d){var f,g;if(e&&(g=e.xclass)){if(d&&!e.prefixCls){e.prefixCls=d.get("prefixCls")}f=a.Manager.getConstructorByXClass(g);if(!f){BUI.error("can not find class by xclass desc : "+g)}e=new f(e)}return e}a.create=c;return a});define("bui/component/manage",function(e){var b={};function f(j){var n=j.split(/\s+/),q=-1,l,o=null;for(var k=0;k<n.length;k++){var m=b[n[k]];if(m&&(l=m.priority)>q){q=l;o=m.constructor}}return o}function a(j){for(var i in b){var k=b[i];if(k.constructor==j){return i}}return 0}function h(i,j){if(BUI.isFunction(j)){b[i]={constructor:j,priority:0}}else{j.priority=j.priority||0;b[i]=j}}function d(j){var l=$.trim(j).split(/\s+/);for(var k=0;k<l.length;k++){if(l[k]){l[k]=this.get("prefixCls")+l[k]}}return l.join(" ")}var g={};var c={__instances:g,addComponent:function(j,i){g[j]=i},removeComponent:function(i){delete g[i]},getComponent:function(i){return g[i]},getCssClassWithPrefix:d,getXClassByConstructor:a,getConstructorByXClass:f,setConstructorByXClass:h};return c});(function(){var a="bui/component/uibase/";define("bui/component/uibase",[a+"base",a+"align",a+"autoshow",a+"autohide",a+"close",a+"collapseable",a+"drag",a+"keynav",a+"list",a+"listitem",a+"mask",a+"position",a+"selection",a+"stdmod",a+"decorate",a+"tpl",a+"childcfg",a+"bindable",a+"depends"],function(b){var c=b(a+"base");BUI.mix(c,{Align:b(a+"align"),AutoShow:b(a+"autoshow"),AutoHide:b(a+"autohide"),Close:b(a+"close"),Collapseable:b(a+"collapseable"),Drag:b(a+"drag"),KeyNav:b(a+"keynav"),List:b(a+"list"),ListItem:b(a+"listitem"),Mask:b(a+"mask"),Position:b(a+"position"),Selection:b(a+"selection"),StdMod:b(a+"stdmod"),Decorate:b(a+"decorate"),Tpl:b(a+"tpl"),ChildCfg:b(a+"childcfg"),Bindable:b(a+"bindable"),Depends:b(a+"depends")});BUI.mix(c,{CloseView:c.Close.View,CollapseableView:c.Collapseable.View,ChildList:c.List.ChildList,ListItemView:c.ListItem.View,MaskView:c.Mask.View,PositionView:c.Position.View,StdModView:c.StdMod.View,TplView:c.Tpl.View});return c})})();define("bui/component/uibase/base",["bui/component/manage"],function(d){var a=d("bui/component/manage"),f="_uiSet",h="ATTRS",e=BUI.ucfirst,o=$.noop,g=d("bui/base");function p(r,q){j(r,"initializer","constructor")}function j(A,x,r){var w=A.constructor,y=[],q,s,u,z;while(w){z=[];if(u=w.mixins){for(var v=0;v<u.length;v++){q=u[v];if(q){if(r!="constructor"){if(q.prototype.hasOwnProperty(r)){q=q.prototype[r]}else{q=null}}q&&z.push(q)}}}if(w.prototype.hasOwnProperty(x)&&(s=w.prototype[x])){z.push(s)}if(z.length){y.push.apply(y,z.reverse())}w=w.superclass&&w.superclass.constructor}for(v=y.length-1;v>=0;v--){y[v]&&y[v].call(A)}}function n(s){var u=s.constructor,r,t,q;while(u){if(u.prototype.hasOwnProperty("destructor")){u.prototype.destructor.apply(s)}if((r=u.mixins)){for(q=r.length-1;q>=0;q--){t=r[q]&&r[q].prototype.__destructor;t&&t.apply(s)}}u=u.superclass&&u.superclass.constructor}}function l(q){if(!q){return}BUI.each(q,function(s,r){if(BUI.isFunction(s)){q[r]=new s()}})}function k(r,q,s){if(!q){return}BUI.each(q,function(u,t){if(u[s]){u[s](r)}})}function c(s){var t=s.getAttrs(),r,q;for(r in t){if(t.hasOwnProperty(r)){q=f+e(r);if(s[q]){(function(v,u){s.on("after"+e(v)+"Change",function(w){if(w.target===s){s[u](w.newVal,w)}})})(r,q)}}}}function m(t){var s,w,u=t.getAttrs();for(var r in u){if(u.hasOwnProperty(r)){var q=f+e(r);if((w=t[q])&&u[r].sync!==false&&(s=t.get(r))!==undefined){w.call(t,s)
}}}}var b=function(s){var q=this,x;g.apply(q,arguments);q.setInternal("userConfig",s);p(q,s);var u,w,r=q.get("plugins"),t=q.get("listeners");l(r);var v=q.get("xclass");if(v){q.__xclass=v}k(q,r,"initializer");s&&s.autoRender&&q.render()};b.ATTRS={userConfig:{},autoRender:{value:false},listeners:{value:{}},plugins:{value:[]},rendered:{value:false},xclass:{valueFn:function(){return a.getXClassByConstructor(this.constructor)}}};BUI.extend(b,g);BUI.augment(b,{create:function(){var q=this;if(!q.get("created")){q.fire("beforeCreateDom");j(q,"createDom","__createDom");q._set("created",true);q.fire("afterCreateDom");k(q,q.get("plugins"),"createDom")}return q},render:function(){var q=this;if(!q.get("rendered")){var r=q.get("plugins");q.create(undefined);q.fire("beforeRenderUI");j(q,"renderUI","__renderUI");q.fire("afterRenderUI");k(q,r,"renderUI");q.fire("beforeBindUI");c(q);j(q,"bindUI","__bindUI");q.fire("afterBindUI");k(q,r,"bindUI");q.fire("beforeSyncUI");m(q);j(q,"syncUI","__syncUI");q.fire("afterSyncUI");k(q,r,"syncUI");q._set("rendered",true)}return q},createDom:o,renderUI:o,bindUI:o,syncUI:o,destroy:function(){var q=this;q.fire("beforeDestroy");k(q,q.get("plugins"),"destructor");n(q);q.fire("afterDestroy");q.off();q.clearAttrVals();q.destroyed=true;return q}});BUI.mix(b,{define:function(s,r,q,u){if($.isPlainObject(r)){u=q;q=r;r=[]}function t(){b.apply(this,arguments)}BUI.extend(t,s,q,u);BUI.mixin(t,r);return t},extend:function i(u,t,w){var r=$.makeArray(arguments),q,v=r[r.length-1];r.unshift(this);if(v.xclass){r.pop();r.push(v.xclass)}q=b.define.apply(b,r);if(v.xclass){var s=v.priority||(this.priority?(this.priority+1):1);a.setConstructorByXClass(v.xclass,{constructor:q,priority:s});q.__xclass=v.xclass;q.priority=s;q.toString=function(){return v.xclass}}q.extend=i;return q}});return b});define("bui/component/uibase/align",["bui/ua"],function(e){var n=e("bui/ua"),p="x-align-",m=window;function k(s){var v=s.ownerDocument,q=v.body,t,u=$(s).css("position"),r=u=="fixed"||u=="absolute";if(!r){return s.nodeName.toLowerCase()=="html"?null:s.parentNode}for(t=s.parentNode;t&&t!=q;t=t.parentNode){u=$(t).css("position");if(u!="static"){return t}}return null}function l(r){var z={left:0,right:Infinity,top:0,bottom:Infinity},q,y,w,s,x=r.ownerDocument,t=x.body,v=x.documentElement;for(q=r;q=k(q);){if((!n.ie||q.clientWidth!=0)&&(q!=t&&q!=v&&$(q).css("overflow")!="visible")){var u=$(q).offset();u.left+=q.clientLeft;u.top+=q.clientTop;z.top=Math.max(z.top,u.top);z.right=Math.min(z.right,u.left+q.clientWidth);z.bottom=Math.min(z.bottom,u.top+q.clientHeight);z.left=Math.max(z.left,u.left)}}y=$(m).scrollLeft();w=$(m).scrollTop();z.left=Math.max(z.left,y);z.top=Math.max(z.top,w);s={width:BUI.viewportWidth(),height:BUI.viewportHeight()};z.right=Math.min(z.right,y+s.width);z.bottom=Math.min(z.bottom,w+s.height);return z.top>=0&&z.left>=0&&z.bottom>z.top&&z.right>z.left?z:null}function j(x,q,r,w){var u,t,v,s;u={left:x.left,top:x.top};v=d(q,r[0]);s=d(x,r[1]);t=[s.left-v.left,s.top-v.top];return{left:u.left-t[0]+(+w[0]),top:u.top-t[1]+(+w[1])}}function c(s,r,q){return s.left<q.left||s.left+r.width>q.right}function b(s,r,q){return s.top<q.top||s.top+r.height>q.bottom}function h(t,s,r,v){var u=BUI.cloneObject(t),q={width:s.width,height:s.height};if(v.adjustX&&u.left<r.left){u.left=r.left}if(v["resizeWidth"]&&u.left>=r.left&&u.left+q.width>r.right){q.width-=(u.left+q.width)-r.right}if(v.adjustX&&u.left+q.width>r.right){u.left=Math.max(r.right-q.width,r.left)}if(v.adjustY&&u.top<r.top){u.top=r.top}if(v["resizeHeight"]&&u.top>=r.top&&u.top+q.height>r.bottom){q.height-=(u.top+q.height)-r.bottom}if(v.adjustY&&u.top+q.height>r.bottom){u.top=Math.max(r.bottom-q.height,r.top)}return BUI.mix(u,q)}function i(s,r,t){var q=[];$.each(s,function(u,v){q.push(v.replace(r,function(w){return t[w]}))});return q}function a(r,q){r[q]=-r[q];return r}function g(){}g.__getOffsetParent=k;g.__getVisibleRectForElement=l;g.ATTRS={align:{value:{}}};function f(s){var t,q,r;if(s.length&&!$.isWindow(s[0])){t=s.offset();q=s.outerWidth();r=s.outerHeight()}else{t={left:BUI.scrollLeft(),top:BUI.scrollTop()};q=BUI.viewportWidth();r=BUI.viewportHeight()}t.width=q;t.height=r;return t}function d(v,A){var s=A.charAt(0),t=A.charAt(1),r=v.width,u=v.height,q,z;q=v.left;z=v.top;if(s==="c"){z+=u/2}else{if(s==="b"){z+=u}}if(t==="c"){q+=r/2}else{if(t==="r"){q+=r}}return{left:q,top:z}}function o(s){var r=s.attr("class"),t=new RegExp("s?"+p+"[a-z]{2}-[a-z]{2}","ig"),q=t.exec(r);if(q){s.removeClass(q.join(" "))}}g.prototype={_uiSetAlign:function(q,t){var u="",r,s;if(q&&q.points){this.align(q.node,q.points,q.offset,q.overflow);this.set("cachePosition",null);r=this.get("el");o(r);s=q.points.join("-");u=p+s;r.addClass(u)}},align:function(w,A,v,t){w=$(w||m);v=v&&[].concat(v)||[0,0];t=t||{};var C=this,q=C.get("el"),r=0,z=l(q[0]),s=f(q),B=f(w),x=j(s,B,A,v),u=BUI.merge(s,x);if(z&&(t.adjustX||t.adjustY)){if(c(x,s,z)){r=1;A=i(A,/[lr]/ig,{l:"r",r:"l"});v=a(v,0)}if(b(x,s,z)){r=1;A=i(A,/[tb]/ig,{t:"b",b:"t"});
v=a(v,1)}if(r){x=j(s,B,A,v);BUI.mix(u,x)}var y={};y.adjustX=t.adjustX&&c(x,s,z);y.adjustY=t.adjustY&&b(x,s,z);if(y.adjustX||y.adjustY){u=h(x,s,z,y)}}if(u.left!=s.left){C.setInternal("x",null);C.get("view").setInternal("x",null);C.set("x",u.left)}if(u.top!=s.top){C.setInternal("y",null);C.get("view").setInternal("y",null);C.set("y",u.top)}if(u.width!=s.width){q.width(q.width()+u.width-s.width)}if(u.height!=s.height){q.height(q.height()+u.height-s.height)}return C},center:function(r){var q=this;q.set("align",{node:r,points:["cc","cc"],offset:[0,0]});return q}};return g});define("bui/component/uibase/autoshow",function(){function a(){}a.ATTRS={trigger:{},delegateTigger:{value:false},autoAlign:{value:true},curTrigger:{},triggerCallback:{value:function(b){}},triggerEvent:{value:"click"},triggerHideEvent:{},events:{value:{"triggerchange":false}}};a.prototype={__createDom:function(){this._setTrigger()},_setTrigger:function(){var f=this,h=f.get("triggerEvent"),j=f.get("triggerHideEvent"),b=f.get("triggerCallback"),c=f.get("trigger"),e=f.get("delegateTigger"),i=$(c);function g(m){var k=f.get("curTrigger"),l=e?$(m.currentTarget):$(this),n=f.get("align");if(!k||k[0]!=l[0]){f.set("curTrigger",l);f.fire("triggerchange",{prevTrigger:k,curTrigger:l})}if(f.get("autoAlign")){n.node=l}f.set("align",n);f.show();b&&b(m)}function d(l){var k=l.toElement||l.relatedTarget;if(!k||!f.containsElement(k)){f.hide()}}if(h){if(e&&BUI.isString(c)){$(document).delegate(c,h,g)}else{i.on(h,g)}}if(j){if(e&&BUI.isString(c)){$(document).delegate(c,j,d)}else{i.on(j,d)}}},__renderUI:function(){var b=this,c=b.get("align");if(c&&!c.node){c.node=b.get("render")||b.get("trigger")}}};return a});define("bui/component/uibase/autohide",function(){var c=BUI.wrapBehavior,b=BUI.getWrapBehavior;function d(e,g){var f=e.get("hideExceptNode");if(f&&f.length){return $.contains(f[0],g)}return false}function a(){}a.ATTRS={autoHideType:{value:"click"},autoHide:{value:false},hideExceptNode:{},events:{value:{autohide:false}}};a.prototype={__bindUI:function(){var e=this;e.on("afterVisibleChange",function(f){var g=f.newVal;if(e.get("autoHide")){if(g){e._bindHideEvent()}else{e._clearHideEvent()}}})},handleMoveOuter:function(f){var e=this,g=f.toElement||f.relatedTarget;if(!e.containsElement(g)&&!d(e,g)){if(e.fire("autohide")!==false){e.hide()}}},handleDocumentClick:function(f){var e=this,g=f.target;if(!e.containsElement(g)&&!d(e,g)){if(e.fire("autohide")!==false){e.hide()}}},_bindHideEvent:function(){var e=this,f=e.get("curTrigger"),g=e.get("autoHideType");if(g==="click"){$(document).on("mousedown",c(e,"handleDocumentClick"))}else{e.get("el").on("mouseleave",c(e,"handleMoveOuter"));if(f){$(f).on("mouseleave",c(e,"handleMoveOuter"))}}},_clearHideEvent:function(){var e=this,f=e.get("curTrigger"),g=e.get("autoHideType");if(g==="click"){$(document).off("mousedown",b(e,"handleDocumentClick"))}else{e.get("el").off("mouseleave",b(e,"handleMoveOuter"));if(f){$(f).off("mouseleave",b(e,"handleMoveOuter"))}}}};return a});define("bui/component/uibase/close",function(){var c=BUI.prefix+"ext-";function a(g){return $(g.get("closeTpl"))}function b(){}b.ATTRS={closeTpl:{value:"<a "+'tabindex="0" '+"href='javascript:void(\"\u5173\u95ed\")' "+'role="button" '+'class="'+c+"close"+'">'+'<span class="'+c+"close-x"+'">\u5173\u95ed<'+"/span>"+"<"+"/a>"},closable:{value:true},closeBtn:{}};b.prototype={_uiSetClosable:function(h){var g=this,i=g.get("closeBtn");if(h){if(!i){g.setInternal("closeBtn",i=a(g))}i.appendTo(g.get("el"),undefined)}else{if(i){i.remove()}}}};function d(){}var f="hide";d.ATTRS={closeTpl:{view:true},closable:{view:1},closeBtn:{view:1},closeAction:{value:f}};var e={hide:f,destroy:"destroy"};d.prototype={_uiSetClosable:function(h){var g=this;if(h&&!g.__bindCloseEvent){g.__bindCloseEvent=1;g.get("closeBtn").on("click",function(i){if(g.fire("closeclick",{domTarget:i.target})!==false){g.close()}i.preventDefault()})}},__destructor:function(){var g=this.get("closeBtn");g&&g.detach()},close:function(){var g=this,h=e[g.get("closeAction")||f];if(g.fire("closing",{action:h})!==false){g[h]();g.fire("closed",{action:h})}}};d.View=b;return d});define("bui/component/uibase/drag",function(){var d=BUI.guid("drag");var b=function(){};b.ATTRS={dragNode:{},draging:{setter:function(e){if(e===true){return{}}},value:null},constraint:{},dragBackEl:{getter:function(){return $("#"+d)}}};var a='<div id="'+d+'" style="background-color: red; position: fixed; left: 0px; width: 100%; height: 100%; top: 0px; cursor: move; z-index: 999999; display: none; "></div>';function c(){var e=$(a).css("opacity",0).prependTo("body");return e}b.prototype={__bindUI:function(){var g=this,k=g.get("constraint"),j=g.get("dragNode");if(!j){return}j.on("mousedown",function(l){if(l.which==1){l.preventDefault();g.set("draging",{elX:g.get("x"),elY:g.get("y"),startX:l.pageX,startY:l.pageY});h()}});function i(m){var l=g.get("draging");if(l){m.preventDefault();g._dragMoveTo(m.pageX,m.pageY,l,k)}}function f(m){if(m.which==1){g.set("draging",false);
var l=g.get("dragBackEl");if(l){l.hide()}e()}}function h(){$(document).on("mousemove",i);$(document).on("mouseup",f)}function e(){$(document).off("mousemove",i);$(document).off("mouseup",f)}},_dragMoveTo:function(g,l,i,j){var f=this,h=f.get("dragBackEl"),i=i||f.get("draging"),e=i.startX-g,k=i.startY-l;if(!h.length){h=c()}h.css({cursor:"move",display:"block"});f.set("xy",[f._getConstrainX(i.elX-e,j),f._getConstrainY(i.elY-k,j)])},_getConstrainX:function(f,k){var e=this,i=e.get("el").outerWidth(),j=f+i,g=e.get("x");if(k){var h=k.offset();if(h.left>=f){return h.left}if(h.left+k.width()<j){return h.left+k.width()-i}return f}if(BUI.isInHorizontalView(f)&&BUI.isInHorizontalView(j)){return f}return g},_getConstrainY:function(k,j){var g=this,f=g.get("el").outerHeight(),i=k+f,e=g.get("y");if(j){var h=j.offset();if(h.top>k){return h.top}if(h.top+j.height()<i){return h.top+j.height()-f}return k}if(BUI.isInVerticalView(k)&&BUI.isInVerticalView(i)){return k}return e}};return b});define("bui/component/uibase/keynav",["bui/keycode"],function(d){var e=d("bui/keycode"),c=BUI.wrapBehavior,b=BUI.getWrapBehavior;var a=function(){};a.ATTRS={allowKeyNav:{value:true},navEvent:{value:"keydown"},ignoreInputFields:{value:true}};a.prototype={__bindUI:function(){},_uiSetAllowKeyNav:function(h){var f=this,g=f.get("navEvent"),i=f.get("el");if(h){i.on(g,c(f,"_handleKeyDown"))}else{i.off(g,b(f,"_handleKeyDown"))}},_handleKeyDown:function(h){var f=this,g=h.which;switch(g){case e.UP:f.handleNavUp(h);break;case e.DOWN:f.handleNavDown(h);break;case e.RIGHT:f.handleNavRight(h);break;case e.LEFT:f.handleNavLeft(h);break;case e.ENTER:f.handleNavEnter(h);break;case e.ESC:f.handleNavEsc(h);break;case e.TAB:f.handleNavTab(h);break;default:break}},handleNavUp:function(f){},handleNavDown:function(f){},handleNavLeft:function(f){},handleNavRight:function(f){},handleNavEnter:function(f){},handleNavEsc:function(f){},handleNavTab:function(f){}};return a});define("bui/component/uibase/mask",function(b){var g=b("bui/ua"),a={},d=g.ie==6;function h(k){return k.get("prefixCls")+"ext-mask"}function f(){return d?BUI.docWidth()+"px":"100%"}function j(){return d?BUI.docHeight()+"px":"100%"}function e(l){var k=$("<div "+' style="width:'+f()+";"+"left:0;"+"top:0;"+"height:"+j()+";"+"position:"+(d?"absolute":"fixed")+';"'+' class="'+l+'">'+(d?"<"+"iframe "+'style="position:absolute;'+"left:"+"0"+";"+"top:"+"0"+";"+"background:white;"+"width: expression(this.parentNode.offsetWidth);"+"height: expression(this.parentNode.offsetHeight);"+"filter:alpha(opacity=0);"+'z-index:-1;"></iframe>':"")+"</div>").prependTo("body");k.on("mousedown",function(m){m.preventDefault()});return k}function i(){}i.ATTRS={maskShared:{value:true}};i.prototype={_maskExtShow:function(){var l=this,p,n=h(l),o=a[n],m=l.get("maskShared"),k=l.get("maskNode");if(!k){if(m){if(o){k=o.node}else{k=e(n);o=a[n]={num:0,node:k}}}else{k=e(n)}l.setInternal("maskNode",k)}if(p=l.get("zIndex")){k.css("z-index",p-1)}if(m){o.num++}if(!m||o.num==1){k.show()}},_maskExtHide:function(){var l=this,n=h(l),o=a[n],m=l.get("maskShared"),k=l.get("maskNode");if(m&&o){o.num=Math.max(o.num-1,0);if(o.num==0){k.hide()}}else{if(k){k.hide()}}},__destructor:function(){var l=this,m=l.get("maskShared"),k=l.get("maskNode");if(l.get("maskNode")){if(m){if(l.get("visible")){l._maskExtHide()}}else{k.remove()}}}};function c(){}c.ATTRS={mask:{value:false},maskNode:{view:1},maskShared:{view:1}};c.prototype={__bindUI:function(){var m=this,l=m.get("view"),k=l._maskExtShow,n=l._maskExtHide;if(m.get("mask")){m.on("show",function(){l._maskExtShow()});m.on("hide",function(){l._maskExtHide()})}}};c=c;c.View=i;return c});define("bui/component/uibase/position",function(){function b(){}b.ATTRS={x:{valueFn:function(){var c=this;return c.get("el")&&c.get("el").offset().left}},y:{valueFn:function(){var c=this;return c.get("el")&&c.get("el").offset().top}},zIndex:{},visibleMode:{value:"visibility"}};b.prototype={__createDom:function(){this.get("el").addClass(BUI.prefix+"ext-position")},_uiSetZIndex:function(c){this.get("el").css("z-index",c)},_uiSetX:function(c){if(c!=null){this.get("el").offset({left:c})}},_uiSetY:function(c){if(c!=null){this.get("el").offset({top:c})}},_uiSetLeft:function(c){if(c!=null){this.get("el").css({left:c})}},_uiSetTop:function(c){if(c!=null){this.get("el").css({top:c})}}};function a(){}a.ATTRS={x:{view:1},y:{view:1},left:{view:1},top:{view:1},xy:{setter:function(d){var c=this,e=$.makeArray(d);if(e.length){e[0]&&c.set("x",e[0]);e[1]&&c.set("y",e[1])}return d},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{view:true,value:true}};a.prototype={move:function(c,e){var d=this;if(BUI.isArray(c)){e=c[1];c=c[0]}d.set("xy",[c,e]);return d},_uiSetX:function(d){if(d!=null){var c=this,e=c.get("el");c.setInternal("left",e.position().left);if(d!=-999){this.set("cachePosition",null)}}},_uiSetY:function(d){if(d!=null){var c=this,e=c.get("el");c.setInternal("top",e.position().top);if(d!=-999){this.set("cachePosition",null)
}}},_uiSetLeft:function(d){var c=this,e=c.get("el");if(d!=null){c.setInternal("x",e.offset().left)}},_uiSetTop:function(d){var c=this,e=c.get("el");if(d!=null){c.setInternal("y",e.offset().top)}}};a.View=b;return a});define("bui/component/uibase/listitem",function(){function a(){}a.ATTRS={selected:{}};a.prototype={_uiSetSelected:function(e){var c=this,d=c.getStatusCls("selected"),f=c.get("el");if(e){f.addClass(d)}else{f.removeClass(d)}}};function b(){}b.ATTRS={selectable:{value:true},selected:{view:true,sync:false,value:false}};b.prototype={};b.View=a;return b});define("bui/component/uibase/stdmod",function(){var b=BUI.prefix+"stdmod-";function e(){}e.ATTRS={header:{},body:{},footer:{},bodyStyle:{},footerStyle:{},headerStyle:{},headerContent:{},bodyContent:{},footerContent:{}};e.PARSER={header:function(f){return f.one("."+b+"header")},body:function(f){return f.one("."+b+"body")},footer:function(f){return f.one("."+b+"footer")}};function a(f,h){var i=f.get("contentEl"),g=f.get(h);if(!g){g=$('<div class="'+b+h+'"'+" "+" >"+"</div>");g.appendTo(i);f.setInternal(h,g)}}function d(g,h,f){h=g.get(h);if(BUI.isString(f)){h.html(f)}else{h.html("").append(f)}}e.prototype={__createDom:function(){a(this,"header");a(this,"body");a(this,"footer")},_uiSetBodyStyle:function(f){this.get("body").css(f)},_uiSetHeaderStyle:function(f){this.get("header").css(f)},_uiSetFooterStyle:function(f){this.get("footer").css(f)},_uiSetBodyContent:function(f){d(this,"body",f)},_uiSetHeaderContent:function(f){d(this,"header",f)},_uiSetFooterContent:function(f){d(this,"footer",f)}};function c(){}c.ATTRS={header:{view:1},body:{view:1},footer:{view:1},bodyStyle:{view:1},footerStyle:{view:1},headerStyle:{view:1},headerContent:{view:1},bodyContent:{view:1},footerContent:{view:1}};c.View=e;return c});define("bui/component/uibase/decorate",["bui/array","bui/json","bui/component/manage"],function(c){var h=c("bui/array"),m=c("bui/json"),i=BUI.prefix,l="data-";FIELD_CFG=l+"cfg",PARSER="PARSER",Manager=c("bui/component/manage"),regx=/^[\{\[]/;function k(n,p){if(p[n]){return true}var o=new RegExp("^"+l);if(n!==FIELD_CFG&&o.test(n)){return true}return false}function d(n){var o=[],p=n.constructor;while(p){o.push(p);p=p.superclass&&p.superclass.constructor}return o}function g(n){n=$.trim(n);if(regx.test(n)){n=m.looseParse(n)}return n}function f(o,n){var q=o.userConfig||{};for(var r in n){if(!(r in q)){o.setInternal(r,n[r])}}}function j(s,t){var o=this,r,n,q=o.userConfig||{};for(r in t){if(!(r in q)){n=t[r];if(BUI.isFunction(n)){o.setInternal(r,n.call(o,s))}else{if(typeof n=="string"){o.setInternal(r,s.find(n))}else{if(BUI.isArray(n)&&n[0]){o.setInternal(r,s.find(n[0]))}}}}}}function a(o,s){var t=o.constructor,n,r,q;q=d(o);for(n=q.length-1;n>=0;n--){t=q[n];if(r=t[PARSER]){j.call(o,s,r)}}}function e(o){var n=o,q=n.get("srcNode"),p,r;if(q){q=$(q);n.setInternal("el",q);n.setInternal("srcNode",q);p=n.get("userConfig");r=n.getDecorateConfig(q);f(o,r);if(n.get("isDecorateChild")&&n.decorateInternal){n.decorateInternal(q)}a(o,q)}}function b(){e(this)}b.ATTRS={srcNode:{view:true},isDecorateChild:{value:false},decorateCfgFields:{value:{"id":true,"name":true,"value":true,"title":true}}};b.prototype={getDecorateConfig:function(q){if(!q.length){return null}var n=this,s=q[0],o=s.attributes,r=n.get("decorateCfgFields"),p={};BUI.each(o,function(t){var v=t.nodeName;try{if(v===FIELD_CFG){var u=g(t.nodeValue);BUI.mix(p,u)}else{if(k(v,r)){v=v.replace(l,"");p[v]=g(t.nodeValue)}}}catch(w){BUI.log("parse field error,the attribute is:"+v)}});return p},getDecorateElments:function(){var n=this,p=n.get("el"),o=n.get("contentContainer");if(o){return p.find(o).children()}else{return p.children()}},decorateInternal:function(o){var n=this;n.decorateChildren(o)},findXClassByNode:function(q,s){var n=this,o=q.attr("class")||"",p=n.get("defaultChildClass");o=o.replace(new RegExp("\\b"+i,"ig"),"");var r=Manager.getConstructorByXClass(o)||Manager.getConstructorByXClass(p);if(!r&&!s){BUI.log(q);BUI.error("can not find ui "+o+" from this markup")}return Manager.getXClassByConstructor(r)},decorateChildrenInternal:function(q,p){var n=this,o=n.get("children");o.push({xclass:q,srcNode:p})},decorateChildren:function(p){var n=this,o=n.getDecorateElments();BUI.each(o,function(r){var q=n.findXClassByNode($(r));n.decorateChildrenInternal(q,$(r))})}};return b});define("bui/component/uibase/tpl",function(){function b(){}b.ATTRS={tpl:{}};b.prototype={__renderUI:function(){var c=this,e=c.get("childContainer"),d;if(e){d=c.get("el").find(e);if(d.length){c.set("contentEl",d)}}},getTpl:function(f){var c=this,e=c.get("tpl"),d=c.get("tplRender");f=f||c.getAttrVals();if(d){return d(f)}if(e){return BUI.substitute(e,f)}return""},setTplContent:function(e){var c=this,f=c.get("el"),g=c.get("content"),d=c.getTpl(e);if(!g&&d){f.empty();f.html(d)}}};function a(){}a.ATTRS={tpl:{view:true,sync:false},tplRender:{view:true,value:null},childContainer:{view:true}};a.prototype={__renderUI:function(){if(!this.get("srcNode")){this.setTplContent()
}},setTplContent:function(){var c=this,d=c.getAttrVals();c.get("view").setTplContent(d)},_uiSetTpl:function(){this.setTplContent()}};a.View=b;return a});define("bui/component/uibase/collapseable",function(){var b=function(){};b.ATTRS={collapsed:{}};b.prototype={_uiSetCollapsed:function(e){var c=this,d=c.getStatusCls("collapsed"),f=c.get("el");if(e){f.addClass(d)}else{f.removeClass(d)}}};var a=function(){};a.ATTRS={collapseable:{value:false},collapsed:{view:true,value:false},events:{value:{"expanded":true,"collapsed":true}}};a.prototype={_uiSetCollapsed:function(d){var c=this;if(d){c.fire("collapsed")}else{c.fire("expanded")}}};a.View=b;return a});define("bui/component/uibase/selection",function(){var a="single";var b=function(){};b.ATTRS={selectedEvent:{value:"click"},events:{value:{"selectedchange":false,"beforeselectedchange":false,"itemselected":false,"itemunselected":false}},idField:{value:"id"},multipleSelect:{value:false}};b.prototype={clearSelection:function(){var c=this,d=c.getSelection();BUI.each(d,function(e){c.clearSelected(e)})},getSelection:function(){},getSelected:function(){return this.getSelection()[0]},getSelectedValue:function(){var c=this,e=c.get("idField"),d=c.getSelected();return c.getValueByField(d,e)},getSelectionValues:function(){var c=this,e=c.get("idField"),d=c.getSelection();return $.map(d,function(f){return c.getValueByField(f,e)})},getSelectionText:function(){var c=this,d=c.getSelection();return $.map(d,function(e){return c.getItemText(e)})},clearSelected:function(d){var c=this;d=d||c.getSelected();if(d){c.setItemSelected(d,false)}},getSelectedText:function(){var c=this,d=c.getSelected();return c.getItemText(d)},setSelection:function(d){var c=this;d=BUI.isArray(d)?d:[d];BUI.each(d,function(e){c.setSelected(e)})},setSelected:function(e){var c=this,d=c.get("multipleSelect");if(!d){var f=c.getSelected();if(e!=f){c.clearSelected(f)}}c.setItemSelected(e,true)},isItemSelected:function(c){},setItemSelected:function(f,e){var c=this,d;if(f){d=c.isItemSelected(f);if(d==e){return}}if(c.fire("beforeselectedchange")!==false){c.setItemSelectedStatus(f,e)}},setItemSelectedStatus:function(d,c){},setAllSelection:function(){},setSelectedByField:function(f,e){if(!e){e=f;f=this.get("idField")}var c=this,d=c.findItemByField(f,e);c.setSelected(d)},setSelectionByField:function(e,d){if(!d){d=e;e=this.get("idField")}var c=this;BUI.each(d,function(f){c.setSelectedByField(e,f)})},afterSelected:function(f,e,d){var c=this;if(e){c.fire("itemselected",{item:f,domTarget:d});c.fire("selectedchange",{item:f,domTarget:d,selected:e})}else{c.fire("itemunselected",{item:f,domTarget:d});if(c.get("multipleSelect")){c.fire("selectedchange",{item:f,domTarget:d,selected:e})}}}};return b});define("bui/component/uibase/list",["bui/component/uibase/selection"],function(b){var d=b("bui/component/uibase/selection");var f=function(){};f.ATTRS={items:{view:true},idField:{value:"id"},itemTpl:{view:true},itemTplRender:{view:true},itemStatusCls:{view:true,value:{}},events:{value:{"itemclick":true}}};f.prototype={getItemCount:function(){return this.getItems().length},getValueByField:function(h,i){},getItems:function(){},getFirstItem:function(){return this.getItemAt(0)},getLastItem:function(){return this.getItemAt(this.getItemCount()-1)},getItemAt:function(h){return this.getItems()[h]||null},getItem:function(i){var h=this.get("idField");return this.findItemByField(h,i)},indexOfItem:function(h){return BUI.Array.indexOf(h,this.getItems())},addItems:function(i){var h=this;BUI.each(i,function(j){h.addItem(j)})},addItemsAt:function(i,j){var h=this;BUI.each(i,function(l,k){h.addItemAt(l,j+k)})},updateItem:function(h){},addItem:function(h){return this.addItemAt(h,this.getItemCount())},addItemAt:function(i,h){},findItemByField:function(i,h){},getItemText:function(h){},clearItems:function(){var h=this,i=h.getItems();i.splice(0);h.clearControl()},removeItem:function(h){},removeItems:function(i){var h=this;BUI.each(i,function(j){h.removeItem(j)})},removeItemAt:function(h){this.removeItem(this.getItemAt(h))},clearControl:function(){}};function a(h){if(h.selected){h.selected=false}if(h.set){h.set("selected",false)}}function g(i,l){var n=l.isController?l.getAttrVals():l,j=i.get("itemTpl"),h=i.get("itemStatusCls"),k=i.get("itemTplRender");if(j&&!n.tpl){e(l,"tpl",j)}if(k&&!n.tplRender){e(l,"tplRender",k)}if(h){var m=n.statusCls||l.isController?l.get("statusCls"):{};BUI.each(h,function(p,o){if(p&&!m[o]){m[o]=p}});e(l,"statusCls",m)}}function e(i,h,j){if(i.isController){i.set(h,j)}else{i[h]=j}}var c=function(){this.__init()};c.ATTRS=BUI.merge(true,f.ATTRS,d.ATTRS,{items:{sync:false},autoInitItems:{value:true},defaultLoaderCfg:{value:{property:"children",dataType:"json"}}});BUI.augment(c,f,d,{__init:function(){var h=this,i=h.get("items");if(i&&h.get("autoInitItems")){h.addItems(i)}h.on("beforeRenderUI",function(){h._beforeRenderUI()})},_uiSetItems:function(i){var h=this;h.clearControl();h.addItems(i)},_beforeRenderUI:function(){var h=this,j=h.get("children"),i=h.get("items");
BUI.each(j,function(k){g(h,k)})},__bindUI:function(){var h=this,i=h.get("selectedEvent");h.on(i,function(k){var j=k.target;if(j.get("selectable")){if(!j.get("selected")){h.setSelected(j)}else{if(h.get("multipleSelect")){h.clearSelected(j)}}}});h.on("click",function(j){if(j.target!==h){h.fire("itemclick",{item:j.target,domTarget:j.domTarget,domEvent:j})}});h.on("beforeAddChild",function(j){g(h,j.child)});h.on("beforeRemoveChild",function(l){var k=l.child,j=k.get("selected");if(j){if(h.get("multipleSelect")){h.clearSelected(k)}else{h.setSelected(null)}}k.set("selected",false)})},clearControl:function(){this.removeChildren(true)},getItems:function(){return this.get("children")},updateItem:function(k){var h=this,i=h.get("idField"),j=h.findItemByField(i,k[i]);if(j){j.setTplContent()}return j},removeItem:function(j){var h=this,i=h.get("idField");if(!(j instanceof BUI.Component.Controller)){j=h.findItemByField(i,j[i])}this.removeChild(j,true)},addItemAt:function(i,h){return this.addChild(i,h)},findItemByField:function(m,l,j){j=j||this;var i=this,k=j.get("children"),h=null;$(k).each(function(n,o){if(o.get(m)==l){h=o}else{if(o.get("children").length){h=i.findItemByField(m,l,o)}}if(h){return false}});return h},getItemText:function(h){return h.get("el").text()},getValueByField:function(h,i){return h&&h.get(i)},setItemSelectedStatus:function(k,j){var h=this,l=j?"addClass":"removeClass",i=null;if(k){k.set("selected",j);i=k.get("el")}h.afterSelected(k,j,i)},isItemSelected:function(h){return h?h.get("selected"):false},setAllSelection:function(){var h=this,i=h.getItems();h.setSelection(i)},getSelection:function(){var h=this,i=h.getItems(),j=[];BUI.each(i,function(k){if(h.isItemSelected(k)){j.push(k)}});return j}});f.ChildList=c;return f});define("bui/component/uibase/childcfg",function(b){var a=function(c){this._init()};a.ATTRS={defaultChildCfg:{}};a.prototype={_init:function(){var c=this,d=c.get("defaultChildCfg");if(d){c.on("beforeAddChild",function(e){var f=e.child;if($.isPlainObject(f)){BUI.each(d,function(h,g){if(!f[g]){f[g]=h}})}})}}};return a});define("bui/component/uibase/depends",["bui/component/manage"],function(c){var h=/^#(.*):(.*)$/,a=c("bui/component/manage");function f(j){var i=h.exec(j),m=i[1],k=i[2],l=e(m);return{source:l,eventType:k}}function b(i,j,n){var o=f(j),m=o.source,k=o.eventType,l;if(m&&n&&k){if(BUI.isFunction(n)){l=n}else{if(BUI.isArray(n)){l=function(){BUI.each(n,function(p){if(i[p]){i[p]()}})}}}}if(l){o.callbak=l;m.on(k,l);return o}return null}function d(l){var k=l.source,i=l.eventType,j=l.callbak;k.off(i,j)}function e(j){var i=a.getComponent(j);if(!i){i=$("#"+j);if(!i.length){i=null}}return i}function g(){}g.ATTRS={depends:{value:{}},dependencesMap:{value:{}}};g.prototype={__syncUI:function(){this.initDependences()},initDependences:function(){var i=this,j=i.get("depends");BUI.each(j,function(l,k){i.addDependence(k,l)})},addDependence:function(k,l){var j=this,i=j.get("dependencesMap"),m;j.removeDependence(k);m=b(j,k,l);if(m){i[k]=m}},removeDependence:function(k){var j=this,i=j.get("dependencesMap"),l=i[k];if(l){d(l);delete i[k]}},clearDependences:function(){var i=this,j=i.get("dependencesMap");BUI.each(j,function(l,k){d(l)});i.set("dependencesMap",{})},__destructor:function(){this.clearDependences()}};return g});define("bui/component/uibase/bindable",function(){function a(){}a.ATTRS={store:{},loadMask:{value:false}};BUI.augment(a,{__bindUI:function(){var b=this,c=b.get("store"),d=b.get("loadMask");if(!c){return}c.on("beforeload",function(f){b.onBeforeLoad(f);if(d&&d.show){d.show()}});c.on("load",function(f){b.onLoad(f);if(d&&d.hide){d.hide()}});c.on("exception",function(f){b.onException(f);if(d&&d.hide){d.hide()}});c.on("add",function(f){b.onAdd(f)});c.on("remove",function(f){b.onRemove(f)});c.on("update",function(f){b.onUpdate(f)});c.on("localsort",function(f){b.onLocalSort(f)})},__syncUI:function(){var b=this,c=b.get("store");if(!c){return}if(c.hasData()){b.onLoad()}},onBeforeLoad:function(b){},onLoad:function(b){},onException:function(b){},onAdd:function(b){},onRemove:function(b){},onUpdate:function(b){},onLocalSort:function(b){}});return a});define("bui/component/view",["bui/component/manage","bui/component/uibase"],function(b){var e=window,a=b("bui/component/manage"),c=b("bui/component/uibase"),d=document;var f=c.extend([c.TplView],{getComponentCssClassWithState:function(i){var g=this,h=g.get("ksComponentCss");i=i||"";return g.getCssClassWithPrefix(h.split(/\s+/).join(i+" ")+i)},getCssClassWithPrefix:a.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},getContentElement:function(){return this.get("contentEl")||this.get("el")},getStatusCls:function(i){var h=this,j=h.get("statusCls"),g=j[i];if(!g){g=h.getComponentCssClassWithState("-"+i)}return g},renderUI:function(){var g=this;if(!g.get("srcNode")){var i=g.get("render"),h=g.get("el"),j=g.get("elBefore");if(j){h.insertBefore(j,undefined)}else{if(i){h.appendTo(i,undefined)}else{h.appendTo(d.body,undefined)}}}},createDom:function(){var g=this,i=g.get("contentEl"),h=g.get("el");
if(!g.get("srcNode")){h=$("<"+g.get("elTagName")+">");if(i){h.append(i)}g.setInternal("el",h)}h.addClass(g.getComponentCssClassWithState());if(!i){g.setInternal("contentEl",h)}},_uiSetHighlighted:function(h){var g=this,i=g.getStatusCls("hover"),j=g.get("el");j[h?"addClass":"removeClass"](i)},_uiSetDisabled:function(h){var g=this,i=g.getStatusCls("disabled"),j=g.get("el");j[h?"addClass":"removeClass"](i).attr("aria-disabled",h);if(h&&g.get("highlighted")){g.set("highlighted",false)}if(g.get("focusable")){g.getKeyEventTarget().attr("tabIndex",h?-1:0)}},_uiSetActive:function(h){var g=this,i=g.getStatusCls("active");g.get("el")[h?"addClass":"removeClass"](i).attr("aria-pressed",!!h)},_uiSetFocused:function(h){var g=this,j=g.get("el"),i=g.getStatusCls("focused");j[h?"addClass":"removeClass"](i)},_uiSetElAttrs:function(g){this.get("el").attr(g)},_uiSetElCls:function(g){this.get("el").addClass(g)},_uiSetElStyle:function(g){this.get("el").css(g)},_uiSetWidth:function(g){this.get("el").width(g)},_uiSetHeight:function(i){var g=this;g.get("el").height(i)},_uiSetContent:function(i){var g=this,h;if(g.get("srcNode")&&!g.get("rendered")){}else{h=g.get("contentEl");if(typeof i=="string"){h.html(i)}else{if(i){h.empty().append(i)}}}},_uiSetVisible:function(h){var i=this,j=i.get("el"),g=i.get("visibleMode");if(g==="visibility"){j.css("visibility",h?"visible":"hidden")}else{j.css("display",h?"":"none")}},destructor:function(){var g=this.get("el");if(g){g.remove()}}},{xclass:"view",priority:0});f.ATTRS={el:{setter:function(g){return $(g)}},elCls:{},elStyle:{},width:{},height:{},statusCls:{value:{}},elTagName:{value:"div"},elAttrs:{},content:{},elBefore:{},render:{},visible:{value:true},visibleMode:{value:"display"},cachePosition:{},contentEl:{valueFn:function(){return this.get("el")}},prefixCls:{value:BUI.prefix},focusable:{value:true},focused:{},active:{},disabled:{},highlighted:{}};return f});define("bui/component/loader",["bui/util"],function(a){var c=a("bui/util"),b=a("bui/base"),d=function(e){d.superclass.constructor.call(this,e);this._init()};d.ATTRS={url:{},target:{},hasLoad:{value:false},autoLoad:{},lazyLoad:{},property:{},renderer:{value:function(e){return e}},loadMask:{value:false},dataType:{value:"text"},ajaxOptions:{value:{method:"get",cache:false}},params:{},appendParams:{},lastParams:{value:{}},callback:{},failure:{}};c.extend(d,b);c.augment(d,{isLoader:true,_init:function(){var e=this,f=e.get("autoLoad"),g=e.get("params");e._initMask();if(f){e.load(g)}else{e._initParams();e._initLazyLoad()}},_initLazyLoad:function(){var e=this,g=e.get("target"),f=e.get("lazyLoad");if(g&&f&&f.event){g.on(f.event,function(){if(!e.get("hasLoad")||f.repeat){e.load()}})}},_initMask:function(){var e=this,g=e.get("target"),f=e.get("loadMask");if(g&&f){c.use("bui/mask",function(i){var h=$.isPlainObject(f)?f:{};f=new i.LoadMask(c.mix({el:g.get("el")},h));e.set("loadMask",f)})}},_initParams:function(){var e=this,f=e.get("lastParams"),g=e.get("params");c.mix(f,g)},load:function(j){var e=this,g=e.get("url"),f=e.get("ajaxOptions"),h=e.get("lastParams"),i=e.get("appendParams");c.mix(true,h,i,j);j=c.cloneObject(h);if(!g){return}e.onBeforeLoad();e.set("hasLoad",true);$.ajax(c.mix({dataType:e.get("dataType"),data:j,url:g,success:function(k){e.onload(k,j)},error:function(k,m,l){e.onException({jqXHR:k,textStatus:m,errorThrown:l},j)}},f))},onBeforeLoad:function(){var e=this,f=e.get("loadMask");if(f&&f.show){f.show()}},onload:function(i,k){var e=this,f=e.get("loadMask"),h=e.get("property"),l=e.get("callback"),g=e.get("renderer"),j=e.get("target");j.set(h,g.call(e,i));if(f&&f.hide){f.hide()}if(l){l.call(this,i,k)}},onException:function(f,h){var e=this,g=e.get("failure");if(g){g.call(this,f,h)}}});return d});define("bui/component/controller",["bui/component/uibase","bui/component/manage","bui/component/view","bui/component/loader"],function(g){var f=g("bui/component/uibase"),a=g("bui/component/manage"),d=g("bui/component/view"),c=g("bui/component/loader"),l=BUI.wrapBehavior,i=BUI.getWrapBehavior;function j(o){return function(r){var q=this;if(q===r.target){var s=r.newVal,p=q.get("view");if(p){p.set(o,s)}}}}function k(o){return function(r){var q=this,p=q.get("view");if(p){return r===undefined?p.get(o):r}else{return}}}function b(p,s,r){p.create();var q=p.getContentElement(),o=p.get("defaultChildClass");if(!s.xclass&&!(s instanceof h)){if(!s.xtype){s.xclass=o}else{s.xclass=o+"-"+s.xtype}}s=BUI.Component.create(s,p);s.setInternal("parent",p);s.set("render",q);s.set("elBefore",r);s.create(undefined);return s}function e(q){var r,u,t,o={},p,s=q.get("xview");r=q.getAttrs();for(t in r){if(r.hasOwnProperty(t)){u=r[t];if(u.view){if((p=q.get(t))!==undefined){o[t]=p}q.on("after"+BUI.ucfirst(t)+"Change",j(t));u.getter=k(t)}}}delete o.autoRender;o.ksComponentCss=m(q);return new s(o)}function m(p){var r=p.constructor,o,q=[];while(r&&r!==h){o=a.getXClassByConstructor(r);if(o){q.push(o)}r=r.superclass&&r.superclass.constructor}return q.join(" ")}function n(q,p){var o=q.relatedTarget;
return o&&(o===p[0]||$.contains(p,o))}var h=f.extend([f.Decorate,f.Tpl,f.ChildCfg,f.KeyNav,f.Depends],{isController:true,getCssClassWithPrefix:a.getCssClassWithPrefix,initializer:function(){var o=this;if(!o.get("id")){o.set("id",o.getNextUniqueId())}a.addComponent(o.get("id"),o);o.setInternal("view",e(o))},getNextUniqueId:function(){var o=this,p=a.getXClassByConstructor(o.constructor);return BUI.guid(p)},createDom:function(){var p=this,o=p.get("view");o.create(undefined)},renderUI:function(){var p=this,o=p.get("loader");p.get("view").render();p._initChildren();if(o){p.setInternal("loader",o)}},_initChildren:function(q){var o=this,p,q,r;q=q||o.get("children").concat();o.get("children").length=0;for(p=0;p<q.length;p++){r=o.addChild(q[p]);r.render()}},bindUI:function(){var o=this,p=o.get("events");this.on("afterVisibleChange",function(q){this.fire(q.newVal?"show":"hide")});BUI.each(p,function(r,q){o.publish(q,{bubbles:r})})},containsElement:function(s){var p=this,r=p.get("el"),q=p.get("children"),o=false;if(!p.get("rendered")){return false}if($.contains(r[0],s)||r[0]===s){o=true}else{BUI.each(q,function(t){if(t.containsElement(s)){o=true;return false}})}return o},isChildrenElement:function(q){var o=this,p=o.get("children"),r=false;BUI.each(p,function(s){if(s.containsElement(q)){r=true;return false}});return r},show:function(){var o=this;o.render();o.set("visible",true);return o},hide:function(){var o=this;o.set("visible",false);return o},toggle:function(){this.set("visible",!this.get("visible"));return this},_uiSetFocusable:function(r){var o=this,p,q=o.getKeyEventTarget();if(r){q.attr("tabIndex",0).attr("hideFocus",true).on("focus",l(o,"handleFocus")).on("blur",l(o,"handleBlur")).on("keydown",l(o,"handleKeydown")).on("keyup",l(o,"handleKeyUp"))}else{q.removeAttr("tabIndex");if(p=i(o,"handleFocus")){q.off("focus",p)}if(p=i(o,"handleBlur")){q.off("blur",p)}if(p=i(o,"handleKeydown")){q.off("keydown",p)}if(p=i(o,"handleKeyUp")){q.off("keyup",p)}}},_uiSetHandleMouseEvents:function(r){var o=this,q=o.get("el"),p;if(r){q.on("mouseenter",l(o,"handleMouseEnter")).on("mouseleave",l(o,"handleMouseLeave")).on("contextmenu",l(o,"handleContextMenu")).on("mousedown",l(o,"handleMouseDown")).on("mouseup",l(o,"handleMouseUp")).on("dblclick",l(o,"handleDblClick"))}else{p=i(o,"handleMouseEnter")&&q.off("mouseenter",p);p=i(o,"handleMouseLeave")&&q.off("mouseleave",p);p=i(o,"handleContextMenu")&&q.off("contextmenu",p);p=i(o,"handleMouseDown")&&q.off("mousedown",p);p=i(o,"handleMouseUp")&&q.off("mouseup",p);p=i(o,"handleDblClick")&&q.off("dblclick",p)}},_uiSetFocused:function(o){if(o){this.getKeyEventTarget()[0].focus()}},_uiSetVisible:function(q){var r=this,s=r.get("el"),p=r.get("visibleMode");if(p==="visibility"){if(q){var o=r.get("cachePosition");if(o){r.set("xy",o)}}if(!q){var o=[r.get("x"),r.get("y")];r.set("cachePosition",o);r.set("xy",[-999,-999])}}},_uiSetChildren:function(p){var o=this,q=BUI.cloneObject(p);o._initChildren(q)},enable:function(){this.set("disabled",false);return this},disable:function(){this.set("disabled",true);return this},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(s,p){var o=this,q=o.get("children"),r;if(p===undefined){p=q.length}o.fire("beforeAddChild",{child:s,index:p});r=q[p]&&q[p].get("el")||null;s=b(o,s,r);q.splice(p,0,s);if(o.get("rendered")){s.render()}o.fire("afterAddChild",{child:s,index:p});return s},remove:function(p){var o=this,q=o.get("parent");if(q){q.removeChild(o,p)}else{if(p){o.destroy()}}return o},removeChild:function(s,r){var o=this,q=o.get("children"),p=BUI.Array.indexOf(s,q);if(p===-1){return}o.fire("beforeRemoveChild",{child:s,destroy:r});if(p!==-1){q.splice(p,1)}if(r&&s.destroy){s.destroy()}o.fire("afterRemoveChild",{child:s,destroy:r});return s},removeChildren:function(r){var o=this,q,p=[].concat(o.get("children"));for(q=0;q<p.length;q++){o.removeChild(p[q],r)}},getChildAt:function(o){var p=this.get("children");return p[o]||null},getChild:function(p,o){return this.getChildBy(function(q){return q.get("id")===p},o)},getChildBy:function(p,o){return this.getChildrenBy(p,o)[0]||null},getAppendHeight:function(){var o=this.get("el");return o.outerHeight()-o.height()},getAppendWidth:function(){var o=this.get("el");return o.outerWidth()-o.width()},getChildrenBy:function(r,o){var p=this,q=[];if(!r){return q}p.eachChild(function(s){if(r(s)){q.push(s)}else{if(o){q=q.concat(s.getChildrenBy(r,o))}}});return q},eachChild:function(o){BUI.each(this.get("children"),o)},handleDblClick:function(o){this.performActionInternal(o);if(!this.isChildrenElement(o.target)){this.fire("dblclick",{domTarget:o.target,domEvent:o})}},handleMouseOver:function(q){var o=this,p=o.get("el");if(!n(q,p)){o.handleMouseEnter(q)}},handleMouseOut:function(q){var o=this,p=o.get("el");if(!n(q,p)){o.handleMouseLeave(q)}},handleMouseEnter:function(p){var o=this;this.set("highlighted",!!p);o.fire("mouseenter",{domTarget:p.target,domEvent:p})
},handleMouseLeave:function(p){var o=this;o.set("active",false);o.set("highlighted",!p);o.fire("mouseleave",{domTarget:p.target,domEvent:p})},handleMouseDown:function(q){var o=this,s,r=q["which"]===1,p;if(r){p=o.getKeyEventTarget();if(o.get("activeable")){o.set("active",true)}if(o.get("focusable")){p[0].focus();o.set("focused",true)}if(!o.get("allowTextSelection")){s=q.target.nodeName;s=s&&s.toLowerCase();if(s!=="input"&&s!=="textarea"){q.preventDefault()}}if(!o.isChildrenElement(q.target)){o.fire("mousedown",{domTarget:q.target,domEvent:q})}}},handleMouseUp:function(q){var p=this,o=p.isChildrenElement(q.target);if(p.get("active")&&q.which===1){p.performActionInternal(q);p.set("active",false);if(!o){p.fire("click",{domTarget:q.target,domEvent:q})}}if(!o){p.fire("mouseup",{domTarget:q.target,domEvent:q})}},handleContextMenu:function(o){},handleFocus:function(o){this.set("focused",!!o);this.fire("focus",{domEvent:o,domTarget:o.target})},handleBlur:function(o){this.set("focused",!o);this.fire("blur",{domEvent:o,domTarget:o.target})},handleKeyEventInternal:function(q){var p=this,o=p.isChildrenElement(q.target);if(q.which===13){if(!o){p.fire("click",{domTarget:q.target,domEvent:q})}return this.performActionInternal(q)}if(!o){p.fire("keydown",{domTarget:q.target,domEvent:q})}},handleKeydown:function(p){var o=this;if(o.handleKeyEventInternal(p)){p.halt();return true}},handleKeyUp:function(p){var o=this;if(!o.isChildrenElement(p.target)){o.fire("keyup",{domTarget:p.target,domEvent:p})}},performActionInternal:function(o){},destructor:function(){var p=this,s,r,o,q=p.get("children");s=p.get("id");for(r=0;r<q.length;r++){q[r].destroy&&q[r].destroy()}p.get("view").destroy();a.removeComponent(s)}},{ATTRS:{content:{view:1},elTagName:{view:true,value:"div"},defaultChildClass:{},xtype:{},id:{view:true},width:{view:1},height:{view:1},elCls:{view:1},elStyle:{view:1},elAttrs:{view:1},elBefore:{view:1},el:{view:1},events:{value:{"click":true,"dblclick":true,"mouseenter":true,"mouseleave":true,"keydown":true,"keyup":true,"focus":false,"blur":false,"mousedown":true,"mouseup":true,"show":false,"hide":false}},render:{view:1},statusCls:{view:true,value:{}},visibleMode:{view:1,value:"display"},visible:{value:true,view:1},handleMouseEvents:{value:true},focusable:{value:false,view:1},defaultLoaderCfg:{value:{property:"content",autoLoad:true}},loader:{getter:function(q){var o=this,p;if(q&&!q.isLoader){q.target=o;p=o.get("defaultLoaderCfg");q=new c(BUI.merge(p,q));o.setInternal("loader",q)}return q}},allowTextSelection:{value:true},activeable:{value:true},focused:{view:1},active:{view:1},highlighted:{view:1},children:{sync:false,value:[]},prefixCls:{value:BUI.prefix,view:1},parent:{setter:function(o){this.addTarget(o)}},disabled:{view:1,value:false},xview:{value:d}},PARSER:{visible:function(r){var p=this,s=r.css("display"),q=r.css("visibility"),o=p.get("visibleMode");if((s=="none"&&o=="display")||(q=="hidden"&&o=="visibility")){return false}return true}}},{xclass:"controller",priority:0});return h});define("bui/cookie",function(){var f=document,b=24*60*60*1000,d=encodeURIComponent,e=decodeURIComponent;function c(g){return typeof(g)==="string"&&g!==""}var a={get:function(i){var h,g;if(c(i)){if((g=String(f.cookie).match(new RegExp("(?:^| )"+i+"(?:(?:=([^;]*))|;|$)")))){h=g[1]?e(g[1]):""}}return h},set:function(i,n,g,j,l,k){var m=String(d(n)),h=g;if(typeof h==="number"){h=new Date();h.setTime(h.getTime()+g*b)}if(h instanceof Date){m+="; expires="+h.toUTCString()}if(c(j)){m+="; domain="+j}if(c(l)){m+="; path="+l}if(k){m+="; secure"}f.cookie=i+"="+m},remove:function(g,h,j,i){this.set(g,"",-1,h,j,i)}};BUI.Cookie=a;return a});(function(){var a="bui/data/";define("bui/data",["bui/common",a+"sortable",a+"proxy",a+"abstractstore",a+"store",a+"node",a+"treestore"],function(c){var d=c("bui/common"),b=d.namespace("Data");d.mix(b,{Sortable:c(a+"sortable"),Proxy:c(a+"proxy"),AbstractStore:c(a+"abstractstore"),Store:c(a+"store"),Node:c(a+"node"),TreeStore:c(a+"treestore")});return b})})();define("bui/data/sortable",function(){var b="ASC",a="DESC";var c=function(){};c.ATTRS={compareFunction:{value:function(e,d){if(e===undefined){e=""}if(d===undefined){d=""}if(BUI.isString(e)){return e.localeCompare(d)}if(e>d){return 1}else{if(e===d){return 0}else{return -1}}}},sortField:{},sortDirection:{value:"ASC"},sortInfo:{getter:function(){var d=this,e=d.get("sortField");return{field:e,direction:d.get("sortDirection")}},setter:function(e){var d=this;d.set("sortField",e.field);d.set("sortDirection",e.direction)}}};BUI.augment(c,{compare:function(i,h,g,f){var d=this,e;g=g||d.get("sortField");f=f||d.get("sortDirection");if(!g||!f){return 1}e=f===b?1:-1;return d.get("compareFunction")(i[g],h[g])*e},getSortData:function(){},sortData:function(g,f,e){var d=this,e=e||d.getSortData();if(BUI.isArray(g)){e=g;g=null}g=g||d.get("sortField");f=f||d.get("sortDirection");d.set("sortField",g);d.set("sortDirection",f);if(!g||!f){return e}e.sort(function(i,h){return d.compare(i,h,g,f)});
return e}});return c});define("bui/data/proxy",["bui/data/sortable"],function(b){var a=b("bui/data/sortable");var c=function(f){c.superclass.constructor.call(this,f)};c.ATTRS={};BUI.extend(c,BUI.Base);BUI.augment(c,{_read:function(f,g){},read:function(h,i,g){var f=this;g=g||f;f._read(h,function(j){i.call(g,j)})},update:function(g,h,f){}});var d=function(f){d.superclass.constructor.call(this,f)};d.ATTRS=BUI.mix(true,c.ATTRS,{limitParam:{value:"limit"},startParam:{value:"start"},pageIndexParam:{value:"pageIndex"},dataType:{value:"json"},method:{value:"GET"},cache:{value:false},url:{}});BUI.extend(d,c);BUI.augment(d,{_processParams:function(h){var g=this,f=["start","limit","pageIndex"];BUI.each(f,function(i){var j=g.get(i+"Param");if(j!==i){h[j]=h[i];delete h[i]}})},_read:function(g,h){var f=this;g=BUI.cloneObject(g);f._processParams(g);$.ajax({url:f.get("url"),type:f.get("method"),dataType:f.get("dataType"),data:g,cache:f.get("cache"),success:function(i){h(i)},error:function(j,l,k){var i={exception:{status:l,errorThrown:k,jqXHR:j}};h(i)}})}});var e=function(f){e.superclass.constructor.call(this,f)};BUI.extend(e,c);BUI.mixin(e,[a]);BUI.augment(e,{_read:function(g,m){var l=this,i=g.pageable,f=g.start,k=g.sortField,n=g.sortDirection,h=g.limit,j=l.get("data"),o=[];l.sortData(k,n);if(h){o=j.slice(f,f+h);m({rows:o,results:j.length})}else{o=j.slice(f);m(o)}}});c.Ajax=d;c.Memery=e;return c});define("bui/data/abstractstore",["bui/common","bui/data/proxy"],function(b){var c=b("bui/common"),d=b("bui/data/proxy");function a(e){a.superclass.constructor.call(this,e);this._init()}a.ATTRS={autoLoad:{value:false},lastParams:{value:{}},params:{},proxy:{value:{}},url:{},events:{value:["acceptchanges","load","beforeload","beforeProcessLoad","add","exception","remove","update","localsort"]},data:{setter:function(g){var e=this,f=e.get("proxy");if(f.set){f.set("data",g)}else{f.data=g}e.set("autoLoad",true)}}};c.extend(a,c.Base);c.augment(a,{isStore:true,_init:function(){var e=this;e.beforeInit();e._initParams();e._initProxy();e._initData()},beforeInit:function(){},_initData:function(){var e=this,f=e.get("autoLoad");if(f){e.load()}},_initParams:function(){var e=this,f=e.get("lastParams"),g=e.get("params");c.mix(f,g)},_initProxy:function(){var e=this,f=e.get("url"),g=e.get("proxy");if(!(g instanceof d)){if(f){g.url=f}if(g.type==="ajax"||g.url){g=new d.Ajax(g)}else{g=new d.Memery(g)}e.set("proxy",g)}},load:function(h,i){var e=this,f=e.get("proxy"),g=e.get("lastParams");c.mix(true,g,e.getAppendParams(),h);e.fire("beforeload",{params:g});h=c.cloneObject(g);f.read(g,function(j){e.onLoad(j,h);if(i){i(j,h)}},e)},onLoad:function(g,h){var e=this;var f=e.processLoad(g,h);if(f){e.afterProcessLoad(g,h)}},processLoad:function(g,h){var e=this,f=e.get("hasErrorProperty");e.fire("beforeProcessLoad",g);if(g[f]||g.exception){e.onException(g);return false}return true},afterProcessLoad:function(e,f){},onException:function(f){var e=this,h=e.get("errorProperty"),g={};if(f.exception){g.type="exception";g[h]=f.exception}else{g.type="error";g[h]=f[h]}e.fire("exception",g)},hasData:function(){},getAppendParams:function(){return{}}});return a});define("bui/data/node",["bui/common"],function(b){var d=b("bui/common");function c(e,f){var g={};if(f){d.each(e,function(i,h){var j=f[h]||h;g[j]=i});g.record=e}else{g=e}return g}function a(f,g){var e=this;f=c(f,g);d.mix(this,f)}d.augment(a,{root:false,leaf:false,text:"",id:null,loaded:false,path:null,parent:null,level:0,record:null,children:null,isNode:true});return a});define("bui/data/treestore",["bui/common","bui/data/node","bui/data/abstractstore","bui/data/proxy"],function(c){var e=c("bui/common"),b=c("bui/data/node"),f=c("bui/data/proxy"),a=c("bui/data/abstractstore");function d(g){d.superclass.constructor.call(this,g)}d.ATTRS={root:{},map:{},dataProperty:{value:"nodes"},events:{value:["add","update","remove","load"]}};e.extend(d,a);e.augment(d,{beforeInit:function(){this.initRoot()},_initData:function(){var g=this,i=g.get("autoLoad"),h=g.get("root");if(i&&!h.children){params=h.id?{id:h.id}:{};g.load(params)}},initRoot:function(){var g=this,i=g.get("map"),h=g.get("root");if(!h){h={}}if(!h.isNode){h=new b(h,i)}h.path=[h.id];h.level=0;if(h.children){g.setChildren(h,h.children)}g.set("root",h)},add:function(j,i,h){var g=this;j=g._add(j,i,h);g.fire("add",{node:j,index:h});return j},_add:function(l,k,i){k=k||this.get("root");var g=this,m=g.get("map"),h=k.children,j=l.children||[];if(j.length==0&&l.leaf==null){l.leaf=true}if(k){k.leaf=false}if(!l.isNode){l=new b(l,m)}l.parent=k;l.level=k.level+1;l.path=k.path.concat(l.id);i=i==null?k.children.length:i;e.Array.addAt(h,l,i);g.setChildren(l,j);return l},remove:function(i){var h=i.parent||_self.get("root"),g=e.Array.indexOf(i,h.children);e.Array.remove(h.children,i);if(h.children.length===0){h.leaf=true}this.fire("remove",{node:i,index:g});i.parent=null;return i},update:function(g){this.fire("update",{node:g})},getResult:function(){return this.get("root").children},setResult:function(j){var g=this,i=g.get("proxy"),h=g.get("root");
if(i instanceof f.Memery){g.set("data",j);g.load({id:h.id})}else{g.setChildren(h,j)}},setChildren:function(i,h){var g=this;i.children=[];if(!h.length){return}e.each(h,function(j){g._add(j,i)})},findNode:function(m,k,i){var g=this;i=i==null?true:i;if(!k){var h=g.get("root");if(h.id===m){return h}return g.findNode(m,h)}var j=k.children,l=null;e.each(j,function(n){if(n.id===m){l=n}else{if(i){l=g.findNode(m,n)}}if(l){return false}});return l},findNodesBy:function(j,i){var g=this,h,k=[];if(!i){i=g.get("root")}e.each(i.children,function(l){if(j(l)){k.push(l)}k=k.concat(g.findNodesBy(j,l))});return k},findNodeByPath:function(n){if(!n){return null}var g=this,h=g.get("root"),m=n.split(","),l,k,j=m[0];if(!j){return null}if(h.id==j){l=h}else{l=g.findNode(j,h,false)}if(!l){return}for(k=1;k<m.length;k=k+1){var j=m[k];l=g.findNode(j,l,false);if(!l){break}}return l},contains:function(j,i){var g=this,h=g.findNode(j.id,i);return !!h},afterProcessLoad:function(j,k){var g=this,l=k.id,h=g.get("dataProperty"),i=g.findNode(l)||g.get("root");if(e.isArray(j)){g.setChildren(i,j)}else{g.setChildren(i,j[h])}g.fire("load",{node:i,params:k})},hasData:function(){return true},isLoaded:function(g){if(!this.get("url")){return true}return g.leaf||(g.children&&g.children.length)},loadNode:function(h){var g=this;if(g.isLoaded(h)){return}if(!g.get("url")){return}else{g.load({id:h.id,path:""})}},loadPath:function(i){var h=this,g=i.split(","),j=g[0];if(h.findNodeByPath(i)){return}h.load({id:j,path:i})}});return d});define("bui/data/store",["bui/data/proxy","bui/data/abstractstore","bui/data/sortable"],function(f){var h=f("bui/data/proxy"),e=f("bui/data/abstractstore"),a=f("bui/data/sortable");function b(k,l){if(k<0){return}var j=l,i=j[k];j.splice(k,1);return i}function d(i,k){var j=BUI.Array.indexOf(i,k);if(j>=0){b(j,k)}}function g(i,j){return BUI.Array.indexOf(i,j)!==-1}var c=function(i){c.superclass.constructor.call(this,i)};c.ATTRS={currentPage:{value:0},deletedRecords:{value:[]},errorProperty:{value:"error"},hasErrorProperty:{value:"hasError"},matchFunction:{value:function(j,i){return j==i}},modifiedRecords:{value:[]},newRecords:{value:[]},remoteSort:{value:false},resultMap:{value:{}},root:{value:"rows"},rowCount:{value:0},totalProperty:{value:"results"},start:{value:0},pageSize:{}};BUI.extend(c,e);BUI.mixin(c,[a]);BUI.augment(c,{add:function(m,k,j){var i=this,l=i.getCount();i.addAt(m,l,k,j)},addAt:function(m,l,k,j){var i=this;j=j||i._getDefaultMatch();if(!BUI.isArray(m)){m=[m]}$.each(m,function(o,n){if(!k||!i.contains(n,j)){i._addRecord(n,o+l);i.get("newRecords").push(n);d(n,i.get("deletedRecords"));d(n,i.get("modifiedRecords"))}})},contains:function(i,j){return this.findIndexBy(i,j)!==-1},find:function(m,l){var j=this,i=null,k=j.getResult();$.each(k,function(o,n){if(n[m]===l){i=n;return false}});return i},findAll:function(m,l){var j=this,i=[],k=j.getResult();$.each(k,function(o,n){if(n[m]===l){i.push(n)}});return i},findByIndex:function(i){return this.getResult()[i]},findIndexBy:function(m,l){var j=this,i=-1,k=j.getResult();l=l||j._getDefaultMatch();if(m===null||m===undefined){return -1}$.each(k,function(o,n){if(l(m,n)){i=o;return false}});return i},findNextRecord:function(j){var i=this,k=i.findIndexBy(j);if(k>=0){return i.findByIndex(k+1)}return},getCount:function(){return this.getResult().length},getTotalCount:function(){var i=this,j=i.get("resultMap"),k=i.get("totalProperty");return j[k]||0},getResult:function(){var i=this,k=i.get("resultMap"),j=i.get("root");return k[j]},hasData:function(){return this.getCount()!==0},setResult:function(k){var i=this,j=i.get("proxy");if(j instanceof h.Memery){i.set("data",k);i.load({start:0})}else{i._setResult(k)}},remove:function(k,j){var i=this,l=[];j=j||i._getDefaultMatch();if(!BUI.isArray(k)){k=[k]}$.each(k,function(n,o){var n=i.findIndexBy(o,j),m=b(n,i.getResult());if(!g(m,i.get("newRecords"))&&!g(m,i.get("deletedRecords"))){i.get("deletedRecords").push(m)}d(m,i.get("newRecords"));d(m,i.get("modifiedRecords"));i.fire("remove",{record:m})})},sort:function(k,j){var i=this,l=i.get("remoteSort");if(!l){i._localSort(k,j)}else{i.set("sortField",k);i.set("sortDirection",j);i.load(i.get("sortInfo"))}},sum:function(m,l){var i=this,j=l||i.getResult(),k=0;BUI.each(j,function(n){var o=n[m];if(!isNaN(o)){k+=parseFloat(o)}});return k},setValue:function(m,l,k){var j=m,i=this;j[l]=k;if(!g(j,i.get("newRecords"))&&!g(j,i.get("modifiedRecords"))){i.get("modifiedRecords").push(j)}i.fire("update",{record:j,field:l,value:k})},update:function(n,m){var j=n,i=this,l=null,k=null;if(m){l=i._getDefaultMatch();k=i.findIndexBy(n,l);if(k>=0){j=i.getResult()[k]}}j=BUI.mix(j,n);if(!g(j,i.get("newRecords"))&&!g(j,i.get("modifiedRecords"))){i.get("modifiedRecords").push(j)}i.fire("update",{record:j})},_addRecord:function(i,k){var j=this.getResult();if(k==undefined){k=j.length}j.splice(k,0,i);this.fire("add",{record:i,index:k})},_clearChanges:function(){var i=this;i.get("newRecords").splice(0);i.get("modifiedRecords").splice(0);i.get("deletedRecords").splice(0)
},_getDefaultMatch:function(){return this.get("matchFunction")},_getPageParams:function(){var j=this,l=j.get("sortInfo"),m=j.get("start"),k=j.get("pageSize"),i=j.get("pageIndex")||(k?m/k:0);params={start:m,limit:k,pageIndex:i};if(j.get("remoteSort")){BUI.mix(params,l)}return params},getAppendParams:function(){return this._getPageParams()},beforeInit:function(){this._setResult([])},_localSort:function(k,j){var i=this;i._sortData(k,j);i.fire("localsort")},_sortData:function(l,k,j){var i=this;j=j||i.getResult();i.sortData(l,k,j)},afterProcessLoad:function(l,n){var i=this,k=i.get("root"),o=n.start,j=n.limit,m=i.get("totalProperty");if(BUI.isArray(l)){i._setResult(l)}else{i._setResult(l[k],l[m])}i.set("start",o);if(j){i.set("pageIndex",o/j)}if(!i.get("remoteSort")){i._sortData()}i.fire("load",{params:n})},_setResult:function(l,j){var i=this,k=i.get("resultMap");j=j||l.length;k[i.get("root")]=l;k[i.get("totalProperty")]=j;i._clearChanges()}});return c});define("bui/overlay",["bui/common","bui/overlay/overlay","bui/overlay/dialog","bui/overlay/message"],function(b){var c=b("bui/common"),a=c.namespace("Overlay");c.mix(a,{Overlay:b("bui/overlay/overlay"),Dialog:b("bui/overlay/dialog"),Message:b("bui/overlay/message")});c.mix(a,{OverlayView:a.Overlay.View,DialogView:a.Dialog.View});c.Message=c.Overlay.Message;return a});define("bui/overlay/overlay",["bui/common"],function(d){var g=d("bui/common"),c=g.Component,f="x-align-arrow",e=c.UIBase;var a=c.View.extend([e.PositionView,e.CloseView]);var b=c.Controller.extend([e.Position,e.Align,e.Close,e.AutoShow,e.AutoHide],{renderUI:function(){var h=this,j=h.get("el"),k=h.get("arrowContainer"),i=k?j.one(k):j;if(h.get("showArrow")){$(h.get("arrowTpl")).appendTo(i)}},show:function(){var i=this,l=i.get("effect"),k=i.get("el"),h=i.get("visibleMode"),j=l.effect,m=l.duration;if(h==="visibility"){b.superclass.show.call(i);if(l.callback){l.callback.call(i)}return}if(!i.get("rendered")){i.set("visible",true);i.render();i.set("visible",false);k=i.get("el")}switch(j){case"linear":k.show(m,n);break;case"fade":k.fadeIn(m,n);break;case"slide":k.slideDown(m,n);break;default:n();break}function n(){i.set("visible",true);if(l.callback){l.callback.call(i)}}},hide:function(){var h=this,k=h.get("effect"),j=h.get("el"),i=k.effect,l=k.duration;if(h.get("visibleMode")==="visibility"){m();return}switch(i){case"linear":j.hide(l,m);break;case"fade":j.fadeOut(l,m);break;case"slide":j.slideUp(l,m);break;default:m();break}function m(){h.set("visible",false);if(k.callback){k.callback.call(h)}}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},closable:{value:false},showArrow:{value:false},arrowContainer:{view:true},arrowTpl:{value:'<s class="'+f+'"><s class="'+f+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:false},xview:{value:a}}},{xclass:"overlay"});b.View=a;return b});define("bui/overlay/dialog",["bui/overlay/overlay"],function(c){var a=c("bui/overlay/overlay"),g=BUI.Component.UIBase,h="header-title",f=BUI.prefix,b=20;var e=a.View.extend([g.StdModView,g.MaskView],{_uiSetTitle:function(j){var i=this,k=i.get("el");k.find("."+h).html(j)},_uiSetContentId:function(k){var j=this,i=j.get("body"),l=$("#"+k).children();l.appendTo(i)},_uiSetHeight:function(k){var j=this,l=k,n=j.get("header"),i=j.get("body"),m=j.get("footer");l-=n.outerHeight()+m.outerHeight();l-=b*2;i.height(l)},_removeContent:function(){var j=this,i=j.get("body"),k=j.get("contentId");if(k){i.children().appendTo($("#"+k))}else{i.children().remove()}}},{xclass:"dialog-view"});var d=a.extend([g.StdMod,g.Mask,g.Drag],{show:function(){var i=this;d.superclass.show.call(this);i.center()},bindUI:function(){var i=this;i.on("closeclick",function(){return i.onCancel()})},onCancel:function(){var i=this,j=i.get("cancel");return j.call(this)},_uiSetButtons:function(j){var i=this,k=i.get("footer");k.children().remove();BUI.each(j,function(l){i._createButton(l,k)})},_createButton:function(k,m){var i=this,j='<button class="'+k.elCls+'">'+k.text+"</button>",l=$(j).appendTo(m);l.on("click",function(){k.handler.call(i,i,this)})},destructor:function(){var j=this,l=j.get("contentId"),i=j.get("body"),k=j.get("closeAction");if(k=="destroy"){j.hide();if(l){i.children().appendTo("#"+l)}}}},{ATTRS:{closeTpl:{view:true,value:'<a tabindex="0" href=javascript:void("\u5173\u95ed") role="button" class="'+f+'ext-close" style=""><span class="'+f+'ext-close-x x-icon x-icon-normal">\u00d7</span></a>'},buttons:{value:[{text:"\u786e\u5b9a",elCls:"button button-primary",handler:function(){var i=this,j=i.get("success");if(j){j.call(i)}}},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:function(j,i){if(this.onCancel()!==false){this.close()}}}]},contentId:{view:true},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var i=this;return{property:"bodyContent",autoLoad:false,lazyLoad:{event:"show"},loadMask:{el:i.get("body")}}}},title:{view:true,value:""},mask:{value:true},maskShared:{value:false},headerContent:{value:'<div class="'+h+'">\u6807\u9898</div>'},footerContent:{},closable:{value:true},xview:{value:e}}},{xclass:"dialog"});
d.View=e;return d});define("bui/overlay/message",["bui/overlay/dialog"],function(a){var h=a("bui/overlay/dialog"),c=BUI.prefix,g={info:"i",error:"\u00d7",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"};var l=h.extend({renderUI:function(){this._setContent()},bindUI:function(){var n=this,m=n.get("body");n.on("afterVisibleChange",function(o){if(o.newVal){if(BUI.UA.ie<8){var p=m.outerWidth();if(BUI.UA.ie==6){p=p>350?350:p}n.get("header").width(p-20);n.get("footer").width(p)}}})},_setContent:function(){var n=this,m=n.get("body"),o=BUI.substitute(n.get("contentTpl"),{msg:n.get("msg"),iconTpl:n.get("iconTpl")});m.empty();$(o).appendTo(m)},_uiSetIcon:function(m){if(!this.get("rendered")){return}this._setContent()},_uiSetMsg:function(m){if(!this.get("rendered")){return}this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var m=this,n=m.get("icon");return'<div class="x-icon x-icon-'+n+'">'+g[n]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+c+'message-content">{msg}</div>'}}},{xclass:"message",priority:0});var f=new l({icon:"info",title:""});function d(m,n){return function(p,q,o){if(BUI.isString(q)){o=q;q=null}o=o||n;q=q||e;j({"buttons":m,"icon":o,"msg":p,"success":q})}}function j(m){f.set(m);f.show()}function k(){var m=this,n=m.get("success");if(n){n.call(m);m.hide()}}function e(){this.hide()}var b=d([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:k}],"info"),i=d([{text:"\u786e\u5b9a",elCls:"button button-primary",handler:k},{text:"\u53d6\u6d88",elCls:"button button-primary",handler:e}],"question");l.Alert=b;l.Confirm=i;l.Show=j;return l});(function(){var a="bui/list/";define("bui/list",["bui/common",a+"list",a+"listitem",a+"simplelist",a+"listbox"],function(c){var d=c("bui/common"),b=d.namespace("List");d.mix(b,{List:c(a+"list"),ListItem:c(a+"listitem"),SimpleList:c(a+"simplelist"),Listbox:c(a+"listbox")});d.mix(b,{ListItemView:b.ListItem.View,SimpleListView:b.SimpleList.View});return b})})();define("bui/list/domlist",["bui/common"],function(b){var d=b("bui/common"),i=d.Component.UIBase.Selection,g="data-",h=d.Component.UIBase.List;function a(m,l){var k=l,n=k.get("itemCls"),j=k.get("itemStatusCls");if(j&&j[m]){return j[m]}return n+"-"+m}var c=function(){};c.ATTRS={items:{}};c.prototype={clearControl:function(){var j=this,l=j.getItemContainer(),k=j.get("itemCls");l.find("."+k).remove()},addItem:function(k,j){return this._createItem(k,j)},getItems:function(){var j=this,k=j.getAllElements(),l=[];d.each(k,function(m){l.push(j.getItemByElement(m))});return l},updateItem:function(o){var j=this,k=j.getItems(),m=d.Array.indexOf(o,k),n=null,l;if(m>=0){n=j.findElement(o);l=j.getItemTpl(o,m);if(n){$(n).html($(l).html())}}return n},removeItem:function(k,j){j=j||this.findElement(k);$(j).remove()},getItemContainer:function(){return this.get("itemContainer")||this.get("el")},getItemTpl:function(m,k){var j=this,l=j.get("itemTplRender"),n=j.get("itemTpl");if(l){return l(m,k)}return d.substitute(n,m)},_createItem:function(q,m){var p=this,l=p.getItemContainer(),j=p.get("itemCls"),r=p.get("dataField"),n=p.getItemTpl(q,m),k=$(n);if(m!==undefined){var o=l.find("."+j)[m];if(o){k.insertBefore(o)}else{k.appendTo(l)}}else{k.appendTo(l)}k.addClass(j);k.data(r,q);return k},getItemStatusCls:function(j){return a(j,this)},setItemStatusCls:function(l,m,n){var j=this,k=j.getItemStatusCls(l),o=n?"addClass":"removeClass";if(m){$(m)[o](k)}},hasStatus:function(l,m){var j=this,k=j.getItemStatusCls(l);return $(m).hasClass(k)},setItemSelected:function(m,l,k){var j=this;k=k||j.findElement(m);j.setItemStatusCls("selected",k,l)},getAllElements:function(){var j=this,l=j.get("itemCls"),k=j.get("el");return k.find("."+l)},getItemByElement:function(k){var j=this,l=j.get("dataField");return $(k).data(l)},getFirstElementByStatus:function(l){var j=this,k=j.getItemStatusCls(l),m=j.get("el");return m.find("."+k)[0]},getElementsByStatus:function(l){var j=this,k=j.getItemStatusCls(l),m=j.get("el");return m.find("."+k)},getSelectedElements:function(){var j=this,k=j.getItemStatusCls("selected"),l=j.get("el");return l.find("."+k)},findElement:function(l){var k=this,m=k.getAllElements(),j=null;d.each(m,function(n){if(k.getItemByElement(n)==l){j=n;return false}});return j},isElementSelected:function(l){var j=this,k=j.getItemStatusCls("selected");return l&&$(l).hasClass(k)}};function f(l,j){var k=l.attributes,n=j.get("itemStatusFields"),m={};d.each(k,function(o){var p=o.nodeName;if(p.indexOf(g)!==-1){p=p.replace(g,"");m[p]=o.nodeValue}});m.text=$(l).text();d.each(n,function(q,p){var o=a(p,j);if($(l).hasClass(o)){m[q]=true}});return m}var e=function(){};e.ATTRS=d.merge(true,h.ATTRS,i.ATTRS,{dataField:{view:true,value:"data-item"},itemContainer:{view:true},itemStatusFields:{value:{}},itemCls:{view:true},textGetter:{},defaultLoaderCfg:{value:{property:"items",dataType:"json"}},events:{value:{"itemrendered":true,"itemremoved":true,"itemupdated":true,"itemsshow":false,"beforeitemsshow":false,"itemsclear":false,"beforeitemsclear":false}}});
e.PARSER={items:function(k){var j=this,o=[],m=j.get("itemCls"),n=j.get("dataField"),l=k.find("."+m);d.each(l,function(p){var q=f(p,j);o.push(q);$(p).data(n,q)});return o}};d.augment(e,h,i,{_uiSetItems:function(k){var j=this;if(j.get("srcNode")&&!j.get("rendered")){return}this.setItems(k)},__bindUI:function(){var j=this,k=j.get("selectedEvent"),n=j.get("itemCls"),m=j.get("view").getItemContainer();m.delegate("."+n,"click",function(q){var o=$(q.currentTarget),p=j.getItemByElement(o);if(j.isItemDisabled(p,o)){return}var r=j.fire("itemclick",{item:p,element:o[0],domTarget:q.target});if(r!==false&&k=="click"){l(p,o)}});if(k!=="click"){m.delegate("."+n,k,function(q){var o=$(q.currentTarget),p=j.getItemByElement(o);if(j.isItemDisabled(p,o)){return}l(p,o)})}m.delegate("."+n,"dblclick",function(q){var o=$(q.currentTarget),p=j.getItemByElement(o);if(j.isItemDisabled(p,o)){return}j.fire("itemdblclick",{item:p,element:o[0],domTarget:q.target})});function l(r,q){var p=j.get("multipleSelect"),o;o=j.isItemSelected(r,q);if(!o){if(!p){j.clearSelected()}j.setItemSelected(r,true,q)}else{if(p){j.setItemSelected(r,false,q)}}}j.on("itemrendered itemupdated",function(q){var p=q.item,o=q.element;j._syncItemStatus(p,o)})},getValueByField:function(j,k){return j&&j[k]},_syncItemStatus:function(l,k){var j=this,m=j.get("itemStatusFields");d.each(m,function(o,n){j.get("view").setItemStatusCls(n,k,l[o])})},getStatusValue:function(l,k){var j=this,n=j.get("itemStatusFields"),m=n[k];return l[m]},getCount:function(){var j=this.getItems();return j?j.length:0},getStatusField:function(k){var j=this,l=j.get("itemStatusFields");return l[k]},setStatusValue:function(l,k,m){var j=this,o=j.get("itemStatusFields"),n=o[k];if(n){l[n]=m}},getItemText:function(k){var j=this,l=j.get("textGetter");if(!k){return""}if(l){return l(k)}else{return $(j.findElement(k)).text()}},removeItem:function(n){var j=this,k=j.get("items"),m=j.findElement(n),l;l=d.Array.indexOf(n,k);if(l!==-1){k.splice(l,1)}j.get("view").removeItem(n,m);j.fire("itemremoved",{item:n,domTarget:$(m)[0],element:m})},addItemAt:function(m,l){var j=this,k=j.get("items");if(l===undefined){l=k.length}k.splice(l,0,m);j.addItemToView(m,l);return m},addItemToView:function(m,k){var j=this,l=j.get("view").addItem(m,k);j.fire("itemrendered",{item:m,domTarget:$(l)[0],element:l})},updateItem:function(l){var j=this,k=j.get("view").updateItem(l);j.fire("itemupdated",{item:l,domTarget:$(k)[0],element:k})},setItems:function(k){var j=this;j.clearControl();j.fire("beforeitemsshow");d.each(k,function(m,l){j.addItemToView(m,l)});j.fire("itemsshow")},getItems:function(){return this.get("items")},getItemByElement:function(j){return this.get("view").getItemByElement(j)},getSelected:function(){var j=this,k=j.get("view").getFirstElementByStatus("selected");return j.getItemByElement(k)||null},getItemsByStatus:function(k){var j=this,l=j.get("view").getElementsByStatus(k),m=[];d.each(l,function(n){m.push(j.getItemByElement(n))});return m},findElement:function(k){var j=this;if(d.isString(k)){k=j.getItem(k)}return this.get("view").findElement(k)},findItemByField:function(n,m){var k=this,l=k.get("items"),j=null;d.each(l,function(o){if(o[n]===m){j=o;return false}});return j},setItemSelectedStatus:function(m,l,k){var j=this;k=k||j.findElement(m);j.setItemStatus(m,"selected",l,k)},setAllSelection:function(){var j=this,k=j.getItems();j.setSelection(k)},isItemSelected:function(l,k){var j=this;k=k||j.findElement(l);return j.get("view").isElementSelected(k)},isItemDisabled:function(k,j){return this.hasStatus(k,"disabled",j)},setItemDisabled:function(l,k){var j=this;j.setItemStatus(l,"disabled",k)},getSelection:function(){var j=this,k=j.get("view").getSelectedElements(),l=[];d.each(k,function(m){l.push(j.getItemByElement(m))});return l},clearControl:function(){this.fire("beforeitemsclear");this.get("view").clearControl();this.fire("itemsclear")},hasStatus:function(m,k,l){if(!m){return false}var j=this;l=l||j.findElement(m);return j.get("view").hasStatus(k,l)},setItemStatus:function(m,k,n,l){var j=this;if(m){l=l||j.findElement(m)}if(!j.isItemDisabled(m,l)||k==="disabled"){if(m){if(k==="disabled"&&n){j.clearItemStatus(m)}j.setStatusValue(m,k,n);j.get("view").setItemStatusCls(k,l,n);j.fire("itemstatuschange",{item:m,status:k,value:n,element:l})}if(k==="selected"){j.afterSelected(m,n,l)}}},clearItemStatus:function(m,k,l){var j=this,n=j.get("itemStatusFields");l=l||j.findElement(m);if(k){j.setItemStatus(m,k,false,l)}else{d.each(n,function(p,o){j.setItemStatus(m,o,false,l)});if(!n["selected"]){j.setItemSelected(m,false)}j.setItemStatus(m,"hover",false)}}});e.View=c;return e});define("bui/list/keynav",function(){var a=function(){};a.ATTRS={highlightedStatus:{value:"hover"}};BUI.augment(a,{setHighlighted:function(f,d){if(this.hasStatus(f,"hover",d)){return}var b=this,g=b.get("highlightedStatus"),e=b._getHighLightedElement(),c=e?b.getItemByElement(e):null;if(c!==f){if(c){this.setItemStatus(c,g,false,e)}this.setItemStatus(f,g,true,d)}},_getHighLightedElement:function(){var b=this,d=b.get("highlightedStatus"),c=b.get("view").getFirstElementByStatus(d);
return c},getHighlighted:function(){var b=this,d=b.get("highlightedStatus"),c=b.get("view").getFirstElementByStatus(d);return b.getItemByElement(c)||null},getColumnCount:function(){var b=this,e=b.getFirstItem(),c=b.findElement(e),d=$(c);if(c){return parseInt(d.parent().width()/d.outerWidth(),10)}return 1},getRowCount:function(c){var b=this;c=c||b.getColumnCount();return(this.getCount()+c-1)/c},_getNextItem:function(d,h,g){var c=this,f=c._getCurrentIndex(),i=c.getCount(),e=d?1:-1,b;if(f===-1){return d?c.getFirstItem():c.getLastItem()}if(!d){h=h*e}b=(f+h+g)%g;if(b>i-1){if(d){b=b-(i-1)}else{b=b+h}}return c.getItemAt(b)},_getLeftItem:function(){var b=this,d=b.getCount(),c=b.getColumnCount();if(!d||c<=1){return null}return b._getNextItem(false,1,d)},_getCurrentItem:function(){return this.getHighlighted()},_getCurrentIndex:function(){var b=this,c=b._getCurrentItem();return this.indexOfItem(c)},_getRightItem:function(){var b=this,d=b.getCount(),c=b.getColumnCount();if(!d||c<=1){return null}return this._getNextItem(true,1,d)},_getDownItem:function(){var b=this,c=b.getColumnCount(),d=b.getRowCount(c);if(d<=1){return null}return this._getNextItem(true,c,c*d)},_getUpperItem:function(){var b=this,c=b.getColumnCount(),d=b.getRowCount(c);if(d<=1){return null}return this._getNextItem(false,c,c*d)},handleNavUp:function(d){var b=this,c=b._getUpperItem();b.setHighlighted(c)},handleNavDown:function(b){this.setHighlighted(this._getDownItem())},handleNavLeft:function(b){this.setHighlighted(this._getLeftItem())},handleNavRight:function(b){this.setHighlighted(this._getRightItem())},handleNavEnter:function(c){var b=this,d=b._getCurrentItem();if(d){b.setSelected(d)}},handleNavEsc:function(b){this.setHighlighted(null)},handleNavTab:function(b){this.setHighlighted(this._getRightItem())}});return a});define("bui/list/simplelist",["bui/common","bui/list/domlist","bui/list/keynav"],function(b){var f=b("bui/common"),e=f.Component.UIBase,c=b("bui/list/domlist"),h=b("bui/list/keynav"),d=f.prefix+"list-item";var a=f.Component.View.extend([c.View],{setElementHover:function(j,k){var i=this;i.setItemStatusCls("hover",j,k)}},{ATTRS:{itemContainer:{valueFn:function(){return this.get("el").find(this.get("listSelector"))}}}},{xclass:"simple-list-view"});var g=f.Component.Controller.extend([c,e.Bindable,h],{bindUI:function(){var i=this,k=i.get("itemCls"),j=i.get("view").getItemContainer();j.delegate("."+k,"mouseover",function(n){var l=n.currentTarget,m=i.getItemByElement(l);if(i.isItemDisabled(n.item,n.currentTarget)){return}if(i.get("highlightedStatus")==="hover"){i.setHighlighted(m,l)}else{i.setItemStatus(m,"hover",true,l)}}).delegate("."+k,"mouseout",function(m){var l=$(m.currentTarget);i.get("view").setElementHover(l,false)})},onAdd:function(k){var i=this,j=k.record;i.addItemToView(j,k.index)},onRemove:function(k){var i=this,j=k.record;i.removeItem(j)},onUpdate:function(i){this.updateItem(i.record)},onLocalSort:function(i){this.onLoad(i)},onLoad:function(){var i=this,k=i.get("store"),j=k.getResult();i.set("items",j)}},{ATTRS:{items:{view:true,value:[]},itemCls:{view:true,value:d},idField:{value:"value"},listSelector:{view:true,value:"ul"},itemTpl:{view:true,value:'<li role="option" class="'+d+'">{text}</li>'},tpl:{value:"<ul></ul>"},xview:{value:a}}},{xclass:"simple-list",prority:0});g.View=a;return g});define("bui/list/listbox",["bui/list/simplelist"],function(b){var c=b("bui/list/simplelist");var a=c.extend({bindUI:function(){var d=this;d.on("selectedchange",function(i){var g=i.item,f=$(i.domTarget),h=f.find("input");if(g){h.attr("checked",i.selected)}})}},{ATTRS:{itemTpl:{value:'<li><span class="checkbox"><input type="checkbox" />{text}</span></li>'},multipleSelect:{value:true}}},{xclass:"listbox"});return a});define("bui/list/listitem",function(e){var a=BUI.Component,d=a.UIBase;var b=a.View.extend([d.ListItemView],{});var c=a.Controller.extend([d.ListItem],{},{ATTRS:{elTagName:{view:true,value:"li"},xview:{value:b},tpl:{view:true,value:"<span>{text}</span>"}}},{xclass:"list-item"});c.View=b;return c});define("bui/list/list",function(b){var a=BUI.Component,d=a.UIBase;var c=a.Controller.extend([d.ChildList],{},{ATTRS:{elTagName:{view:true,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"list-item"}}},{xclass:"list"});return c});define("bui/picker",["bui/common","bui/picker/picker","bui/picker/listpicker"],function(b){var c=b("bui/common"),a=c.namespace("Picker");c.mix(a,{Picker:b("bui/picker/picker"),ListPicker:b("bui/picker/listpicker")});return a});define("bui/picker/picker",["bui/overlay"],function(c){var a=c("bui/overlay").Overlay;var b=a.extend({bindUI:function(){var e=this,d=e.get("innerControl"),g=e.get("hideEvent"),f=$(e.get("trigger"));f.on(e.get("triggerEvent"),function(i){if(e.get("autoSetValue")){var h=e.get("valueField")||e.get("textField")||this,j=$(h).val();e.setSelectedValue(j)}});d.on(e.get("changeEvent"),function(m){var n=e.get("curTrigger"),j=e.get("textField")||n,p=e.get("valueField"),o=e.getSelectedValue(),l=false;
if(j){var h=e.getSelectedText(),i=$(j).val();if(h!=i){$(j).val(h);l=true}}if(p){var k=$(p).val();if(p!=k){$(p).val(o);l=true}}if(l){e.onChange(h,o,m)}});if(g){d.on(e.get("hideEvent"),function(){var h=e.get("curTrigger");try{if(h){h.focus()}}catch(i){BUI.log(i)}e.hide()})}},setSelectedValue:function(d){},getSelectedValue:function(){},getSelectedText:function(){},onChange:function(h,g,f){var d=this,e=d.get("curTrigger");d.fire("selectedchange",{value:g,text:h,curTrigger:e})},_uiSetValueField:function(e){var d=this;if(e){d.setSelectedValue($(e).val())}},_getTextField:function(){var d=this;return d.get("textField")||d.get("curTrigger")}},{ATTRS:{innerControl:{getter:function(){return this.get("children")[0]}},triggerEvent:{value:"click"},autoSetValue:{value:true},changeEvent:{value:"selectedchange"},autoHide:{value:true},hideEvent:{value:"itemclick"},textField:{},align:{value:{points:["bl","tl"],offset:[0,0]}},valueField:{}}},{xclass:"picker"});return b});define("bui/picker/listpicker",["bui/picker/picker","bui/list"],function(b){var c=b("bui/list"),a=b("bui/picker/picker"),d=a.extend({initializer:function(){var e=this,f=e.get("children"),g=e.get("list");if(!g){f.push({})}},setSelectedValue:function(h){h=h?h.toString():"";var e=this,g=e.get("list"),f=e.getSelectedValue();if(h!==f&&g.getCount()){if(g.get("multipleSelect")){g.clearSelection()}g.setSelectionByField(h.split(","))}},onChange:function(i,h,g){var e=this,f=e.get("curTrigger");e.fire("selectedchange",{value:h,text:i,curTrigger:f,item:g.item})},getSelectedValue:function(){return this.get("list").getSelectionValues().join(",")},getSelectedText:function(){return this.get("list").getSelectionText().join(",")}},{ATTRS:{defaultChildClass:{value:"simple-list"},list:{getter:function(){return this.get("children")[0]}}}},{xclass:"list-picker"});return d});(function(){var a="bui/form/";define("bui/form",["bui/common",a+"fieldcontainer",a+"form",a+"row",a+"fieldgroup",a+"horizontal",a+"rules",a+"field",a+"fieldgroup"],function(c){var e=c("bui/common"),b=e.namespace("Form"),d=c(a+"tips");e.mix(b,{Tips:d,TipItem:d.Item,FieldContainer:c(a+"fieldcontainer"),Form:c(a+"form"),Row:c(a+"row"),Group:c(a+"fieldgroup"),HForm:c(a+"horizontal"),Rules:c(a+"rules"),Field:c(a+"field"),FieldGroup:c(a+"fieldgroup")});return b})})();define("bui/form/tips",["bui/common","bui/overlay"],function(b){var f=b("bui/common"),d=f.prefix,a=b("bui/overlay").Overlay,c="data-tip",h=d+"form-tip-container";var g=a.extend({initializer:function(){var i=this,k=i.get("render");if(!k){var j=$(i.get("trigger")).parent();i.set("render",j)}},renderUI:function(){var i=this;i.resetVisible()},resetVisible:function(){var i=this,j=$(i.get("trigger"));if(j.val()){i.set("visible",false)}else{i.set("align",{node:$(i.get("trigger")),points:["cl","cl"]});i.set("visible",true)}},bindUI:function(){var i=this,j=$(i.get("trigger"));i.get("el").on("click",function(){i.hide();j.focus()});j.on("click focus",function(){i.hide()});j.on("blur",function(){i.resetVisible()})}},{ATTRS:{trigger:{},text:{},iconCls:{},tpl:{value:'<span class="{iconCls}"></span><span class="tip-text">{text}</span>'}}},{xclass:"form-tip"});var e=function(i){if(this.constructor!==e){return new e(i)}e.superclass.constructor.call(this,i);this._init()};e.ATTRS={form:{},items:{value:[]}};f.extend(e,f.Base);f.augment(e,{_init:function(){var i=this,j=$(i.get("form"));if(j.length){f.each($.makeArray(j[0].elements),function(l){var k=$(l).attr(c);if(k){i._initFormElement(l,$.parseJSON(k))}});j.addClass(h)}},_initFormElement:function(l,k){if(k){k.trigger=l}var i=this,j=i.get("items"),m=new g(k);j.push(m)},getItem:function(l){var j=this,k=j.get("items"),i=null;f.each(k,function(m){if($(m.get("trigger")).attr("name")===l){i=m;return false}});return i},resetVisible:function(){var i=this,j=i.get("items");f.each(j,function(k){k.resetVisible()})},render:function(){var i=this,j=i.get("items");f.each(j,function(k){k.render()})},destroy:function(){var i=this,j=i.get(j);f.each(j,function(k){k.destroy()})}});e.Item=g;return e});define("bui/form/basefield",["bui/common","bui/form/tips","bui/form/valid","bui/form/remote"],function(a){var e=a("bui/common"),i=e.Component,c=a("bui/form/tips").Item,h=a("bui/form/valid"),b=a("bui/form/remote"),j=e.prefix+"form-field-error",g="data-error";var d=i.View.extend([b.View,h.View],{renderUI:function(){var k=this,n=k.get("control");if(!n){var m=k.get("controlTpl"),l=k.getControlContainer();if(m){var n=$(m).appendTo(l);k.set("control",n)}}else{k.set("controlContainer",n.parent())}},clearErrors:function(){var k=this,l=k.get("msgEl");if(l){l.remove();k.set("msgEl",null)}k.get("el").removeClass(j)},showError:function(p,l){var k=this,o=k.get("control"),n=e.substitute(l,{error:p}),m=$(n);m.appendTo(o.parent());k.set("msgEl",m);k.get("el").addClass(j)},getControlContainer:function(){var k=this,m=k.get("el"),l=k.get("controlContainer");if(l){if(e.isString(l)){return m.find(l)}return l}return m},getLoadingContainer:function(){return this.getControlContainer()
},_uiSetName:function(l){var k=this;k.get("control").attr("name",l)}},{ATTRS:{error:{},controlContainer:{},msgEl:{},control:{}}});var f=i.Controller.extend([b,h],{initializer:function(){var k=this;k.on("afterRenderUI",function(){var l=k.get("tip");if(l){l.trigger=k.getTipTigger();l.autoRender=true;l=new c(l);k.set("tip",l)}})},bindUI:function(){var l=this,m=l.get("validEvent"),n=l.get("changeEvent"),k=l.getInnerControl();if(k.is("select")){m="change"}k.on(m,function(){var o=l.getControlValue(k);l.validControl(o)});k.on("focus",function(){if(!l.get("hasValid")){var o=l.getControlValue(k);l.validControl(o)}});l.on(n,function(){l.onValid()});l.on("remotecomplete",function(o){l._setError(o.error)})},onValid:function(){var k=this,l=k.getControlValue();l=k.parseValue(l);if(!k.isCurrentValue(l)){k.setInternal("value",l);k.onChange()}},onChange:function(){this.fire("change")},isCurrentValue:function(k){return k==this.get("value")},_clearError:function(){this.set("error",null);this.get("view").clearErrors()},_setError:function(k){this.set("error",k);this.showErrors()},getControlValue:function(l){var k=this;l=l||k.getInnerControl();return l.val()},getControlContainer:function(){return this.get("view").getControlContainer()},getRemoteParams:function(){var k=this,l={};l[k.get("name")]=k.get("value");return l},setControlValue:function(m){var l=this,k=l.getInnerControl();k.val(m)},parseValue:function(k){return k},valid:function(){var k=this;k.validControl()},validControl:function(m){var k=this,l;m=m||k.getControlValue(),preError=k.get("error");l=k.getValidError(m);k.setInternal("hasValid",true);if(l){k._setError(l);k.fire("error",{msg:l,value:m});if(preError!==l){k.fire("validchange",{valid:false})}}else{k._clearError();k.fire("valid");if(preError){k.fire("validchange",{valid:true})}}return !l},focus:function(){this.getInnerControl().focus()},change:function(){var k=this.getInnerControl();k.change()},blur:function(){this.getInnerControl().blur()},isValid:function(){var k=this;if(!k.get("hasValid")){k.validControl()}return !k.get("error")},getError:function(){return this.get("error")},getErrors:function(){var k=this.getError();if(k){return[k]}return[]},clearErrors:function(){var k=this;k._clearError();if(k.getControlValue()!=k.get("value")){k.setControlValue(k.get("value"))}},getInnerControl:function(){return this.get("view").get("control")},getTipTigger:function(){return this.getInnerControl()},destructor:function(){var k=this,l=k.get("tip");if(l&&l.destroy){l.destroy()}},setInnerWidth:function(m){var l=this,k=l.getInnerControl(),n=k.outerWidth()-k.width();k.width(m-n)},_resetTip:function(){var k=this,l=k.get("tip");if(l){l.resetVisible()}},resetTip:function(){this._resetTip()},_uiSetValue:function(l){var k=this;k.setControlValue(l);if(k.get("rendered")){k.validControl();k.onChange()}k._resetTip()},_uiSetDisabled:function(m){var l=this,k=l.getInnerControl();k.attr("disabled",m);if(l.get("rendered")){if(m){l.clearErrors()}if(!m){l.valid()}}},_uiSetWidth:function(l){var k=this;if(l!=null&&k.get("forceFit")){k.setInnerWidth(l)}}},{ATTRS:{hasValid:{value:false},forceFit:{value:false},tip:{},changeEvent:{value:"valid"},validEvent:{value:"keyup change"},name:{view:true},showError:{view:true,value:true},value:{view:true},label:{},controlContainer:{view:true},control:{view:true},controlTpl:{view:true,value:'<input type="text"/>'},events:{value:{error:false,valid:false,change:true,validchange:true}},tpl:{value:"<label>{label}</label>"},xview:{value:d}},PARSER:{control:function(k){var l=k.find("input,select,textarea");if(l.length){return l}return k},disabled:function(k){return !!k.attr("disabled")},value:function(m){var l=this,k="select,input,textarea",n=l.get("value");if(!n){if(m.is(k)){n=m.val()}else{n=m.find(k).val()}}return n},name:function(n){var l=this,k="select,input,textarea",m=l.get("name");if(!m){if(n.is(k)){m=n.attr("name")}else{m=n.find(k).attr("name")}}return m}}},{xclass:"form-field"});f.View=d;return f});define("bui/form/textfield",["bui/form/basefield"],function(c){var b=c("bui/form/basefield");var a=b.extend({},{xclass:"form-field-text"});return a});define("bui/form/numberfield",["bui/form/basefield"],function(b){var a=b("bui/form/basefield"),c=a.extend({parseValue:function(f){if(f==""||f==null){return null}if(BUI.isNumber(f)){return f}var d=this,e=d.get("allowDecimals");f=f.replace(/\,/g,"");if(!e){return parseInt(f)}return parseFloat(parseFloat(f).toFixed(d.get("decimalPrecision")))},_uiSetMax:function(d){this.addRule("max",d)},_uiSetMin:function(d){this.addRule("min",d)}},{ATTRS:{max:{},min:{},decorateCfgFields:{value:{min:true,max:true}},validEvent:{value:"keyup change"},defaultRules:{value:{number:true}},allowDecimals:{value:true},decimalPrecision:{value:2},step:{value:1}}},{xclass:"form-field-number"});return c});define("bui/form/hiddenfield",["bui/form/basefield"],function(c){var b=c("bui/form/basefield");var a=b.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},tpl:{value:""}}},{xclass:"form-field-hidden"});
return a});define("bui/form/readonlyfield",["bui/form/basefield"],function(b){var a=b("bui/form/basefield");var c=a.extend({},{ATTRS:{controlTpl:{value:'<input type="text" readonly="readonly"/>'}}},{xclass:"form-field-readonly"});return c});define("bui/form/selectfield",["bui/common","bui/form/basefield"],function(b){var f=b("bui/common"),a=b("bui/form/basefield");function e(h,j,i){h.children().remove();var g=i.get("emptyText");if(g){c("",g,h)}f.each(j,function(k){c(k.value,k.text,h)})}function c(h,j,g){var i='<option value="'+h+'">'+j+"</option>";$(i).appendTo(g)}var d=a.extend({renderUI:function(){var i=this,h=i.getInnerControl(),g=i.get("select");if(i.get("srcNode")&&h.is("select")){return}if($.isPlainObject(g)){i._initSelect(g)}},_initSelect:function(h){var g=this,i=g.get("items");f.use("bui/select",function(j){h.render=g.getControlContainer();h.valueField=g.getInnerControl();h.autoRender=true;h=new j.Select(h);g.set("select",h);g.set("isCreate",true);g.get("children").push(h);h.on("change",function(k){var l=h.getSelectedValue();g.set("value",l)})})},setItems:function(i){var h=this,g=h.get("select");if($.isPlainObject(i)){var j=[];f.each(i,function(l,m){j.push({value:m,text:l})});i=j}var k=h.getInnerControl();if(k.is("select")){e(k,i,h);h.setControlValue(h.get("value"));if(!h.getControlValue()){h.setInternal("value","")}}if(g){if(g.set){g.set("items",i)}else{g.items=i}}},setControlValue:function(j){var i=this,h=i.get("select"),g=i.getInnerControl();g.val(j);if(h&&h.set&&h.getSelectedValue()!==j){h.setSelectedValue(j)}},getTipTigger:function(){var h=this,g=h.get("select");if(g&&g.rendered){return g.get("el").find("input")}return h.get("el")},_uiSetItems:function(g){if(g){this.setItems(g)}},setInnerWidth:function(j){var i=this,h=i.getInnerControl(),g=i.get("select"),k=h.outerWidth()-h.width();h.width(j-k);if(g&&g.set){g.set("width",j)}}},{ATTRS:{items:{},controlTpl:{value:'<input type="hidden"/>'},showBlank:{value:true},emptyText:{value:"\u8bf7\u9009\u62e9"},select:{value:{}}},PARSER:{emptyText:function(h){if(!this.get("showBlank")){return""}var g=h.find("option"),i=this.get("emptyText");if(g.length){i=$(g[0]).text()}return i}}},{xclass:"form-field-select"});return d});define("bui/form/datefield",["bui/common","bui/form/basefield","bui/calendar"],function(d){var f=d("bui/common"),c=d("bui/form/basefield"),a=f.Date,b=d("bui/calendar").DatePicker;var e=c.extend({renderUI:function(){var g=this,h=g.get("datePicker");if($.isPlainObject(h)){h.trigger=g.getInnerControl();h.autoRender=true;h=new b(h);g.set("datePicker",h);g.set("isCreatePicker",true);g.get("children").push(h)}if(h.get("showTime")){g.getInnerControl().addClass("calendar-time")}},bindUI:function(){var g=this,h=g.get("datePicker");h.on("selectedchange",function(j){var i=j.curTrigger;if(i[0]==g.getInnerControl()[0]){g.set("value",j.value)}})},setControlValue:function(i){var h=this,g=h.getInnerControl();if(f.isDate(i)){i=a.format(i,h._getFormatMask())}g.val(i)},_getFormatMask:function(){var g=this,h=g.get("datePicker");if(h.get("showTime")){return"yyyy-mm-dd HH:MM:ss"}return"yyyy-mm-dd"},parseValue:function(g){if(f.isNumber(g)){return new Date(g)}return a.parse(g)},isCurrentValue:function(g){return a.isEquals(g,this.get("value"))},_uiSetMax:function(h){this.addRule("max",h);var g=this,i=g.get("datePicker");if(i&&i.set){i.set("maxDate",h)}},_uiSetMin:function(h){this.addRule("min",h);var g=this,i=g.get("datePicker");if(i&&i.set){i.set("minDate",h)}}},{ATTRS:{controlTpl:{value:'<input type="text" class="calendar"/>'},defaultRules:{value:{date:true}},max:{},min:{},value:{setter:function(g){if(f.isNumber(g)){return new Date(g)}return g}},datePicker:{value:{}},isCreatePicker:{value:true}},PARSER:{datePicker:function(g){if(g.hasClass("calendar-time")){return{showTime:true}}return{}}}},{xclass:"form-field-date"});return e});define("bui/form/checkfield",["bui/form/basefield"],function(b){var a=b("bui/form/basefield");var c=a.extend({onValid:function(){var d=this,e=d._getControlChecked();d.setInternal("checked",e);d.fire("change");if(e){d.fire("checked")}else{d.fire("unchecked")}},_setControlChecked:function(f){var e=this,d=e.getInnerControl();d.attr("checked",!!f)},_getControlChecked:function(){var e=this,d=e.getInnerControl();return !!d.attr("checked")},_uiSetValue:function(d){},_uiSetChecked:function(e){var d=this;d._setControlChecked(e);if(d.get("rendered")){d.onValid()}}},{ATTRS:{validEvent:{value:"click"},checked:{value:false},events:{value:{"checked":false,"unchecked":false}}},PARSER:{checked:function(d){return !!d.attr("checked")}}},{xclass:"form-check-field"});return c});define("bui/form/checkboxfield",["bui/form/checkfield"],function(c){var b=c("bui/form/checkfield");var a=b.extend({},{ATTRS:{controlTpl:{view:true,value:'<input type="checkbox"/>'},controlContainer:{value:".checkbox"},tpl:{value:'<label><span class="checkbox"></span>{label}</label>'}}},{xclass:"form-field-checkbox"});return a});define("bui/form/radiofield",["bui/form/checkfield"],function(b){var a=b("bui/form/checkfield");
var c=a.extend({bindUI:function(){var d=this,f=d.get("parent"),e=d.get("name");if(f){d.getInnerControl().on("click",function(h){var g=f.getFields(e);BUI.each(g,function(i){if(i!=d){i.set("checked",false)}})})}}},{ATTRS:{controlTpl:{view:true,value:'<input type="radio"/>'},controlContainer:{value:".radio"},tpl:{value:'<label><span class="radio"></span>{label}</label>'}}},{xclass:"form-field-radio"});return c});define("bui/form/plainfield",["bui/form/basefield"],function(b){var a=b("bui/form/basefield");var d=a.View.extend({_uiSetValue:function(k){var i=this,m=i.get("textEl"),e=i.getControlContainer(),h=i.get("renderer"),l=h?h(k):k,f=i.get("width"),g=0,j;if(m){m.remove()}l=l||"&nbsp;";j=BUI.substitute(i.get("textTpl"),{text:l});m=$(j).appendTo(e);g=m.outerWidth()-m.width();m.width(f-g);i.set("textEl",m)}},{ATTRS:{textEl:{},value:{}}},{xclass:"form-field-plain-view"});var c=a.extend({},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},textTpl:{view:true,value:'<span class="x-form-text">{text}</span>'},renderer:{view:true,value:function(e){return e}},tpl:{value:""},xview:{value:d}}},{xclass:"form-field-plain"});return c});define("bui/form/listfield",["bui/common","bui/form/basefield","bui/list"],function(b){var d=b("bui/common"),c=b("bui/list"),a=b("bui/form/basefield");var c=a.extend({initializer:function(){var e=this;e._initList()},_getList:function(){var e=this,f=e.get("children");return f[0]},bindUI:function(){var e=this,f=e._getList();if(f){f.on("selectedchange",function(){var g=e._getListValue(f);e.set("value",g)})}},_getListValue:function(f){var e=this;f=f||e._getList();return f.getSelectionValues().join(",")},setControlValue:function(h){var f=this,e=f.getInnerControl(),g=f._getList();e.val(h);if(f._getListValue(g)!==h&&g.getCount()){if(g.get("multipleSelect")){g.clearSelection()}g.setSelectionByField(h.split(","))}},syncUI:function(){this.set("list",this._getList())},_initList:function(){var e=this,f=e.get("children"),g=e.get("list")||{};if(f[0]){return}if($.isPlainObject(g)){g.xclass=g.xclass||"simple-list"}f.push(g)},setItems:function(f){var e=this,h=e.get("value"),g=e._getList();g.set("items",f);g.setSelectionByField(h.split(","))},_uiSetItems:function(e){if(e){this.setItems(e)}}},{ATTRS:{controlTpl:{value:'<input type="hidden"/>'},items:{setter:function(e){if($.isPlainObject(e)){var f=[];d.each(e,function(h,g){f.push({value:g,text:h})});e=f}return e}},list:{}}},{xclass:"form-field-list"});return c});(function(){var a="bui/form/";define(a+"field",["bui/common",a+"textfield",a+"datefield",a+"selectfield",a+"hiddenfield",a+"numberfield",a+"checkfield",a+"radiofield",a+"checkboxfield",a+"plainfield"],function(c){var d=c("bui/common"),b=c(a+"basefield");d.mix(b,{Text:c(a+"textfield"),Date:c(a+"datefield"),Select:c(a+"selectfield"),Hidden:c(a+"hiddenfield"),Number:c(a+"numberfield"),Check:c(a+"checkfield"),Radio:c(a+"radiofield"),Checkbox:c(a+"checkboxfield"),Plain:c(a+"plainfield"),List:c(a+"listfield")});return b})})();define("bui/form/valid",["bui/common","bui/form/rules"],function(c){var e=c("bui/common"),d=c("bui/form/rules");var b=function(){};b.prototype={getErrorsContainer:function(){var f=this,g=f.get("errorContainer");if(g){if(e.isString(g)){return f.get("el").find(g)}return g}return f.getContentElement()},showErrors:function(i){var g=this,h=g.getErrorsContainer(),f=g.get("errorTpl");g.clearErrors();if(!g.get("showError")){return}if(g.get("showOneError")){if(i&&i.length){g.showError(i[0],f,h)}return}e.each(i,function(j){if(j){g.showError(j,f,h)}})},showError:function(h,f,g){},clearErrors:function(){}};var a=function(){};a.ATTRS={defaultRules:{value:{}},defaultMessages:{value:{}},rules:{value:{}},messages:{value:{}},validator:{},errorContainer:{view:true},errorTpl:{view:true,value:'<span class="x-field-error"><span class="x-icon x-icon-mini x-icon-error">!</span><label class="x-field-error-text">{error}</label></span>'},showError:{view:true,value:true},showOneError:{},error:{}};a.prototype={isValid:function(){},valid:function(){},validControl:function(){},validRules:function(l,k){var f=this,j=f._getValidMessages(),h=null;for(var g in l){if(l.hasOwnProperty(g)){var i=l[g];h=d.valid(g,k,i,j[g],f);if(h){break}}}return h},_getValidMessages:function(){var f=this,h=f.get("defaultMessages"),g=f.get("messages");return e.merge(h,g)},getValidError:function(i){var f=this,h=f.get("validator"),g=null;g=f.validRules(f.get("defaultRules"),i)||f.validRules(f.get("rules"),i);if(!g){if(f.parseValue){i=f.parseValue(i)}g=h?h.call(this,i):""}return g},getErrors:function(){},showErrors:function(g){var f=this,g=g||f.getErrors();f.get("view").showErrors(g)},clearErrors:function(){var f=this,g=f.get("children");e.each(g,function(h){h.clearErrors&&h.clearErrors()});f.set("error",null);f.get("view").clearErrors()},addRule:function(g,j,i){var f=this,k=f.get("rules"),h=f.get("messages");k[g]=j;if(i){h[g]=i}},addRules:function(h,g){var f=this;e.each(h,function(j,i){var k=g?g[i]:null;f.addRule(i,j,k)})},removeRule:function(g){var f=this,h=f.get("rules");
delete h[g]},clearRules:function(){var f=this;f.set("rules",{})}};a.View=b;return a});define("bui/form/groupvalid",["bui/form/valid"],function(d){var c="x-form-error",b=d("bui/form/valid");function a(){}BUI.augment(a,b.View,{showError:function(j,f,g){var i=BUI.substitute(f,{error:j}),h=$(i);h.appendTo(g);h.addClass(c)},clearErrors:function(){var f=this,g=f.getErrorsContainer();g.children("."+c).remove()}});function e(){}e.ATTRS=ATTRS=BUI.merge(true,b.ATTRS,{events:{value:{validchange:true,change:true}}});BUI.augment(e,b,{__bindUI:function(){var f=this,g="validchange change";f.on(g,function(j){var h=j.target;if(h!=this&&f.get("showError")){var i=f.isChildrenValid();if(i){f.validControl(f.getRecord());i=f.isSelfValid()}if(!i){f.showErrors()}else{f.clearErrors()}}})},isValid:function(){var f=this,g=f.isChildrenValid();return g&&f.isSelfValid()},valid:function(){var f=this,g=f.get("children");BUI.each(g,function(h){h.valid()})},isChildrenValid:function(){var f=this,g=f.get("children"),h=true;BUI.each(g,function(i){if(!i.isValid()){h=false;return false}});return h},isSelfValid:function(){return !this.get("error")},validControl:function(g){var f=this,h=f.getValidError(g);f.set("error",h)},getErrors:function(){var f=this,g=f.get("children"),j=f.get("showChildError"),i=null,h=[];if(j){BUI.each(g,function(k){if(k.getErrors){h=h.concat(k.getErrors())}})}if(f.isChildrenValid()){i=f.get("error");if(i){h.push(i)}}return h},_uiSetErrorTpl:function(g){var f=this,h=f.get("children");BUI.each(h,function(i){i.set("errorTpl",g)})}});e.View=a;return e});define("bui/form/fieldcontainer",["bui/common","bui/form/field","bui/form/groupvalid"],function(c){var g=c("bui/common"),f=c("bui/form/field"),b=c("bui/form/groupvalid"),e=g.prefix;var d="form-field",l=e+d,m=e+"form-group",h="input,select,textarea";function j(n){return n.is(h)}function i(p,q){if(p!=q){if(j(p)){return[p]}var n=p.attr("class");if(n&&(n.indexOf(m)!==-1||n.indexOf(l)!==-1)){return[p]}}var r=[],o=p.children();g.each(o,function(s){r=r.concat(i($(s),q))});return r}var k=g.Component.View.extend([b.View]);var a=g.Component.Controller.extend([b],{syncUI:function(){var o=this,n=o.getFields(),p=o.get("validators");g.each(n,function(r){var q=r.get("name");if(p[q]){r.set("validator",p[q])}});g.each(p,function(r,q){if(q.indexOf("#")==0){var t=q.replace("#",""),s=o.getChild(t,true);if(s){s.set("validator",r)}}})},getDecorateElments:function(){var n=this,p=n.get("el");var o=i(p,p);return o},findXClassByNode:function(n,o){if(n.attr("type")==="checkbox"){return d+"-checkbox"}if(n.attr("type")==="radio"){return d+"-radio"}if(n.attr("type")==="number"){return d+"-number"}if(n.hasClass("calendar")){return d+"-date"}if(n[0].tagName=="SELECT"){return d+"-select"}if(j(n)){return d}return g.Component.Controller.prototype.findXClassByNode.call(this,n,o)},getRecord:function(){var o=this,p={},n=o.getFields();g.each(n,function(t){var r=t.get("name"),s=o._getFieldValue(t);if(!p[r]){p[r]=s}else{if(g.isArray(p[r])&&s!=null){p[r].push(s)}else{if(s!=null){var q=[p[r]];q.push(s);p[r]=q}}}});return p},getFields:function(o){var n=this,q=[],p=n.get("children");g.each(p,function(r){if(r instanceof f){if(!o||r.get("name")==o){q.push(r)}}else{if(r.getFields){q=q.concat(r.getFields(o))}}});return q},getField:function(p){var o=this,n=o.getFields(),q=null;g.each(n,function(r){if(r.get("name")===p){q=r;return false}});return q},getFieldAt:function(n){return this.getFields()[n]},setFieldValue:function(p,q){var o=this,n=o.getFields(p);g.each(n,function(r){o._setFieldValue(r,q)})},_setFieldValue:function(p,o){if(p.get("disabled")){return}if(p instanceof f.Check){var n=p.get("value");if(o&&(n===o||(g.isArray(o)&&g.Array.contains(n,o)))){p.set("checked",true)}else{p.set("checked",false)}}else{if(o==null){o=""}p.set("value",o)}},getFieldValue:function(p){var o=this,n=o.getFields(p),q=[];g.each(n,function(s){var r=o._getFieldValue(s);if(r){q.push(r)}});if(q.length===0){return null}if(q.length===1){return q[0]}return q},_getFieldValue:function(n){if(!(n instanceof f.Check)||n.get("checked")){return n.get("value")}return null},clearFields:function(){this.clearErrors();this.setRecord({})},setRecord:function(p){var o=this,n=o.getFields();g.each(n,function(r){var q=r.get("name");o._setFieldValue(r,p[q])})},updateRecord:function(p){var o=this,n=o.getFields();g.each(n,function(r){var q=r.get("name");if(p.hasOwnProperty(q)){o._setFieldValue(r,p[q])}})},focus:function(){var o=this,n=o.getFields(),p=n[0];if(p){p.focus()}},_uiSetDisabled:function(o){var n=this,p=n.get("children");g.each(p,function(q){q.set("disabled",o)})}},{ATTRS:{record:{setter:function(n){this.setRecord(n)},getter:function(){return this.getRecord()}},validators:{value:{}},defaultLoaderCfg:{value:{property:"children",dataType:"json"}},disabled:{sync:false},isDecorateChild:{value:true},xview:{value:k}}},{xclass:"form-field-container"});a.View=k;return a});define("bui/form/group/base",["bui/common","bui/form/fieldcontainer"],function(c){var d=c("bui/common"),b=c("bui/form/fieldcontainer");
var a=b.extend({},{ATTRS:{label:{view:true},defaultChildClass:{value:"form-field"}}},{xclass:"form-group"});return a});define("bui/form/group/range",["bui/form/group/base"],function(c){var b=c("bui/form/group/base");function a(e,f,h){var g=e.get("allowEqual");if(g){return h<=f}return h<f}var d=b.extend({},{ATTRS:{rangeText:{value:"\u5f00\u59cb\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\uff01"},allowEqual:{value:true},validator:{value:function(j){var l=this,k=l.getFields(),e=true;for(var h=1;h<k.length;h++){var n=k[h],f=k[h-1],m,g;if(n&&f){m=n.get("value");g=f.get("value");if(!a(l,m,g)){e=false;break}}}if(!e){return l.get("rangeText")}return null}}}},{xclass:"form-group-range"});return d});define("bui/form/group/check",["bui/form/group/base"],function(b){var a=b("bui/form/group/base");function d(e){var f=e.getFieldAt(0);if(f){return f.get("name")}return""}var c=a.extend({bindUI:function(){var e=this;e.on("change",function(j){var i=d(e),h=e.get("range"),g=e.getRecord(),k=g[i],f=h[1];if(k&&k.length>=f){e._setFieldsEnable(i,false)}else{e._setFieldsEnable(i,true)}})},_setFieldsEnable:function(h,g){var f=this,e=f.getFields(h);BUI.each(e,function(i){if(g){i.enable()}else{if(!i.get("checked")){i.disable()}}})},_uiSetRange:function(e){this.addRule("checkRange",e)}},{ATTRS:{range:{setter:function(e){if(BUI.isString(e)||BUI.isNumber(e)){e=[parseInt(e)]}return e}}}},{xclass:"form-group-check"});return c});define("bui/form/group/select",["bui/form/group/base","bui/data"],function(b){var a=b("bui/form/group/base"),c=b("bui/data"),f=BUI.Component.UIBase.Bindable;function e(i){var h=[];BUI.each(i,function(j){h.push({text:j.text,value:j.id})});return h}var g=a.extend([f],{initializer:function(){var h=this,j=h.get("url"),i=h.get("store")||h._getStore();if(!i.isStore){i.autoLoad=true;if(j){i.url=j}i=new c.TreeStore(i);h.set("store",i)}},bindUI:function(){var h=this;h.on("change",function(i){var l=i.target;if(l!=h){var k=l,j=k.get("value"),m=h._getFieldIndex(k)+1;h._valueChange(j,m)}})},onLoad:function(j){var h=this,i=j?j.node:h.get("store").get("root");h._setFieldItems(i.level,i.children)},_getStore:function(){var h=this,i=h.get("type");if(i&&d[i]){return d[i]}return{}},_valueChange:function(k,l){var h=this,i=h.get("store");if(k){var j=i.findNode(k);if(!j){return}if(i.isLoaded(j)){h._setFieldItems(l,j.children)}else{i.loadNode(j)}}else{h._setFieldItems(l,[])}},_setFieldItems:function(l,j){var h=this,k=h.getFieldAt(l),i=e(j);if(k){k.setItems(i);h._valueChange(k.get("value"),l+1)}},_getFieldIndex:function(j){var i=this,h=i.getFields();return BUI.Array.indexOf(j,h)}},{ATTRS:{type:{},store:{}}},{xclass:"form-group-select"});var d={};g.addType=function(i,h){d[i]=h};g.addType("city",{proxy:{url:"http://lp.taobao.com/go/rgn/citydistrictdata.php",dataType:"jsonp"},map:{isleaf:"leaf",value:"text"}});return g});define("bui/form/fieldgroup",["bui/common","bui/form/group/base","bui/form/group/range","bui/form/group/check","bui/form/group/select"],function(b){var c=b("bui/common"),a=b("bui/form/group/base");c.mix(a,{Range:b("bui/form/group/range"),Check:b("bui/form/group/check"),Select:b("bui/form/group/select")});return a});define("bui/form/form",["bui/common","bui/toolbar","bui/form/fieldcontainer"],function(f){var g=f("bui/common"),a=f("bui/toolbar").Bar,e=f("bui/form/fieldcontainer"),d=g.Component;var c=e.View.extend({_uiSetMethod:function(h){this.get("el").attr("method",h)},_uiSetAction:function(h){this.get("el").attr("action",h)}},{ATTRS:{method:{},action:{}}},{xclass:"form-view"});var b=e.extend({renderUI:function(){var h=this,j=h.get("buttonBar"),i;if($.isPlainObject(j)&&h.get("buttons")){i=g.merge(h.getDefaultButtonBarCfg(),j);j=new a(i);h.set("buttonBar",j)}},bindUI:function(){var h=this,i=h.get("el");i.on("submit",function(j){h.valid();if(!h.isValid()||h.onBeforeSubmit()===false){j.preventDefault()}})},getDefaultButtonBarCfg:function(){var h=this,i=h.get("buttons");return{autoRender:true,elCls:"toolbar",render:h.get("el"),items:i,defaultChildClass:"bar-item-button"}},submit:function(i){var h=this;h.valid();if(h.isValid()){if(h.onBeforeSubmit()==false){return}if(!i){h.get("el")[0].submit()}}},serializeToObject:function(){return g.FormHelper.serializeToObject(this.get("el")[0])},onBeforeSubmit:function(){return this.fire("beforesubmit")},reset:function(){var h=this,i=h.get("initRecord");h.setRecord(i)},resetTips:function(){var i=this,h=i.getFields();g.each(h,function(j){j.resetTip()})},destructor:function(){var h=this,i=h.get("buttonBar");if(i&&i.destroy){i.destroy()}},_uiSetInitRecord:function(h){this.setRecord(h)}},{ATTRS:{action:{view:true,value:""},allowTextSelection:{value:true},events:{value:{beforesubmit:false}},method:{view:true,value:"get"},decorateCfgFields:{value:{"method":true,"action":true}},defaultChildClass:{value:"form-field"},elTagName:{value:"form"},buttons:{},buttonBar:{value:{}},childContainer:{value:".x-form-fields"},initRecord:{},showError:{value:false},xview:{value:c},tpl:{value:'<div class="x-form-fields"></div>'}}},{xclass:"form"});
b.View=c;return b});define("bui/form/horizontal",["bui/common","bui/form/form"],function(b){var d=b("bui/common"),a=b("bui/form/form");var c=a.extend({getDefaultButtonBarCfg:function(){var e=this,f=e.get("buttons");return{autoRender:true,elCls:"actions-bar toolbar row",tpl:'<div class="form-actions span21 offset3"></div>',childContainer:".form-actions",render:e.get("el"),items:f,defaultChildClass:"bar-item-button"}}},{ATTRS:{defaultChildClass:{value:"form-row"},errorTpl:{value:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'},elCls:{value:"form-horizontal"}},PARSER:{}},{xclass:"form-horizontal"});return c});define("bui/form/row",["bui/common","bui/form/fieldcontainer"],function(b){var d=b("bui/common"),a=b("bui/form/fieldcontainer");var c=a.extend({},{ATTRS:{elCls:{value:"row"},defaultChildCfg:{value:{tpl:' <label class="control-label">{label}</label>                <div class="controls">                </div>',childContainer:".controls",showOneError:true,controlContainer:".controls",elCls:"control-group span8",errorTpl:'<span class="valid-text"><span class="estate error"><span class="x-icon x-icon-mini x-icon-error">!</span><em>{error}</em></span></span>'}},defaultChildClass:{value:"form-field-text"}}},{xclass:"form-row"});return c});define("bui/form/rule",["bui/common"],function(a){var f=a("bui/common");var b=function(g){b.superclass.constructor.call(this,g)};f.extend(b,f.Base);b.ATTRS={name:{},msg:{},validator:{value:function(i,h,g,j){}}};function c(o,n,h,j,l){var m=o,i=m.get("validator"),k=d(o,h,j),g=true;n=n==null?"":n;return i.call(m,n,h,k,l)}function e(g){if(g==null){return{}}if($.isPlainObject(g)){return g}var k=g,j={};if(f.isArray(g)){for(var h=0;h<k.length;h++){j[h]=k[h]}return j}return{"0":g}}function d(h,g,i){var j=e(g);i=i||h.get("msg");return f.substitute(i,j)}f.augment(b,{valid:function(i,h,k,j){var g=this;return c(g,i,h,k,j)}});return b});define("bui/form/rules",["bui/form/rule"],function(g){var o=g("bui/form/rule");function t(B){return parseFloat(B)}function w(B){return BUI.Date.parse(B)}var l={};var i={add:function(C){var B;if($.isPlainObject(C)){B=C.name;l[B]=new o(C)}else{if(C.get){B=C.get("name");l[B]=C}}return l[B]},remove:function(B){delete l[B]},get:function(B){return l[B]},valid:function(B,D,C,G,F){var E=i.get(B);if(E){return E.valid(D,C,G,F)}return null},isValid:function(B,D,C,E){return i.valid(B,D,C,E)==null}};var j=i.add({name:"required",msg:"\u4e0d\u80fd\u4e3a\u7a7a\uff01",validator:function(C,D,B){if(D!==false&&/^\s*$/.test(C)){return B}}});var y=i.add({name:"equalTo",msg:"\u4e24\u6b21\u8f93\u5165\u4e0d\u4e00\u81f4\uff01",validator:function(E,C,B){var D=$(C);if(D.length){C=D.val()}return E===C?undefined:B}});var r=i.add({name:"min",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(D,C,B){if(D!==""&&t(D)<t(C)){return B}}});var u=i.add({name:"max",msg:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(D,B,C){if(D!==""&&t(D)>t(B)){return C}}});var b=i.add({name:"length",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e3a{0}\uff01",validator:function(D,B,C){if(D!=null){D=$.trim(D.toString());if(B!=D.length){return C}}}});var k=i.add({name:"minlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5c0f\u4e8e{0}\uff01",validator:function(E,D,C){if(E!=null){E=$.trim(E.toString());var B=E.length;if(B<D){return C}}}});var v=i.add({name:"maxlength",msg:"\u8f93\u5165\u503c\u957f\u5ea6\u4e0d\u5927\u4e8e{0}\uff01",validator:function(E,C,D){if(E){E=$.trim(E.toString());var B=E.length;if(B>C){return D}}}});var A=i.add({name:"regexp",msg:"\u8f93\u5165\u503c\u4e0d\u7b26\u5408{0}\uff01",validator:function(D,C,B){if(C){return C.test(D)?undefined:B}}});var q=i.add({name:"email",msg:"\u4e0d\u662f\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff01",validator:function(D,C,B){D=$.trim(D);if(D){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(D)?undefined:B}}});var x=i.add({name:"date",msg:"\u4e0d\u662f\u6709\u6548\u7684\u65e5\u671f\uff01",validator:function(D,C,B){if(BUI.isNumber(D)){return}if(BUI.isDate(D)){return}D=$.trim(D);if(D){return BUI.Date.isDateString(D)?undefined:B}}});var d=i.add({name:"minDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e{0}\uff01",validator:function(E,D,B){if(E){var C=w(E);if(C&&C<w(D)){return B}}}});var m=i.add({name:"maxDate",msg:"\u8f93\u5165\u65e5\u671f\u4e0d\u80fd\u5927\u4e8e{0}\uff01",validator:function(D,E,B){if(D){var C=w(D);if(C&&C>w(E)){return B}}}});var a=i.add({name:"number",msg:"\u4e0d\u662f\u6709\u6548\u7684\u6570\u5b57\uff01",validator:function(D,C,B){if(BUI.isNumber(D)){return}D=D.replace(/\,/g,"");return !isNaN(D)?undefined:B}});function e(C,B,E){var D=C&&(C.equals!==false);if(D){return E<=B}return E<B}function n(B){return B==""||B==null}function c(J,C,D,L){var H=L.getFields(),B=true;for(var G=1;G<H.length;G++){var K=H[G],E=H[G-1],I,F;if(K&&E){I=K.get("value");F=E.get("value");if(!n(I)&&!n(F)&&!e(C,I,F)){B=false;
break}}}if(!B){return D}return null}var s=i.add({name:"dateRange",msg:"\u7ed3\u675f\u65e5\u671f\u4e0d\u80fd\u5c0f\u4e8e\u8d77\u59cb\u65e5\u671f\uff01",validator:c});var p=i.add({name:"numberRange",msg:"\u7ed3\u675f\u6570\u5b57\u4e0d\u80fd\u5c0f\u4e8e\u5f00\u59cb\u6570\u5b57\uff01",validator:c});function f(B){var C=B.getFieldAt(0);if(C){return C.get("name")}return""}function h(G,D){if(!BUI.isArray(D)){D=[D]}if(!G||!D.length){return false}var C=!G?0:!BUI.isArray(G)?1:G.length;if(D.length==1){var F=D[0];if(!F){return true}if(F>C){return false}}else{var E=D[0],B=D[1];if(E>C||B<C){return false}}return true}var z=i.add({name:"checkRange",msg:"\u5fc5\u987b\u9009\u4e2d{0}\u9879\uff01",validator:function(C,F,B,H){var E=f(H),G,D=F;if(E&&D){G=C[E];if(!h(G,D)){return B}}return null}});return i});define("bui/form/remote",["bui/common"],function(b){var d=b("bui/common");var a=function(){};a.ATTRS={isLoading:{},loadingEl:{}};a.prototype={getLoadingContainer:function(){},_setLoading:function(){var f=this,g=f.get("loadingEl"),e=f.get("loadingTpl");if(!g){g=$(e).appendTo(f.getLoadingContainer());f.setInternal("loadingEl",g)}},_clearLoading:function(){var e=this,f=e.get("loadingEl");if(f){f.remove();e.setInternal("loadingEl",null)}},_uiSetIsLoading:function(f){var e=this;if(f){e._setLoading()}else{e._clearLoading()}}};var c=function(){};c.ATTRS={defaultRemote:{value:{method:"GET",cache:true,callback:function(e){return e}}},remoteDaly:{value:500},loadingTpl:{view:true,value:'<img src="http://img02.taobaocdn.com/tps/i2/T1NU8nXCVcXXaHNz_X-16-16.gif" alt="loading"/>'},isLoading:{view:true,value:false},remote:{setter:function(e){if(d.isString(e)){e={url:e}}return e}},remoteHandler:{},events:{value:{remotecomplete:false,remotestart:false}}};c.prototype={__bindUI:function(){var e=this;e.on("change",function(f){if(e.get("remote")&&e.isValid()){var g=e.getRemoteParams();e._startRemote(g)}});e.on("error",function(f){if(e.get("remote")){e._cancelRemote()}})},_startRemote:function(h){var e=this,f=e.get("remoteHandler"),g=e.get("remoteDaly");if(f){e._cancelRemote(f)}function i(){e._remoteValid(h,f);e.set("isLoading",true)}f=setTimeout(i,g);e.setInternal("remoteHandler",f)},_remoteValid:function(k,h){var e=this,j=e.get("remote"),i=e.get("defaultRemote"),g=d.merge(i,j,{data:k});function f(l,m){if(h==e.get("remoteHandler")){e.fire("remotecomplete",{error:l,data:m});e.set("isLoading",false);e.setInternal("remoteHandler",null)}}g.success=function(m){var n=g.callback,l=n(m);f(l,m)};g.error=function(l,n,m){f(m)};e.fire("remotestart",{data:k});$.ajax(g)},getRemoteParams:function(){},_cancelRemote:function(f){var e=this;f=f||e.get("remoteHandler");if(f){clearTimeout(f);e.setInternal("remoteHandler",null)}e.set("isLoading",false)}};c.View=a;return c});define("bui/select",["bui/common","bui/select/select","bui/select/combox","bui/select/suggest"],function(a){var b=a("bui/common"),c=b.namespace("Select");b.mix(c,{Select:a("bui/select/select"),Combox:a("bui/select/combox"),Suggest:a("bui/select/suggest")});return c});define("bui/select/select",["bui/common","bui/picker"],function(b){var d=b("bui/common"),f=b("bui/picker").ListPicker,c=d.prefix;function a(j){if($.isPlainObject(j)){var k=[];d.each(j,function(m,o){k.push({value:o,text:m})});return k}var l=[];d.each(j,function(n,m){if(d.isString(n)){l.push({value:n,text:n})}else{l.push(n)}});return l}var i=d.Component,g=f,h=c+"select-input",e=i.Controller.extend({initializer:function(){var j=this,l=j.get("multipleSelect"),m,k=j.get("picker");if(!k){m=l?"listbox":"simple-list";k=new g({children:[{xclass:m,elCls:c+"select-list",store:j.get("store"),items:a(j.get("items"))}],valueField:j.get("valueField")});j.set("picker",k)}else{if(j.get("valueField")){k.set("valueField",j.get("valueField"))}}if(l){k.set("hideEvent","")}},renderUI:function(){var j=this,k=j.get("picker"),m=j.get("el"),l=m.find("."+j.get("inputCls"));k.set("trigger",m);k.set("triggerEvent",j.get("triggerEvent"));k.set("autoSetValue",j.get("autoSetValue"));k.set("textField",l);if(j.get("forceFit")){k.set("width",m.outerWidth())}k.render()},bindUI:function(){var j=this,l=j.get("picker"),m=l.get("list"),k=m.get("store");l.on("selectedchange",function(n){j.fire("change",{text:n.text,value:n.value,item:n.item})});m.on("itemsshow",function(){j._syncValue()})},containsElement:function(l){var j=this,k=j.get("picker");return i.Controller.prototype.containsElement.call(this,l)||k.containsElement(l)},_uiSetItems:function(k){if(!k){return}var j=this,l=j.get("picker"),m=l.get("list");m.set("items",a(k));j._syncValue()},_syncValue:function(){var j=this,l=j.get("picker"),k=j.get("valueField");if(k){l.setSelectedValue($(k).val())}},_uiSetName:function(k){var j=this,l=j._getTextEl();if(k){l.attr("name",k)}},_uiSetWidth:function(l){var k=this;if(l!=null){var o=k._getTextEl(),j=k.get("el").find(".x-icon"),p=o.outerWidth()-o.width(),m=k.get("picker"),n=l-j.outerWidth()-p;o.width(n);if(k.get("forceFit")){m.set("width",l)}}},_getTextEl:function(){var j=this,k=j.get("el");
return k.find("."+j.get("inputCls"))},destructor:function(){var j=this,k=j.get("picker");if(k){k.destroy()}},_getList:function(){var j=this,k=j.get("picker"),l=k.get("list");return l},getSelectedValue:function(){return this.get("picker").getSelectedValue()},setSelectedValue:function(l){var j=this,k=j.get("picker");k.setSelectedValue(l)},getSelectedText:function(){return this.get("picker").getSelectedText()}},{ATTRS:{picker:{},valueField:{},store:{},focusable:{value:true},multipleSelect:{value:false},name:{},items:{sync:false},inputCls:{value:h},forceFit:{value:true},events:{value:{"change":false}},tpl:{view:true,value:'<input type="text" readonly="readonly" class="'+h+'"/><span class="x-icon x-icon-normal"><span class="x-caret x-caret-down"></span></span>'},triggerEvent:{value:"click"}}},{xclass:"select"});return e});define("bui/select/combox",["bui/common","bui/select/select"],function(b){var e=b("bui/common"),f=b("bui/select/select"),a=e.prefix+"combox-input";function d(g,i,h){var j=h.get("list"),k=h.getSelectedText();if(k){$(g).val(k)}}var c=f.extend({renderUI:function(){var g=this,h=g.get("picker");h.get("getFunction",d)},_uiSetItems:function(h){var g=this;for(var j=0;j<h.length;j++){var k=h[j];if(e.isString(k)){h[j]={value:k,text:k}}}c.superclass._uiSetItems.call(g,h)}},{ATTRS:{tpl:{view:true,value:'<input type="text" class="'+a+'"/>'},inputCls:{value:a}}},{xclass:"combox"});return c});define("bui/select/suggest",["bui/common","bui/select/combox"],function(b){var e=b("bui/common"),a=b("bui/select/combox"),c=200,d="";var f=a.extend({bindUI:function(){var g=this,h=g.get("el").find("input"),i=(g.get("triggerEvent")==="keyup")?"keyup":"keyup click";h.on(i,function(){g._start()})},_start:function(){var g=this;g._timer=g.later(function(){g._updateContent()},c)},_updateContent:function(){var h=this,i=h.get("data"),l=h.get("el").find("input"),n;if(!i&&(l.val()===h.get("query"))){return}h.set("query",l.val());n=l.val();if(!i&&!n){return}var g=h.get("cacheable"),k=h.get("url"),m=h.get("data");if(g&&k){var j=h.get("dataCache");if(j[n]!==undefined){h._handleResponse(j[n])}else{h._requestData()}}else{if(k){h._requestData()}else{if(m){h._handleResponse(m,true)}}}},_getStore:function(){var g=this,h=g.get("picker"),i=h.get("list");if(i){return i.get("store")}},_requestData:function(){var g=this,i=g.get("el").find("input"),k=g.get("callback"),h=g.get("store"),j={};j[i.attr("name")]=i.val();if(h){j.start=0;h.load(j,k)}else{$.ajax({url:g.get("url"),type:"post",dataType:g.get("dataType"),data:j,success:function(l){g._handleResponse(l);if(k){k(l)}}})}},_handleResponse:function(j,i){var g=this,h=i?g._getFilterItems(j):j;g.set("items",h);if(g.get("cacheable")){g.get("dataCache")[g.get("query")]=h}},_getItemText:function(i){var g=this,h=g.get("picker"),j=h.get("list");if(j){return j.getItemText(i)}return""},_getFilterItems:function(l){var h=this,g=[],k=h.get("el").find("input"),m=k.val(),i=h.get("data");l=l||[];function j(o,n){if(e.isString(n)){g.push(o)}else{g.push(n)}}e.each(l,function(n){var o=e.isString(n)?n:h._getItemText(n);if(i){if(o.indexOf($.trim(m))!==-1){j(o,n)}}else{j(o,n)}});return g},later:function(h,g,j){g=g||0;var i=j?setInterval(h,g):setTimeout(h,g);return{id:i,interval:j,cancel:function(){if(this.interval){clearInterval(i)}else{clearTimeout(i)}}}}},{ATTRS:{data:{value:null},query:{value:d},cacheable:{value:false},dataCache:{value:{}},dataType:{value:"jsonp"},url:{},callback:{},triggerEvent:{valueFn:function(){if(this.get("data")){return"click"}return"keyup"}},autoSetValue:{value:false}}},{xclass:"suggest"});return f});define("bui/mask",["bui/common","bui/mask/mask","bui/mask/loadmask"],function(a){var b=a("bui/common"),c=a("bui/mask/mask");c.LoadMask=a("bui/mask/loadmask");return c});define("bui/mask/mask",["bui/common"],function(b){var e=b("bui/common"),f=e.namespace("Mask"),c=e.UA,a=e.prefix+"ext-mask",d=a+"-msg";e.mix(f,{maskElement:function(j,h,k){var p=$(j),g=$("."+a,p),l=null,n=null,o=null,i=null;if(!g.length){g=$('<div class="'+a+'"></div>').appendTo(p);p.addClass("x-masked-relative x-masked");if(c.ie===6){g.height(p.height())}if(h){l=['<div class="'+d+'"><div>',h,"</div></div>"].join("");n=$(l).appendTo(p);if(k){n.addClass(k)}try{o=(p.height()-n.height())/2;i=(p.width()-n.width())/2;n.css({left:i,top:o})}catch(m){e.log("mask error occurred")}}}return g},unmaskElement:function(i){var g=$(i),h=g.children("."+d),j=g.children("."+a);if(h){h.remove()}if(j){j.remove()}g.removeClass("x-masked-relative x-masked")}});return f});define("bui/mask/loadmask",["bui/mask/mask"],function(a){var c=a("bui/mask/mask");function b(e){var d=this;b.superclass.constructor.call(d,e)}BUI.extend(b,BUI.Base);b.ATTRS={el:{},msg:{value:"Loading..."},msgCls:{value:"x-mask-loading"},disabled:{value:false}};BUI.augment(b,{disable:function(){this.set("disabled",true)},onLoad:function(){c.unmaskElement(this.get("el"))},onBeforeLoad:function(){var d=this;if(!d.get("disabled")){c.maskElement(d.get("el"),d.get("msg"),this.get("msgCls"))}},show:function(){this.onBeforeLoad()
},hide:function(){this.onLoad()},destroy:function(){this.hide();this.clearAttrVals();this.off()}});return b});define("bui/menu",["bui/common","bui/menu/menu","bui/menu/menuitem","bui/memu/contextmenu","bui/menu/popmenu","bui/menu/sidemenu"],function(a){var c=a("bui/common"),b=c.namespace("Menu");c.mix(b,{Menu:a("bui/menu/menu"),MenuItem:a("bui/menu/menuitem"),ContextMenu:a("bui/memu/contextmenu"),PopMenu:a("bui/menu/popmenu"),SideMenu:a("bui/menu/sidemenu")});b.ContextMenuItem=b.ContextMenu.Item;return b});define("bui/menu/menuitem",["bui/common"],function(c){var h=c("bui/common"),k=h.Component,b=k.UIBase,f=h.prefix,i=f+"menu-item-open",j="x-caret",g=f+"menu-item-collapsed",l="data-id";var d=k.View.extend([b.ListItemView,b.CollapseableView],{_uiSetOpen:function(o){var m=this,n=m.getStatusCls("open");if(o){m.get("el").addClass(n)}else{m.get("el").removeClass(n)}}},{ATTRS:{}},{xclass:"menu-item-view"});var a=k.Controller.extend([b.ListItem,b.Collapseable],{renderUI:function(){var m=this,o=m.get("el"),p=m.get("id"),n=null;if(!p){p=h.guid("menu-item");m.set("id",p)}o.attr(l,p)},handleMouseEnter:function(n){var m=this;if(this.get("subMenu")){this.set("open",true)}a.superclass.handleMouseEnter.call(this,n)},handleMouseLeave:function(p){var m=this,o=m.get("subMenu"),n=p.toElement;if(n&&o&&o.containsElement(n)){m.set("open",true)}else{m.set("open",false)}a.superclass.handleMouseLeave.call(this,p)},containsElement:function(p){var m=this,n,o=a.superclass.containsElement.call(m,p);if(!o){n=m.get("subMenu");o=n&&n.containsElement(p)}return o},_uiSetOpen:function(p){var m=this,o=m.get("subMenu"),q=m.get("subMenuAlign");if(o){if(p){q.node=m.get("el");o.set("align",q);o.show()}else{var n=o.get("align");if(!n||n.node==m.get("el")){o.hide()}}}},_uiSetSubMenu:function(n){if(n){var m=this,p=m.get("el"),o=m.get("parent");if(!n.get("parentMenu")){n.set("parentMenu",o);if(o.get("autoHide")){n.set("autoHide",false)}}$(m.get("arrowTpl")).appendTo(p)}},destructor:function(){var m=this,n=m.get("subMenu");if(n){n.destroy()}}},{ATTRS:{elTagName:{value:"li"},xview:{value:d},open:{view:true,value:false},subMenu:{view:true},subMenuAlign:{valueFn:function(m){return{points:["tr","tl"],offset:[-5,0]}}},arrowTpl:{value:'<span class="'+j+" "+j+'-left"></span>'},events:{value:{"afterOpenChange":true}}}},{xclass:"menu-item",priority:0});var e=a.extend({},{ATTRS:{focusable:{value:false},selectable:{value:false},handleMouseEvents:{value:false}}},{xclass:"menu-item-sparator"});a.View=d;a.Separator=e;return a});define("bui/menu/menu",["bui/common"],function(b){var e=b("bui/common"),a=e.Component,d=a.UIBase;var c=a.Controller.extend([d.ChildList],{bindUI:function(){var f=this;f.on("click",function(i){var h=i.target,g=f.get("multipleSelect");if(f!=h){if(!g&&f.get("clickHide")&&!h.get("subMenu")){f.getTopAutoHideMenu().hide()}}});f.on("afterOpenChange",function(h){var i=h.target,j=h.newVal,g=f.get("children");if(j){e.each(g,function(k){if(k!==i&&k.get("open")){k.set("open",false)}})}});f.on("afterVisibleChange",function(h){var i=h.newVal,g=f.get("parentMenu");f._clearOpen()})},getTopAutoHideMenu:function(){var f=this,g=f.get("parentMenu"),h;if(g&&g.get("autoHide")){return g.getTopAutoHideMenu()}if(f.get("autoHide")){return f}return null},_clearOpen:function(){var f=this,g=f.get("children");e.each(g,function(h){if(h.set){h.set("open",false)}})},findItemById:function(f){return this.findItemByField("id",f)},_uiSetSelectedItem:function(f){if(f){_self.setSelected(f)}}},{ATTRS:{elTagName:{view:true,value:"ul"},idField:{value:"id"},defaultChildClass:{value:"menu-item"},selectedItem:{},parentMenu:{}}},{xclass:"menu",priority:0});return c});define("bui/menu/popmenu",["bui/common","bui/menu/menu"],function(b){var f=b("bui/common"),e=f.Component.UIBase,d=b("bui/menu/menu");var a=f.Component.View.extend([e.PositionView],{});var c=d.extend([e.Position,e.Align,e.AutoShow,,e.AutoHide],{},{ATTRS:{clickHide:{value:true},align:{value:{points:["bl","tl"],offset:[0,0]}},visibleMode:{value:"visibility"},autoHide:{value:true},visible:{value:false},xview:{value:a}}},{xclass:"pop-menu"});return c});define("bui/memu/contextmenu",["bui/common","bui/menu/menuitem","bui/menu/popmenu"],function(d){var i=d("bui/common"),j=d("bui/menu/menuitem"),b=d("bui/menu/popmenu"),g=i.prefix,e=g+"menu-item-link",a=g+"menu-item-icon",k=i.Component,c=k.UIBase;var h=j.extend({bindUI:function(){var l=this;l.get("el").delegate("."+e,"click",function(m){m.preventDefault()})},_uiSetIconCls:function(n,p){var m=this,o=p.prevVal,l=m.get("el").find("."+a);l.removeClass(o);l.addClass(n)}},{ATTRS:{text:{veiw:true,value:""},iconCls:{sync:false,value:""},tpl:{value:'<a class="'+e+'" href="#">        <span class="'+a+' {iconCls}"></span><span class="'+g+'menu-item-text">{text}</span></a>'}}},{xclass:"context-menu-item"});var f=b.extend({},{ATTRS:{defaultChildClass:{value:"context-menu-item"},align:{value:null}}},{xclass:"context-menu"});f.Item=h;return f});define("bui/menu/sidemenu",["bui/common","bui/menu/menu"],function(d){var f=d("bui/common"),e=d("bui/menu/menu"),c=f.Component,b=f.prefix+"menu-title",a="menu-leaf";
var g=e.extend({initializer:function(){var h=this,i=h.get("items"),j=h.get("children");f.each(i,function(k){var l=h._initMenuCfg(k);j.push(l)})},bindUI:function(){var h=this,i=h.get("children");f.each(i,function(j){var k=j.get("children")[0];if(k){k.publish("click",{bubbles:1})}});h.get("el").delegate("a","click",function(j){j.preventDefault()});h.on("itemclick",function(l){var k=l.item,j=$(l.domTarget).closest("."+b);if(j.length){var m=k.get("collapsed");k.set("collapsed",!m)}else{if(k.get("el").hasClass(a)){h.fire("menuclick",{item:k});h.clearSelection();h.setSelected(k)}}})},getItems:function(){var h=this,i=[],j=h.get("children");f.each(j,function(k){var l=k.get("children")[0];i=i.concat(l.get("children"))});return i},_initMenuCfg:function(l){var h=this,k=l.items,j=[],i={xclass:"menu-item",elCls:"menu-second",collapsed:l.collapsed,selectable:false,children:[{xclass:"menu",children:j}],content:'<div class="'+b+'"><s></s><span class="'+b+'-text">'+l.text+"</span></div>"};f.each(k,function(n){var m=h._initSubMenuCfg(n);j.push(m)});return i},_initSubMenuCfg:function(j){var h=this,i={xclass:"menu-item",elCls:"menu-leaf",tpl:'<a href="{href}"><em>{text}</em></a>'};return f.mix(i,j)}},{ATTRS:{autoInitItems:{value:false},events:{value:{"menuclick":false}}}},{xclass:"side-menu"});return g});define("bui/tab",["bui/common","bui/tab/tab","bui/tab/tabitem","bui/tab/navtabitem","bui/tab/navtab","bui/tab/tabpanel","bui/tab/tabpanelitem"],function(b){var c=b("bui/common"),a=c.namespace("Tab");c.mix(a,{Tab:b("bui/tab/tab"),TabItem:b("bui/tab/tabitem"),NavTabItem:b("bui/tab/navtabitem"),NavTab:b("bui/tab/navtab"),TabPanel:b("bui/tab/tabpanel"),TabPanelItem:b("bui/tab/tabpanelitem")});return a});define("bui/tab/navtabitem",["bui/common"],function(e){var g=e("bui/common"),h=g.Component,i="tab-item-title",c="tab-item-close",a="tab-nav-actived",f="tab-content";var d=h.View.extend({renderUI:function(){var j=this,k=j.get("tabContentContainer"),m=j.get("tabContentTpl");if(k){var l=$(m).appendTo(k);j.set("tabContentEl",l)}},_uiSetHref:function(j){this._setHref(j)},_setHref:function(k){var j=this,l=j.get("tabContentEl");k=k||j.get("href");if(l){$("iframe",l).attr("src",k)}},resetHref:function(){this._setHref()},_uiSetTitle:function(k){var j=this,l=j.get("el");l.attr("title",k);$("."+i,l).text(k)},_uiSetActived:function(k){var j=this,l=j.get("el");j.setTabContentVisible(k);if(k){l.addClass(a)}else{l.removeClass(a)}},destructor:function(){var j=this,k=j.get("tabContentEl");if(k){k.remove()}},setTabContentVisible:function(k){var j=this,l=j.get("tabContentEl");if(l){if(k){l.show()}else{l.hide()}}}},{ATTRS:{tabContentContainer:{},tabContentEl:{},title:{},href:{}}});var b=h.Controller.extend({createDom:function(){var j=this,k=j.get("parent");if(k){j.set("tabContentContainer",k.getTabContentContainer())}},bindUI:function(){var j=this,l=j.get("el"),k=j.get("events");l.on("click",function(n){var m=$(n.target);if(m.hasClass(c)){if(j.fire("closing")!==false){j.close()}}})},handleDblClick:function(k){var j=this;if(j.fire("closing")!==false){j.close()}j.fire("dblclick",{domTarget:k.target,domEvent:k})},handleContextMenu:function(j){j.preventDefault();this.fire("showmenu",{position:{x:j.pageX,y:j.pageY}})},setTitle:function(j){this.set("title",j)},close:function(){this.fire("closed")},reload:function(){this.get("view").resetHref()},show:function(){var j=this;j.get("el").show(500,function(){j.set("visible",true)})},hide:function(k){var j=this;this.get("el").hide(500,function(){j.set("visible",false);k&&k()})},_uiSetActived:function(k){var j=this,l=j.get("parent");if(l&&k){l._setItemActived(j)}},_uiSetCloseable:function(k){var j=this,l=j.get("el"),m=l.find("."+c);if(k){m.show()}else{m.hide()}}},{ATTRS:{elTagName:{value:"li"},actived:{view:true,value:false},closeable:{value:true},allowTextSelection:{view:false,value:false},events:{value:{"click":true,"closing":true,"closed":true,"showmenu":true,"afterVisibleChange":true}},tabContentContainer:{view:true},tabContentTpl:{view:true,value:'<div class="'+f+'" style="display:none;"><iframe src="" width="100%" height="100%" frameborder="0"></iframe></div>'},href:{view:true,value:""},visible:{view:true,value:true},title:{view:true,value:""},tpl:{view:true,value:'<span class="'+i+'"></span><s class="'+c+'"></s>'},xview:{value:d}}},{xclass:"nav-tab-item",priority:0});b.View=d;return b});define("bui/tab/navtab",["bui/common","bui/menu"],function(a){var h=a("bui/common"),d=a("bui/menu"),j=h.Component,f="tab-nav-list",c="arrow-left",b="arrow-right",e="m_close",g=140;var k=j.View.extend({renderUI:function(){var l=this,m=l.get("el"),n=null;n=m.find("."+f);l.setInternal("listEl",n)},getContentElement:function(){return this.get("listEl")},getTabContentContainer:function(){return this.get("el").find(".tab-content-container")},_uiSetHeight:function(n){var l=this,o=l.get("el"),m=o.find(".tab-nav-bar"),p=l.getTabContentContainer();if(n){p.height(n-m.height())}o.height(n)}},{},{xclass:"nav-tab-view",priority:0});var i=j.Controller.extend({addTab:function(m,o){var l=this,q=m.id||h.guid("tab-item"),n=l.getItemById(q);
if(n){var p=false;if(m.href&&n.get("href")!=m.href){n.set("href",m.href);p=true}l._setItemActived(n);if(o&&!p){n.reload()}}else{m=h.mix({id:q,visible:false,actived:true,xclass:"nav-tab-item"},m);n=l.addChild(m);n.show();l._resetItemList()}return n},getTabContentContainer:function(){return this.get("view").getTabContentContainer()},bindUI:function(){var l=this;l._bindScrollEvent();l.on("click",function(n){var m=n.target;if(m!=l){l._setItemActived(m);l.fire("itemclick",{item:m})}});l.on("closed",function(n){var m=n.target;l._closeItem(m)});l.on("showmenu",function(m){l._showMenu(m.target,m.position)});l.on("afterVisibleChange",function(n){var m=n.target;if(m.get("actived")){l._scrollToItem(m)}})},_bindScrollEvent:function(){var l=this,m=l.get("el");m.find(".arrow-left").on("click",function(){if(m.hasClass(c+"-active")){l._scrollLeft()}});m.find(".arrow-right").on("click",function(){if(m.hasClass(b+"-active")){l._scrllRight()}})},_showMenu:function(n,m){var l=this,q=l._getMenu(),p=n.get("closeable"),o;l.set("showMenuItem",n);q.set("xy",[m.x,m.y]);q.show();o=q.getItem(e);if(o){o.set("disabled",!p)}},setActived:function(n){var l=this,m=l.getItemById(n);l._setItemActived(m)},getActivedItem:function(){var m=this,n=m.get("children"),l=null;h.each(n,function(o){if(o.get("actived")){l=o;return false}});return l},getItemById:function(o){var m=this,n=m.get("children"),l=null;h.each(n,function(p){if(p.get("id")===o){l=p;return false}});return l},_getMenu:function(){var l=this;return l.get("menu")||l._initMenu()},_initMenu:function(){var l=this,m=new d.ContextMenu({children:[{xclass:"context-menu-item",iconCls:"icon icon-refresh",text:"\u5237\u65b0",listeners:{"click":function(){var n=l.get("showMenuItem");if(n){n.reload()}}}},{id:e,xclass:"context-menu-item",iconCls:"icon icon-remove",text:"\u5173\u95ed",listeners:{"click":function(){var n=l.get("showMenuItem");if(n){n.close()}}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u5176\u4ed6",listeners:{"click":function(){var n=l.get("showMenuItem");if(n){l.closeOther(n)}}}},{xclass:"context-menu-item",iconCls:"icon icon-remove-sign",text:"\u5173\u95ed\u6240\u6709",listeners:{"click":function(){l.closeAll()}}}]});l.set("menu",m);return m},_closeItem:function(p){var n=this,o=n._getIndex(p),m=n.getActivedItem(),q=n._getItemByIndex(o-1),l=n._getItemByIndex(o+1);p.hide(function(){n.removeChild(p,true);n._resetItemList();if(m===p){if(q){n._setItemActived(q)}else{n._setItemActived(l)}}else{n._scrollToItem(m)}})},closeAll:function(){var l=this,m=l.get("children");h.each(m,function(n){n.close()})},closeOther:function(n){var l=this,m=l.get("children");h.each(m,function(o){if(n!==o){o.close()}})},_getItemByIndex:function(m){var l=this,n=l.get("children");return n[m]},_getIndex:function(n){var l=this,m=l.get("children");return h.Array.indexOf(n,m)},_resetItemList:function(){var m=this,o=m.get("children"),n=m.getContentElement(),l=o.length*g;n.width(l)},_scrollToItem:function(r){var m=this,o=m.getContentElement(),l=o.position(),q=m._getDistanceToEnd(r,o,l),p=m._getDistanceToBegin(r,l);if(o.width()<o.parent().width()){m._scrollTo(o,0)}else{if(p<0){m._scrollTo(o,l.left-(p))}else{if(q>0){m._scrollTo(o,l.left+(q)*-1)}else{if(l.left<0){var n=m._getLastDistance(o,l),s=0;if(n<0){s=l.left-n;s=s<0?s:0;m._scrollTo(o,s)}}}}}},_getDistanceToBegin:function(n,m){if(n&&n.get("el")){var l=n.get("el").position();return l.left+m.left}else{return}},_getDistanceToEnd:function(q,n,m){var l=this,n=n||l.getContentElement(),p=n.parent().width(),m=m||n.position(),r=l._getDistanceToBegin(q,m),o=r+g-p;return o},_getLastDistance:function(n,m){var l=this,o=l.get("children"),p=o[o.length-1];if(p){return l._getDistanceToEnd(p,n,m)}return 0},_scrollTo:function(m,n,o){var l=this;m.animate({left:n},500,function(){l._setArrowStatus(m)})},_scrollLeft:function(){var m=this,n=m.getContentElement(),l=n.position(),o=m._getLastDistance(n,l),p;if(o>0){p=o>g?g:o;m._scrollTo(n,l.left-p)}},_scrllRight:function(){var m=this,n=m.getContentElement(),l=n.position(),o;if(l.left<0){o=l.left+g;o=o<0?o:0;m._scrollTo(n,o)}},_setArrowStatus:function(o,n){o=o||this.getContentElement();var m=this,q=m.get("el"),l=n||o.position(),p=m._getLastDistance(o,n);if(l.left<0){q.addClass(b+"-active")}else{q.removeClass(b+"-active")}if(p>0){q.addClass(c+"-active")}else{q.removeClass(c+"-active")}},_setItemActived:function(n){var l=this,m=l.getActivedItem();if(n===m){return}if(m){m.set("actived",false)}if(n){if(!n.get("actived")){n.set("actived",true)}if(n.get("visible")){l._scrollToItem(n)}l.fire("activeChange",{item:n})}}},{ATTRS:{defaultChildClass:{value:"nav-tab-item"},menu:{},tpl:{view:true,value:'<div class="tab-nav-bar">'+'<s class="tab-nav-arrow arrow-left"></s><div class="tab-nav-wrapper"><div class="tab-nav-inner"><ul class="'+f+'"></ul></div></div><s class="tab-nav-arrow arrow-right"></s>'+"</div>"+'<div class="tab-content-container"></div>'},xview:{value:k},events:{value:{"itemclick":false}}}},{xclass:"nav-tab",priority:0});
return i});define("bui/tab/tabitem",["bui/common"],function(b){var f=b("bui/common"),a=f.Component,e=a.UIBase;var c=a.View.extend([e.ListItemView],{},{xclass:"tab-item-view"});var d=a.Controller.extend([e.ListItem],{},{ATTRS:{elTagName:{view:true,value:"li"},xview:{value:c},tpl:{view:true,value:'<span class="bui-tab-item-text">{text}</span>'}}},{xclass:"tab-item"});d.View=c;return d});define("bui/tab/tab",["bui/common"],function(b){var e=b("bui/common"),a=e.Component,d=a.UIBase;var c=a.Controller.extend([d.ChildList],{},{ATTRS:{elTagName:{view:true,value:"ul"},defaultChildClass:{value:"tab-item"}}},{xclass:"tab"});return c});define("bui/tab/tabpanelitem",["bui/common","bui/tab/tabitem"],function(b){var f=b("bui/common"),e=b("bui/tab/tabitem"),a=f.Component;var c=e.View.extend({},{xclass:"tab-panel-item-view"});var d=e.extend({renderUI:function(){var g=this,h=g.get("selected");g._setPanelVisible(h)},_setPanelVisible:function(i){var g=this,h=g.get("panel"),j=i?"show":"hide";if(h){$(h)[j]()}},_uiSetSelected:function(g){this._setPanelVisible(g)},destructor:function(){var g=this,h=g.get("panel");if(h&&g.get("panelDestroyable")){$(h).remove()}},_uiSetPanelContent:function(i){var g=this,h=g.get("panel");$(h).html(i)}},{ATTRS:{panel:{},panelContent:{},defaultLoaderCfg:{valueFn:function(){var g=this;return{property:"panelContent",autoLoad:false,lazyLoad:{event:"afterSelectedChange"},loadMask:{el:g.get("panel")}}}},panelDestroyable:{value:true},xview:{value:c}}},{xclass:"tab-panel-item"});d.View=c;return d});define("bui/tab/tabpanel",["bui/common","bui/tab/tab"],function(b){var c=b("bui/common"),a=b("bui/tab/tab");var d=a.extend({initializer:function(){var e=this,g=e.get("children"),h=$(e.get("panelContainer")),i=e.get("panelCls"),f=i?h.find("."+f):h.children();c.each(g,function(k,j){if(k.set){k.set("panel",f[j])}else{k.panel=f[j]}})}},{ATTRS:{defaultChildClass:{value:"tab-panel-item"},panelContainer:{},panelCls:{}}},{xclass:"tab-panel"});return d});define("bui/toolbar",["bui/common","bui/toolbar/baritem","bui/toolbar/bar","bui/toolbar/pagingbar","bui/toolbar/numberpagingbar"],function(a){var c=a("bui/common"),b=c.namespace("Toolbar");c.mix(b,{BarItem:a("bui/toolbar/baritem"),Bar:a("bui/toolbar/bar"),PagingBar:a("bui/toolbar/pagingbar"),NumberPagingBar:a("bui/toolbar/numberpagingbar")});return b});define("bui/toolbar/baritem",function(){var f=BUI.prefix,i=BUI.Component,c=i.UIBase;var d=i.View.extend([c.ListItemView]);var h=i.Controller.extend([c.ListItem],{renderUI:function(){var j=this.get("el");j.addClass(f+"inline-block");if(!j.attr("id")){j.attr("id",this.get("id"))}}},{ATTRS:{elTagName:{view:true,value:"li"},selectable:{value:false},focusable:{value:false},xview:{value:d}}},{xclass:"bar-item",priority:1});var b=h.extend({_uiSetDisabled:function(l){var j=this,k=j.get("el"),m=l?"addClass":"removeClass";k.find("button").attr("disabled",l)[m](f+"button-disabled")},_uiSetChecked:function(l){var j=this,k=j.get("el"),m=l?"addClass":"removeClass";k.find("button")[m](f+"button-checked")},_uiSetText:function(k){var j=this,l=j.get("el");l.find("button").text(k)},_uiSetbtnCls:function(k){var j=this,l=j.get("el");l.find("button").addClass(k)}},{ATTRS:{checked:{value:false},tpl:{view:true,value:'<button type="button" class="{btnCls}">{text}</button>'},btnCls:{sync:false},text:{sync:false,value:""}}},{xclass:"bar-item-button",priority:2});var a=h.extend({renderUI:function(){var j=this.get("el");j.attr("role","separator")}},{xclass:"bar-item-separator",priority:2});var e=h.extend({},{ATTRS:{width:{view:true,value:2}}},{xclass:"bar-item-spacer",priority:2});var g=h.extend({_uiSetText:function(l){var j=this,k=j.get("el");k.html(l)}},{ATTRS:{text:{value:""}}},{xclass:"bar-item-text",priority:2});h.types={"button":b,"separator":a,"spacer":e,"text":g};return h});define("bui/toolbar/bar",function(){var b=BUI.Component,d=b.UIBase;var c=b.View.extend({renderUI:function(){var e=this.get("el");e.attr("role","toolbar");if(!e.attr("id")){e.attr("id",BUI.guid("bar"))}}});var a=b.Controller.extend([d.ChildList],{getItem:function(e){return this.getChild(e)}},{ATTRS:{elTagName:{view:true,value:"ul"},defaultChildClass:{value:"bar-item"},focusable:{value:false},xview:{value:c}}},{xclass:"bar",priority:1});return a});define("bui/toolbar/pagingbar",["bui/toolbar/bar"],function(f){var m=f("bui/toolbar/bar"),n=BUI.Component,e=n.UIBase.Bindable;var h=BUI.prefix,c="first",i="prev",l="next",b="last",a="skip",d="totalPage",g="curPage",k="totalCount";var j=m.extend([e],{initializer:function(){var o=this,r=o.get("children"),q=o.get("items"),p=o.get("store");if(!q||q.length){q=o._getItems();BUI.each(q,function(s){r.push(s)})}if(p&&p.get("pageSize")){o.set("pageSize",p.get("pageSize"))}},bindUI:function(){var o=this;o._bindButtonEvent()},jumpToPage:function(t){if(t<=0||t>this.get("totalPage")){return}var p=this,r=p.get("store"),q=p.get("pageSize"),s=t-1,u=s*q;var o=p.fire("beforepagechange",{from:p.get("curPage"),to:t});if(r&&o!==false){r.load({start:u,limit:q,pageIndex:s})
}},_afterStoreLoad:function(v,p){var u=this,t=u.get("pageSize"),o=0,q,w,s,r;o=v.get("start");w=v.getTotalCount();q=w-o>t?o+v.getCount():w;r=parseInt((w+t-1)/t,10);r=r>0?r:1;s=parseInt(o/t,10)+1;u.set("start",o);u.set("end",q);u.set("totalCount",w);u.set("curPage",s);u.set("totalPage",r);u._setAllButtonsState();u._setNumberPages()},_bindButtonEvent:function(){var o=this;o._bindButtonItemEvent(c,function(){o.jumpToPage(1)});o._bindButtonItemEvent(i,function(){o.jumpToPage(o.get("curPage")-1)});o._bindButtonItemEvent(l,function(){o.jumpToPage(o.get("curPage")+1)});o._bindButtonItemEvent(b,function(){o.jumpToPage(o.get("totalPage"))});o._bindButtonItemEvent(a,function(){p()});var q=o.getItem(g);if(q){q.get("el").on("keyup",function(r){r.stopPropagation();if(r.keyCode===13){p()}})}function p(){var r=parseInt(o._getCurrentPageValue(),10);if(o._isPageAllowRedirect(r)){o.jumpToPage(r)}else{o._setCurrentPageValue(o.get("curPage"))}}},_bindButtonItemEvent:function(r,q){var o=this,p=o.getItem(r);if(p){p.on("click",q)}},onLoad:function(q){var o=this,p=o.get("store");o._afterStoreLoad(p,q)},_getItems:function(){var o=this,p=o.get("items");if(p&&p.length){return p}p=[];p.push(o._getButtonItem(c));p.push(o._getButtonItem(i));p.push(o._getSeparator());p.push(o._getTextItem(d));p.push(o._getTextItem(g));p.push(o._getButtonItem(a));p.push(o._getSeparator());p.push(o._getButtonItem(l));p.push(o._getButtonItem(b));p.push(o._getSeparator());p.push(o._getTextItem(k));return p},_getButtonItem:function(p){var o=this;return{id:p,xclass:"bar-item-button",text:o.get(p+"Text"),disabled:true,elCls:o.get(p+"Cls")}},_getSeparator:function(){return{xclass:"bar-item-separator"}},_getTextItem:function(p){var o=this;return{id:p,xclass:"bar-item-text",text:o._getTextItemTpl(p)}},_getTextItemTpl:function(q){var o=this,p={};p[q]=o.get(q);return BUI.substitute(this.get(q+"Tpl"),p)},_isPageAllowRedirect:function(p){var o=this;return p&&p>0&&p<=o.get("totalPage")&&p!==o.get("curPage")},_setAllButtonsState:function(){var o=this,p=o.get("store");if(p){o._setButtonsState([i,l,c,b,a],true)}if(o.get("curPage")===1){o._setButtonsState([i,c],false)}if(o.get("curPage")===o.get("totalPage")){o._setButtonsState([l,b],false)}},_setButtonsState:function(r,p){var o=this,q=o.get("children");BUI.each(q,function(s){if(BUI.Array.indexOf(s.get("id"),r)!==-1){s.set("disabled",!p)}})},_setNumberPages:function(){var o=this,p=o.getItem(d),q=o.getItem(k);if(p){p.set("content",o._getTextItemTpl(d))}o._setCurrentPageValue(o.get(g));if(q){q.set("content",o._getTextItemTpl(k))}},_getCurrentPageValue:function(q){var o=this;q=q||o.getItem(g);var p=q.get("el").find("input");return p.val()},_setCurrentPageValue:function(r,q){var o=this;q=q||o.getItem(g);var p=q.get("el").find("input");p.val(r)}},{ATTRS:{firstText:{value:"\u9996 \u9875"},firstCls:{value:h+"pb-first"},prevText:{value:"\u4e0a\u4e00\u9875"},prevCls:{value:h+"pb-prev"},nextText:{value:"\u4e0b\u4e00\u9875"},nextCls:{value:h+"pb-next"},lastText:{value:"\u672b \u9875"},lastCls:{value:h+"pb-last"},skipText:{value:"\u786e\u5b9a"},skipCls:{value:h+"pb-skip"},totalPageTpl:{value:"\u5171 {totalPage} \u9875"},curPageTpl:{value:'\u7b2c <input type="text" '+'autocomplete="off" class="'+h+'pb-page" size="20" name="inputItem"> \u9875'},totalCountTpl:{value:"\u5171{totalCount}\u6761\u8bb0\u5f55"},curPage:{value:0},totalPage:{value:0},totalCount:{value:0},pageSize:{value:30},store:{}},ID_FIRST:c,ID_PREV:i,ID_NEXT:l,ID_LAST:b,ID_SKIP:a,ID_TOTAL_PAGE:d,ID_CURRENT_PAGE:g,ID_TOTAL_COUNT:k},{xclass:"pagingbar",priority:2});return j});define("bui/toolbar/numberpagingbar",["bui/toolbar/pagingbar"],function(d){var c=BUI.Component,e=d("bui/toolbar/pagingbar");var f=BUI.prefix,b="numberContainer",a=f+"button-number";var g=e.extend({_getItems:function(){var h=this,i=h.get("items");if(i){return i}i=[];i.push(h._getButtonItem(e.ID_PREV));i.push(h._getButtonItem(e.ID_NEXT));return i},_getButtonItem:function(i){var h=this;return{id:i,content:'<a href="javascript:;">'+h.get(i+"Text")+"</a>",disabled:true}},_bindButtonEvent:function(){var h=this,i=h.get("numberButtonCls");h.constructor.superclass._bindButtonEvent.call(this);h.get("el").delegate("a","click",function(j){j.preventDefault()});h.on("click",function(k){var j=k.target;if(j&&j.get("el").hasClass(i)){var l=j.get("id");h.jumpToPage(l)}})},_setNumberPages:function(){var h=this;h._setNumberButtons()},_setNumberButtons:function(){var h=this,l=h.get("curPage"),j=h.get("totalPage"),i=h._getNumberItems(l,j),k;h._clearNumberButtons();BUI.each(i,function(m){h._appendNumberButton(m)});k=h.getItem(l);if(k){k.set("selected",true)}},_appendNumberButton:function(i){var h=this,k=h.getItemCount();var j=h.addItemAt(i,k-1)},_clearNumberButtons:function(){var h=this,i=h.getItems(),j=h.getItemCount();while(j>2){h.removeItemAt(j-2);j=h.getItemCount()}},_getNumberItems:function(o,l){var p=this,s=[],n=p.get("maxLimitCount"),h=p.get("showRangeCount"),m;function q(v,u){for(var t=v;t<=u;t++){s.push(p._getNumberItem(t))
}}function k(){s.push(p._getEllipsisItem())}if(l<n){m=l;q(1,l)}else{var j=(o<=n)?1:(o-h),i=o+h,r=i<l?(i>n?i:n):l;if(j>1){q(1,1);if(j>2){k()}}m=r;q(j,r)}if(m<l){if(m<l-1){k()}q(l,l)}return s},_getEllipsisItem:function(){var h=this;return{disabled:true,content:h.get("ellipsisTpl")}},_getNumberItem:function(i){var h=this;return{id:i,elCls:h.get("numberButtonCls")}}},{ATTRS:{itemStatusCls:{value:{selected:"active",disabled:"disabled"}},itemTpl:{value:'<a href="">{id}</a>'},prevText:{value:"<<"},nextText:{value:">>"},maxLimitCount:{value:4},showRangeCount:{value:1},numberButtonCls:{value:a},ellipsisTpl:{value:'<a href="#">...</a>'}}},{xclass:"pagingbar-number",priority:3});return g});define("bui/progressbar",["bui/common","bui/progressbar/base","bui/progressbar/load"],function(b){var c=b("bui/common"),a=c.namespace("ProgressBar");c.mix(a,{Base:b("bui/progressbar/base"),Load:b("bui/progressbar/load")});return a});define("bui/progressbar/base",["bui/common"],function(b){var d=b("bui/common");var a=d.Component.View.extend({_uiSetPercent:function(f){var e=this,g=e.get("el").children();if(!d.isArray(f)){f=[f]}d.each(g,function(i,h){$(i).width(f[h]+"%")})}},{ATTRS:{percent:{}}});var c=d.Component.Controller.extend({},{ATTRS:{percent:{view:true,value:0},tpl:{value:'<div class="progress-bar-inner"></div>'},xview:{value:a}}},{xclass:"progress-bar"});return c});define("bui/progressbar/load",["bui/progressbar/base"],function(b){var c=b("bui/progressbar/base"),a=0,e=1,d=2;var f=c.extend({bindUI:function(){var g=this;g.on("afterPercentChange",function(i){if(g.isLoading()){var h=g.get("percent");if(h==100){g.onCompleted()}g.onChange()}})},start:function(){var g=this;if(!g.isLoading()){g.onstart()}},complete:function(){var g=this;clearTimeout(g.get("t"));g.set("percent",100)},cancel:function(){var g=this;clearTimeout(g.get("t"));if(g.get("percent")){g.set("percent",0)}g.set("status",a)},onstart:function(){var g=this,h=g.get("cfg");g.set("percent",0);g.set("status",e);g.fire("start",h);g._startLoad()},onChange:function(){var g=this;g.fire("loadchange")},onCompleted:function(){var g=this;g.set("status",d);g.fire("completed")},isLoading:function(){return this.get("status")===e},isCompleted:function(){return this.get("status")===d},_startLoad:function(){var g=this,j=g.get("ajaxCfg"),h=g.get("interval"),i;j.success=function(l){var k=l.percent;g.set("percent",k);if(k<100&&g.isLoading()){i=setTimeout(function(){$.ajax(j)},h);g.set("t",i)}};$.ajax(j)}},{ATTRS:{status:{value:0},ajaxCfg:{},interval:{value:500},events:{value:["start","loadchange","completed"]}}},{xclass:"progress-bar-load"});return f});define("bui/calendar",["bui/common","bui/calendar/calendar","bui/calendar/monthpicker","bui/calendar/datepicker"],function(a){var b=a("bui/common"),c=b.namespace("Calendar");b.mix(c,{Calendar:a("bui/calendar/calendar"),MonthPicker:a("bui/calendar/monthpicker"),DatePicker:a("bui/calendar/datepicker")});return c});define("bui/calendar/monthpicker",["bui/common","bui/overlay","bui/list","bui/toolbar"],function(i){var q=i("bui/common"),n=q.Component,j=i("bui/overlay").Overlay,c=i("bui/list").SimpleList,b=i("bui/toolbar"),f=q.prefix,r="x-monthpicker-month",k="data-month",l="data-year",a="x-monthpicker-year",d="x-monthpicker-yearnav",s="x-monthpicker-selected",m="x-monthpicker-item",h=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"];function g(){return $.map(h,function(u,t){return{text:u,value:t}})}var o=c.extend({bindUI:function(){var t=this;t.get("el").delegate("a","click",function(u){u.preventDefault()}).delegate("."+r,"dblclick",function(){t.fire("dblclick")})}},{ATTRS:{itemTpl:{view:true,value:'<li class="'+m+' x-monthpicker-month"><a href="#" hidefocus="on">{text}</a></li>'},itemCls:{value:m},items:{view:true,value:g()},elCls:{view:true,value:"x-monthpicker-months"}}},{xclass:"calendar-month-panel"});var e=c.extend({bindUI:function(){var t=this,u=t.get("el");u.delegate("a","click",function(v){v.preventDefault()});u.delegate("."+a,"dblclick",function(){t.fire("dblclick")});u.delegate(".x-icon","click",function(w){var v=$(w.currentTarget);if(v.hasClass(d+"-prev")){t._prevPage()}else{if(v.hasClass(d+"-next")){t._nextPage()}}});t.on("itemselected",function(v){if(v.item){t.setInternal("year",v.item.value)}})},_prevPage:function(){var t=this,v=t.get("start"),u=t.get("yearCount");t.set("start",v-u)},_nextPage:function(){var t=this,v=t.get("start"),u=t.get("yearCount");t.set("start",v+u)},_uiSetStart:function(){var t=this;t._setYearsContent()},_uiSetYear:function(u){var t=this,w=t.findItemByField("value",u);if(w){t.setSelectedByField(u)}else{t.set("start",u)}},_setYearsContent:function(){var t=this,w=t.get("year"),z=t.get("start"),y=t.get("yearCount"),u=[];for(var v=z;v<z+y;v++){var x=v.toString();u.push({text:x,value:v})}t.set("items",u);t.setSelectedByField(w)}},{ATTRS:{items:{view:true,value:[]},elCls:{view:true,value:"x-monthpicker-years"},itemCls:{value:m},year:{},start:{value:new Date().getFullYear()},yearCount:{value:10},itemTpl:{view:true,value:'<li class="'+m+" "+a+'"><a href="#" hidefocus="on">{text}</a></li>'},tpl:{view:true,value:'<div class="'+d+'">'+'<span class="'+d+'-prev x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-left"></span></span>'+'<span class="'+d+'-next x-icon x-icon-normal x-icon-small"><span class="icon icon-caret icon-caret-right"></span></span>'+"</div>"+"<ul></ul>"}}},{xclass:"calendar-year-panel"});
var p=j.extend({initializer:function(){var t=this,v=t.get("children"),w=new o(),u=new e(),x=t._createFooter();v.push(w);v.push(u);v.push(x);t.set("yearPanel",u);t.set("monthPanel",w)},bindUI:function(){var t=this;t.get("monthPanel").on("itemselected",function(u){if(u.item){t.setInternal("month",u.item.value)}}).on("dblclick",function(){t._successCall()});t.get("yearPanel").on("itemselected",function(u){if(u.item){t.setInternal("year",u.item.value)}}).on("dblclick",function(){t._successCall()})},_successCall:function(){var t=this,u=t.get("success");if(u){u.call(t)}},_createFooter:function(){var t=this;return new b.Bar({elCls:f+"clear x-monthpicker-footer",children:[{xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",handler:function(){t._successCall()}},{xclass:"bar-item-button",text:"\u53d6\u6d88",btnCls:"button button-small last",handler:function(){var u=t.get("cancel");if(u){u.call(t)}}}]})},_uiSetYear:function(t){this.get("yearPanel").set("year",t)},_uiSetMonth:function(t){this.get("monthPanel").setSelectedByField(t)}},{ATTRS:{footer:{},align:{value:{}},year:{},success:{value:function(){}},cancel:{value:function(){}},width:{value:180},month:{},yearPanel:{},monthPanel:{}}},{xclass:"monthpicker"});return p});define("bui/calendar/header",["bui/common"],function(b){var g=b("bui/common"),e=g.prefix,j=g.Component,a="year-text",c="month-text",i="x-datepicker-arrow",f="x-datepicker-prev",h="x-datepicker-next";var d=j.Controller.extend({bindUI:function(){var k=this,l=k.get("el");l.delegate("."+i,"click",function(n){n.preventDefault();var m=$(n.currentTarget);if(m.hasClass(h)){k.nextMonth()}else{if(m.hasClass(f)){k.prevMonth()}}});l.delegate(".x-datepicker-month","click",function(){k.fire("headerclick")})},setMonth:function(m,n){var k=this,l=k.get("year"),o=k.get("month");if(m!==l||n!==o){k.set("year",m);k.set("month",n);k.fire("monthchange",{year:m,month:n})}},nextMonth:function(){var k=this,l=new Date(k.get("year"),k.get("month")+1);k.setMonth(l.getFullYear(),l.getMonth())},prevMonth:function(){var k=this,l=new Date(k.get("year"),k.get("month")-1);k.setMonth(l.getFullYear(),l.getMonth())},_uiSetYear:function(l){var k=this;k.get("el").find("."+a).text(l)},_uiSetMonth:function(l){var k=this;k.get("el").find("."+c).text(l+1)}},{ATTRS:{year:{sync:false},month:{sync:false,setter:function(k){this.set("monthText",k+1)}},monthText:{},tpl:{view:true,value:'<div class="'+i+" "+f+'"><span class="icon icon-white icon-caret  icon-caret-left"></span></div>'+'<div class="x-datepicker-month">'+'<div class="month-text-container">'+'<span><span class="year-text">{year}</span>\u5e74 <span class="month-text">{monthText}</span>\u6708</span>'+'<span class="'+e+"caret "+e+'caret-down"></span>'+"</div>"+"</div>"+'<div class="'+i+" "+h+'"><span class="icon icon-white icon-caret  icon-caret-right"></span></div>'},elCls:{view:true,value:"x-datepicker-header"},events:{value:{"monthchange":true}}}},{xclass:"calendar-header"});return d});define("bui/calendar/panel",["bui/common"],function(h){var l=h("bui/common"),n=l.Component,o=l.Date,k="x-datepicker-date",m="x-datepicker-today",d="x-datepicker-disabled",e="x-datepicker-active",g="data-date",c="isoDate",b="x-datepicker-selected",f=6,p={deactive:"prevday",active:"active",disabled:"disabled"},i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var j=n.View.extend({renderUI:function(){this.updatePanel()},updatePanel:function(){var q=this,s=q.get("el"),r=s.find("tbody"),t=q._getPanelInnerTpl();r.empty();$(t).appendTo(r)},_getPanelInnerTpl:function(){var r=this,q=r._getFirstDate(),u=[];for(var t=0;t<f;t++){var s=o.addWeek(t,q);u.push(r._getWeekTpl(s))}return u.join("")},_getWeekTpl:function(r){var q=this,u=q.get("weekTpl"),v=[];for(var t=0;t<i.length;t++){var s=o.addDay(t,r);v.push(q._getDayTpl(s))}return l.substitute(u,{daysTpl:v.join("")})},_getDayTpl:function(u){var q=this,x=q.get("dayTpl"),s=u.getDay(),t=q._isToday(u)?m:"",r=i[s],w=u.getDate(),v=q._isInRange(u)?(q._isCurrentMonth(u)?p.active:p.deactive):p.disabled;return l.substitute(x,{dayOfWeek:r,dateType:v,dateNumber:w,todayCls:t,date:o.format(u,c)})},_getFirstDate:function(s,u){var q=this,t=q._getMonthFirstDate(s,u),r=t.getDay();return o.addDay(r*-1,t)},_getMonthFirstDate:function(r,s){var q=this,r=r||q.get("year"),s=s||q.get("month");return new Date(r,s)},_isCurrentMonth:function(q){return q.getMonth()===this.get("month")},_isToday:function(r){var q=new Date();return q.getFullYear()===r.getFullYear()&&q.getMonth()===r.getMonth()&&q.getDate()===r.getDate()},_isInRange:function(r){var q=this,t=q.get("maxDate"),s=q.get("minDate");if(s&&r<s){return false}if(t&&r>t){return false}return true},_clearSelectedDate:function(){var q=this;q.get("el").find("."+b).removeClass(b)},_findDateElement:function(t){var r=this,s=o.format(t,c),u=r.get("el").find("."+k),q=null;if(s){u.each(function(v,w){if($(w).attr("title")===s){q=$(w);return false}})}return q},_setSelectedDate:function(s){var q=this,r=q._findDateElement(s);
q._clearSelectedDate();if(r){r.addClass(b)}}},{ATTRS:{}});var a=n.Controller.extend({initializer:function(){var q=this,r=new Date();if(!q.get("year")){q.set("year",r.getFullYear())}if(!q.get("month")){q.set("month",r.getMonth())}},bindUI:function(){var q=this,r=q.get("el");r.delegate("."+k,"click",function(s){s.preventDefault()});r.delegate("."+d,"mouseup",function(s){s.stopPropagation()})},performActionInternal:function(t){var q=this,s=$(t.target).closest("."+k);if(s){var r=s.attr("title");if(r){r=o.parse(r);if(q.get("view")._isInRange(r)){q.set("selected",r)}}}},setMonth:function(s,t){var q=this,r=q.get("year"),u=q.get("month");if(s!==r||t!==u){q.set("year",s);q.set("month",t);q.get("view").updatePanel()}},_uiSetSelected:function(r,s){var q=this;if(!(s&&s.prevVal&&o.isDateEquals(r,s.prevVal))){q.setMonth(r.getFullYear(),r.getMonth());q.get("view")._setSelectedDate(r);q.fire("selectedchange",{date:r})}},_uiSetMaxDate:function(q){if(q){this.get("view").updatePanel()}},_uiSetMinDate:function(q){if(q){this.get("view").updatePanel()}}},{ATTRS:{year:{view:true},month:{view:true},selected:{},focusable:{value:true},dayTpl:{view:true,value:'<td class="x-datepicker-date x-datepicker-{dateType} {todayCls} day-{dayOfWeek}" title="{date}">'+'<a href="#" hidefocus="on" tabindex="1">'+"<em><span>{dateNumber}</span></em>"+"</a>"+"</td>"},events:{value:{"click":false,"selectedchange":false}},maxDate:{view:true,setter:function(q){if(q){if(l.isString(q)){return o.parse(q)}return q}}},minDate:{view:true,setter:function(q){if(q){if(l.isString(q)){return o.parse(q)}return q}}},weekTpl:{view:true,value:"<tr>{daysTpl}</tr>"},tpl:{view:true,value:'<table class="x-datepicker-inner" cellspacing="0">'+"<thead>"+"<tr>"+'<th  title="Sunday"><span>\u65e5</span></th>'+'<th  title="Monday"><span>\u4e00</span></th>'+'<th  title="Tuesday"><span>\u4e8c</span></th>'+'<th  title="Wednesday"><span>\u4e09</span></th>'+'<th  title="Thursday"><span>\u56db</span></th>'+'<th  title="Friday"><span>\u4e94</span></th>'+'<th  title="Saturday"><span>\u516d</span></th>'+"</tr>"+"</thead>"+'<tbody class="x-datepicker-body">'+"</tbody>"+"</table>"},xview:{value:j}}},{xclass:"calendar-panel",priority:0});return a});define("bui/calendar/calendar",["bui/picker","bui/calendar/monthpicker","bui/calendar/header","bui/calendar/panel","bui/toolbar"],function(i){var t=i("bui/common"),d=t.prefix,l="x-datepicker-time",k="x-datepicker-hour",u="x-datepicker-minute",g="x-datepicker-second",c="x-timepicker",h=i("bui/picker").ListPicker,j=i("bui/calendar/monthpicker"),p=i("bui/calendar/header"),q=i("bui/calendar/panel"),b=i("bui/toolbar"),o=t.Component,a=t.Date;function s(){var v=new Date();return new Date(v.getFullYear(),v.getMonth(),v.getDate())}function f(v){if(v<10){return"0"+v}return v.toString()}function r(v){var w=[];for(var x=0;x<v;x++){w.push({text:f(x),value:f(x)})}return w}function n(w,v){var x=w.get("el").find("."+v);return parseInt(x.val())}function e(w,v,y){var x=w.get("el").find("."+v);if(t.isNumber(y)){y=f(y)}x.val(y)}var m=o.Controller.extend({initializer:function(){var v=this,y=v.get("children"),A=new p(),w=new q(),z=v.get("footer")||v._createFooter(),x=v.get("monthPicker")||v._createMonthPicker();y.push(A);y.push(w);y.push(z);y.push(x);v.set("header",A);v.set("panel",w);v.set("footer",z);v.set("monthPicker",x)},renderUI:function(){var v=this,w=v.get("children");if(v.get("showTime")){var x=v.get("timepicker")||v._initTimePicker();w.push(x);v.set("timepicker",x)}},bindUI:function(){var v=this,x=v.get("header"),w=v.get("panel");w.on("selectedchange",function(z){var y=z.date;if(!a.isDateEquals(y,v.get("selectedDate"))){v.set("selectedDate",y)}});if(!v.get("showTime")){w.on("click",function(){v.fire("accept")})}else{v._initTimePickerEvent()}x.on("monthchange",function(y){v._setYearMonth(y.year,y.month)});x.on("headerclick",function(){var y=v.get("monthPicker");y.set("year",x.get("year"));y.set("month",x.get("month"));y.show()})},_initTimePicker:function(){var v=this,w=new h({elCls:c,children:[{itemTpl:'<li><a href="#">{text}</a></li>'}],autoAlign:false,align:{node:v.get("el"),points:["bl","bl"],offset:[0,-30]},trigger:v.get("el").find("."+l)});w.render();v._initTimePickerEvent(w);return w},_initTimePickerEvent:function(w){var v=this,w=v.get("timepicker");if(!w){return}w.get("el").delegate("a","click",function(x){x.preventDefault()});w.on("triggerchange",function(y){var x=y.curTrigger;if(x.hasClass(k)){w.get("list").set("items",r(24))}else{w.get("list").set("items",r(60))}});w.on("selectedchange",function(y){var x=y.curTrigger,z=y.value;if(x.hasClass(k)){v.setInternal("hour",z)}else{if(x.hasClass(u)){v.setInternal("minute",z)}else{v.setInternal("second",z)}}})},_setYearMonth:function(y,z){var v=this,x=v.get("selectedDate"),w=x.getDate();if(y!==x.getFullYear()||z!==x.getMonth()){v.set("selectedDate",new Date(y,z,w))}},_createMonthPicker:function(){var v=this;return new j({effect:{effect:"slide",duration:300},visibleMode:"display",success:function(){var w=this;v._setYearMonth(w.get("year"),w.get("month"));
w.hide()},cancel:function(){this.hide()}})},_createFooter:function(){var v=this,x=this.get("showTime"),w=[];if(x){w.push({content:v.get("timeTpl")});w.push({xclass:"bar-item-button",text:"\u786e\u5b9a",btnCls:"button button-small button-primary",listeners:{click:function(){v.fire("accept")}}})}else{w.push({xclass:"bar-item-button",text:"\u4eca\u5929",btnCls:"button button-small",listeners:{click:function(){var y=s();v.set("selectedDate",y);v.fire("accept")}}})}return new b.Bar({elCls:d+"calendar-footer",children:w})},_uiSetSelectedDate:function(x){var w=this,y=x.getFullYear(),z=x.getMonth();w.get("header").setMonth(y,z);w.get("panel").set("selected",x);w.fire("datechange",{date:x})},_uiSetHour:function(w){e(this,k,w)},_uiSetMinute:function(w){e(this,u,w)},_uiSetSecond:function(w){e(this,g,w)},_uiSetMaxDate:function(x){var w=this;w.get("panel").set("maxDate",x)},_uiSetMinDate:function(x){var w=this;w.get("panel").set("minDate",x)}},{ATTRS:{header:{},panel:{},maxDate:{},minDate:{},monthPicker:{},timepicker:{},width:{value:180},events:{value:{"click":false,"accept":false,"datechange":false,"monthchange":false}},showTime:{value:false},timeTpl:{value:'<input type="text" readonly class="'+l+" "+k+'" />:<input type="text" readonly class="'+l+" "+u+'" />:<input type="text" readonly class="'+l+" "+g+'" />'},selectedDate:{value:s()},hour:{value:new Date().getHours()},minute:{value:new Date().getMinutes()},second:{value:0}}},{xclass:"calendar",priority:0});return m});define("bui/calendar/datepicker",["bui/common","bui/picker","bui/calendar/calendar"],function(c){var e=c("bui/common"),b=c("bui/picker").Picker,f=c("bui/calendar/calendar"),a=e.Date;var d=b.extend({initializer:function(){var g=this,h=g.get("children"),i=new f({showTime:g.get("showTime")});h.push(i);g.set("calendar",i)},setSelectedValue:function(j){var g=this,i=this.get("calendar"),h=a.parse(j);h=h||new Date(new Date().setSeconds(0));i.set("selectedDate",a.getDate(h));if(g.get("showTime")){i.set("hour",h.getHours());i.set("minute",h.getMinutes());i.set("second",h.getSeconds())}},getSelectedValue:function(){var g=this,i=g.get("calendar"),h=a.getDate(i.get("selectedDate"));if(g.get("showTime")){h=a.addHour(i.get("hour"),h);h=a.addMinute(i.get("minute"),h);h=a.addSecond(i.get("second"),h)}return h},getSelectedText:function(){return a.format(this.getSelectedValue(),this._getFormatType())},_getFormatType:function(){if(this.get("showTime")){return"yyyy-mm-dd HH:MM:ss"}return"yyyy-mm-dd"},_uiSetMaxDate:function(h){var g=this;g.get("calendar").set("maxDate",h)},_uiSetMinDate:function(h){var g=this;g.get("calendar").set("minDate",h)}},{ATTRS:{showTime:{value:false},maxDate:{},minDate:{},changeEvent:{value:"accept"},hideEvent:{value:"accept"},calendar:{}}},{xclass:"datepicker",priority:0});return d});define("bui/editor",["bui/common","bui/form","bui/editor/editor","bui/editor/record","bui/editor/dialog"],function(c){var d=c("bui/common"),b=c("bui/form"),a=d.namespace("Editor");d.mix(a,{Editor:c("bui/editor/editor"),RecordEditor:c("bui/editor/record"),DialogEditor:c("bui/editor/dialog")});return a});define("bui/editor/mixin",function(a){function b(e){var d=e,f=d.get("controlCfgField"),g=d.get(f),h=d.addChild(g);d.setInternal(f,h)}var c=function(){b(this)};c.ATTRS={acceptEvent:{value:"autohide"},preventHide:{value:true},changeSourceEvent:{value:"show triggerchange"},ignoreInputFields:{value:false},innerValueField:{},emptyValue:{},controlCfgField:{},autoUpdate:{value:true},events:{value:{accept:false,cancel:false}}};c.prototype={__bindUI:function(){var d=this,f=d.get("acceptEvent"),e=d.get("changeSourceEvent");if(f){d.on(f,function(){if(d.accept()){return}else{if(d.get("preventHide")){return false}else{d.cancel()}}})}if(e){d.on(e,function(){d.setValue(d.getSourceValue());if(d.get("visible")){d.focus()}})}},getInnerControl:function(){var d=this,e=d.get("children");return e[0]},setValue:function(f){var e=this,d=e.getInnerControl();e.set("editValue",f);e.clearControlValue();d.set(e.get("innerValueField"),f);if(!f){e.valid()}},getValue:function(){var e=this,d=e.getInnerControl();return d.get(e.get("innerValueField"))},isValid:function(){var e=this,d=e.getInnerControl();return d.isValid?d.isValid():true},valid:function(){var e=this,d=e.getInnerControl();d.valid&&d.valid()},getErrors:function(){var e=this,d=e.getInnerControl();return d.getErrors?d.getErrors():[]},isChange:function(){var d=this,e=d.get("editValue"),f=d.getValue();return e!==f},clearValue:function(){this.clearControlValue();this.clearErrors()},clearControlValue:function(){var e=this,d=e.getInnerControl();d.set(e.get("innerValueField"),e.get("emptyValue"))},clearErrors:function(){var e=this,d=e.getInnerControl();d.clearErrors()},getSourceValue:function(){},updateSource:function(){},handleNavEsc:function(){this.cancel()},handleNavEnter:function(e){var d=e.target;if(d.tagName==="TEXTAREA"){return}if(d.tagName==="BUTTON"){$(d).trigger("click")}this.accept()},focus:function(){var e=this,d=e.getInnerControl();d.focus&&d.focus()
},accept:function(){var d=this,e;d.valid();if(!d.isValid()){return false}e=d.getValue();if(d.get("autoUpdate")){d.updateSource(e)}if(d.fire("beforeaccept",{value:e})==false){return}d.fire("accept",{value:e,editValue:d.get("editValue")});d.hide();return true},cancel:function(){this.fire("cancel");this.clearValue();this.close()}};return c});define("bui/editor/editor",["bui/common","bui/overlay","bui/editor/mixin"],function(b){var d=b("bui/common"),a=b("bui/overlay").Overlay;CLS_TIPS="x-editor-tips",Mixin=b("bui/editor/mixin");var c=a.extend([Mixin],{bindUI:function(){var f=this,e=f.getInnerControl();f.on("validchange",function(g){if(!f.isValid()&&f.get("visible")){f._showError(f.getErrors())}else{f._hideError()}});f.on("hide",function(){f._hideError()});f.on("show",function(){if(!f.isValid()){f._showError(f.getErrors())}})},_initOverlay:function(){var e=this,f=new a({children:[{xclass:"simple-list",itemTpl:'<li><span class="x-icon x-icon-mini x-icon-error" title="{error}">!</span>&nbsp;<span>{error}</span></li>'}],elCls:CLS_TIPS,autoRender:true});e.set("overlay",f);return f},_getErrorList:function(){var e=this,f=e.get("overlay");return f&&f.get("children")[0]},_showError:function(j){var e=this,g=e.get("overlay")||e._initOverlay(),h=e._getErrorList(),i=e.get("errorAlign"),f=d.Array.map(j,function(k){return{error:k}});h.set("items",f);i.node=e.get("el");g.set("align",i);g.show()},_hideError:function(){var e=this,f=e.get("overlay");f&&f.hide()},getSourceValue:function(){var e=this,f=e.get("curTrigger");return f.text()},updateSource:function(g){var e=this,f=e.get("curTrigger");if(f&&f.length){f.text(g)}},_uiSetWidth:function(g){var f=this;if(g!=null){var e=f.getInnerControl();if(e.set){e.set("width",g)}}}},{ATTRS:{innerValueField:{value:"value"},emptyValue:{value:""},autoHide:{value:true},controlCfgField:{value:"field"},defaultChildCfg:{value:{tpl:"",forceFit:true,errorTpl:""}},defaultChildClass:{value:"form-field"},align:{value:{points:["tl","tl"]}},errorAlign:{value:{points:["bl","tl"],offset:[0,10]}},overlay:{},field:{value:{}}}},{xclass:"editor"});return c});define("bui/editor/record",["bui/common","bui/editor/editor"],function(b){var d=b("bui/common"),a=b("bui/editor/editor");var c=a.extend({getSourceValue:function(){return this.get("record")},updateSource:function(g){var e=this,f=e.get("record");d.mix(f,g)},_uiSetRecord:function(e){this.setValue(e)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},emptyValue:{value:{}},autoHide:{value:false},record:{value:{}},controlCfgField:{value:"form"},form:{value:{}},errorAlign:{value:{points:["tr","tl"],offset:[10,0]}},defaultChildCfg:{valueFn:function(){var e=this;return{xclass:"form",errorTpl:"",showError:true,showChildError:true,defaultChildCfg:{elCls:"bui-inline-block",tpl:"",forceFit:true},buttons:[{btnCls:"button button-primary",text:"\u786e\u5b9a",handler:function(){e.accept()}},{btnCls:"button",text:"\u53d6\u6d88",handler:function(){e.cancel()}}]}}}}},{xclass:"record-editor"});return c});define("bui/editor/dialog",["bui/overlay","bui/editor/mixin"],function(b){var a=b("bui/overlay").Dialog,d=b("bui/editor/mixin");var c=a.extend([d],{getSourceValue:function(){return this.get("record")},handleNavEnter:function(g){var e=this,h=e.get("success"),f=g.target;if(f.tagName==="TEXTAREA"){return}if(f.tagName==="BUTTON"){$(f).trigger("click")}if(h){h.call(e)}else{this.accept()}},cancel:function(){if(this.onCancel()!==false){this.fire("cancel");this.clearValue();this.close()}},updateSource:function(g){var e=this,f=e.get("record");BUI.mix(f,g)},_uiSetRecord:function(e){this.setValue(e)}},{ATTRS:{innerValueField:{value:"record"},acceptEvent:{value:""},record:{value:{}},emptyValue:{value:{}},controlCfgField:{value:"form"},changeSourceEvent:{value:""},defaultChildCfg:{value:{xclass:"form-horizontal"}},focusable:{value:true},success:{value:function(){this.accept()}},form:{value:{}}}},{xclass:"dialog-editor"});return c});define("bui/grid",["bui/common","bui/grid/simplegrid","bui/grid/grid","bui/grid/column","bui/grid/header","bui/grid/format","bui/grid/plugins"],function(b){var c=b("bui/common"),a=c.namespace("Grid");c.mix(a,{SimpleGrid:b("bui/grid/simplegrid"),Grid:b("bui/grid/grid"),Column:b("bui/grid/column"),Header:b("bui/grid/header"),Format:b("bui/grid/format"),Plugins:b("bui/grid/plugins")});return a});define("bui/grid/simplegrid",["bui/common","bui/list"],function(c){var h=c("bui/common"),m=c("bui/list"),l=h.Component,b=l.UIBase,e=h.prefix,a=e+"grid",i=a+"-row",g=e+"grid-row-odd",f=e+"grid-row-even",k=e+"grid-border",n=e+"grid-row-first";var d=m.SimpleListView.extend({setColumns:function(q){var o=this,p=o.get("headerRowEl");q=q||o.get("columns");p.empty();h.each(q,function(r){o._createColumn(r,p)})},_createColumn:function(q,p){var o=this,r=h.substitute(o.get("columnTpl"),q);$(r).appendTo(p)},getItemTpl:function(q,s){var o=this,u=o.get("columns"),v=o.get("rowTpl"),p=s%2===0?g:f,t=[],r;h.each(u,function(x){var w=x["dataIndex"];t.push(o._getCellTpl(x,w,q))});
v=h.substitute(v,{cellsTpl:t.join(""),oddCls:p});return v},_getCellTpl:function(r,q,p){var o=this,s=r.renderer,u=s?s(p[q],p):p[q],t=o.get("cellTpl");return h.substitute(t,{elCls:r.elCls,text:u})},clearData:function(){var p=this,o=p.get("itemContainer");o.empty()},showData:function(p){var o=this;h.each(p,function(q,r){o._createRow(q,r)})},_uiSetInnerBorder:function(p){var o=this,q=o.get("el");if(p){q.addClass(k)}else{q.removeClass(k)}},_uiSetTableCls:function(q){var o=this,p=o.get("el").find("table");p.attr("class",q)}},{ATTRS:{headerRowEl:{valueFn:function(){var o=this,p=o.get("el").find("thead");return p.children("tr")}},itemContainer:{valueFn:function(){return this.get("el").find("tbody")}},tableCls:{}}},{xclass:"simple-grid-veiw"});var j=h.List.SimpleList.extend({renderUI:function(){this.get("view").setColumns()},bindUI:function(){var o=this,r=o.get("itemCls"),p=r+"-hover",q=o.get("el");q.delegate("."+r,"mouseover",function(t){var s=$(t.currentTarget);s.addClass(p)}).delegate("."+r,"mouseout",function(t){var s=$(t.currentTarget);s.removeClass(p)})},showData:function(o){this.clearData();this.set("items",o)},clearData:function(){this.get("view").clearData()},_uiSetColumns:function(p){var o=this;o.clearData();o.get("view").setColumns(p)}},{ATTRS:{itemCls:{view:true,value:i},tableCls:{view:true,value:a+"-table"},columns:{view:true,sync:false,value:[]},tpl:{view:true,value:'<table cellspacing="0" class="{tableCls}" cellpadding="0"><thead><tr></tr></thead><tbody></tbody></table>'},innerBorder:{view:true,value:true},rowTpl:{view:true,value:'<tr class="'+i+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:true,value:'<td class="'+a+'-cell {elCls}"><div class="'+a+'-cell-inner"><span class="'+a+'-cell-text">{text}</span></div></td>'},columnTpl:{view:true,value:'<th class="'+a+'-hd {elCls}" width="{width}"><div class="'+a+'-hd-inner"><span class="'+a+'-hd-title">{title}</span></div></th>'},events:{value:{}},xview:{value:d}}},{xclass:"simple-grid"});j.View=d;return j});define("bui/grid/column",["bui/common"],function(d){var i=d("bui/common"),h=i.prefix,a=h+"grid-hd-title",j=h+"grid-hd-open",l="sort-",g="ASC",c="DESC",f=h+"grid-hd-menu-trigger",b="grid-hd-menu-trigger";var k=i.Component.View.extend({setTplContent:function(q){var m=this,p=m.get("sortTpl"),n=m.get("triggerTpl"),r=m.get("el"),o;k.superclass.setTplContent.call(m,q);o=r.find("."+a);$(p).insertAfter(o);$(n).insertAfter(o)},_setContent:function(){this.setTplContent()},_uiSetShowMenu:function(p){var m=this,n=m.get("triggerTpl"),q=m.get("el"),o=q.find("."+a);if(p){$(n).insertAfter(o)}else{q.find("."+f).remove()}},_uiSetTitle:function(m){if(!this.get("rendered")){return}this._setContent()},_uiSetDraggable:function(m){if(!this.get("rendered")){return}this._setContent()},_uiSetSortable:function(m){if(!this.get("rendered")){return}this._setContent()},_uiSetTpl:function(m){if(!this.get("rendered")){return}this._setContent()},_uiSetSortState:function(n){var m=this,o=m.get("el"),r=n?"addClass":"removeClass",q=l+"asc",p=l+"desc";o.removeClass(q+" "+p);if(n==="ASC"){o.addClass(q)}else{if(n==="DESC"){o.addClass(p)}}},_uiSetOpen:function(n){var m=this,o=m.get("el");if(n){o.addClass(j)}else{o.removeClass(j)}}},{ATTRS:{sortTpl:{view:true,getter:function(){var m=this,n=m.get("sortable");if(n){return'<span class="'+h+'grid-sort-icon">&nbsp;</span>'}return""}},tpl:{}}});var e=i.Component.Controller.extend({_toggleSortState:function(){var m=this,n=m.get("sortState"),o=n?(n===g?c:g):g;m.set("sortState",o)},performActionInternal:function(o){var m=this,n=$(o.target),p=m.get("prefixCls");if(n.hasClass(p+b)){}else{if(m.get("sortable")){m._toggleSortState()}}},_uiSetWidth:function(m){if(m){this.set("originWidth",m)}}},{ATTRS:{elTagName:{value:"th"},open:{view:true,value:false},dataIndex:{view:true,value:""},draggable:{sync:false,view:true,value:true},editor:{},focusable:{value:false},fixed:{value:false},id:{},renderer:{},resizable:{value:true},sortable:{sync:false,view:true,value:true},sortState:{view:true,value:null},title:{sync:false,view:true,value:"&#160;"},width:{value:100},showMenu:{view:true,value:false},triggerTpl:{view:true,value:'<span class="'+f+'"></span>'},tpl:{sync:false,view:true,value:'<div class="'+h+'grid-hd-inner">'+'<span class="'+a+'">{title}</span>'+"</div>"},cellTpl:{value:""},events:{value:{"afterWidthChange":true,"afterSortStateChange":true,"afterVisibleChange":true,"click":true,"resize":true,"move":true}},xview:{value:k}}},{xclass:"grid-hd",priority:1});e.Empty=e.extend({},{ATTRS:{type:{value:"empty"},sortable:{view:true,value:false},width:{view:true,value:null},tpl:{view:true,value:'<div class="'+h+'grid-hd-inner"></div>'}}},{xclass:"grid-hd-empty",priority:1});return e});define("bui/grid/header",["bui/common","bui/grid/column"],function(b){var j=b("bui/common"),h=j.prefix,f=j.namespace("Grid"),d=b("bui/grid/column"),a=j.Component.View,e=j.Component.Controller,k=17,i=j.UA;var c=a.extend({getContentElement:function(){return this.get("el").find("tr")},scrollTo:function(n){var l=this,m=l.get("el");
if(n.top!==undefined){m.scrollTop(n.top)}if(n.left!==undefined){m.scrollLeft(n.left)}},_uiSetTableCls:function(n){var l=this,m=l.get("el").find("table");m.attr("class",n)}},{ATTRS:{emptyCellEl:{},tableCls:{}}},{xclass:"header-view"});var g=e.extend({addColumn:function(p,n){var m=this,l=0,o=m.get("columns");p=m._createColumn(p);if(n===undefined){n=o.length;l=m.get("children").length-1}o.splice(n,0,p);m.addChild(p,l);m.fire("add",{column:p,index:n});return p},removeColumn:function(o){var l=this,n=l.get("columns"),m;o=j.isNumber(o)?n[o]:o;m=j.Array.indexOf(o,n);n.splice(m,1);l.fire("remove",{column:o,index:m});return l.removeChild(o,true)},bindUI:function(){var l=this;l._bindColumnsEvent()},initializer:function(){var l=this,o=l.get("children"),n=l.get("columns"),m=l._createEmptyColumn();$.each(n,function(p,r){var q=l._createColumn(r);o[p]=q;n[p]=q});o.push(m);l.set("emptyColumn",m)},getColumns:function(){return this.get("columns")},getColumnsWidth:function(){var m=this,n=m.getColumns(),l=0;$.each(n,function(o,p){if(p.get("visible")){l+=p.get("el").outerWidth()}});return l},getColumnOriginWidth:function(){var m=this,n=m.getColumns(),l=0;$.each(n,function(o,q){if(q.get("visible")){var p=q.get("originWidth")||q.get("width");l+=p}});return l},getColumnByIndex:function(n){var m=this,o=m.getColumns(),l=o[n];return l},getColumn:function(o){var m=this,n=m.getColumns(),l=null;$.each(n,function(p,q){if(o(q)){l=q;return false}});return l},getColumnById:function(m){var l=this;return l.getColumn(function(n){return n.get("id")===m})},getColumnIndex:function(n){var l=this,m=l.getColumns();return j.Array.indexOf(n,m)},scrollTo:function(l){this.get("view").scrollTo(l)},_bindColumnsEvent:function(){var l=this;l.on("afterWidthChange",function(n){var m=n.target;if(m!==l){l.setTableWidth()}});l.on("afterVisibleChange",function(n){var m=n.target;if(m!==l){l.setTableWidth()}});l.on("afterSortStateChange",function(o){var n=o.target,m=l.getColumns(),p=o.newVal;if(p){$.each(m,function(q,r){if(r!==n){r.set("sortState","")}})}});l.on("add",function(){l.setTableWidth()});l.on("remove",function(){l.setTableWidth()})},_createColumn:function(l){if(l instanceof d){return l}if(!l.id){l.id=j.guid("col")}return new d(l)},_createEmptyColumn:function(){return new d.Empty()},_isAllowScrollLeft:function(){var l=this,m=l.get("parent");return m&&!!m.get("height")},forceFitColumns:function(){var v=this,p=v.getColumns(),l=v.get("width"),s=l,m=v.getColumnOriginWidth(),w=0,o=0,r=null,n=v._isAllowScrollLeft();function u(A,z){var y=A.get("el");A.set("width",z,{silent:1});y.width(z)}if(l){if(n){l-=k;s=l}var x=0;$.each(p,function(y,A){if(A.get("visible")&&A.get("resizable")){x++}if(A.get("visible")&&!A.get("resizable")){var z=A.get("el").outerWidth();s-=z;m-=z}});var q=Math.floor(s/x),t=s/m;if(t===1){return}$.each(p,function(A,B){if(B.get("visible")&&B.get("resizable")){var z=v._getColumnBorderWith(B,A),y=B.get("originWidth");if(!y){B.set("originWidth",B.get("width"));y=B.get("width")}q=Math.floor((y+z)*t);u(B,q-z);w+=q;r=B}});if(r){o=s-w;u(r,r.get("width")+o)}v.fire("forceFitWidth")}},_getColumnBorderWith:function(o,n){var m=o.get("el"),l=Math.round(parseFloat(m.css("border-left-width"))||0)+Math.round(parseFloat(m.css("border-right-width"))||0);l=i.ie&&i.ie<8?(n===0?1:l):l;return l},setTableWidth:function(){var m=this,o=m.get("width"),l=0,n=null;if(o=="auto"){return}if(m.get("forceFit")){m.forceFitColumns()}else{if(m._isAllowScrollLeft()){l=m.getColumnsWidth();n=m.get("emptyColumn");if(o<l){n.get("el").width(k)}else{n.get("el").width("auto")}}}},_uiSetWidth:function(){var l=this;l.setTableWidth()},_uiSetForceFit:function(m){var l=this;if(m){l.setTableWidth()}}},{ATTRS:{columns:{value:[]},emptyColumn:{},focusable:{value:false},forceFit:{sync:false,view:true,value:false},tpl:{view:true,value:'<table cellspacing="0" class="'+h+'grid-table" cellpadding="0">'+"<thead><tr></tr></thead>"+"</table>"},tableCls:{view:true},xview:{value:c},events:{value:{"add":false,"remove":false}}}},{xclass:"grid-header",priority:1});return g});define("bui/grid/grid",["bui/common","bui/mask","bui/toolbar","bui/list","bui/grid/header","bui/grid/column"],function(a){var F=a("bui/common"),A=a("bui/mask"),s=F.UA,h=F.Component,m=a("bui/toolbar"),i=a("bui/list"),v=a("bui/grid/header"),g=a("bui/grid/column");function z(L){if(F.isString(L)){return L.indexOf("%")!==-1}return false}var l=F.prefix,H=l+"grid-header-container",x=l+"grid-body",I=l+"grid-width",b=l+"grid-height",k=l+"grid-border",u=l+"grid-tbar",f=l+"grid-bbar",B=l+"grid-button-bar",y=l+"grid-strip",w=l+"grid-row",K=l+"grid-row-odd",p=l+"grid-row-even",t=l+"grid-row-first",C=l+"grid-cell",j=l+"grid-cell-inner",r="grid-td-",d=l+"grid-cell-text",J=l+"grid-cell-empty",q="17",o=l+"hidden",G="data-column-field",n=2,e=1;function E(M){var L=this;if(F.isNumber(M)){M-=n}return M}var c=i.SimpleListView.extend({renderUI:function(){var L=this,N=L.get("el"),M=N.find("."+x);L.set("bodyEl",M);L._setTableTpl()},getItemTpl:function(P,Q){var R=this,N=R._getColumns(),U=R.get("tbodyEl"),T=R.get("rowTpl"),L=Q%2===0?K:p,O=[],M;
$.each(N,function(V,X){var W=X.get("dataIndex");O.push(R._getCellTpl(X,W,P))});if(R.get("useEmptyCell")){O.push(R._getEmptyCellTpl())}T=F.substitute(T,{cellsTpl:O.join(""),oddCls:L});return T},findRow:function(M){var L=this;return $(L.findElement(M))},findCell:function(N,M){var L=r+N;return M.find("."+L)},resetHeaderRow:function(){if(!this.get("useHeaderRow")){return}var M=this,N=M.get("headerRowEl"),L=M.get("tbodyEl");if(N){N.remove()}N=M._createHeaderRow();N.prependTo(L);M.set("headerRowEl",N)},resetColumnsWidth:function(P,O){var M=this,N=M.get("headerRowEl"),L=M.findCell(P.get("id"),N);O=O||P.get("width");if(L){L.width(O)}M.setTableWidth()},setTableWidth:function(T){if(!T&&z(this.get("width"))){this.get("tableEl").width("100%");return}var M=this,R=M._getInnerWidth(),L=M.get("height"),O=M.get("tableEl"),Q=M.get("forceFit"),N=M.get("headerRowEl");if(!z(T)){T=T||M._getColumnsWidth();if(!R){return}if(R>=T){T=R;if(L){var P=(s.ie==6||s.ie==7)?q+2:q;T=R-P}}}O.width(T)},setBodyWidth:function(N){var L=this,M=L.get("bodyEl");N=N||L._getInnerWidth();M.width(N)},setBodyHeight:function(M){var L=this,N=L.get("bodyEl"),P=M,O=N.siblings();F.each(O,function(Q){if($(Q).css("display")!=="none"){P-=$(Q).outerHeight()}});N.height(P)},setColumnVisible:function(P){var M=this,O=!P.get("visible"),Q=P.get("id"),L=M.get("tbodyEl"),N=$("."+r+Q,L);if(O){N.hide()}else{N.show()}},updateItem:function(M){var L=this,N=L.getItems(),P=F.Array.indexOf(M,N),R=L._getColumns(),Q=null,O;if(P>=0){Q=L.findElement(M);F.each(R,function(U){var T=L.findCell(U.get("id"),$(Q)),W=T.find("."+j),V=L._getCellText(U,M);W.html(V)});return Q}},showEmptyText:function(){var L=this,M=L.get("bodyEl"),N=L.get("emptyDataTpl"),O=L.get("emptyEl");if(O){O.remove()}var O=$(N).appendTo(M);L.set("emptyEl",O)},clearEmptyText:function(){var L=this,M=L.get("emptyEl");if(M){M.remove()}},_createHeaderRow:function(){var M=this,P=M._getColumns(),L=M.get("tbodyEl"),Q=M.get("headerRowTpl"),N,O=[];$.each(P,function(R,T){O.push(M._getHeaderCellTpl(T))});if(M.get("useEmptyCell")){O.push(M._getEmptyCellTpl())}Q=F.substitute(Q,{cellsTpl:O.join("")});N=$(Q).appendTo(L);return N},_getColumnsWidth:function(){var M=this,N=M.get("columns"),L=0;F.each(N,function(O){if(O.get("visible")){L+=O.get("el").outerWidth()}});return L},_getColumns:function(){return this.get("columns")},_getCellText:function(O,M){var L=this,N=O.get("dataIndex"),P=O.get("cellTpl")||L.get("cellTextTpl"),Q=L._getCellInnerText(O,N,M);return F.substitute(P,{text:Q,tips:L._getTips(O,N,M)})},_getCellInnerText:function(P,O,M){try{var L=this,Q=P.get("renderer"),R=Q?Q(M[O],M):M[O];return R==null?"":R}catch(N){throw"column:"+P.get("title")+" fomat error!"}},_getCellTpl:function(P,O,M){var L=this,N=L._getCellText(P,M),Q=L.get("cellTpl");return F.substitute(Q,{elCls:P.get("elCls"),id:P.get("id"),dataIndex:O,cellText:N,hideCls:!P.get("visible")?o:""})},_getEmptyCellTpl:function(){return'<td class="'+C+" "+J+'">&nbsp;</td>'},_getHeaderCellTpl:function(M){var L=this,N=L.get("headerCellTpl");return F.substitute(N,{id:M.get("id"),width:M.get("width"),hideCls:!M.get("visible")?o:""})},_getInnerWidth:function(){return E(this.get("width"))},_getTips:function(N,M,L){var O=N.get("showTip"),P="";if(O){P=L[M];if(F.isFunction(O)){P=O(P,L)}}return P},_uiSetInnerBorder:function(M){var L=this,N=L.get("el");if(M){N.addClass(k)}else{N.removeClass(k)}},_setTableTpl:function(P){var M=this,O=M.get("bodyEl");P=P||M.get("tableTpl");$(P).appendTo(O);var N=O.find("table"),L=O.find("tbody");M.set("tableEl",N);M.set("tbodyEl",L);M.set("itemContainer",L);M._setTableCls(M.get("tableCls"))},_uiSetTableCls:function(L){this._setTableCls(L)},_uiSetHeight:function(N){var L=this,M=L.get("bodyEl");L.get("el").height(N);L.get("el").addClass(b)},_uiSetWidth:function(M){var L=this;L.get("el").width(M);L.setBodyWidth(L._getInnerWidth(M));L.get("el").addClass(I)},_uiSetStripeRows:function(M){var L=this,N=M?"addClass":"removeClass";L.get("el")[N](y)},_setTableCls:function(N){var L=this,M=L.get("tableEl");M.attr("class",N)}},{ATTRS:{tableCls:{},bodyEl:{},tbodyEl:{},headerRowEl:{},tableEl:{},emptyEl:{}}},{xclass:"grid-view"});var D=i.SimpleList.extend({initializer:function(){var L=this,N=L.get("render"),M=L.get("width");if(!M){L.set("width",$(N).width())}},createDom:function(){var L=this;if(L.get("width")){L.get("el").addClass(I)}if(L.get("height")){L.get("el").addClass(b)}if(L.get("innerBorder")){L.get("el").addClass(k)}},renderUI:function(){var L=this;L._initHeader();L._initBars();L._initLoadMask();L.get("view").resetHeaderRow()},bindUI:function(){var L=this;L._bindHeaderEvent();L._bindBodyEvent();L._bindItemsEvent()},addColumn:function(N,M){var L=this,O=L.get("header");if(O){N=O.addColumn(N,M)}else{N=new g(N);L.get("columns").splice(M,0,N)}return N},clearData:function(){this.clearItems()},getRecords:function(){return this.getItems()},findColumn:function(N){var L=this,M=L.get("header");if(F.isNumber(N)){return M.getColumnByIndex(N)}else{return M.getColumnById(N)}},findColumnByField:function(M){var L=this,N=L.get("header");
return N.getColumn(function(O){return O.get("dataIndex")===M})},findCell:function(O,M){var L=this,N=null;if(M instanceof $){N=M}else{N=L.findRow(M)}if(N){return L.get("view").findCell(O,N)}return null},findRow:function(M){var L=this;return L.get("view").findRow(M)},removeColumn:function(M){var L=this;L.get("header").removeColumn(M)},showData:function(M){var L=this;L.set("items",M)},resetColumns:function(){var L=this,M=L.get("store");L.get("view").resetHeaderRow();if(M){L.onLoad()}},_bindScrollEvent:function(){var L=this,N=L.get("el"),M=N.find("."+x),O=L.get("header");M.on("scroll",function(){var Q=M.scrollLeft(),P=M.scrollTop();O.scrollTo({left:Q,top:P});L.fire("scroll",{scrollLeft:Q,scrollTop:P,bodyWidth:M.width(),bodyHeight:M.height()})})},_bindHeaderEvent:function(){var L=this,O=L.get("header"),M=L.get("view"),N=L.get("store");O.on("afterWidthChange",function(Q){var P=Q.target;if(P!==O){M.resetColumnsWidth(P)}});O.on("afterSortStateChange",function(Q){var P=Q.target,R=Q.newVal;if(R&&N){N.sort(P.get("dataIndex"),P.get("sortState"))}});O.on("afterVisibleChange",function(Q){var P=Q.target;if(P!==O){M.setColumnVisible(P);L.fire("columnvisiblechange",{column:P})}});O.on("click",function(Q){var P=Q.target;if(P!==O){L.fire("columnclick",{column:P,domTarget:Q.domTarget})}});O.on("forceFitWidth",function(){if(L.get("rendered")){L.resetColumns()}});O.on("add",function(P){if(L.get("rendered")){L.fire("columnadd",{column:P.column,index:P.index});L.resetColumns()}});O.on("remove",function(P){if(L.get("rendered")){L.resetColumns();L.fire("columnremoved",{column:P.column,index:P.index})}})},_bindBodyEvent:function(){var L=this;L._bindScrollEvent()},_bindItemsEvent:function(){var L=this,N=L.get("store");L.on("itemsshow",function(){L.fire("aftershow");if(L.get("emptyDataTpl")){if(N&&N.getCount()==0){L.get("view").showEmptyText()}else{L.get("view").clearEmptyText()}}});L.on("itemsclear",function(){L.fire("clear")});L.on("itemclick",function(R){var T=R.domTarget,P=R.item,O=$(T).closest("."+C),Q=$(T).closest("."+w),U;if(O.length){U=L.fire("cellclick",{record:P,row:Q[0],cell:O[0],field:O.attr(G),domTarget:T,domEvent:R.domEvent})}if(U===false){return U}return L.fire("rowclick",{record:P,row:Q[0],domTarget:T})});L.on("itemunselected",function(O){L.fire("rowunselected",M(O))});L.on("itemselected",function(O){L.fire("rowselected",M(O))});L.on("itemrendered",function(O){L.fire("rowcreated",M(O))});L.on("itemremoved",function(O){L.fire("rowremoved",M(O))});L.on("itemupdated",function(O){L.fire("rowupdated",M(O))});function M(O){return{record:O.item,row:O.domTarget,domTarget:O.domTarget}}},_getInnerWidth:function(L){L=L||this.get("width");return E(L)},_initHeader:function(){var L=this,N=L.get("header"),M=L.get("el").find("."+H);if(!N){N=new v({columns:L.get("columns"),tableCls:L.get("tableCls"),forceFit:L.get("forceFit"),width:L._getInnerWidth(),render:M,parent:L}).render();L.set("header",N)}},_initBars:function(){var L=this,M=L.get("bbar"),N=L.get("tbar");L._initBar(M,f,"bbar");L._initBar(N,u,"tbar")},_initBar:function(P,M,O){var L=this,N=null,R=null;if(P){if(!P.xclass&&!(P instanceof h.Controller)){P.xclass="bar";P.children=P.children||[];if(P.items){P.children.push({xclass:"bar",defaultChildClass:"bar-item-button",elCls:B,children:P.items});P.items=null}if(P.pagingBar){N=L.get("store");R={xclass:"pagingbar",store:N,pageSize:N.pageSize};if(P.pagingBar!==true){R=S.merge(R,P.pagingBar)}P.children.push(R)}}if(P.xclass){var Q=L.get("el").find("."+M);Q.show();P.render=Q;P.elTagName="div";P.autoRender=true;P=L.addChild(P)}L.set(O,P)}return P},_initLoadMask:function(){var L=this,M=L.get("loadMask");if(M&&!M.show){M=new F.Mask.LoadMask({el:L.get("el")});L.set("loadMask",M)}},_uiSetWidth:function(M){var L=this;if(L.get("rendered")){if(!z(M)){L.get("header").set("width",L._getInnerWidth(M))}else{L.get("header").set("width","100%")}}L.get("view").setTableWidth()},_uiSetForceFit:function(M){var L=this;L.get("header").set("forceFit",M)},_uiSetHeight:function(M,N){var L=this,O=L.get("header");L.get("view").setBodyHeight(M);if(L.get("rendered")){if(L.get("forceFit")&&!N.prevVal){O.forceFitColumns();L.get("view").setTableWidth()}O.setTableWidth()}}},{ATTRS:{header:{},bbar:{},itemCls:{value:w},columns:{view:true,value:[]},forceFit:{sync:false,value:false},emptyDataTpl:{view:true},headerRowTpl:{view:true,value:'<tr class="'+l+'grid-header-row">{cellsTpl}</tr>'},headerCellTpl:{view:true,value:'<td class="{hideCls} '+r+'{id}" width="{width}" style="height:0"></td>'},rowTpl:{view:true,value:'<tr class="'+w+' {oddCls}">{cellsTpl}</tr>'},cellTpl:{view:true,value:'<td  class="{elCls} {hideCls} '+C+" "+r+'{id}" data-column-id="{id}" data-column-field = "{dataIndex}" >'+'<div class="'+j+'" >{cellText}</div>'+"</td>"},cellTextTpl:{view:true,value:'<span class="'+d+' " title = "{tips}">{text}</span>'},events:{value:{"aftershow":false,"clear":false,"cellclick":false,"columnclick":false,"rowclick":false,"rowcreated":false,"rowremoved":false,"rowselected":false,"rowunselected":false,"scroll":false}},stripeRows:{view:true,value:true},tbar:{},tableCls:{view:true,sync:false,value:l+"grid-table"},tableTpl:{view:true,value:'<table cellspacing="0" cellpadding="0" >'+"<tbody></tbody>"+"</table>"},tpl:{value:'<div class="'+u+'" style="display:none"></div><div class="'+H+'"></div><div class="'+x+'"></div><div style="display:none" class="'+f+'"></div>'},innerBorder:{sync:false,value:true},useEmptyCell:{view:true,value:true},useHeaderRow:{view:true,value:true},xview:{value:c}}},{xclass:"grid"});
return D});define("bui/grid/format",function(b){function a(d){if(d<10){return"0"+d}return d}var c={dateRenderer:function(h){if(!h){return""}if(BUI.isString(h)){return h}var f=null;try{f=new Date(h)}catch(g){return""}if(!f||!f.getFullYear){return""}return f.getFullYear()+"-"+a(f.getMonth()+1)+"-"+a(f.getDate())},datetimeRenderer:function(h){if(!h){return""}if(BUI.isString(h)){return h}var f=null;try{f=new Date(h)}catch(g){return""}if(!f||!f.getFullYear){return""}return f.getFullYear()+"-"+a(f.getMonth()+1)+"-"+a(f.getDate())+" "+a(f.getHours())+":"+a(f.getMinutes())+":"+a(f.getSeconds())},cutTextRenderer:function(d){return function(e){e=e||"";if(e.toString().length>d){return e.toString().substring(0,d)+"..."}return e}},enumRenderer:function(d){return function(e){return d[e]||""}},multipleItemsRenderer:function(e){var d=c.enumRenderer(e);return function(g){var f=[];if(!g){return""}if(!BUI.isArray(g)){g=g.toString().split(",")}$.each(g,function(h,i){f.push(d(i))});return f.join(",")}},moneyCentRenderer:function(d){if(BUI.isString(d)){d=parseFloat(d)}if($.isNumberic(d)){return(d*0.01).toFixed(2)}return d}};return c});(function(){var a="bui/grid/plugins/";define("bui/grid/plugins",["bui/common",a+"selection",a+"cascade",a+"cellediting",a+"rowediting",a+"dialogediting",a+"menu",a+"summary"],function(c){var d=c("bui/common"),b=c(a+"selection"),e={};d.mix(e,{CheckSelection:b.CheckSelection,RadioSelection:b.RadioSelection,Cascade:c(a+"cascade"),CellEditing:c(a+"cellediting"),RowEditing:c(a+"rowediting"),DialogEditing:c(a+"dialogediting"),GridMenu:c(a+"menu"),Summary:c(a+"summary")});return e})})();define("bui/grid/plugins/menu",["bui/common","bui/menu"],function(c){var h=c("bui/common"),g=c("bui/menu"),f=h.prefix,b="sort-asc",a="sort-desc",d="column-setting",i="icon-check";var e=function(j){e.superclass.constructor.call(this,j)};h.extend(e,h.Base);e.ATTRS={menu:{},activedColumn:{},triggerCls:{value:f+"grid-hd-menu-trigger"},items:{value:[{id:b,text:"\u5347\u5e8f",iconCls:"icon-arrow-up"},{id:a,text:"\u964d\u5e8f",iconCls:"icon-arrow-down"},{xclass:"menu-item-sparator"},{id:d,text:"\u8bbe\u7f6e\u5217",iconCls:"icon-list-alt"}]}};h.augment(e,{initializer:function(k){var j=this;j.set("grid",k)},renderUI:function(l){var j=this,k=l.get("columns");h.each(k,function(m){j._addShowMenu(m)})},bindUI:function(k){var j=this;k.on("columnadd",function(l){j._addShowMenu(l.column)});k.on("columnclick",function(n){var l=$(n.domTarget),m=n.column,o;j.set("activedColumn",m);if(l.hasClass(j.get("triggerCls"))){o=j.get("menu")||j._initMenu();o.set("align",{node:l,points:["bl","tl"],offset:[0,0]});o.show();j._afterShow(m,o)}})},_addShowMenu:function(j){if(!j.get("fixed")){j.set("showMenu",true)}},_afterShow:function(l,m){var j=this,k=j.get("grid");m=m||j.get("menu");j._resetSortMenuItems(l,m);j._resetColumnsVisible(m)},_resetColumnsVisible:function(n){var j=this,m=n.findItemById(d),k=m.get("subMenu")||j._initColumnsMenu(m),l=j.get("grid").get("columns");k.removeChildren(true);$.each(l,function(p,r){if(!r.get("fixed")){var o={xclass:"context-menu-item",text:r.get("title"),column:r,iconCls:"icon"},q=k.addChild(o);if(r.get("visible")){q.set("selected",true)}}})},_resetSortMenuItems:function(j,l){var m=l.findItemById(b),k=l.findItemById(a);if(j.get("sortable")){m.set("disabled",false);k.set("disabled",false)}else{m.set("disabled",true);k.set("disabled",true)}},_initMenu:function(){var j=this,l=j.get("menu"),k;if(!l){k=j.get("items");$.each(k,function(m,n){if(!n.xclass){n.xclass="context-menu-item"}});l=new g.ContextMenu({children:k,elCls:"grid-menu"});j._initMenuEvent(l);j.set("menu",l)}return l},_initMenuEvent:function(k){var j=this;k.on("itemclick",function(n){var m=n.item,o=m.get("id"),l=j.get("activedColumn");if(o===b){l.set("sortState","ASC")}else{if(o===a){l.set("sortState","DESC")}}});k.on("afterVisibleChange",function(m){var n=m.newVal,l=j.get("activedColumn");if(n&&l){l.set("open",true)}else{l.set("open",false)}})},_initColumnsMenu:function(k){var j=new g.ContextMenu({multipleSelect:true,elCls:"grid-column-menu"});k.set("subMenu",j);j.on("itemclick",function(o){var n=o.item,m=n.get("column"),l=n.get("selected");if(l){m.set("visible",true)}else{m.set("visible",false)}});return j},destructor:function(){var j=this,k=j.get("menu");if(k){k.destroy()}j.off();j.clearAttrVals()}});return e});define("bui/grid/plugins/cascade",["bui/common"],function(b){var i=b("bui/common"),f=i.prefix,d="",e="data-record",g=f+"grid-cascade",k=g+"-expand",c=g+"-row",j=g+"-cell",a=g+"-collapse";var h=function(l){h.superclass.constructor.call(this,l)};i.extend(h,i.Base);h.ATTRS={width:{value:40},cellInner:{value:'<span class="'+g+'"><i class="'+g+'-icon"></i></span>'},rowTpl:{value:'<tr class="'+c+'"><td class="'+j+'"></td></tr>'},renderer:{},events:["expand","collapse","removed"]};i.augment(h,{initializer:function(n){var l=this;var m={title:"",elCls:"center",width:l.get("width"),resizable:false,fixed:true,sortable:false,cellTpl:l.get("cellInner")},o=n.addColumn(m,0);
n.set("innerBorder",false);l.set("grid",n)},bindUI:function(m){var l=this;m.on("cellclick",function(o){var n=$(o.domTarget),p=n.closest("."+g);if(p.length){if(!p.hasClass(k)){l._onExpand(o.record,o.row,p)}else{l._onCollapse(o.record,o.row,p)}}});m.on("columnvisiblechange",function(){l._resetColspan()});m.on("rowremoved",function(n){l.remove(n.record)});m.on("clear",function(){l.removeAll()})},expandAll:function(){var l=this,n=l.get("grid"),m=n.getRecords();$.each(m,function(p,o){l.expand(o)})},expand:function(m){var l=this,n=l.get("grid");var o=n.findRow(m);if(o){l._onExpand(m,o)}},collapse:function(m){var l=this,n=l.get("grid");var o=n.findRow(m);if(o){l._onCollapse(m,o)}},removeAll:function(){var l=this,m=l._getAllCascadeRows();m.each(function(n,o){l._removeCascadeRow(o)})},remove:function(m){var l=this,n=l._findCascadeRow(m);if(n){l._removeCascadeRow(n)}},collapseAll:function(){var l=this,n=l.get("grid"),m=n.getRecords();$.each(m,function(p,o){l.collapse(o)})},_getRowRecord:function(l){return $(l).data(e)},_removeCascadeRow:function(l){this.fire("removed",{record:$(l).data(e),row:l});$(l).remove()},_findCascadeRow:function(n){var m=this,o=m._getAllCascadeRows(),l=null;$.each(o,function(p,q){if(m._getRowRecord(q)===n){l=q;return false}});return l},_getAllCascadeRows:function(){var l=this,m=l.get("grid");return m.get("el").find("."+c)},_getCascadeRow:function(m){var l=$(m).next();if((l).hasClass(c)){return l}return null},_getRowContent:function(m){var l=this,o=l.get("renderer"),n=o?o(m):"";return n},_createCascadeRow:function(m,q){var l=this,p=l.get("rowTpl"),o=l._getRowContent(m),n=$(p).insertAfter(q);n.find("."+j).append($(o));n.data(e,m);return n},_onExpand:function(m,p,o){var l=this,n=l._getCascadeRow(p),q=l._getColumnCount(p);o=o||$(p).find("."+g);o.addClass(k);if(!n||!n.length){n=l._createCascadeRow(m,p)}$(n).removeClass(a);l._setColSpan(n,p);l.fire("expand",{record:m,row:n[0]})},_onCollapse:function(m,p,o){var l=this,n=l._getCascadeRow(p);o=o||$(p).find("."+g);o.removeClass(k);if(n||!n.length){$(n).addClass(a);l.fire("collapse",{record:m,row:n[0]})}},_getColumnCount:function(l){return $(l).children().filter(function(){return $(this).css("display")!=="none"}).length},_setColSpan:function(m,n){n=n||$(m).prev();var l=this,o=l._getColumnCount(n);$(m).find("."+j).attr("colspan",o)},_resetColspan:function(){var l=this,m=l._getAllCascadeRows();$.each(m,function(n,o){l._setColSpan(o)})},destructor:function(){var l=this;l.removeAll();l.off();l.clearAttrVals()}});return h});define("bui/grid/plugins/selection",["bui/common"],function(a){var f=a("bui/common"),d=f.prefix,c=d+"grid-checkBox",e="x-grid-checkbox",b=d+"grid-radio";function h(j){h.superclass.constructor.call(this,j)}f.extend(h,f.Base);h.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+c+'-container"><span class="'+e+'"></span></div>'}};f.augment(h,{createDom:function(l){var j=this;var k={title:"",width:j.get("width"),fixed:true,resizable:false,sortable:false,tpl:'<div class="'+d+'grid-hd-inner">'+j.get("cellInner")+"",cellTpl:j.get("cellInner")},m=l.addColumn(k,0);l.set("multipleSelect",true);j.set("column",m)},bindUI:function(n){var j=this,m=j.get("column"),k=m.get("el"),l=k.find("."+e);l.on("click",function(){var o=k.hasClass("checked");if(!o){n.setAllSelection();k.addClass("checked")}else{n.clearSelection();k.removeClass("checked")}});n.on("rowunselected",function(o){k.removeClass("checked")});n.on("clear",function(){k.removeClass("checked")})}});var g=function(j){g.superclass.constructor.call(this,j)};f.extend(g,f.Base);g.ATTRS={width:{value:40},column:{},cellInner:{value:'<div class="'+d+'grid-radio-container"><input  class="'+b+'" type="radio"></div>'}};f.augment(g,{createDom:function(l){var j=this;var k={title:"",width:j.get("width"),resizable:false,fixed:true,sortable:false,cellTpl:j.get("cellInner")},m=l.addColumn(k,0);l.set("multipleSelect",false);j.set("column",m)},bindUI:function(k){var j=this;k.on("rowselected",function(l){j._setRowChecked(l.row,true)});k.on("rowunselected",function(l){j._setRowChecked(l.row,false)})},_setRowChecked:function(m,l){var k=$(m),j=k.find("."+b);j.attr("checked",l)}});var i={CheckSelection:h,RadioSelection:g};return i});define("bui/grid/plugins/summary",["bui/common"],function(d){var i=d("bui/common"),g=i.prefix,j=g+"grid-row",n=g+"grid-body",h=g+"grid-summary-row",l=g+"grid-cell-inner",e="grid-td-",m=g+"grid-cell-text",c=g+"grid-cell";function b(p){if(p>0){return'<td class="'+c+'" colspan="'+p+'">&nbsp;</td>'}return""}function f(p,q){return'<td class="'+c+" "+e+q+'">'+o(p)+"</td>"}function o(p){return'<div class="'+l+'" >'+'<span class="'+m+' ">'+p+"</span>"+"</div>"}function a(){return'<td class="'+c+" "+c+'-empty">&nbsp;</td>'}var k=function(p){k.superclass.constructor.call(this,p)};k.ATTRS={footerTpl:{value:"<tfoot></tfoot>"},footerEl:{},summaryTitle:{value:"\u67e5\u8be2\u5408\u8ba1"},pageSummaryTitle:{value:"\u672c\u9875\u5408\u8ba1"},field:{value:"summary"},pageSummaryField:{value:"pageSummary"},summaryField:{value:"summary"},pageSummary:{},summary:{}};
i.extend(k,i.Base);i.augment(k,{initializer:function(q){var p=this;p.set("grid",q)},renderUI:function(t){var p=this,s=t.get("el").find("."+n),r=s.find("table"),q=$(p.get("footerTpl")).appendTo(r);p.set("footerEl",q)},bindUI:function(r){var p=this,q=r.get("store");if(q){q.on("beforeProcessLoad",function(s){p._processSummary(s)});q.on("add",function(){p.resetPageSummary()});q.on("remove",function(){p.resetPageSummary()});q.on("update",function(){p.resetPageSummary()})}r.on("aftershow",function(){p.resetSummary()});r.get("header").on("afterVisibleChange",function(){p.resetSummary()})},_processSummary:function(t){var p=this,q=p.get("footerEl");q.empty();if(!t){return}var r=t[p.get("pageSummaryField")],s=t[p.get("summaryField")];p.set("pageSummary",r);p.set("summary",s)},resetPageSummary:function(){var p=this,s=p.get("grid"),r=s.get("columns"),q=p._calculatePageSummary(),t=p.get("pageEl");p.set("pageSummary",q);if(t){i.each(r,function(v){if(v.get("summary")&&v.get("visible")){var x=v.get("id"),u=t.find("."+e+x),w=p._getSummaryCellText(v,q);u.find("."+m).text(w)}});p._updateFirstRow(t,p.get("pageSummaryTitle"))}},resetSummary:function(r,s){var p=this,q=p.get("footerEl"),t=null;q.empty();r=r||p.get("pageSummary");if(!r){r=p._calculatePageSummary();p.set("pageSummary",r)}s=s||p.get("summary");t=p._creatSummaryRow(r,p.get("pageSummaryTitle"));p.set("pageEl",t);p._creatSummaryRow(s,p.get("summaryTitle"))},_creatSummaryRow:function(t,u){if(!t){return null}var p=this,q=p.get("footerEl"),s=p._getSummaryTpl(t),r=$(s).appendTo(q);p._updateFirstRow(r,u);return r},_updateFirstRow:function(q,t){var p=q.find("td").first(),s=p.find("."+l);if(s.length){var r=t+": ";text=s.text();if(text.indexOf(r)===-1){text=r+text}p.html(o(text))}else{p.html(o(t+":"))}},_getSummaryTpl:function(r){var p=this,t=p.get("grid"),s=t.get("columns"),w=[],q=-1,u=-1,v=null;$.each(s,function(z,y){if(y.get("visible")){u+=1;if(y.get("summary")){w.push(b(u-q-1));var A=p._getSummaryCellText(y,r),x=f(A,y.get("id"));w.push(x);q=u}}});if(q!==u){w.push(b(u-q))}v=['<tr class="',h," ",j,'">',w.join(""),a(),"</tr>"].join("");return v},_getSummaryCellText:function(r,q){var p=this,v=q[r.get("dataIndex")],t=v==null?"":v,s=r.get("renderer"),u=s?s(t,q):t;return u},_calculatePageSummary:function(){var p=this,s=p.get("grid"),q=s.get("store"),r=s.get("columns"),t={};i.each(r,function(v){if(v.get("summary")){var u=v.get("dataIndex");t[u]=q.sum(u)}});return t}});return k});define("bui/grid/plugins/editing",function(a){var c=BUI.prefix+"grid-cell-inner",d=BUI.prefix+"grid-cell-error";function b(e){b.superclass.constructor.call(this,e)}BUI.extend(b,BUI.Base);b.ATTRS={align:{value:{points:["cl","cl"]}},showError:{value:true},errorTpl:{value:'<span class="x-icon '+d+' x-icon-mini x-icon-error" title="{error}">!</span>'},isInitEditors:{value:false},record:{},curEditor:{},hasValid:{},editors:{value:[]},triggerCls:{},triggerSelected:{value:true}};BUI.augment(b,{initializer:function(f){var e=this;e.set("grid",f);e.initEditing(f)},renderUI:function(){var e=this,f=e.get("grid");BUI.use("bui/editor",function(g){e.initEditors(g);e._initGridEvent(f);e.set("isInitEditors",true)})},initEditing:function(e){},_getCurEditor:function(){return this.get("curEditor")},_initGridEvent:function(f){var e=this,h=f.get("header");f.on("cellclick",function(k){var j=null,l=k.domTarget,m=e.get("triggerCls"),i=e._getCurEditor();if(i&&i.get("acceptEvent")){i.accept();i.hide()}else{i&&i.cancel()}j=e.getEditor(k.field);if(j&&$(l).closest("."+m).length){e.showEditor(j,k);if(!e.get("triggerSelected")){return false}}});f.on("rowcreated",function(i){g(i.record,i.row)});f.on("rowremoved",function(i){if(e.get("record")==i.record){e.cancel()}});f.on("rowupdated",function(i){g(i.record,i.row)});f.on("scroll",function(k){var i=e._getCurEditor();if(i){var m=i.get("align"),j=m.node,l=j.position();if(l.top<0||l.top>k.bodyHeight){i.hide()}else{i.set("align",m);i.show()}}});h.on("afterVisibleChange",function(j){if(j.target&&j.target!=h){var i=j.target;e.onColumnVisibleChange(i)}});function g(i,j){if(e.get("hasValid")){e.validRecord(i,e.getFields(),$(j))}}},initEditors:function(h){var f=this,j=f.get("grid"),e=[],i=j.get("columns");BUI.each(i,function(k){var l=f.getFieldConfig(k);if(l){l.name=k.get("dataIndex");l.id=k.get("id");if(l.validator){l.validator=f.wrapValidator(l.validator)}e.push(l)}});var g=f.getEditorCfgs(e);BUI.each(g,function(k){f.initEidtor(k,h)})},getFieldConfig:function(e){return e.get("editor")},wrapValidator:function(f){var e=this;return function(h){var g=e.get("record");return f(h,g)}},onColumnVisibleChange:function(e){},getEditorCfgs:function(e){},getEditorConstructor:function(e){return e.Editor},initEidtor:function(g,h){var e=this,f=e.getEditorConstructor(h),i=new f(g);i.render();e.get("editors").push(i);e.bindEidtor(i);return i},bindEidtor:function(h){var e=this,g=e.get("grid"),f=g.get("store");h.on("accept",function(){var i=e.get("record");e.updateRecord(f,i,h);e.set("curEditor",null)});h.on("cancel",function(){e.set("curEditor",null)
})},getEditor:function(e){},getAlignNode:function(e){},getEditValue:function(e){},showEditor:function(h,g){var e=this,i=e.getEditValue(g),f=e.getAlignNode(g);e.beforeShowEditor(h,g);e.set("record",g.record);h.setValue(i);if(f){var j=e.get("align");j.node=f;h.set("align",j)}h.show();e.focusEditor(h,g.field);e.set("curEditor",h)},focusEditor:function(e,f){e.focus()},beforeShowEditor:function(f,e){},_createEditOptions:function(f,k){var e=this,i=e.get("grid"),h=i.findRow(f),j=i.findColumnByField(k),g=i.findCell(j.get("id"),h);return{record:f,field:k,cell:g[0],row:h[0]}},valid:function(){var e=this,h=e.get("grid"),g=h.get("store");if(g){var f=g.getResult();BUI.each(f,function(i){e.validRecord(i,e.getFields())})}e.set("hasValid",true)},isValid:function(){var e=this,f=e.get("grid");if(!e.get("hasValid")){e.valid()}return !f.get("el").find("."+d).length},clearErrors:function(){var e=this,f=e.get("grid");f.get("el").find("."+d).remove()},getFields:function(e){},validRecord:function(g,f,h){var e=this,i=[];e.setInternal("record",g);f=f||e.getFields();BUI.each(f,function(m){var k=m.get("name"),l=g[k]||"",j=m.getValidError(l);if(j){i.push({name:k,error:j,id:m.get("id")})}});e.showRecordError(g,i,h)},showRecordError:function(f,i,h){var e=this,g=e.get("grid");h=h||g.findRow(f);if(h){e._clearRowError(h);BUI.each(i,function(k){var j=g.findCell(k.id,h);e._showCellError(j,k.error)})}},updateRecord:function(f,e,g){},_clearRowError:function(e){e.find("."+d).remove()},_showCellError:function(g,h){var f=this,e=BUI.substitute(f.get("errorTpl"),{error:h}),i=g.find("."+c);$(e).appendTo(i)},edit:function(f,i){var e=this,g=e._createEditOptions(f,i),h=e.getEditor(i);e.showEditor(h,g)},cancel:function(){var e=this,f=e.get("editors");BUI.each(f,function(g){if(g.get("visible")){g.cancel()}});e.set("curEditor",null);e.set("record",null)},destructor:function(){var e=this,f=e.get("editors");BUI.each(f,function(g){g.destroy||g.destroy()});e.off();e.clearAttrVals()}});return b});define("bui/grid/plugins/cellediting",["bui/grid/plugins/editing"],function(d){var e=d("bui/grid/plugins/editing"),b=BUI.prefix+"grid-body",a=BUI.prefix+"grid-cell";var c=function(f){c.superclass.constructor.call(this,f)};c.ATTRS={triggerCls:{value:a}};BUI.extend(c,e);BUI.augment(c,{getEditorCfgs:function(g){var f=this,h=f.get("grid"),i=h.get("el").find("."+b),j=[];BUI.each(g,function(k){j.push({field:k,changeSourceEvent:null,hideExceptNode:i,autoUpdate:false,preventHide:false})});return j},getEditor:function(i){if(!i){return null}var f=this,h=f.get("editors"),g=null;BUI.each(h,function(j){if(j.get("field").get("name")===i){g=j;return false}});return g},beforeShowEditor:function(i,h){var g=this,f=$(h.cell);g.resetWidth(i,f.outerWidth())},resetWidth:function(g,f){g.set("width",f)},updateRecord:function(h,g,i){var f=this,k=i.getValue(),l=i.get("field").get("name"),j=g[l];k=BUI.isDate(k)?k.getTime():k;if(j!==k){h.setValue(g,l,k)}},getAlignNode:function(f){return $(f.cell)},getFields:function(){var h=[],f=this,g=f.get("editors");BUI.each(g,function(i){h.push(i.get("field"))});return h},getEditValue:function(f){if(f.record&&f.field){var g=f.record[f.field];return g==null?"":g}return""}});return c});define("bui/grid/plugins/rowediting",["bui/common","bui/grid/plugins/editing"],function(b){var d=b("bui/common"),c=b("bui/grid/plugins/editing"),a=d.prefix+"grid-row";var e=function(f){e.superclass.constructor.call(this,f)};e.ATTRS={align:{value:{points:["tl","tl"],offset:[-2,0]}},triggerCls:{value:a}};d.extend(e,c);d.augment(e,{getEditorCfgs:function(f){var g=[];g.push({changeSourceEvent:null,autoUpdate:false,form:{children:f,buttonBar:{elCls:"centered toolbar"}}});return g},wrapValidator:function(g){var f=this;return function(j){var i=f.get("curEditor"),h=i?i.getValue():f.get("record");if(h){return g(j,h)}}},focusEditor:function(f,i){var g=f.get("form"),h=g.getField(i);if(h){h.focus()}},getFieldConfig:function(h){var g=h.get("editor");if(g){return g}var f={xtype:"plain"};if(h.get("dataIndex")&&h.get("renderer")){f.renderer=h.get("renderer")}return f},updateRecord:function(h,g,i){var f=this,j=i.getValue();d.each(j,function(m,l){if(d.isDate(m)){j[l]=m.getTime()}});d.mix(g,j);h.update(g)},getEditor:function(h){var f=this,g=f.get("editors");return g[0]},onColumnVisibleChange:function(h){var f=this,j=h.get("id"),g=f.getEditor(),i=g.getChild(j,true);if(i){i.set("visible",h.get("visible"))}},beforeShowEditor:function(j,g){var f=this,i=f.get("grid"),h=i.get("columns"),k=j.get("form"),l=$(g.row);j.set("width",l.width());d.each(h,function(n){if(!n.get("visible")){o.set("visible",false)}else{var p=n.get("dataIndex"),o=k.getField(p),m=n.get("el").outerWidth()-o.getAppendWidth();o.set("width",m)}})},getEditValue:function(f){return f.record},getEditorConstructor:function(f){return f.RecordEditor},getAlignNode:function(f){return $(f.row)},getFields:function(){var f=this,g=f.get("editors");return g[0].get("form").get("children")}});return e});define("bui/grid/plugins/dialogediting",["bui/common"],function(c){var d=c("bui/common"),b="add",e="edit";
function a(f){a.superclass.constructor.call(this,f)}a.ATTRS={record:{},curIndex:{},contentId:{},editor:{},form:{},events:{value:{recordchange:false}},editType:{}};d.extend(a,d.Base);d.augment(a,{initializer:function(g){var f=this;f.set("grid",g);d.use("bui/editor",function(h){f._initEditor(h)})},bindUI:function(g){var f=this,h=f.get("triggerCls");if(h){g.on("cellclick",function(k){var i=$(k.domTarget),j=f.get("editor");if(i.hasClass(h)&&j){f.edit(k.record);if(g.get("multipleSelect")){return false}}})}},_initEditor:function(h){var f=this,k=f.get("contentId"),j=$("#"+k).find("form"),i=f.get("editor"),g=d.merge(i,{contentId:k,form:{srcNode:j}});i=new h.DialogEditor(g);f._bindEditor(i);f.set("editor",i);f.set("form",i.get("form"))},_bindEditor:function(g){var f=this;g.on("accept",function(){var i=g.get("form"),h=i.serializeToObject();f.saveRecord(h)})},edit:function(g){var f=this;f.set("editType",e);f.showEditor(g)},add:function(g,h){var f=this;f.set("editType",b);f.set("curIndex",h);f.showEditor(g)},saveRecord:function(h){var g=this,l=g.get("grid"),j=g.get("editType"),k=g.get("curIndex"),i=l.get("store"),f=g.get("record");d.mix(f,h);if(j==b){if(k!=null){i.addAt(f,k)}else{i.add(f)}}else{i.update(f)}},showEditor:function(g){var f=this,h=f.get("editor");h.show();h.setValue(g);f.set("record",g);f.fire("recordchange",{record:g,editType:f.get("editType")})},cancel:function(){var f=this,g=f.get("editor");g.cancel()},destructor:function(){var f=this,g=f.get("editor");g&&g.destroy();f.off();f.clearAttrVals()}});return a});define("bui/tree",["bui/common","bui/tree/treemixin","bui/tree/treelist"],function(a){var c=a("bui/common"),b=c.namespace("Tree");c.mix(b,{TreeList:a("bui/tree/treelist"),Mixin:a("bui/tree/treemixin")});return b});define("bui/tree/treemixin",["bui/common","bui/data"],function(f){function s(v,w){if(p.isString(w)){w=v.getItem(w)}return w}var p=f("bui/common"),c=f("bui/data"),b="expanded",m="loading",r="checked",d="partial-checked",i={NONE:"none",ALL:"all",CUSTOM:"custom",ONLY_LEAF:"onlyLeaf"},g="x-tree-icon",n="x-tree-elbow",e="x-tree-show-line",t=n+"-",j=g+"-wraper",a=t+"line",u=t+"end",h=t+"empty",l=t+"expander",o=g+"-checkbox",k=l+"-end",q=function(){};q.ATTRS={store:{getter:function(y){if(!y){var w=this,x=new c.TreeStore({root:w.get("root"),data:w.get("nodes")});w.setInternal("store",x);return x}return y}},root:{},nodes:{sync:false},iconContainer:{},iconWraperTpl:{value:'<span class="'+j+'">{icons}</span>'},showLine:{value:false},iconTpl:{value:'<span class="x-tree-icon {cls}"></span>'},leafCls:{value:t+"leaf"},dirCls:{value:t+"dir"},checkType:{value:"custom"},checkedField:{valueFn:function(){return this.getStatusField("checked")}},itemStatusFields:{value:{expanded:"expanded",disabled:"disabled",checked:"checked"}},dirSelectable:{value:true},showRoot:{value:false},events:{value:{expanded:false,collapsed:false,checkchange:false}},startLevel:{value:1}};p.augment(q,{collapseAll:function(){var v=this,w=v.get("view").getAllElements();p.each(w,function(x){var y=v.getItemByElement(x);if(y){v._collapseNode(y,x,true)}})},collapseNode:function(x){var v=this,w;if(p.isString(x)){x=v.findNode(x)}w=v.findElement(x);v._collapseNode(x,w)},expandAll:function(){var v=this,w=v.get("view").getAllElements();p.each(w,function(x){var y=v.getItemByElement(x);v._expandNode(y,x,true)})},expandNode:function(y,w){var v=this,x;if(p.isString(y)){y=v.findNode(y)}if(y.parent&&!v.isExpanded(y.parent)){v.expandNode(y.parent)}x=v.findElement(y);v._expandNode(y,x,w)},expandPath:function(E,x,D){if(!E){return}D=D||0;var B=this,C=B.get("store"),A,w,y,v,z=E.split(",");A=B.findNode(z[D]);for(y=D+1;y<z.length;y++){v=z[y];w=B.findNode(v,A);if(A&&w){B.expandNode(A);A=w}else{if(A&&x){C.load({id:A.id},function(){w=B.findNode(v,A);if(w){B.expandPath(E,x,y)}});break}}}},findNode:function(w,v){return this.get("store").findNode(w,v)},getCheckedLeaf:function(x){var v=this,w=v.get("store");return w.findNodesBy(function(y){return y.leaf&&v.isChecked(y)},x)},getCheckedNodes:function(x){var v=this,w=v.get("store");return w.findNodesBy(function(y){return v.isChecked(y)},x)},isExpanded:function(x){if(!x||x.leaf){return false}var v=this,w;if(v._isRoot(x)&&!v.get("showRoot")){return true}if(p.isString(x)){item=v.getItem(x)}w=v.findElement(x);return this._isExpanded(x,w)},isChecked:function(v){if(!v){return false}return v[this.get("checkedField")]},toggleExpand:function(x){var v=this,w;if(p.isString(x)){item=v.getItem(x)}w=v.findElement(x);v._toggleExpand(x,w)},setNodeChecked:function(A,z,w){w=w==null?true:w;var v=this,y,x;A=s(this,A);y=A.parent;if(!v.isCheckable(A)){return}if(v.isChecked(A)!==z||v.hasStatus(A,"checked")!==z){x=v.findElement(A);if(x){v.setItemStatus(A,r,z,x);v._resetPatialChecked(A,z,z,x)}else{if(!v.isItemDisabled(A)){v.setStatusValue(A,"checked",z)}}if(y){if(v.isChecked(y)!=z){v._resetParentChecked(y)}else{v._resetPatialChecked(y,null,null,null,true)}}v.fire("checkchange",{node:A,element:x,checked:z})}if(!A.leaf&&w){p.each(A.children,function(B){v.setNodeChecked(B,z,w)
})}},_initRoot:function(){var v=this,y=v.get("store"),w,z=v.get("showRoot"),x;if(y){w=y.get("root");v.setInternal("root",w);if(z){x=[w]}else{x=w.children}p.each(x,function(A){v._initChecked(A,true)});v.clearItems();v.addItems(x)}},_initChecked:function(A,x){var w=this,v=w.get("checkType"),z=w.get("checkedField"),y;if(v===i.NONE){delete A[z];return}if(v===i.ONLY_LEAF){if(A.leaf){A[z]=A[z]||false}else{delete A[z];if(x){p.each(A.children,function(B){w._initChecked(B,x)})}}return}if(v===i.ALL){A[z]=A[z]||false}if(!A||!w.isCheckable(A)){return}y=A.parent;if(!w.isChecked(A)){if(y&&w.isChecked(y)){w.setStatusValue(A,"checked",true)}if(w._isAllChildrenChecked(A)){w.setStatusValue(A,"checked",true)}}if(x){p.each(A.children,function(B){w._initChecked(B,x)})}},_resetPatialChecked:function(A,z,w,x,y){if(!A||A.leaf){return true}var v=this,w;z=z==null?v.isChecked(A):z;if(z){v.setItemStatus(A,d,false,x);return}w=w==null?v._hasChildChecked(A):w;v.setItemStatus(A,d,w,x);if(y&&A.parent){v._resetPatialChecked(A.parent,false,w?w:null,null,y)}},_resetParentChecked:function(x){if(!this.isCheckable(x)){return}var w=this,v=w._isAllChildrenChecked(x);w.setStatusValue(x,"checked",v);w.setNodeChecked(x,v,false);w._resetPatialChecked(x,v,null,null)},__bindUI:function(){var v=this,w=v.get("el");v.on("itemclick",function(B){var y=$(B.domTarget),x=B.element,A=B.item;if(y.hasClass(l)){v._toggleExpand(A,x);return false}else{if(y.hasClass(o)){var z=v.isChecked(A);v.setNodeChecked(A,!z)}}});v.on("itemdblclick",function(A){var y=$(A.domTarget),x=A.element,z=A.item;if(!y.hasClass(l)){v._toggleExpand(z,x)}});v.on("beforeselectedchange",function(y){var z=v.get("dirSelectable"),x=y.item;if(!z&&!x.leaf){return false}});v.on("itemrendered",function(z){var y=z.item,x=z.domTarget;v._resetIcons(y,x);if(v.isCheckable(y)){v._resetPatialChecked(y,null,null,x)}if(v._isExpanded(y,x)){v._showChildren(y)}})},_isAllChildrenChecked:function(x){if(!x||x.leaf){return false}var v=this,w=x.children,y=true;p.each(w,function(z){y=y&&v.isChecked(z);if(!y){return false}});return y},_hasChildChecked:function(w){if(!w||w.leaf){return false}var v=this;return v.getCheckedNodes(w).length!=0},_isRoot:function(x){var v=this,w=v.get("store");if(w&&w.get("root")==x){return true}return false},_setLoadStatus:function(x,w,y){var v=this;v.setItemStatus(x,m,y,w)},_beforeLoadNode:function(x){var v=this,w;if(p.isString(x)){x=v.findNode(x)}w=v.findElement(x);if(w){v._setLoadStatus(x,w,true)}if(x){p.each(x.children,function(y){v._removeNode(y)})}},onBeforeLoad:function(x){var v=this,y=x.params,z=y.id,w=v.findNode(z)||v.get("root");v._beforeLoadNode(w)},_addNode:function(C,A){var x=this,B=C.parent,z,y,w,v;x._initChecked(C,true);if(B){if(x.isExpanded(B)){z=B.children.length;v=x._getInsetIndex(C);x.addItemAt(C,v);if(A==z-1&&A>0){y=B.children[A-1];x._updateIcons(y)}}x._updateIcons(B)}else{v=x._getInsetIndex(C);x.addItemAt(C,v);y=x.get("nodes")[A-1];x._updateIcons(y)}},_getInsetIndex:function(x){var w=this,v,y=null;v=w._getNextItem(x);if(v){return w.indexOfItem(v)}return w.getItemCount()},_getNextItem:function(z){var w=this,y=z.parent,x,v,A=null;if(!y){return null}x=y.children;v=p.Array.indexOf(z,x);A=x[v+1];return A||w._getNextItem(y)},onAdd:function(y){var v=this,x=y.node,w=y.index;v._addNode(x,w)},_updateNode:function(w){var v=this;v.updateItem(w);v._updateIcons(w)},onUpdate:function(x){var v=this,w=x.node;v._updateNode(w)},_removeNode:function(A,y){var v=this,z=A.parent,x,w;v.collapseNode(A);if(!z){return}v.removeItem(A);if(v.isExpanded(z)){x=z.children.length;if(x==y&&y!==0){w=z.children[y-1];v._updateIcons(w)}}v._updateIcons(z);v._resetParentChecked(z)},onRemove:function(y){var v=this,x=y.node,w=y.index;v._removeNode(x,w)},_loadNode:function(w){var v=this;v.expandNode(w);v._updateIcons(w);v.setItemStatus(w,m,false)},onLoad:function(z){var v=this,x=v.get("store"),w=x.get("root"),y;if(!z||z.node==w){v._initRoot()}if(z&&z.node){v._loadNode(z.node)}},_isExpanded:function(w,v){return this.hasStatus(w,b,v)},_getIconsTpl:function(z){var v=this,B=z.level,A=v.get("startLevel"),y=v.get("iconWraperTpl"),x=[],w;for(w=A;w<B;w=w+1){x.push(v._getLevelIcon(z,w))}x.push(v._getExpandIcon(z));x.push(v._getCheckedIcon(z));x.push(v._getNodeTypeIcon(z));return p.substitute(y,{icons:x.join("")})},_getCheckedIcon:function(x){var v=this,w=v.isCheckable(x);if(w){return v._getIcon(o)}return""},isCheckable:function(v){return v[this.get("checkedField")]!=null},_getExpandIcon:function(x){var v=this,w=l;if(x.leaf){return v._getLevelIcon(x)}if(v._isLastNode(x)){w=w+" "+k}return v._getIcon(w)},_getNodeTypeIcon:function(x){var v=this,w=x.cls?x.cls:(x.leaf?v.get("leafCls"):v.get("dirCls"));return v._getIcon(w)},_getLevelIcon:function(z,A){var v=this,y=v.get("showLine"),w=h,x;if(y){if(z.level===A||A==null){w=v._isLastNode(z)?u:n}else{x=v._getParentNode(z,A);w=v._isLastNode(x)?h:a}}return v._getIcon(w)},_getParentNode:function(y,z){var x=y.level,w=y.parent,v=x-1;if(x<=z){return null}while(v>z){w=w.parent;v=v-1}return w},_getIcon:function(w){var v=this,x=v.get("iconTpl");
return p.substitute(x,{cls:w})},_isLastNode:function(y){if(!y){return false}if(y==this.get("root")){return true}var v=this,w=y.parent,z=w?w.children:v.get("nodes"),x;x=z.length;return z[x-1]===y},_initNodes:function(w,y,x){var v=this;p.each(w,function(z){z.level=y;if(z.leaf==null){z.leaf=z.children?false:true}if(x&&!z.parent){z.parent=x}v._initChecked(z);if(z.children){v._initNodes(z.children,y+1,z)}})},_collapseNode:function(y,x,w){var v=this;if(y.leaf){return}if(v.hasStatus(y,b,x)){v.setItemStatus(y,b,false,x);if(w){v._collapseChildren(y,w);v.removeItems(y.children)}else{v._hideChildrenNodes(y)}v.fire("collapsed",{node:y,element:x})}},_hideChildrenNodes:function(x){var v=this,w=x.children;p.each(w,function(y){v.removeItem(y);v._hideChildrenNodes(y)})},_collapseChildren:function(w,x){var v=this,y=w.children;p.each(y,function(z){v.collapseNode(z,x)})},_expandNode:function(z,y,w){var v=this,x=v.get("store");if(z.leaf){return}if(!v.hasStatus(z,b,y)){if(x&&!x.isLoaded(z)){if(!v._isLoading(z,y)){x.loadNode(z)}}else{if(y){v.setItemStatus(z,b,true,y);v._showChildren(z);v.fire("expanded",{node:z,element:y})}}}p.each(z.children,function(A){if(w||v.isExpanded(A)){v.expandNode(A,w)}})},_showChildren:function(z){if(!z||!z.children){return}var v=this,w=v.indexOfItem(z),y=z.children.length,A,x;for(x=y-1;x>=0;x--){A=z.children[x];if(!v.getItem(A)){v.addItemAt(A,w+1)}}},_isLoading:function(x,w){var v=this;return v.hasStatus(x,m,w)},_resetIcons:function(z,x){var v=this,w=v.get("iconContainer"),A,y=v._getIconsTpl(z);$(x).find("."+j).remove();A=$(x).find("."+w);if(w&&A.length){$(y).appendTo(A)}else{$(x).prepend($(y))}},_toggleExpand:function(x,w){var v=this;if(v._isExpanded(x,w)){v._collapseNode(x,w)}else{v._expandNode(x,w)}},_updateIcons:function(x){var v=this,w=v.findElement(x);if(w){v._resetIcons(x,w);if(v._isExpanded(x,w)&&!x.leaf){p.each(x.children,function(y){v._updateIcons(y)})}}},_uiSetShowRoot:function(x){var w=this,y=this.get("showRoot")?0:1;w.set("startLevel",y)},_uiSetNodes:function(y){var w=this,x=w.get("store");x.setResult(y)},_uiSetShowLine:function(x){var w=this,y=w.get("el");if(x){y.addClass(e)}else{y.removeClass(e)}}});return q});define("bui/tree/treelist",["bui/common","bui/list","bui/tree/treemixin"],function(a){var d=a("bui/common"),b=a("bui/list"),c=a("bui/tree/treemixin");var e=b.SimpleList.extend([c],{},{ATTRS:{itemCls:{value:d.prefix+"tree-item"},itemTpl:{value:"<li>{text}</li>"},idField:{value:"id"}}},{xclass:"tree-list"});return e});define("bui/tooltip",["bui/common","bui/tooltip/tip","bui/tooltip/tips"],function(b){var e=b("bui/common"),c=e.namespace("Tooltip"),a=b("bui/tooltip/tip"),d=b("bui/tooltip/tips");e.mix(c,{Tip:a,Tips:d});return c});define("bui/tooltip/tip",["bui/common","bui/overlay"],function(e){var h=e("bui/common"),a=e("bui/overlay"),d="x-align-",f={left:["cl","cr"],right:["cr","cl"],top:["tc","bc"],bottom:["bc","tc"],"top-left":["tl","bl"],"top-right":["tr","br"],"bottom-left":["bl","tl"],"bottom-right":["br","tr"]};function g(i,j){if(i==="left"){return[-1*j,-4]}if(i==="right"){return[j,-4]}if(i.indexOf("top")){return[0,j]}if(i.indexOf("bottom")){return[0,-1*j]}}var b=a.OverlayView.extend({renderUI:function(){},_getTitleContainer:function(){return this.get("el")},_uiSetTitle:function(n){var j=this,i=j.get("titleTpl"),k=j._getTitleContainer(),m=j.get("titleEl"),l;if(m){m.remove()}n=n||"";if(h.isString(n)){n={title:n}}l=h.substitute(i,n);m=$(l).appendTo(k);j.set("titleEl",m)},_uiSetAlignType:function(j,k){var i=this;if(k&&k.prevVal){i.get("el").removeClass(d+k.prevVal)}if(j){i.get("el").addClass(d+j)}}},{ATTRS:{title:{},titleEl:{},alignType:{}}},{xclass:"tooltip-view"});var c=a.Overlay.extend({_uiSetAlignType:function(k){var i=this,l=i.get("offset"),m=i.get("align")||{},j=f[k];if(j){m.points=j;if(l){m.offset=g(k,l)}i.set("align",m)}}},{ATTRS:{delegateTigger:{value:true},alignType:{view:true},title:{view:true},showArrow:{value:true},arrowContainer:{view:true},autoHide:{value:true},autoHideType:{value:"leave"},offset:{value:0},triggerEvent:{value:"mouseover"},titleTpl:{view:true,value:"<span>{title}</span>"},xview:{value:b}}},{xclass:"tooltip"});c.View=b;return c});define("bui/tooltip/tips",["bui/common","bui/tooltip/tip"],function(c){function b(f){return/^{.*}$/.test(f)}var e=c("bui/common"),a=c("bui/tooltip/tip"),d=function(f){d.superclass.constructor.call(this,f)};d.ATTRS={tip:{},defaultAlignType:{}};e.extend(d,e.Base);e.augment(d,{_init:function(){this._initDom();this._initEvent()},_initDom:function(){var f=this,g=f.get("tip"),h;if(g&&!g.isController){h=g.alignType;g=new a(g);g.render();f.set("tip",g);if(h){f.set("defaultAlignType",h)}}},_initEvent:function(){var f=this,g=f.get("tip");g.on("triggerchange",function(i){var h=i.curTrigger;f._replaceTitle(h);f._setTitle(h,g)})},_replaceTitle:function(f){var g=f.attr("title");if(g){f.attr("data-title",g);f[0].removeAttribute("title")}},_setTitle:function(h,i){var f=this,j=h.attr("data-title"),g=h.attr("data-align")||f.get("defaultAlignType");
if(b(j)){j=e.JSON.looseParse(j)}i.set("title",j);if(g){i.set("alignType",g)}},render:function(){this._init();return this}});return d});BUI.use(["bui/common","bui/data","bui/list","bui/picker","bui/menu","bui/toolbar","bui/progressbar","bui/cookie","bui/form","bui/mask","bui/select","bui/tab","bui/calendar","bui/overlay","bui/editor","bui/grid","bui/tree","bui/tooltip"]);